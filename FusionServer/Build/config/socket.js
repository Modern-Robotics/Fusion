var _0x3050=['fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','stringify','fusion_wifi_access','Storage','battery-level','internet-access','version-number','update-available','diagnostics_running','wifi-connection','wifi-fusion_storage_type','program-running','fusion_current_version','gamepad-available','platform','win32','stdout','data','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','trim','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','status','get','Wifi_NIC','child_process','spawn','internet-available','wireless-tools/wpa_cli','env','NODE_ENV','dev','path','request','config','exports','connectedClients','dirname','split','pop','connection','push','log','join','emit','global-message','Hello\x20from\x20server','disconnect','Client\x20disconnected\x20-\x20','fusion_program_running','KillProgram','fusion_diagnostics_running','SocketVariables','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','error','-----------------------------------------------------'];(function(_0x24d998,_0xb41c79){var _0x3b9725=function(_0x4c3f9f){while(--_0x4c3f9f){_0x24d998['push'](_0x24d998['shift']());}};_0x3b9725(++_0xb41c79);}(_0x3050,0x170));var _0x2eba=function(_0x1f4ca4,_0x3a69a5){_0x1f4ca4=_0x1f4ca4-0x0;var _0x576067=_0x3050[_0x1f4ca4];return _0x576067;};var spawn=require(_0x2eba('0x0'))[_0x2eba('0x1')];var internetAvailable=require(_0x2eba('0x2'));var wpa_cli=require(_0x2eba('0x3'));var os=require('os');var shell=require('shelljs');var env=process[_0x2eba('0x4')][_0x2eba('0x5')]||_0x2eba('0x6');var path=require(_0x2eba('0x7'));var request=require(_0x2eba('0x8'));const config=require(_0x2eba('0x9'));module[_0x2eba('0xa')]=function(_0x412d20,_0x2cd8c4,_0x25c8a9){_0x25c8a9[_0x2eba('0xb')]=[];var _0x601fb0=path[_0x2eba('0xc')](__dirname)[_0x2eba('0xd')](path['sep'])[_0x2eba('0xe')]();var _0x2aea40=0x0;var _0x533f85=0xb;_0x412d20['on'](_0x2eba('0xf'),function(_0x3aec1c){_0x25c8a9[_0x2eba('0xb')][_0x2eba('0x10')](_0x3aec1c);console[_0x2eba('0x11')]('Client\x20connected...');_0x5c72f0();_0x3aec1c['on'](_0x2eba('0x12'),function(_0xee1d4){console[_0x2eba('0x11')](_0xee1d4);_0x3aec1c[_0x2eba('0x13')](_0x2eba('0x14'),{'message':_0x2eba('0x15'),'type':'success'});});_0x3aec1c['on'](_0x2eba('0x16'),function(_0x5a590a){console[_0x2eba('0x11')](_0x2eba('0x17')+_0x5a590a);if(_0x25c8a9['SocketVariables'][_0x2eba('0x18')])if(_0x25c8a9['SocketVariables'][_0x2eba('0x18')]['SocketId']==_0x3aec1c['id'])_0x2cd8c4[_0x2eba('0x19')]();if(_0x25c8a9['SocketVariables'][_0x2eba('0x1a')])if(_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')][_0x2eba('0x1c')]==_0x3aec1c['id']){console[_0x2eba('0x11')](_0x2eba('0x1d'));request({'url':_0x2eba('0x1e'),'method':_0x2eba('0x1f')},function(_0x5705d9,_0x3164eb,_0x5547b5){if(_0x5705d9)console[_0x2eba('0x11')](_0x2eba('0x20')+_0x5705d9);else{if(_0x3164eb[_0x2eba('0x21')]==0xc8){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]=null;}}_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')]('diagnostics_running',_0x25c8a9['SocketVariables'][_0x2eba('0x1a')]);});}var _0x913385=_0x25c8a9[_0x2eba('0xb')]['indexOf'](_0x3aec1c);_0x25c8a9[_0x2eba('0xb')]['splice'](_0x913385,0x1);});_0x3aec1c['on'](_0x2eba('0x23'),function(_0x2a7f95){console[_0x2eba('0x11')]('Socket\x20error\x20-\x20'+_0x2a7f95);});});function _0xa49c07(){_0xc505c3();_0x51e4f4();_0x7e3007();_0xaf7694();_0x1aacca();_0x51975d();_0x57fa20();}function _0x235dc6(){if(_0x2aea40>=_0x533f85){console[_0x2eba('0x11')](_0x2eba('0x24'));console[_0x2eba('0x11')](_0x2eba('0x25')+_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x26')]);console['log'](_0x2eba('0x27')+_0x25c8a9['SocketVariables'][_0x2eba('0x28')]);console[_0x2eba('0x11')](_0x2eba('0x29')+_0x25c8a9[_0x2eba('0x1b')]['fusion_current_version']);console[_0x2eba('0x11')](_0x2eba('0x2a')+_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2b')]);console[_0x2eba('0x11')](_0x2eba('0x2c')+_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')]);console[_0x2eba('0x11')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x2eba('0x2e')](_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]));console[_0x2eba('0x11')]('fusion_wifi_access\x20:\x20'+JSON[_0x2eba('0x2e')](_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2f')]));console['log']('fusion_storage_type\x20:\x20'+_0x25c8a9[_0x2eba('0x30')]['type']);console['log']('fusion_program_running\x20:\x20'+JSON[_0x2eba('0x2e')](_0x25c8a9['SocketVariables']['fusion_program_running']));console[_0x2eba('0x11')]('-----------------------------------------------------');_0x412d20[_0x2eba('0x22')]['emit'](_0x2eba('0x31'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x26')]);_0x412d20['sockets'][_0x2eba('0x13')](_0x2eba('0x32'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x28')]);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x33'),_0x25c8a9[_0x2eba('0x1b')]['fusion_current_version']);_0x412d20[_0x2eba('0x22')]['emit'](_0x2eba('0x34'),_0x25c8a9[_0x2eba('0x1b')]['fusion_update_available']);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')]('gamepad-available',_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')]);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x35'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]);_0x412d20['sockets'][_0x2eba('0x13')](_0x2eba('0x36'),_0x25c8a9['SocketVariables'][_0x2eba('0x2f')]);_0x412d20['sockets']['emit'](_0x2eba('0x37'),_0x25c8a9[_0x2eba('0x30')]['type']);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x38'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x18')]);_0x2aea40=0x0;}else{setTimeout(_0x235dc6,0x7d0);}}function _0x5c72f0(){_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x31'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x26')]);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x32'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x28')]);_0x412d20[_0x2eba('0x22')]['emit'](_0x2eba('0x33'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x39')]);_0x412d20['sockets'][_0x2eba('0x13')](_0x2eba('0x34'),_0x25c8a9['SocketVariables']['fusion_update_available']);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x3a'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')]);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x35'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]);_0x412d20[_0x2eba('0x22')][_0x2eba('0x13')](_0x2eba('0x36'),_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2f')]);_0x412d20[_0x2eba('0x22')]['emit']('program-running',_0x25c8a9[_0x2eba('0x1b')]['fusion_program_running']);}function _0xc505c3(){if(os[_0x2eba('0x3b')]()!=_0x2eba('0x3c')){var _0x2c93c3='./scripts/ReadBatt.py';var _0x1e8cc5=spawn('python',[_0x2c93c3],{'stdio':'pipe'});_0x1e8cc5[_0x2eba('0x3d')]['on'](_0x2eba('0x3e'),function(_0x7cafe8){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x26')]=String(_0x7cafe8)['trim']();_0x2aea40++;});_0x1e8cc5[_0x2eba('0x3f')]['on'](_0x2eba('0x3e'),function(_0x31959d){console[_0x2eba('0x11')](_0x2eba('0x40')+String(_0x31959d));});}else{_0x2aea40++;}}function _0x51e4f4(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x2eba('0x41')](function(){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x28')]=!![];_0x2aea40++;})[_0x2eba('0x42')](function(){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x28')]=![];_0x2aea40++;});}function _0x7e3007(){shell[_0x2eba('0x43')](_0x2eba('0x44'),{'silent':!![]},function(_0x55c9bd,_0x388071,_0x4aa179){(function(_0x2b3ca8){_0x25c8a9['SocketVariables'][_0x2eba('0x45')]=_0x2b3ca8[_0x2eba('0x46')]();_0x2aea40++;_0x151129();}(_0x388071[_0x2eba('0x46')]()));});}function _0x151129(){shell[_0x2eba('0x43')](_0x2eba('0x47')+_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x45')],{'silent':!![]},function(_0x59ed6f,_0x40a36c,_0x1a52f6){(function(_0x989f1b){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x39')]=_0x989f1b[_0x2eba('0x46')]();_0x2aea40++;_0x3922b4();}(_0x40a36c[_0x2eba('0x46')]()));});}function _0x3922b4(){if(_0x601fb0==_0x2eba('0x48')){shell[_0x2eba('0x43')](_0x2eba('0x49'),{'silent':!![]},function(_0x40aaaf,_0x505af9,_0x37d55c){(function(_0x3ac322){_0x2aea40++;_0x7df657();}(_0x505af9[_0x2eba('0x46')]()));});}else{_0x2aea40++;_0x7df657();}}function _0x7df657(){shell[_0x2eba('0x43')](_0x2eba('0x4a'),{'silent':!![]},function(_0x407ed0,_0x31c314,_0x2f71bc){(function(_0x2a05ac){_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x4b')]=_0x2a05ac['trim']();_0x2aea40++;_0x63e691();}(_0x31c314['trim']()));});}function _0x63e691(){shell['exec'](_0x2eba('0x47')+_0x25c8a9['SocketVariables'][_0x2eba('0x4b')],{'silent':!![]},function(_0x266779,_0x4fb866,_0x2c536f){(function(_0x558cdd){_0x25c8a9[_0x2eba('0x1b')]['fusion_latest_version']=_0x558cdd[_0x2eba('0x46')]();_0x2aea40++;}(_0x4fb866[_0x2eba('0x46')]()));});}function _0xaf7694(){if(_0x25c8a9[_0x2eba('0x1b')]['fusion_current_SHA']!=_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x4b')]){_0x25c8a9['SocketVariables'][_0x2eba('0x2b')]=!![];}else{_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2b')]=![];}_0x2aea40++;}function _0x1aacca(){if(os['platform']()!=_0x2eba('0x3c')){shell[_0x2eba('0x43')](_0x2eba('0x4c'),{'silent':!![]},function(_0x25fbc3,_0x1b1c58,_0x37560c){(function(_0x78386b){_0x25c8a9['SocketVariables'][_0x2eba('0x2d')]=_0x78386b[_0x2eba('0x46')]();if(!_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')])_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')]=![];else _0x25c8a9['SocketVariables'][_0x2eba('0x2d')]=!![];_0x2aea40++;}(_0x1b1c58['trim']()));});}else{_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2d')]=![];_0x2aea40++;}}function _0x51975d(){if(os[_0x2eba('0x3b')]()!=_0x2eba('0x3c')){shell['exec'](_0x2eba('0x4d'),{'silent':!![]},function(_0x43424b,_0x2b9a26,_0x217098){(function(_0x1c9e0a){var _0x33c99c=_0x1c9e0a[_0x2eba('0x46')]();if(_0x33c99c){if(_0x25c8a9['SocketVariables'][_0x2eba('0x1a')])_0x25c8a9[_0x2eba('0x1b')]['fusion_diagnostics_running']['process']=_0x33c99c;else{_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]={'process':_0x33c99c,'socket':-0x1};}}else _0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x1a')]=null;_0x2aea40++;}(_0x2b9a26[_0x2eba('0x46')]()));});}else{_0x25c8a9[_0x2eba('0x1b')]['fusion_gamepad_available']=null;_0x2aea40++;}}function _0x57fa20(){wpa_cli[_0x2eba('0x4e')](config[_0x2eba('0x4f')](_0x2eba('0x50')),function(_0x31e03c,_0x4f8c2c){if(_0x31e03c){_0x4f8c2c={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x25c8a9[_0x2eba('0x1b')][_0x2eba('0x2f')]=_0x4f8c2c;_0x2aea40++;});}_0x235dc6();_0xa49c07();setInterval(function(){_0x235dc6();_0xa49c07();},0x2710);};