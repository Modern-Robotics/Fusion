var _0xdaf1=['stringify','battery-level','internet-access','sockets','version-number','update-available','diagnostics_running','wifi-connection','fusion_wifi_access','wifi-fusion_storage_type','program-running','platform','win32','./scripts/ReadBatt.py','python','pipe','stdout','data','trim','stderr','then','exec','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','get','Wifi_NIC','spawn','internet-available','wireless-tools/wpa_cli','env','NODE_ENV','dev','path','exports','dirname','split','sep','pop','connection','connectedClients','push','log','Client\x20connected...','join','emit','global-message','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','KillProgram','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','GET','statusCode','splice','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','fusion_wifi_access\x20:\x20','Storage','type','fusion_program_running\x20:\x20'];(function(_0x4a32cb,_0x10d05d){var _0x49bcd1=function(_0x2788a6){while(--_0x2788a6){_0x4a32cb['push'](_0x4a32cb['shift']());}};_0x49bcd1(++_0x10d05d);}(_0xdaf1,0xc4));var _0x190e=function(_0x113476,_0xe97c25){_0x113476=_0x113476-0x0;var _0x187b00=_0xdaf1[_0x113476];return _0x187b00;};var spawn=require('child_process')[_0x190e('0x0')];var internetAvailable=require(_0x190e('0x1'));var wpa_cli=require(_0x190e('0x2'));var os=require('os');var shell=require('shelljs');var env=process[_0x190e('0x3')][_0x190e('0x4')]||_0x190e('0x5');var path=require(_0x190e('0x6'));var request=require('request');const config=require('config');module[_0x190e('0x7')]=function(_0x5146d4,_0x5ee5bc,_0x595f7c){_0x595f7c['connectedClients']=[];var _0x504f3d=path[_0x190e('0x8')](__dirname)[_0x190e('0x9')](path[_0x190e('0xa')])[_0x190e('0xb')]();var _0x4f2eb3=0x0;var _0xeb38a7=0xb;_0x5146d4['on'](_0x190e('0xc'),function(_0x31007f){_0x595f7c[_0x190e('0xd')][_0x190e('0xe')](_0x31007f);console[_0x190e('0xf')](_0x190e('0x10'));_0x391436();_0x31007f['on'](_0x190e('0x11'),function(_0xdddbfa){console[_0x190e('0xf')](_0xdddbfa);_0x31007f[_0x190e('0x12')](_0x190e('0x13'),{'message':'Hello\x20from\x20server','type':_0x190e('0x14')});});_0x31007f['on'](_0x190e('0x15'),function(_0x52b341){console[_0x190e('0xf')](_0x190e('0x16')+_0x52b341);if(_0x595f7c[_0x190e('0x17')][_0x190e('0x18')])if(_0x595f7c[_0x190e('0x17')][_0x190e('0x18')]['SocketId']==_0x31007f['id'])_0x5ee5bc[_0x190e('0x19')]();if(_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')])if(_0x595f7c[_0x190e('0x17')]['fusion_diagnostics_running'][_0x190e('0x1b')]==_0x31007f['id']){console[_0x190e('0xf')](_0x190e('0x1c'));request({'url':'http://localhost:8080/api/diagnostics/stop','method':_0x190e('0x1d')},function(_0x52c7fc,_0x45013d,_0x5a5778){if(_0x52c7fc)console[_0x190e('0xf')]('Error\x20terminating\x20diagnostic\x20tools\x20:\x20'+_0x52c7fc);else{if(_0x45013d[_0x190e('0x1e')]==0xc8){_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')]=null;}}_0x5146d4['sockets'][_0x190e('0x12')]('diagnostics_running',_0x595f7c[_0x190e('0x17')]['fusion_diagnostics_running']);});}var _0x11941d=_0x595f7c[_0x190e('0xd')]['indexOf'](_0x31007f);_0x595f7c[_0x190e('0xd')][_0x190e('0x1f')](_0x11941d,0x1);});_0x31007f['on']('error',function(_0x3a323b){console[_0x190e('0xf')]('Socket\x20error\x20-\x20'+_0x3a323b);});});function _0x53ecbb(){_0x566797();_0x5a9b47();_0x238bc8();_0x52d16d();_0x10e2b1();_0x444f91();_0x17c3e9();}function _0x2a7ead(){if(_0x4f2eb3>=_0xeb38a7){console['log'](_0x190e('0x20'));console['log'](_0x190e('0x21')+_0x595f7c[_0x190e('0x17')][_0x190e('0x22')]);console['log']('fusion_internet_access\x20:\x20'+_0x595f7c['SocketVariables'][_0x190e('0x23')]);console[_0x190e('0xf')](_0x190e('0x24')+_0x595f7c[_0x190e('0x17')][_0x190e('0x25')]);console[_0x190e('0xf')](_0x190e('0x26')+_0x595f7c['SocketVariables'][_0x190e('0x27')]);console[_0x190e('0xf')](_0x190e('0x28')+_0x595f7c[_0x190e('0x17')][_0x190e('0x29')]);console[_0x190e('0xf')](_0x190e('0x2a')+JSON['stringify'](_0x595f7c['SocketVariables']['fusion_diagnostics_running']));console['log'](_0x190e('0x2b')+JSON['stringify'](_0x595f7c[_0x190e('0x17')]['fusion_wifi_access']));console['log']('fusion_storage_type\x20:\x20'+_0x595f7c[_0x190e('0x2c')][_0x190e('0x2d')]);console[_0x190e('0xf')](_0x190e('0x2e')+JSON[_0x190e('0x2f')](_0x595f7c[_0x190e('0x17')][_0x190e('0x18')]));console['log'](_0x190e('0x20'));_0x5146d4['sockets'][_0x190e('0x12')](_0x190e('0x30'),_0x595f7c['SocketVariables'][_0x190e('0x22')]);_0x5146d4['sockets']['emit'](_0x190e('0x31'),_0x595f7c['SocketVariables']['fusion_internet_access']);_0x5146d4[_0x190e('0x32')]['emit'](_0x190e('0x33'),_0x595f7c['SocketVariables']['fusion_current_version']);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x34'),_0x595f7c[_0x190e('0x17')][_0x190e('0x27')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')]('gamepad-available',_0x595f7c[_0x190e('0x17')]['fusion_gamepad_available']);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x35'),_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x36'),_0x595f7c[_0x190e('0x17')][_0x190e('0x37')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x38'),_0x595f7c[_0x190e('0x2c')][_0x190e('0x2d')]);_0x5146d4['sockets'][_0x190e('0x12')](_0x190e('0x39'),_0x595f7c['SocketVariables']['fusion_program_running']);_0x4f2eb3=0x0;}else{setTimeout(_0x2a7ead,0x7d0);}}function _0x391436(){_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x30'),_0x595f7c[_0x190e('0x17')][_0x190e('0x22')]);_0x5146d4['sockets']['emit']('internet-access',_0x595f7c[_0x190e('0x17')][_0x190e('0x23')]);_0x5146d4['sockets']['emit'](_0x190e('0x33'),_0x595f7c[_0x190e('0x17')]['fusion_current_version']);_0x5146d4['sockets'][_0x190e('0x12')](_0x190e('0x34'),_0x595f7c[_0x190e('0x17')]['fusion_update_available']);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')]('gamepad-available',_0x595f7c[_0x190e('0x17')][_0x190e('0x29')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x35'),_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x36'),_0x595f7c[_0x190e('0x17')][_0x190e('0x37')]);_0x5146d4[_0x190e('0x32')][_0x190e('0x12')](_0x190e('0x39'),_0x595f7c['SocketVariables'][_0x190e('0x18')]);}function _0x566797(){if(os[_0x190e('0x3a')]()!=_0x190e('0x3b')){var _0x79902e=_0x190e('0x3c');var _0x5b103b=spawn(_0x190e('0x3d'),[_0x79902e],{'stdio':_0x190e('0x3e')});_0x5b103b[_0x190e('0x3f')]['on'](_0x190e('0x40'),function(_0x1e1436){_0x595f7c['SocketVariables'][_0x190e('0x22')]=String(_0x1e1436)[_0x190e('0x41')]();_0x4f2eb3++;});_0x5b103b[_0x190e('0x42')]['on'](_0x190e('0x40'),function(_0x49f929){console['log']('Error\x20reading\x20battery\x20:\x20\x0a'+String(_0x49f929));});}else{_0x4f2eb3++;}}function _0x5a9b47(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x190e('0x43')](function(){_0x595f7c[_0x190e('0x17')][_0x190e('0x23')]=!![];_0x4f2eb3++;})['catch'](function(){_0x595f7c[_0x190e('0x17')]['fusion_internet_access']=![];_0x4f2eb3++;});}function _0x238bc8(){shell[_0x190e('0x44')]('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x133941,_0x1f8c93,_0x424f3c){(function(_0x27c824){_0x595f7c[_0x190e('0x17')][_0x190e('0x45')]=_0x27c824[_0x190e('0x41')]();_0x4f2eb3++;_0x20ec25();}(_0x1f8c93[_0x190e('0x41')]()));});}function _0x20ec25(){shell['exec'](_0x190e('0x46')+_0x595f7c[_0x190e('0x17')][_0x190e('0x45')],{'silent':!![]},function(_0x63c0,_0x2ffa05,_0x1fe7ec){(function(_0xbe6160){_0x595f7c['SocketVariables'][_0x190e('0x25')]=_0xbe6160[_0x190e('0x41')]();_0x4f2eb3++;_0x13cb86();}(_0x2ffa05[_0x190e('0x41')]()));});}function _0x13cb86(){if(_0x504f3d==_0x190e('0x47')){shell[_0x190e('0x44')](_0x190e('0x48'),{'silent':!![]},function(_0x58649c,_0x1bdfa8,_0x21ebeb){(function(_0xe1016){_0x4f2eb3++;_0x2100b1();}(_0x1bdfa8['trim']()));});}else{_0x4f2eb3++;_0x2100b1();}}function _0x2100b1(){shell[_0x190e('0x44')](_0x190e('0x49'),{'silent':!![]},function(_0x56e102,_0x1892b0,_0x2b2a1d){(function(_0xf01a4b){_0x595f7c['SocketVariables'][_0x190e('0x4a')]=_0xf01a4b['trim']();_0x4f2eb3++;_0x373524();}(_0x1892b0[_0x190e('0x41')]()));});}function _0x373524(){shell[_0x190e('0x44')]('git\x20describe\x20--tags\x20'+_0x595f7c[_0x190e('0x17')][_0x190e('0x4a')],{'silent':!![]},function(_0x4d9247,_0x1e04a9,_0xb227be){(function(_0x149729){_0x595f7c[_0x190e('0x17')][_0x190e('0x4b')]=_0x149729['trim']();_0x4f2eb3++;}(_0x1e04a9['trim']()));});}function _0x52d16d(){if(_0x595f7c['SocketVariables'][_0x190e('0x45')]!=_0x595f7c[_0x190e('0x17')][_0x190e('0x4a')]){_0x595f7c[_0x190e('0x17')][_0x190e('0x27')]=!![];}else{_0x595f7c['SocketVariables'][_0x190e('0x27')]=![];}_0x4f2eb3++;}function _0x10e2b1(){if(os[_0x190e('0x3a')]()!=_0x190e('0x3b')){shell['exec']('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]},function(_0x12f478,_0x3284c7,_0x1364ea){(function(_0xa3ffee){_0x595f7c['SocketVariables'][_0x190e('0x29')]=_0xa3ffee[_0x190e('0x41')]();if(!_0x595f7c[_0x190e('0x17')]['fusion_gamepad_available'])_0x595f7c[_0x190e('0x17')]['fusion_gamepad_available']=![];else _0x595f7c[_0x190e('0x17')]['fusion_gamepad_available']=!![];_0x4f2eb3++;}(_0x3284c7[_0x190e('0x41')]()));});}else{_0x595f7c['SocketVariables'][_0x190e('0x29')]=![];_0x4f2eb3++;}}function _0x444f91(){if(os['platform']()!=_0x190e('0x3b')){shell[_0x190e('0x44')](_0x190e('0x4c'),{'silent':!![]},function(_0x4a9af5,_0x100bb1,_0x434b79){(function(_0x424775){var _0x34988f=_0x424775[_0x190e('0x41')]();if(_0x34988f){if(_0x595f7c['SocketVariables'][_0x190e('0x1a')])_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')][_0x190e('0x4d')]=_0x34988f;else{_0x595f7c[_0x190e('0x17')][_0x190e('0x1a')]={'process':_0x34988f,'socket':-0x1};}}else _0x595f7c[_0x190e('0x17')][_0x190e('0x1a')]=null;_0x4f2eb3++;}(_0x100bb1[_0x190e('0x41')]()));});}else{_0x595f7c[_0x190e('0x17')][_0x190e('0x29')]=null;_0x4f2eb3++;}}function _0x17c3e9(){wpa_cli[_0x190e('0x4e')](config[_0x190e('0x4f')](_0x190e('0x50')),function(_0x49e061,_0x1feca4){if(_0x49e061){_0x1feca4={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x595f7c[_0x190e('0x17')][_0x190e('0x37')]=_0x1feca4;_0x4f2eb3++;});}_0x2a7ead();_0x53ecbb();setInterval(function(){_0x2a7ead();_0x53ecbb();},0x2710);};