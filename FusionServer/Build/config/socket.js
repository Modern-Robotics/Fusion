var _0x41e1=['python','stdout','data','catch','exec','git\x20rev-parse\x20HEAD','trim','fusion_current_SHA','Build','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','git\x20describe\x20--tags\x20','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','get','Wifi_NIC','child_process','spawn','internet-available','dev','path','request','config','exports','connectedClients','dirname','split','connection','log','join','emit','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','diagnostics_running','indexOf','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version','fusion_update_available\x20:\x20','fusion_gamepad_available\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','battery-level','fusion_battery_level','internet-access','version-number','update-available','fusion_gamepad_available','fusion_wifi_access','program-running','fusion_update_available','gamepad-available','wifi-connection','platform','win32'];(function(_0x4f0c0c,_0x2e229b){var _0x51d025=function(_0x43ed6e){while(--_0x43ed6e){_0x4f0c0c['push'](_0x4f0c0c['shift']());}};_0x51d025(++_0x2e229b);}(_0x41e1,0x1e0));var _0x2db2=function(_0x41fd17,_0x40dd86){_0x41fd17=_0x41fd17-0x0;var _0x281f05=_0x41e1[_0x41fd17];return _0x281f05;};var spawn=require(_0x2db2('0x0'))[_0x2db2('0x1')];var internetAvailable=require(_0x2db2('0x2'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require('shelljs');var env=process['env']['NODE_ENV']||_0x2db2('0x3');var path=require(_0x2db2('0x4'));var request=require(_0x2db2('0x5'));const config=require(_0x2db2('0x6'));module[_0x2db2('0x7')]=function(_0x44eeda,_0x4b0bcf,_0x1fc9e1){_0x1fc9e1[_0x2db2('0x8')]=[];var _0x45542c=path[_0x2db2('0x9')](__dirname)[_0x2db2('0xa')](path['sep'])['pop']();var _0x3823a3=0x0;var _0x59e0c0=0xb;_0x44eeda['on'](_0x2db2('0xb'),function(_0x99747b){_0x1fc9e1[_0x2db2('0x8')]['push'](_0x99747b);console[_0x2db2('0xc')]('Client\x20connected...');_0xe8b0b0();_0x99747b['on'](_0x2db2('0xd'),function(_0x754f31){console[_0x2db2('0xc')](_0x754f31);_0x99747b[_0x2db2('0xe')]('global-message',{'message':'Hello\x20from\x20server','type':_0x2db2('0xf')});});_0x99747b['on'](_0x2db2('0x10'),function(_0x556e5a){console['log'](_0x2db2('0x11')+_0x556e5a);if(_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x13')])if(_0x1fc9e1['SocketVariables']['fusion_program_running'][_0x2db2('0x14')]==_0x99747b['id'])_0x4b0bcf['KillProgram']();if(_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')])if(_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')][_0x2db2('0x16')]==_0x99747b['id']){console[_0x2db2('0xc')](_0x2db2('0x17'));request({'url':_0x2db2('0x18'),'method':_0x2db2('0x19')},function(_0x2d56a0,_0x4ba8d1,_0xdf2831){if(_0x2d56a0)console[_0x2db2('0xc')](_0x2db2('0x1a')+_0x2d56a0);else{if(_0x4ba8d1[_0x2db2('0x1b')]==0xc8){_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]=null;}}_0x44eeda[_0x2db2('0x1c')]['emit'](_0x2db2('0x1d'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]);});}var _0x578081=_0x1fc9e1['connectedClients'][_0x2db2('0x1e')](_0x99747b);_0x1fc9e1[_0x2db2('0x8')][_0x2db2('0x1f')](_0x578081,0x1);});_0x99747b['on']('error',function(_0x42d955){console['log'](_0x2db2('0x20')+_0x42d955);});});function _0x2f05de(){_0x274404();_0x3ae893();_0xc06069();_0x5974b6();_0x34ff6d();_0x2b9777();_0x491cd8();}function _0x12e9ae(){if(_0x3823a3>=_0x59e0c0){console[_0x2db2('0xc')](_0x2db2('0x21'));console[_0x2db2('0xc')](_0x2db2('0x22')+_0x1fc9e1[_0x2db2('0x12')]['fusion_battery_level']);console[_0x2db2('0xc')](_0x2db2('0x23')+_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x24')]);console[_0x2db2('0xc')]('fusion_current_version\x20:\x20'+_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x25')]);console['log'](_0x2db2('0x26')+_0x1fc9e1[_0x2db2('0x12')]['fusion_update_available']);console['log'](_0x2db2('0x27')+_0x1fc9e1[_0x2db2('0x12')]['fusion_gamepad_available']);console[_0x2db2('0xc')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x2db2('0x28')](_0x1fc9e1['SocketVariables'][_0x2db2('0x15')]));console[_0x2db2('0xc')](_0x2db2('0x29')+JSON[_0x2db2('0x28')](_0x1fc9e1[_0x2db2('0x12')]['fusion_wifi_access']));console[_0x2db2('0xc')](_0x2db2('0x2a')+_0x1fc9e1[_0x2db2('0x2b')][_0x2db2('0x2c')]);console[_0x2db2('0xc')](_0x2db2('0x2d')+JSON[_0x2db2('0x28')](_0x1fc9e1[_0x2db2('0x12')]['fusion_program_running']));console['log'](_0x2db2('0x21'));_0x44eeda[_0x2db2('0x1c')]['emit'](_0x2db2('0x2e'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x2f')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x30'),_0x1fc9e1[_0x2db2('0x12')]['fusion_internet_access']);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x31'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x25')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x32'),_0x1fc9e1[_0x2db2('0x12')]['fusion_update_available']);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')]('gamepad-available',_0x1fc9e1['SocketVariables'][_0x2db2('0x33')]);_0x44eeda['sockets'][_0x2db2('0xe')]('diagnostics_running',_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')]('wifi-connection',_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x34')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')]('wifi-fusion_storage_type',_0x1fc9e1['Storage'][_0x2db2('0x2c')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x35'),_0x1fc9e1[_0x2db2('0x12')]['fusion_program_running']);_0x3823a3=0x0;}else{setTimeout(_0x12e9ae,0x7d0);}}function _0xe8b0b0(){_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x2e'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x2f')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x30'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x24')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x31'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x25')]);_0x44eeda[_0x2db2('0x1c')]['emit']('update-available',_0x1fc9e1['SocketVariables'][_0x2db2('0x36')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x37'),_0x1fc9e1[_0x2db2('0x12')]['fusion_gamepad_available']);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x1d'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]);_0x44eeda[_0x2db2('0x1c')][_0x2db2('0xe')](_0x2db2('0x38'),_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x34')]);_0x44eeda[_0x2db2('0x1c')]['emit'](_0x2db2('0x35'),_0x1fc9e1['SocketVariables'][_0x2db2('0x13')]);}function _0x274404(){if(os[_0x2db2('0x39')]()!=_0x2db2('0x3a')){var _0x1eebf5='./scripts/ReadBatt.py';var _0x49737a=spawn(_0x2db2('0x3b'),[_0x1eebf5],{'stdio':'pipe'});_0x49737a[_0x2db2('0x3c')]['on'](_0x2db2('0x3d'),function(_0x1c67d5){_0x1fc9e1['SocketVariables'][_0x2db2('0x2f')]=String(_0x1c67d5)['trim']();_0x3823a3++;});_0x49737a['stderr']['on'](_0x2db2('0x3d'),function(_0x40fef0){console['log']('Error\x20reading\x20battery\x20:\x20\x0a'+String(_0x40fef0));});}else{_0x3823a3++;}}function _0x3ae893(){internetAvailable({'timeout':0x2710,'retries':0x5})['then'](function(){_0x1fc9e1[_0x2db2('0x12')]['fusion_internet_access']=!![];_0x3823a3++;})[_0x2db2('0x3e')](function(){_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x24')]=![];_0x3823a3++;});}function _0xc06069(){shell[_0x2db2('0x3f')](_0x2db2('0x40'),{'silent':!![]},function(_0x1b6ce4,_0x5bf012,_0x227649){(function(_0x56a1d8){_0x1fc9e1['SocketVariables']['fusion_current_SHA']=_0x56a1d8[_0x2db2('0x41')]();_0x3823a3++;_0xb8932a();}(_0x5bf012[_0x2db2('0x41')]()));});}function _0xb8932a(){shell[_0x2db2('0x3f')]('git\x20describe\x20--tags\x20'+_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x42')],{'silent':!![]},function(_0x3809e3,_0x1d9f63,_0x3cf55b){(function(_0x265b73){_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x25')]=_0x265b73[_0x2db2('0x41')]();_0x3823a3++;_0x1b3ad0();}(_0x1d9f63[_0x2db2('0x41')]()));});}function _0x1b3ad0(){if(_0x45542c==_0x2db2('0x43')){shell[_0x2db2('0x3f')]('git\x20fetch',{'silent':!![]},function(_0xc934a8,_0x3e59e1,_0x146672){(function(_0x41ace7){_0x3823a3++;_0x324a4d();}(_0x3e59e1[_0x2db2('0x41')]()));});}else{_0x3823a3++;_0x324a4d();}}function _0x324a4d(){shell['exec'](_0x2db2('0x44'),{'silent':!![]},function(_0x3b9953,_0x14df05,_0x26c887){(function(_0x36e12d){_0x1fc9e1['SocketVariables'][_0x2db2('0x45')]=_0x36e12d[_0x2db2('0x41')]();_0x3823a3++;_0x578e9b();}(_0x14df05[_0x2db2('0x41')]()));});}function _0x578e9b(){shell[_0x2db2('0x3f')](_0x2db2('0x46')+_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x45')],{'silent':!![]},function(_0x4d688d,_0x5f5221,_0x4393a0){(function(_0x1adab3){_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x47')]=_0x1adab3[_0x2db2('0x41')]();_0x3823a3++;}(_0x5f5221['trim']()));});}function _0x5974b6(){if(_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x42')]!=_0x1fc9e1[_0x2db2('0x12')]['fusion_latest_SHA']){_0x1fc9e1[_0x2db2('0x12')]['fusion_update_available']=!![];}else{_0x1fc9e1['SocketVariables'][_0x2db2('0x36')]=![];}_0x3823a3++;}function _0x34ff6d(){if(os[_0x2db2('0x39')]()!=_0x2db2('0x3a')){shell[_0x2db2('0x3f')](_0x2db2('0x48'),{'silent':!![]},function(_0x308ed4,_0x42a77e,_0x587518){(function(_0x1cf16c){_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x33')]=_0x1cf16c[_0x2db2('0x41')]();if(!_0x1fc9e1[_0x2db2('0x12')]['fusion_gamepad_available'])_0x1fc9e1[_0x2db2('0x12')]['fusion_gamepad_available']=![];else _0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x33')]=!![];_0x3823a3++;}(_0x42a77e[_0x2db2('0x41')]()));});}else{_0x1fc9e1[_0x2db2('0x12')]['fusion_gamepad_available']=![];_0x3823a3++;}}function _0x2b9777(){if(os[_0x2db2('0x39')]()!=_0x2db2('0x3a')){shell[_0x2db2('0x3f')](_0x2db2('0x49'),{'silent':!![]},function(_0x24e9ce,_0xf56607,_0x3a779f){(function(_0x55e231){var _0x3ad68d=_0x55e231[_0x2db2('0x41')]();if(_0x3ad68d){if(_0x1fc9e1['SocketVariables'][_0x2db2('0x15')])_0x1fc9e1['SocketVariables']['fusion_diagnostics_running'][_0x2db2('0x4a')]=_0x3ad68d;else{_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]={'process':_0x3ad68d,'socket':-0x1};}}else _0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x15')]=null;_0x3823a3++;}(_0xf56607[_0x2db2('0x41')]()));});}else{_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x33')]=null;_0x3823a3++;}}function _0x491cd8(){wpa_cli['status'](config[_0x2db2('0x4b')](_0x2db2('0x4c')),function(_0x3aa590,_0x33c075){if(_0x3aa590){_0x33c075={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x1fc9e1[_0x2db2('0x12')][_0x2db2('0x34')]=_0x33c075;_0x3823a3++;});}_0x12e9ae();_0x2f05de();setInterval(function(){_0x12e9ae();_0x2f05de();},0x2710);};