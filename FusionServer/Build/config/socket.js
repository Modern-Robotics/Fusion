var _0xcd0c=['Client\x20connected...','join','emit','global-message','Hello\x20from\x20server','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','indexOf','splice','error','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','battery-level','internet-access','fusion_internet_access','version-number','update-available','diagnostics_running','wifi-connection','wifi-fusion_storage_type','program-running','gamepad-available','win32','./scripts/ReadBatt.py','python','stdout','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','git\x20rev-parse\x20HEAD','fusion_current_SHA','exec','Build','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','git\x20describe\x20--tags\x20','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','child_process','spawn','wireless-tools/wpa_cli','shelljs','env','NODE_ENV','path','request','config','exports','connectedClients','sep','pop','connection','push','log'];(function(_0x3087a8,_0x689434){var _0x2c8e4b=function(_0xb58a5d){while(--_0xb58a5d){_0x3087a8['push'](_0x3087a8['shift']());}};_0x2c8e4b(++_0x689434);}(_0xcd0c,0x1e8));var _0x20fb=function(_0x3d00ae,_0x11af2f){_0x3d00ae=_0x3d00ae-0x0;var _0x3d98f0=_0xcd0c[_0x3d00ae];return _0x3d98f0;};var spawn=require(_0x20fb('0x0'))[_0x20fb('0x1')];var internetAvailable=require('internet-available');var wpa_cli=require(_0x20fb('0x2'));var os=require('os');var shell=require(_0x20fb('0x3'));var env=process[_0x20fb('0x4')][_0x20fb('0x5')]||'dev';var path=require(_0x20fb('0x6'));var request=require(_0x20fb('0x7'));const config=require(_0x20fb('0x8'));module[_0x20fb('0x9')]=function(_0x298ae8,_0x276017,_0x321b97){_0x321b97[_0x20fb('0xa')]=[];var _0x289888=path['dirname'](__dirname)['split'](path[_0x20fb('0xb')])[_0x20fb('0xc')]();var _0x3c505c=0x0;var _0x4ca896=0xb;_0x298ae8['on'](_0x20fb('0xd'),function(_0x983699){_0x321b97[_0x20fb('0xa')][_0x20fb('0xe')](_0x983699);console[_0x20fb('0xf')](_0x20fb('0x10'));_0x14a880();_0x983699['on'](_0x20fb('0x11'),function(_0xd32e50){console[_0x20fb('0xf')](_0xd32e50);_0x983699[_0x20fb('0x12')](_0x20fb('0x13'),{'message':_0x20fb('0x14'),'type':_0x20fb('0x15')});});_0x983699['on'](_0x20fb('0x16'),function(_0x4ad667){console['log'](_0x20fb('0x17')+_0x4ad667);if(_0x321b97[_0x20fb('0x18')][_0x20fb('0x19')])if(_0x321b97[_0x20fb('0x18')]['fusion_program_running']['SocketId']==_0x983699['id'])_0x276017['KillProgram']();if(_0x321b97[_0x20fb('0x18')]['fusion_diagnostics_running'])if(_0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')][_0x20fb('0x1b')]==_0x983699['id']){console['log'](_0x20fb('0x1c'));request({'url':_0x20fb('0x1d'),'method':_0x20fb('0x1e')},function(_0x2490ff,_0x3cc707,_0x5a4484){if(_0x2490ff)console[_0x20fb('0xf')](_0x20fb('0x1f')+_0x2490ff);else{if(_0x3cc707[_0x20fb('0x20')]==0xc8){_0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')]=null;}}_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')]('diagnostics_running',_0x321b97[_0x20fb('0x18')]['fusion_diagnostics_running']);});}var _0x6f4d24=_0x321b97[_0x20fb('0xa')][_0x20fb('0x22')](_0x983699);_0x321b97[_0x20fb('0xa')][_0x20fb('0x23')](_0x6f4d24,0x1);});_0x983699['on'](_0x20fb('0x24'),function(_0x147e11){console[_0x20fb('0xf')](_0x20fb('0x25')+_0x147e11);});});function _0x83649(){_0x1717f2();_0x404fac();_0x1e920d();_0xbcaf08();_0x1f4a54();_0x165395();_0x5ff6d8();}function _0x1de50b(){if(_0x3c505c>=_0x4ca896){console[_0x20fb('0xf')](_0x20fb('0x26'));console[_0x20fb('0xf')]('fusion_battery_level\x20:\x20'+_0x321b97[_0x20fb('0x18')][_0x20fb('0x27')]);console[_0x20fb('0xf')](_0x20fb('0x28')+_0x321b97[_0x20fb('0x18')]['fusion_internet_access']);console['log'](_0x20fb('0x29')+_0x321b97['SocketVariables'][_0x20fb('0x2a')]);console[_0x20fb('0xf')](_0x20fb('0x2b')+_0x321b97[_0x20fb('0x18')][_0x20fb('0x2c')]);console[_0x20fb('0xf')]('fusion_gamepad_available\x20:\x20'+_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]);console[_0x20fb('0xf')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x20fb('0x2e')](_0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')]));console[_0x20fb('0xf')](_0x20fb('0x2f')+JSON['stringify'](_0x321b97[_0x20fb('0x18')][_0x20fb('0x30')]));console[_0x20fb('0xf')](_0x20fb('0x31')+_0x321b97[_0x20fb('0x32')][_0x20fb('0x33')]);console[_0x20fb('0xf')](_0x20fb('0x34')+JSON[_0x20fb('0x2e')](_0x321b97[_0x20fb('0x18')][_0x20fb('0x19')]));console[_0x20fb('0xf')](_0x20fb('0x26'));_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x35'),_0x321b97['SocketVariables'][_0x20fb('0x27')]);_0x298ae8[_0x20fb('0x21')]['emit'](_0x20fb('0x36'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x37')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x38'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x2a')]);_0x298ae8[_0x20fb('0x21')]['emit'](_0x20fb('0x39'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x2c')]);_0x298ae8[_0x20fb('0x21')]['emit']('gamepad-available',_0x321b97['SocketVariables'][_0x20fb('0x2d')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x3a'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x3b'),_0x321b97['SocketVariables'][_0x20fb('0x30')]);_0x298ae8[_0x20fb('0x21')]['emit'](_0x20fb('0x3c'),_0x321b97[_0x20fb('0x32')]['type']);_0x298ae8['sockets']['emit'](_0x20fb('0x3d'),_0x321b97['SocketVariables']['fusion_program_running']);_0x3c505c=0x0;}else{setTimeout(_0x1de50b,0x7d0);}}function _0x14a880(){_0x298ae8[_0x20fb('0x21')]['emit'](_0x20fb('0x35'),_0x321b97[_0x20fb('0x18')]['fusion_battery_level']);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x36'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x37')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x38'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x2a')]);_0x298ae8['sockets'][_0x20fb('0x12')](_0x20fb('0x39'),_0x321b97['SocketVariables'][_0x20fb('0x2c')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x3e'),_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')]('diagnostics_running',_0x321b97[_0x20fb('0x18')]['fusion_diagnostics_running']);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')](_0x20fb('0x3b'),_0x321b97['SocketVariables'][_0x20fb('0x30')]);_0x298ae8[_0x20fb('0x21')][_0x20fb('0x12')]('program-running',_0x321b97[_0x20fb('0x18')]['fusion_program_running']);}function _0x1717f2(){if(os['platform']()!=_0x20fb('0x3f')){var _0x512a34=_0x20fb('0x40');var _0x5212f0=spawn(_0x20fb('0x41'),[_0x512a34],{'stdio':'pipe'});_0x5212f0[_0x20fb('0x42')]['on'](_0x20fb('0x43'),function(_0x165585){_0x321b97[_0x20fb('0x18')][_0x20fb('0x27')]=String(_0x165585)[_0x20fb('0x44')]();_0x3c505c++;});_0x5212f0[_0x20fb('0x45')]['on'](_0x20fb('0x43'),function(_0x336d33){console['log'](_0x20fb('0x46')+String(_0x336d33));});}else{_0x3c505c++;}}function _0x404fac(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x20fb('0x47')](function(){_0x321b97[_0x20fb('0x18')][_0x20fb('0x37')]=!![];_0x3c505c++;})[_0x20fb('0x48')](function(){_0x321b97[_0x20fb('0x18')][_0x20fb('0x37')]=![];_0x3c505c++;});}function _0x1e920d(){shell['exec'](_0x20fb('0x49'),{'silent':!![]},function(_0x11eaac,_0x5aa861,_0x2daec8){(function(_0x3c23d4){_0x321b97[_0x20fb('0x18')][_0x20fb('0x4a')]=_0x3c23d4['trim']();_0x3c505c++;_0x3505b2();}(_0x5aa861[_0x20fb('0x44')]()));});}function _0x3505b2(){shell[_0x20fb('0x4b')]('git\x20describe\x20--tags\x20'+_0x321b97[_0x20fb('0x18')][_0x20fb('0x4a')],{'silent':!![]},function(_0x322703,_0x2f6533,_0x321d34){(function(_0x17eae6){_0x321b97[_0x20fb('0x18')][_0x20fb('0x2a')]=_0x17eae6[_0x20fb('0x44')]();_0x3c505c++;_0x43d272();}(_0x2f6533[_0x20fb('0x44')]()));});}function _0x43d272(){if(_0x289888==_0x20fb('0x4c')){shell['exec']('git\x20fetch',{'silent':!![]},function(_0x3a2a32,_0x4e4bd0,_0x2468ee){(function(_0x329d18){_0x3c505c++;_0x211fb6();}(_0x4e4bd0['trim']()));});}else{_0x3c505c++;_0x211fb6();}}function _0x211fb6(){shell[_0x20fb('0x4b')](_0x20fb('0x4d'),{'silent':!![]},function(_0x311896,_0x5ed926,_0x423cef){(function(_0x3723fa){_0x321b97[_0x20fb('0x18')][_0x20fb('0x4e')]=_0x3723fa['trim']();_0x3c505c++;_0x4b82e2();}(_0x5ed926[_0x20fb('0x44')]()));});}function _0x4b82e2(){shell[_0x20fb('0x4b')](_0x20fb('0x4f')+_0x321b97[_0x20fb('0x18')][_0x20fb('0x4e')],{'silent':!![]},function(_0x4115b0,_0x5a0e0d,_0x5871cd){(function(_0x9e3403){_0x321b97[_0x20fb('0x18')]['fusion_latest_version']=_0x9e3403[_0x20fb('0x44')]();_0x3c505c++;}(_0x5a0e0d[_0x20fb('0x44')]()));});}function _0xbcaf08(){if(_0x321b97[_0x20fb('0x18')][_0x20fb('0x4a')]!=_0x321b97['SocketVariables']['fusion_latest_SHA']){_0x321b97[_0x20fb('0x18')][_0x20fb('0x2c')]=!![];}else{_0x321b97[_0x20fb('0x18')][_0x20fb('0x2c')]=![];}_0x3c505c++;}function _0x1f4a54(){if(os['platform']()!=_0x20fb('0x3f')){shell[_0x20fb('0x4b')](_0x20fb('0x50'),{'silent':!![]},function(_0x59990d,_0x27f115,_0x5aaf5b){(function(_0x32375c){_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]=_0x32375c['trim']();if(!_0x321b97['SocketVariables'][_0x20fb('0x2d')])_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]=![];else _0x321b97['SocketVariables'][_0x20fb('0x2d')]=!![];_0x3c505c++;}(_0x27f115[_0x20fb('0x44')]()));});}else{_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]=![];_0x3c505c++;}}function _0x165395(){if(os['platform']()!=_0x20fb('0x3f')){shell[_0x20fb('0x4b')](_0x20fb('0x51'),{'silent':!![]},function(_0x53416b,_0x5d5f07,_0x5d864b){(function(_0x4e2771){var _0x4b67dd=_0x4e2771[_0x20fb('0x44')]();if(_0x4b67dd){if(_0x321b97['SocketVariables']['fusion_diagnostics_running'])_0x321b97['SocketVariables'][_0x20fb('0x1a')][_0x20fb('0x52')]=_0x4b67dd;else{_0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')]={'process':_0x4b67dd,'socket':-0x1};}}else _0x321b97[_0x20fb('0x18')][_0x20fb('0x1a')]=null;_0x3c505c++;}(_0x5d5f07[_0x20fb('0x44')]()));});}else{_0x321b97[_0x20fb('0x18')][_0x20fb('0x2d')]=null;_0x3c505c++;}}function _0x5ff6d8(){wpa_cli[_0x20fb('0x53')](config['get']('Wifi_NIC'),function(_0x4c6217,_0x86c404){if(_0x4c6217){_0x86c404={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x321b97[_0x20fb('0x18')][_0x20fb('0x30')]=_0x86c404;_0x3c505c++;});}_0x1de50b();_0x83649();setInterval(function(){_0x1de50b();_0x83649();},0x2710);};