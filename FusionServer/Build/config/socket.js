var _0x212d=['git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','get','child_process','spawn','wireless-tools/wpa_cli','env','NODE_ENV','dev','path','request','config','exports','connectedClients','split','sep','pop','connection','push','log','Client\x20connected...','join','Hello\x20from\x20server','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','SocketId','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','sockets','emit','diagnostics_running','indexOf','splice','Socket\x20error\x20-\x20','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running','-----------------------------------------------------','internet-access','update-available','gamepad-available','fusion_gamepad_available','wifi-connection','wifi-fusion_storage_type','program-running','battery-level','fusion_battery_level','version-number','platform','win32','./scripts/ReadBatt.py','python','pipe','stdout','trim','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch'];(function(_0x12aff9,_0x40ab3c){var _0x5856f3=function(_0x4072a3){while(--_0x4072a3){_0x12aff9['push'](_0x12aff9['shift']());}};_0x5856f3(++_0x40ab3c);}(_0x212d,0xaa));var _0x1b3a=function(_0x5b8052,_0x321697){_0x5b8052=_0x5b8052-0x0;var _0x50f7fb=_0x212d[_0x5b8052];return _0x50f7fb;};var spawn=require(_0x1b3a('0x0'))[_0x1b3a('0x1')];var internetAvailable=require('internet-available');var wpa_cli=require(_0x1b3a('0x2'));var os=require('os');var shell=require('shelljs');var env=process[_0x1b3a('0x3')][_0x1b3a('0x4')]||_0x1b3a('0x5');var path=require(_0x1b3a('0x6'));var request=require(_0x1b3a('0x7'));const config=require(_0x1b3a('0x8'));module[_0x1b3a('0x9')]=function(_0x450b86,_0x3bba6c,_0x5b3840){_0x5b3840[_0x1b3a('0xa')]=[];var _0x478683=path['dirname'](__dirname)[_0x1b3a('0xb')](path[_0x1b3a('0xc')])[_0x1b3a('0xd')]();var _0x5ad903=0x0;var _0x503c47=0xb;_0x450b86['on'](_0x1b3a('0xe'),function(_0x1df302){_0x5b3840[_0x1b3a('0xa')][_0x1b3a('0xf')](_0x1df302);console[_0x1b3a('0x10')](_0x1b3a('0x11'));_0x120f69();_0x1df302['on'](_0x1b3a('0x12'),function(_0x13fed0){console[_0x1b3a('0x10')](_0x13fed0);_0x1df302['emit']('global-message',{'message':_0x1b3a('0x13'),'type':'success'});});_0x1df302['on'](_0x1b3a('0x14'),function(_0x5db585){console[_0x1b3a('0x10')](_0x1b3a('0x15')+_0x5db585);if(_0x5b3840[_0x1b3a('0x16')]['fusion_program_running'])if(_0x5b3840[_0x1b3a('0x16')]['fusion_program_running'][_0x1b3a('0x17')]==_0x1df302['id'])_0x3bba6c['KillProgram']();if(_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')])if(_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')][_0x1b3a('0x19')]==_0x1df302['id']){console[_0x1b3a('0x10')](_0x1b3a('0x1a'));request({'url':'http://localhost:8080/api/diagnostics/stop','method':_0x1b3a('0x1b')},function(_0x204ad4,_0x354d2e,_0x2c1875){if(_0x204ad4)console['log'](_0x1b3a('0x1c')+_0x204ad4);else{if(_0x354d2e['statusCode']==0xc8){_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]=null;}}_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x1f'),_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]);});}var _0x1fafcb=_0x5b3840[_0x1b3a('0xa')][_0x1b3a('0x20')](_0x1df302);_0x5b3840[_0x1b3a('0xa')][_0x1b3a('0x21')](_0x1fafcb,0x1);});_0x1df302['on']('error',function(_0x4abe5f){console[_0x1b3a('0x10')](_0x1b3a('0x22')+_0x4abe5f);});});function _0x2295d4(){_0x12d6f7();_0x55fc76();_0x56e845();_0x303db4();_0x7e13bf();_0x22521a();_0x34b9b4();}function _0x1dc7b(){if(_0x5ad903>=_0x503c47){console[_0x1b3a('0x10')]('-----------------------------------------------------');console[_0x1b3a('0x10')]('fusion_battery_level\x20:\x20'+_0x5b3840[_0x1b3a('0x16')]['fusion_battery_level']);console[_0x1b3a('0x10')](_0x1b3a('0x23')+_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x24')]);console[_0x1b3a('0x10')]('fusion_current_version\x20:\x20'+_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x25')]);console[_0x1b3a('0x10')](_0x1b3a('0x26')+_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x27')]);console[_0x1b3a('0x10')](_0x1b3a('0x28')+_0x5b3840[_0x1b3a('0x16')]['fusion_gamepad_available']);console[_0x1b3a('0x10')](_0x1b3a('0x29')+JSON[_0x1b3a('0x2a')](_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]));console[_0x1b3a('0x10')](_0x1b3a('0x2b')+JSON[_0x1b3a('0x2a')](_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x2c')]));console['log'](_0x1b3a('0x2d')+_0x5b3840[_0x1b3a('0x2e')][_0x1b3a('0x2f')]);console[_0x1b3a('0x10')]('fusion_program_running\x20:\x20'+JSON[_0x1b3a('0x2a')](_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x30')]));console[_0x1b3a('0x10')](_0x1b3a('0x31'));_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')]('battery-level',_0x5b3840[_0x1b3a('0x16')]['fusion_battery_level']);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x32'),_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x24')]);_0x450b86['sockets'][_0x1b3a('0x1e')]('version-number',_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x25')]);_0x450b86[_0x1b3a('0x1d')]['emit'](_0x1b3a('0x33'),_0x5b3840['SocketVariables'][_0x1b3a('0x27')]);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x34'),_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x35')]);_0x450b86['sockets']['emit'](_0x1b3a('0x1f'),_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]);_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x36'),_0x5b3840['SocketVariables'][_0x1b3a('0x2c')]);_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x37'),_0x5b3840['Storage'][_0x1b3a('0x2f')]);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x38'),_0x5b3840[_0x1b3a('0x16')]['fusion_program_running']);_0x5ad903=0x0;}else{setTimeout(_0x1dc7b,0x7d0);}}function _0x120f69(){_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x39'),_0x5b3840['SocketVariables'][_0x1b3a('0x3a')]);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x32'),_0x5b3840['SocketVariables'][_0x1b3a('0x24')]);_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x3b'),_0x5b3840[_0x1b3a('0x16')]['fusion_current_version']);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x33'),_0x5b3840['SocketVariables'][_0x1b3a('0x27')]);_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x34'),_0x5b3840[_0x1b3a('0x16')]['fusion_gamepad_available']);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x1f'),_0x5b3840[_0x1b3a('0x16')]['fusion_diagnostics_running']);_0x450b86[_0x1b3a('0x1d')][_0x1b3a('0x1e')](_0x1b3a('0x36'),_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x2c')]);_0x450b86['sockets'][_0x1b3a('0x1e')](_0x1b3a('0x38'),_0x5b3840['SocketVariables'][_0x1b3a('0x30')]);}function _0x12d6f7(){if(os[_0x1b3a('0x3c')]()!=_0x1b3a('0x3d')){var _0x4c516c=_0x1b3a('0x3e');var _0x42ec0c=spawn(_0x1b3a('0x3f'),[_0x4c516c],{'stdio':_0x1b3a('0x40')});_0x42ec0c[_0x1b3a('0x41')]['on']('data',function(_0x16ddcb){_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x3a')]=String(_0x16ddcb)[_0x1b3a('0x42')]();_0x5ad903++;});_0x42ec0c['stderr']['on']('data',function(_0x25e846){console[_0x1b3a('0x10')](_0x1b3a('0x43')+String(_0x25e846));});}else{_0x5ad903++;}}function _0x55fc76(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x1b3a('0x44')](function(){_0x5b3840[_0x1b3a('0x16')]['fusion_internet_access']=!![];_0x5ad903++;})[_0x1b3a('0x45')](function(){_0x5b3840[_0x1b3a('0x16')]['fusion_internet_access']=![];_0x5ad903++;});}function _0x56e845(){shell[_0x1b3a('0x46')](_0x1b3a('0x47'),{'silent':!![]},function(_0x374bed,_0x2b9013,_0x469b4a){(function(_0x1c937d){_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x48')]=_0x1c937d[_0x1b3a('0x42')]();_0x5ad903++;_0x27c58e();}(_0x2b9013['trim']()));});}function _0x27c58e(){shell['exec'](_0x1b3a('0x49')+_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x48')],{'silent':!![]},function(_0x548a6f,_0x14338d,_0x53ee3a){(function(_0xe8221d){_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x25')]=_0xe8221d[_0x1b3a('0x42')]();_0x5ad903++;_0x36d566();}(_0x14338d['trim']()));});}function _0x36d566(){if(_0x478683==_0x1b3a('0x4a')){shell[_0x1b3a('0x46')](_0x1b3a('0x4b'),{'silent':!![]},function(_0x5932f6,_0x572588,_0x1d3eb6){(function(_0x3a0cc0){_0x5ad903++;_0x1eba85();}(_0x572588[_0x1b3a('0x42')]()));});}else{_0x5ad903++;_0x1eba85();}}function _0x1eba85(){shell[_0x1b3a('0x46')](_0x1b3a('0x4c'),{'silent':!![]},function(_0x209291,_0x3c5ab9,_0x12ed78){(function(_0x303a74){_0x5b3840[_0x1b3a('0x16')]['fusion_latest_SHA']=_0x303a74[_0x1b3a('0x42')]();_0x5ad903++;_0xfc9a4a();}(_0x3c5ab9[_0x1b3a('0x42')]()));});}function _0xfc9a4a(){shell[_0x1b3a('0x46')](_0x1b3a('0x49')+_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x4d')],{'silent':!![]},function(_0x1a79fa,_0x31d487,_0x44aeb3){(function(_0x1eba3f){_0x5b3840[_0x1b3a('0x16')]['fusion_latest_version']=_0x1eba3f[_0x1b3a('0x42')]();_0x5ad903++;}(_0x31d487[_0x1b3a('0x42')]()));});}function _0x303db4(){if(_0x5b3840['SocketVariables']['fusion_current_SHA']!=_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x4d')]){_0x5b3840[_0x1b3a('0x16')]['fusion_update_available']=!![];}else{_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x27')]=![];}_0x5ad903++;}function _0x7e13bf(){if(os[_0x1b3a('0x3c')]()!=_0x1b3a('0x3d')){shell[_0x1b3a('0x46')]('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]},function(_0x39c3bd,_0x6d33ae,_0x5f4c1d){(function(_0x2e2445){_0x5b3840['SocketVariables'][_0x1b3a('0x35')]=_0x2e2445[_0x1b3a('0x42')]();if(!_0x5b3840['SocketVariables'][_0x1b3a('0x35')])_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x35')]=![];else _0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x35')]=!![];_0x5ad903++;}(_0x6d33ae[_0x1b3a('0x42')]()));});}else{_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x35')]=![];_0x5ad903++;}}function _0x22521a(){if(os['platform']()!=_0x1b3a('0x3d')){shell[_0x1b3a('0x46')](_0x1b3a('0x4e'),{'silent':!![]},function(_0x32e7e1,_0x17b2d9,_0x4b7200){(function(_0x43746c){var _0x373474=_0x43746c['trim']();if(_0x373474){if(_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')])_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')][_0x1b3a('0x4f')]=_0x373474;else{_0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]={'process':_0x373474,'socket':-0x1};}}else _0x5b3840[_0x1b3a('0x16')][_0x1b3a('0x18')]=null;_0x5ad903++;}(_0x17b2d9[_0x1b3a('0x42')]()));});}else{_0x5b3840['SocketVariables']['fusion_gamepad_available']=null;_0x5ad903++;}}function _0x34b9b4(){wpa_cli[_0x1b3a('0x50')](config[_0x1b3a('0x51')]('Wifi_NIC'),function(_0x29b66b,_0x1e6b76){if(_0x29b66b){_0x1e6b76={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x5b3840['SocketVariables']['fusion_wifi_access']=_0x1e6b76;_0x5ad903++;});}_0x1dc7b();_0x2295d4();setInterval(function(){_0x1dc7b();_0x2295d4();},0x2710);};