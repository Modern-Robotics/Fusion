var _0x4838=['gamepad-available','wifi-connection','Storage','fusion_current_version','platform','win32','./scripts/ReadBatt.py','python','stdout','data','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20rev-parse\x20HEAD','trim','fusion_current_SHA','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','git\x20describe\x20--tags\x20','status','get','Wifi_NIC','child_process','wireless-tools/wpa_cli','shelljs','NODE_ENV','dev','request','config','exports','connectedClients','dirname','split','pop','connection','push','Client\x20connected...','join','log','emit','global-message','Hello\x20from\x20server','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','diagnostics_running','indexOf','splice','error','Socket\x20error\x20-\x20','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','type','fusion_program_running\x20:\x20','-----------------------------------------------------','sockets','battery-level','internet-access','version-number','update-available'];(function(_0x132929,_0x116887){var _0x5b9c52=function(_0x4d1ca1){while(--_0x4d1ca1){_0x132929['push'](_0x132929['shift']());}};_0x5b9c52(++_0x116887);}(_0x4838,0x1b2));var _0x2f4e=function(_0x4c0d41,_0x973d89){_0x4c0d41=_0x4c0d41-0x0;var _0x1e07b2=_0x4838[_0x4c0d41];return _0x1e07b2;};var spawn=require(_0x2f4e('0x0'))['spawn'];var internetAvailable=require('internet-available');var wpa_cli=require(_0x2f4e('0x1'));var os=require('os');var shell=require(_0x2f4e('0x2'));var env=process['env'][_0x2f4e('0x3')]||_0x2f4e('0x4');var path=require('path');var request=require(_0x2f4e('0x5'));const config=require(_0x2f4e('0x6'));module[_0x2f4e('0x7')]=function(_0x430caa,_0x4edd18,_0x2544bd){_0x2544bd[_0x2f4e('0x8')]=[];var _0x5397fc=path[_0x2f4e('0x9')](__dirname)[_0x2f4e('0xa')](path['sep'])[_0x2f4e('0xb')]();var _0x24224d=0x0;var _0x5220f2=0xb;_0x430caa['on'](_0x2f4e('0xc'),function(_0x5e3e0b){_0x2544bd['connectedClients'][_0x2f4e('0xd')](_0x5e3e0b);console['log'](_0x2f4e('0xe'));_0x19cff9();_0x5e3e0b['on'](_0x2f4e('0xf'),function(_0x597ebc){console[_0x2f4e('0x10')](_0x597ebc);_0x5e3e0b[_0x2f4e('0x11')](_0x2f4e('0x12'),{'message':_0x2f4e('0x13'),'type':_0x2f4e('0x14')});});_0x5e3e0b['on'](_0x2f4e('0x15'),function(_0xc2c3a1){console[_0x2f4e('0x10')](_0x2f4e('0x16')+_0xc2c3a1);if(_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x18')])if(_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x18')][_0x2f4e('0x19')]==_0x5e3e0b['id'])_0x4edd18[_0x2f4e('0x1a')]();if(_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')])if(_0x2544bd['SocketVariables']['fusion_diagnostics_running'][_0x2f4e('0x1c')]==_0x5e3e0b['id']){console[_0x2f4e('0x10')](_0x2f4e('0x1d'));request({'url':_0x2f4e('0x1e'),'method':'GET'},function(_0x5dc32f,_0x55ab03,_0x6f6627){if(_0x5dc32f)console['log'](_0x2f4e('0x1f')+_0x5dc32f);else{if(_0x55ab03[_0x2f4e('0x20')]==0xc8){_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]=null;}}_0x430caa['sockets'][_0x2f4e('0x11')](_0x2f4e('0x21'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]);});}var _0x3b2126=_0x2544bd[_0x2f4e('0x8')][_0x2f4e('0x22')](_0x5e3e0b);_0x2544bd[_0x2f4e('0x8')][_0x2f4e('0x23')](_0x3b2126,0x1);});_0x5e3e0b['on'](_0x2f4e('0x24'),function(_0x463d3f){console[_0x2f4e('0x10')](_0x2f4e('0x25')+_0x463d3f);});});function _0x2fc69b(){_0x3b8a00();_0x2ab5de();_0x3aaf4f();_0x4748e8();_0x2a02ba();_0x857282();_0x33d9a6();}function _0x494f0e(){if(_0x24224d>=_0x5220f2){console[_0x2f4e('0x10')]('-----------------------------------------------------');console[_0x2f4e('0x10')](_0x2f4e('0x26')+_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x27')]);console['log'](_0x2f4e('0x28')+_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x29')]);console[_0x2f4e('0x10')](_0x2f4e('0x2a')+_0x2544bd[_0x2f4e('0x17')]['fusion_current_version']);console[_0x2f4e('0x10')]('fusion_update_available\x20:\x20'+_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2b')]);console['log'](_0x2f4e('0x2c')+_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2d')]);console[_0x2f4e('0x10')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x2f4e('0x2e')](_0x2544bd['SocketVariables'][_0x2f4e('0x1b')]));console[_0x2f4e('0x10')](_0x2f4e('0x2f')+JSON[_0x2f4e('0x2e')](_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x30')]));console['log'](_0x2f4e('0x31')+_0x2544bd['Storage'][_0x2f4e('0x32')]);console[_0x2f4e('0x10')](_0x2f4e('0x33')+JSON[_0x2f4e('0x2e')](_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x18')]));console[_0x2f4e('0x10')](_0x2f4e('0x34'));_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x36'),_0x2544bd['SocketVariables'][_0x2f4e('0x27')]);_0x430caa['sockets'][_0x2f4e('0x11')](_0x2f4e('0x37'),_0x2544bd[_0x2f4e('0x17')]['fusion_internet_access']);_0x430caa[_0x2f4e('0x35')]['emit'](_0x2f4e('0x38'),_0x2544bd['SocketVariables']['fusion_current_version']);_0x430caa[_0x2f4e('0x35')]['emit'](_0x2f4e('0x39'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2b')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x3a'),_0x2544bd['SocketVariables']['fusion_gamepad_available']);_0x430caa['sockets'][_0x2f4e('0x11')](_0x2f4e('0x21'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x3b'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x30')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')]('wifi-fusion_storage_type',_0x2544bd[_0x2f4e('0x3c')][_0x2f4e('0x32')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')]('program-running',_0x2544bd['SocketVariables'][_0x2f4e('0x18')]);_0x24224d=0x0;}else{setTimeout(_0x494f0e,0x7d0);}}function _0x19cff9(){_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x36'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x27')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x37'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x29')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x38'),_0x2544bd['SocketVariables'][_0x2f4e('0x3d')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x39'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2b')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')]('gamepad-available',_0x2544bd[_0x2f4e('0x17')]['fusion_gamepad_available']);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')](_0x2f4e('0x21'),_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]);_0x430caa['sockets'][_0x2f4e('0x11')]('wifi-connection',_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x30')]);_0x430caa[_0x2f4e('0x35')][_0x2f4e('0x11')]('program-running',_0x2544bd[_0x2f4e('0x17')]['fusion_program_running']);}function _0x3b8a00(){if(os[_0x2f4e('0x3e')]()!=_0x2f4e('0x3f')){var _0x1d9a9a=_0x2f4e('0x40');var _0x54bed5=spawn(_0x2f4e('0x41'),[_0x1d9a9a],{'stdio':'pipe'});_0x54bed5[_0x2f4e('0x42')]['on'](_0x2f4e('0x43'),function(_0x4ada13){_0x2544bd['SocketVariables']['fusion_battery_level']=String(_0x4ada13)['trim']();_0x24224d++;});_0x54bed5[_0x2f4e('0x44')]['on'](_0x2f4e('0x43'),function(_0x2b3787){console['log'](_0x2f4e('0x45')+String(_0x2b3787));});}else{_0x24224d++;}}function _0x2ab5de(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x2f4e('0x46')](function(){_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x29')]=!![];_0x24224d++;})[_0x2f4e('0x47')](function(){_0x2544bd[_0x2f4e('0x17')]['fusion_internet_access']=![];_0x24224d++;});}function _0x3aaf4f(){shell[_0x2f4e('0x48')](_0x2f4e('0x49'),{'silent':!![]},function(_0x407cf0,_0x1bd8d6,_0x47a3d3){(function(_0x36b050){_0x2544bd[_0x2f4e('0x17')]['fusion_current_SHA']=_0x36b050[_0x2f4e('0x4a')]();_0x24224d++;_0x248947();}(_0x1bd8d6[_0x2f4e('0x4a')]()));});}function _0x248947(){shell[_0x2f4e('0x48')]('git\x20describe\x20--tags\x20'+_0x2544bd['SocketVariables'][_0x2f4e('0x4b')],{'silent':!![]},function(_0x5898f9,_0x31abb9,_0x134c30){(function(_0xdfa327){_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x3d')]=_0xdfa327['trim']();_0x24224d++;_0x4c002f();}(_0x31abb9[_0x2f4e('0x4a')]()));});}function _0x4c002f(){if(_0x5397fc=='Build'){shell['exec']('git\x20fetch',{'silent':!![]},function(_0x20ab7a,_0x2a05cb,_0x5aadf7){(function(_0x3c4b35){_0x24224d++;_0x1fb70f();}(_0x2a05cb[_0x2f4e('0x4a')]()));});}else{_0x24224d++;_0x1fb70f();}}function _0x1fb70f(){shell[_0x2f4e('0x48')](_0x2f4e('0x4c'),{'silent':!![]},function(_0x2c49ce,_0xd4bb1e,_0x13d31d){(function(_0x2f6e45){_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x4d')]=_0x2f6e45[_0x2f4e('0x4a')]();_0x24224d++;_0x3a25f1();}(_0xd4bb1e[_0x2f4e('0x4a')]()));});}function _0x3a25f1(){shell['exec'](_0x2f4e('0x4e')+_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x4d')],{'silent':!![]},function(_0x53c3b6,_0x5a6341,_0x39735c){(function(_0x151145){_0x2544bd[_0x2f4e('0x17')]['fusion_latest_version']=_0x151145[_0x2f4e('0x4a')]();_0x24224d++;}(_0x5a6341[_0x2f4e('0x4a')]()));});}function _0x4748e8(){if(_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x4b')]!=_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x4d')]){_0x2544bd['SocketVariables'][_0x2f4e('0x2b')]=!![];}else{_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2b')]=![];}_0x24224d++;}function _0x2a02ba(){if(os[_0x2f4e('0x3e')]()!=_0x2f4e('0x3f')){shell[_0x2f4e('0x48')]('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]},function(_0xa44f3e,_0x5b7198,_0x6ed18d){(function(_0x171f60){_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2d')]=_0x171f60[_0x2f4e('0x4a')]();if(!_0x2544bd['SocketVariables']['fusion_gamepad_available'])_0x2544bd['SocketVariables'][_0x2f4e('0x2d')]=![];else _0x2544bd[_0x2f4e('0x17')]['fusion_gamepad_available']=!![];_0x24224d++;}(_0x5b7198[_0x2f4e('0x4a')]()));});}else{_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x2d')]=![];_0x24224d++;}}function _0x857282(){if(os[_0x2f4e('0x3e')]()!='win32'){shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x111f38,_0x1b1b96,_0x101096){(function(_0x5cc587){var _0x1c4e9f=_0x5cc587[_0x2f4e('0x4a')]();if(_0x1c4e9f){if(_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')])_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]['process']=_0x1c4e9f;else{_0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]={'process':_0x1c4e9f,'socket':-0x1};}}else _0x2544bd[_0x2f4e('0x17')][_0x2f4e('0x1b')]=null;_0x24224d++;}(_0x1b1b96[_0x2f4e('0x4a')]()));});}else{_0x2544bd['SocketVariables'][_0x2f4e('0x2d')]=null;_0x24224d++;}}function _0x33d9a6(){wpa_cli[_0x2f4e('0x4f')](config[_0x2f4e('0x50')](_0x2f4e('0x51')),function(_0xdb1149,_0x3a6631){if(_0xdb1149){_0x3a6631={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x2544bd['SocketVariables'][_0x2f4e('0x30')]=_0x3a6631;_0x24224d++;});}_0x494f0e();_0x2fc69b();setInterval(function(){_0x494f0e();_0x2fc69b();},0x2710);};