var _0x42ec=['config','exports','connectedClients','sep','pop','connection','Client\x20connected...','emit','global-message','Hello\x20from\x20server','disconnect','log','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','diagnostics_running','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access','Storage','type','fusion_program_running\x20:\x20','battery-level','internet-access','fusion_current_version','update-available','gamepad-available','wifi-connection','wifi-fusion_storage_type','program-running','version-number','fusion_gamepad_available','platform','win32','stdout','trim','stderr','data','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','git\x20rev-parse\x20HEAD','fusion_current_SHA','exec','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','git\x20describe\x20--tags\x20','fusion_latest_version','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','status','get','Wifi_NIC','spawn','internet-available','shelljs','env','dev','path'];(function(_0x539e09,_0x35f7e4){var _0x15dfcc=function(_0x45c6bb){while(--_0x45c6bb){_0x539e09['push'](_0x539e09['shift']());}};_0x15dfcc(++_0x35f7e4);}(_0x42ec,0x136));var _0x5be0=function(_0x423742,_0x1b1f74){_0x423742=_0x423742-0x0;var _0xdc0ace=_0x42ec[_0x423742];return _0xdc0ace;};var spawn=require('child_process')[_0x5be0('0x0')];var internetAvailable=require(_0x5be0('0x1'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require(_0x5be0('0x2'));var env=process[_0x5be0('0x3')]['NODE_ENV']||_0x5be0('0x4');var path=require(_0x5be0('0x5'));var request=require('request');const config=require(_0x5be0('0x6'));module[_0x5be0('0x7')]=function(_0x3bbd6a,_0x108d17,_0x20e2b5){_0x20e2b5[_0x5be0('0x8')]=[];var _0x335f53=path['dirname'](__dirname)['split'](path[_0x5be0('0x9')])[_0x5be0('0xa')]();var _0x2c69fa=0x0;var _0x1885af=0xb;_0x3bbd6a['on'](_0x5be0('0xb'),function(_0x29e425){_0x20e2b5[_0x5be0('0x8')]['push'](_0x29e425);console['log'](_0x5be0('0xc'));_0x3f106d();_0x29e425['on']('join',function(_0x5d7c2f){console['log'](_0x5d7c2f);_0x29e425[_0x5be0('0xd')](_0x5be0('0xe'),{'message':_0x5be0('0xf'),'type':'success'});});_0x29e425['on'](_0x5be0('0x10'),function(_0x3f16e0){console[_0x5be0('0x11')](_0x5be0('0x12')+_0x3f16e0);if(_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x14')])if(_0x20e2b5[_0x5be0('0x13')]['fusion_program_running'][_0x5be0('0x15')]==_0x29e425['id'])_0x108d17[_0x5be0('0x16')]();if(_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')])if(_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')]['socket']==_0x29e425['id']){console[_0x5be0('0x11')](_0x5be0('0x18'));request({'url':_0x5be0('0x19'),'method':_0x5be0('0x1a')},function(_0x57f61c,_0x5ac86e,_0xf1c25a){if(_0x57f61c)console['log'](_0x5be0('0x1b')+_0x57f61c);else{if(_0x5ac86e[_0x5be0('0x1c')]==0xc8){_0x20e2b5['SocketVariables'][_0x5be0('0x17')]=null;}}_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x1e'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')]);});}var _0x15ee9b=_0x20e2b5[_0x5be0('0x8')]['indexOf'](_0x29e425);_0x20e2b5[_0x5be0('0x8')][_0x5be0('0x1f')](_0x15ee9b,0x1);});_0x29e425['on']('error',function(_0x22e82d){console['log'](_0x5be0('0x20')+_0x22e82d);});});function _0x2d0a99(){_0x21360e();_0x22bc48();_0x170f46();_0x189e30();_0x3e8e7a();_0x48babf();_0x5d2e76();}function _0x3f1d97(){if(_0x2c69fa>=_0x1885af){console[_0x5be0('0x11')](_0x5be0('0x21'));console[_0x5be0('0x11')](_0x5be0('0x22')+_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x23')]);console[_0x5be0('0x11')](_0x5be0('0x24')+_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x25')]);console[_0x5be0('0x11')](_0x5be0('0x26')+_0x20e2b5[_0x5be0('0x13')]['fusion_current_version']);console['log'](_0x5be0('0x27')+_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x28')]);console['log'](_0x5be0('0x29')+_0x20e2b5[_0x5be0('0x13')]['fusion_gamepad_available']);console['log'](_0x5be0('0x2a')+JSON[_0x5be0('0x2b')](_0x20e2b5[_0x5be0('0x13')]['fusion_diagnostics_running']));console['log']('fusion_wifi_access\x20:\x20'+JSON[_0x5be0('0x2b')](_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x2c')]));console[_0x5be0('0x11')]('fusion_storage_type\x20:\x20'+_0x20e2b5[_0x5be0('0x2d')][_0x5be0('0x2e')]);console[_0x5be0('0x11')](_0x5be0('0x2f')+JSON[_0x5be0('0x2b')](_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x14')]));console[_0x5be0('0x11')](_0x5be0('0x21'));_0x3bbd6a['sockets']['emit'](_0x5be0('0x30'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x23')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x31'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x25')]);_0x3bbd6a[_0x5be0('0x1d')]['emit']('version-number',_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x32')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x33'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x28')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x34'),_0x20e2b5[_0x5be0('0x13')]['fusion_gamepad_available']);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x1e'),_0x20e2b5['SocketVariables'][_0x5be0('0x17')]);_0x3bbd6a[_0x5be0('0x1d')]['emit'](_0x5be0('0x35'),_0x20e2b5['SocketVariables'][_0x5be0('0x2c')]);_0x3bbd6a['sockets'][_0x5be0('0xd')](_0x5be0('0x36'),_0x20e2b5[_0x5be0('0x2d')][_0x5be0('0x2e')]);_0x3bbd6a[_0x5be0('0x1d')]['emit'](_0x5be0('0x37'),_0x20e2b5['SocketVariables'][_0x5be0('0x14')]);_0x2c69fa=0x0;}else{setTimeout(_0x3f1d97,0x7d0);}}function _0x3f106d(){_0x3bbd6a[_0x5be0('0x1d')]['emit'](_0x5be0('0x30'),_0x20e2b5['SocketVariables'][_0x5be0('0x23')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x31'),_0x20e2b5['SocketVariables'][_0x5be0('0x25')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x38'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x32')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')](_0x5be0('0x33'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x28')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')]('gamepad-available',_0x20e2b5['SocketVariables'][_0x5be0('0x39')]);_0x3bbd6a[_0x5be0('0x1d')]['emit'](_0x5be0('0x1e'),_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')]);_0x3bbd6a[_0x5be0('0x1d')][_0x5be0('0xd')]('wifi-connection',_0x20e2b5[_0x5be0('0x13')]['fusion_wifi_access']);_0x3bbd6a[_0x5be0('0x1d')]['emit']('program-running',_0x20e2b5['SocketVariables'][_0x5be0('0x14')]);}function _0x21360e(){if(os[_0x5be0('0x3a')]()!=_0x5be0('0x3b')){var _0x159858='./scripts/ReadBatt.py';var _0xae81b9=spawn('python',[_0x159858],{'stdio':'pipe'});_0xae81b9[_0x5be0('0x3c')]['on']('data',function(_0x36eabc){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x23')]=String(_0x36eabc)[_0x5be0('0x3d')]();_0x2c69fa++;});_0xae81b9[_0x5be0('0x3e')]['on'](_0x5be0('0x3f'),function(_0x109184){console['log'](_0x5be0('0x40')+String(_0x109184));});}else{_0x2c69fa++;}}function _0x22bc48(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x5be0('0x41')](function(){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x25')]=!![];_0x2c69fa++;})[_0x5be0('0x42')](function(){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x25')]=![];_0x2c69fa++;});}function _0x170f46(){shell['exec'](_0x5be0('0x43'),{'silent':!![]},function(_0x1ebb8e,_0x4f6b95,_0x10a453){(function(_0x10ec7f){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x44')]=_0x10ec7f[_0x5be0('0x3d')]();_0x2c69fa++;_0x5ad820();}(_0x4f6b95['trim']()));});}function _0x5ad820(){shell[_0x5be0('0x45')]('git\x20describe\x20--tags\x20'+_0x20e2b5['SocketVariables']['fusion_current_SHA'],{'silent':!![]},function(_0x42a69a,_0xa529a2,_0x25b45d){(function(_0x2dc160){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x32')]=_0x2dc160['trim']();_0x2c69fa++;_0x24f4a5();}(_0xa529a2['trim']()));});}function _0x24f4a5(){if(_0x335f53=='Build'){shell[_0x5be0('0x45')](_0x5be0('0x46'),{'silent':!![]},function(_0x49189d,_0x18cdbd,_0x39a85e){(function(_0x29b404){_0x2c69fa++;_0x166a4d();}(_0x18cdbd[_0x5be0('0x3d')]()));});}else{_0x2c69fa++;_0x166a4d();}}function _0x166a4d(){shell[_0x5be0('0x45')](_0x5be0('0x47'),{'silent':!![]},function(_0x33d013,_0x50ea0b,_0x2c1ef2){(function(_0xdceeb5){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x48')]=_0xdceeb5[_0x5be0('0x3d')]();_0x2c69fa++;_0x54011d();}(_0x50ea0b[_0x5be0('0x3d')]()));});}function _0x54011d(){shell['exec'](_0x5be0('0x49')+_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x48')],{'silent':!![]},function(_0x53ab64,_0x2685f9,_0x2830f6){(function(_0x5e24b3){_0x20e2b5['SocketVariables'][_0x5be0('0x4a')]=_0x5e24b3[_0x5be0('0x3d')]();_0x2c69fa++;}(_0x2685f9[_0x5be0('0x3d')]()));});}function _0x189e30(){if(_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x44')]!=_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x48')]){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x28')]=!![];}else{_0x20e2b5[_0x5be0('0x13')]['fusion_update_available']=![];}_0x2c69fa++;}function _0x3e8e7a(){if(os[_0x5be0('0x3a')]()!='win32'){shell[_0x5be0('0x45')]('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]},function(_0xffd0d9,_0x595b1a,_0x17730d){(function(_0x12aafe){_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x39')]=_0x12aafe[_0x5be0('0x3d')]();if(!_0x20e2b5['SocketVariables'][_0x5be0('0x39')])_0x20e2b5['SocketVariables'][_0x5be0('0x39')]=![];else _0x20e2b5[_0x5be0('0x13')][_0x5be0('0x39')]=!![];_0x2c69fa++;}(_0x595b1a[_0x5be0('0x3d')]()));});}else{_0x20e2b5['SocketVariables'][_0x5be0('0x39')]=![];_0x2c69fa++;}}function _0x48babf(){if(os[_0x5be0('0x3a')]()!='win32'){shell[_0x5be0('0x45')](_0x5be0('0x4b'),{'silent':!![]},function(_0x5735d4,_0x3b6397,_0x472590){(function(_0x59a1bf){var _0x4c8cf5=_0x59a1bf[_0x5be0('0x3d')]();if(_0x4c8cf5){if(_0x20e2b5['SocketVariables'][_0x5be0('0x17')])_0x20e2b5['SocketVariables']['fusion_diagnostics_running']['process']=_0x4c8cf5;else{_0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')]={'process':_0x4c8cf5,'socket':-0x1};}}else _0x20e2b5[_0x5be0('0x13')][_0x5be0('0x17')]=null;_0x2c69fa++;}(_0x3b6397[_0x5be0('0x3d')]()));});}else{_0x20e2b5['SocketVariables'][_0x5be0('0x39')]=null;_0x2c69fa++;}}function _0x5d2e76(){wpa_cli[_0x5be0('0x4c')](config[_0x5be0('0x4d')](_0x5be0('0x4e')),function(_0xd923cd,_0x398426){if(_0xd923cd){_0x398426={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x20e2b5['SocketVariables'][_0x5be0('0x2c')]=_0x398426;_0x2c69fa++;});}_0x3f1d97();_0x2d0a99();setInterval(function(){_0x3f1d97();_0x2d0a99();},0x2710);};