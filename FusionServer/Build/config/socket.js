var _0x30df=['fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','fusion_program_running\x20:\x20','sockets','internet-access','version-number','fusion_current_version','update-available','wifi-connection','wifi-fusion_storage_type','type','program-running','battery-level','gamepad-available','python','pipe','stdout','trim','stderr','data','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20describe\x20--tags\x20','fusion_current_SHA','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','platform','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','get','Wifi_NIC','child_process','internet-available','wireless-tools/wpa_cli','NODE_ENV','dev','path','config','connectedClients','dirname','split','sep','pop','connection','push','log','join','emit','global-message','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','diagnostics_running','error','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level'];(function(_0x134f53,_0xcb612c){var _0x5b3a77=function(_0x3360c3){while(--_0x3360c3){_0x134f53['push'](_0x134f53['shift']());}};_0x5b3a77(++_0xcb612c);}(_0x30df,0x1ce));var _0x49c3=function(_0x31d825,_0x2eb130){_0x31d825=_0x31d825-0x0;var _0x4280fb=_0x30df[_0x31d825];return _0x4280fb;};var spawn=require(_0x49c3('0x0'))['spawn'];var internetAvailable=require(_0x49c3('0x1'));var wpa_cli=require(_0x49c3('0x2'));var os=require('os');var shell=require('shelljs');var env=process['env'][_0x49c3('0x3')]||_0x49c3('0x4');var path=require(_0x49c3('0x5'));var request=require('request');const config=require(_0x49c3('0x6'));module['exports']=function(_0x3445b4,_0x3e7f5f,_0x4c09c3){_0x4c09c3[_0x49c3('0x7')]=[];var _0x11f4b9=path[_0x49c3('0x8')](__dirname)[_0x49c3('0x9')](path[_0x49c3('0xa')])[_0x49c3('0xb')]();var _0x26846f=0x0;var _0x3d7079=0xb;_0x3445b4['on'](_0x49c3('0xc'),function(_0x4742a3){_0x4c09c3[_0x49c3('0x7')][_0x49c3('0xd')](_0x4742a3);console[_0x49c3('0xe')]('Client\x20connected...');_0x4d4144();_0x4742a3['on'](_0x49c3('0xf'),function(_0x4aef37){console[_0x49c3('0xe')](_0x4aef37);_0x4742a3[_0x49c3('0x10')](_0x49c3('0x11'),{'message':'Hello\x20from\x20server','type':_0x49c3('0x12')});});_0x4742a3['on'](_0x49c3('0x13'),function(_0x2e512e){console[_0x49c3('0xe')](_0x49c3('0x14')+_0x2e512e);if(_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x16')])if(_0x4c09c3[_0x49c3('0x15')]['fusion_program_running'][_0x49c3('0x17')]==_0x4742a3['id'])_0x3e7f5f['KillProgram']();if(_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x18')])if(_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x18')][_0x49c3('0x19')]==_0x4742a3['id']){console[_0x49c3('0xe')](_0x49c3('0x1a'));request({'url':'http://localhost:8080/api/diagnostics/stop','method':_0x49c3('0x1b')},function(_0xc0978b,_0x2aae1c,_0x313e9f){if(_0xc0978b)console[_0x49c3('0xe')](_0x49c3('0x1c')+_0xc0978b);else{if(_0x2aae1c[_0x49c3('0x1d')]==0xc8){_0x4c09c3[_0x49c3('0x15')]['fusion_diagnostics_running']=null;}}_0x3445b4['sockets']['emit'](_0x49c3('0x1e'),_0x4c09c3[_0x49c3('0x15')]['fusion_diagnostics_running']);});}var _0x19d13a=_0x4c09c3[_0x49c3('0x7')]['indexOf'](_0x4742a3);_0x4c09c3['connectedClients']['splice'](_0x19d13a,0x1);});_0x4742a3['on'](_0x49c3('0x1f'),function(_0x4b20d7){console[_0x49c3('0xe')](_0x49c3('0x20')+_0x4b20d7);});});function _0x3135f8(){_0x27c727();_0x37afb1();_0x3da091();_0x6f4f96();_0x330240();_0x4d9686();_0x143c80();}function _0x28b51b(){if(_0x26846f>=_0x3d7079){console['log'](_0x49c3('0x21'));console[_0x49c3('0xe')](_0x49c3('0x22')+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x23')]);console[_0x49c3('0xe')](_0x49c3('0x24')+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x25')]);console[_0x49c3('0xe')](_0x49c3('0x26')+_0x4c09c3[_0x49c3('0x15')]['fusion_current_version']);console['log'](_0x49c3('0x27')+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x28')]);console[_0x49c3('0xe')]('fusion_gamepad_available\x20:\x20'+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x29')]);console[_0x49c3('0xe')](_0x49c3('0x2a')+JSON[_0x49c3('0x2b')](_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x18')]));console[_0x49c3('0xe')](_0x49c3('0x2c')+JSON[_0x49c3('0x2b')](_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x2d')]));console[_0x49c3('0xe')](_0x49c3('0x2e')+_0x4c09c3[_0x49c3('0x2f')]['type']);console[_0x49c3('0xe')](_0x49c3('0x30')+JSON[_0x49c3('0x2b')](_0x4c09c3['SocketVariables'][_0x49c3('0x16')]));console['log']('-----------------------------------------------------');_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')]('battery-level',_0x4c09c3['SocketVariables'][_0x49c3('0x23')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x32'),_0x4c09c3['SocketVariables'][_0x49c3('0x25')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x33'),_0x4c09c3['SocketVariables'][_0x49c3('0x34')]);_0x3445b4['sockets']['emit'](_0x49c3('0x35'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x28')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')]('gamepad-available',_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x29')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x1e'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x18')]);_0x3445b4['sockets'][_0x49c3('0x10')](_0x49c3('0x36'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x2d')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x37'),_0x4c09c3[_0x49c3('0x2f')][_0x49c3('0x38')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x39'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x16')]);_0x26846f=0x0;}else{setTimeout(_0x28b51b,0x7d0);}}function _0x4d4144(){_0x3445b4['sockets'][_0x49c3('0x10')](_0x49c3('0x3a'),_0x4c09c3['SocketVariables'][_0x49c3('0x23')]);_0x3445b4['sockets'][_0x49c3('0x10')](_0x49c3('0x32'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x25')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')](_0x49c3('0x33'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x34')]);_0x3445b4['sockets'][_0x49c3('0x10')](_0x49c3('0x35'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x28')]);_0x3445b4['sockets']['emit'](_0x49c3('0x3b'),_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x29')]);_0x3445b4[_0x49c3('0x31')]['emit']('diagnostics_running',_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x18')]);_0x3445b4[_0x49c3('0x31')][_0x49c3('0x10')]('wifi-connection',_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x2d')]);_0x3445b4[_0x49c3('0x31')]['emit'](_0x49c3('0x39'),_0x4c09c3['SocketVariables'][_0x49c3('0x16')]);}function _0x27c727(){if(os['platform']()!='win32'){var _0x2a53c6='./scripts/ReadBatt.py';var _0x228551=spawn(_0x49c3('0x3c'),[_0x2a53c6],{'stdio':_0x49c3('0x3d')});_0x228551[_0x49c3('0x3e')]['on']('data',function(_0x18eb8a){_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x23')]=String(_0x18eb8a)[_0x49c3('0x3f')]();_0x26846f++;});_0x228551[_0x49c3('0x40')]['on'](_0x49c3('0x41'),function(_0x2a4f65){console[_0x49c3('0xe')](_0x49c3('0x42')+String(_0x2a4f65));});}else{_0x26846f++;}}function _0x37afb1(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x49c3('0x43')](function(){_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x25')]=!![];_0x26846f++;})[_0x49c3('0x44')](function(){_0x4c09c3['SocketVariables'][_0x49c3('0x25')]=![];_0x26846f++;});}function _0x3da091(){shell['exec']('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x357d3c,_0x55b0f2,_0x163d03){(function(_0x5e97a1){_0x4c09c3[_0x49c3('0x15')]['fusion_current_SHA']=_0x5e97a1[_0x49c3('0x3f')]();_0x26846f++;_0xba4594();}(_0x55b0f2['trim']()));});}function _0xba4594(){shell[_0x49c3('0x45')](_0x49c3('0x46')+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x47')],{'silent':!![]},function(_0x552962,_0x3095d4,_0x1716ab){(function(_0x538886){_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x34')]=_0x538886[_0x49c3('0x3f')]();_0x26846f++;_0x75e859();}(_0x3095d4[_0x49c3('0x3f')]()));});}function _0x75e859(){if(_0x11f4b9==_0x49c3('0x48')){shell['exec'](_0x49c3('0x49'),{'silent':!![]},function(_0x4c87d5,_0x418580,_0x5c0e53){(function(_0x2994e6){_0x26846f++;_0x26c0a2();}(_0x418580[_0x49c3('0x3f')]()));});}else{_0x26846f++;_0x26c0a2();}}function _0x26c0a2(){shell[_0x49c3('0x45')](_0x49c3('0x4a'),{'silent':!![]},function(_0x12d045,_0x558d76,_0x108d2b){(function(_0x202f69){_0x4c09c3[_0x49c3('0x15')]['fusion_latest_SHA']=_0x202f69['trim']();_0x26846f++;_0x1331f0();}(_0x558d76[_0x49c3('0x3f')]()));});}function _0x1331f0(){shell[_0x49c3('0x45')](_0x49c3('0x46')+_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x4b')],{'silent':!![]},function(_0x27e154,_0xc4aa38,_0x37d92a){(function(_0x3b3f5b){_0x4c09c3['SocketVariables'][_0x49c3('0x4c')]=_0x3b3f5b[_0x49c3('0x3f')]();_0x26846f++;}(_0xc4aa38[_0x49c3('0x3f')]()));});}function _0x6f4f96(){if(_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x47')]!=_0x4c09c3[_0x49c3('0x15')]['fusion_latest_SHA']){_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x28')]=!![];}else{_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x28')]=![];}_0x26846f++;}function _0x330240(){if(os['platform']()!='win32'){shell[_0x49c3('0x45')](_0x49c3('0x4d'),{'silent':!![]},function(_0xff5401,_0x25b0e9,_0x207914){(function(_0x23a632){_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x29')]=_0x23a632[_0x49c3('0x3f')]();if(!_0x4c09c3['SocketVariables'][_0x49c3('0x29')])_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x29')]=![];else _0x4c09c3[_0x49c3('0x15')]['fusion_gamepad_available']=!![];_0x26846f++;}(_0x25b0e9[_0x49c3('0x3f')]()));});}else{_0x4c09c3[_0x49c3('0x15')]['fusion_gamepad_available']=![];_0x26846f++;}}function _0x4d9686(){if(os[_0x49c3('0x4e')]()!='win32'){shell['exec'](_0x49c3('0x4f'),{'silent':!![]},function(_0x591889,_0x107c13,_0x3b5abf){(function(_0x218c34){var _0x4a03e5=_0x218c34[_0x49c3('0x3f')]();if(_0x4a03e5){if(_0x4c09c3[_0x49c3('0x15')]['fusion_diagnostics_running'])_0x4c09c3[_0x49c3('0x15')]['fusion_diagnostics_running'][_0x49c3('0x50')]=_0x4a03e5;else{_0x4c09c3['SocketVariables'][_0x49c3('0x18')]={'process':_0x4a03e5,'socket':-0x1};}}else _0x4c09c3[_0x49c3('0x15')]['fusion_diagnostics_running']=null;_0x26846f++;}(_0x107c13[_0x49c3('0x3f')]()));});}else{_0x4c09c3[_0x49c3('0x15')]['fusion_gamepad_available']=null;_0x26846f++;}}function _0x143c80(){wpa_cli['status'](config[_0x49c3('0x51')](_0x49c3('0x52')),function(_0x41fc5e,_0x3b570c){if(_0x41fc5e){_0x3b570c={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x4c09c3[_0x49c3('0x15')][_0x49c3('0x2d')]=_0x3b570c;_0x26846f++;});}_0x28b51b();_0x3135f8();setInterval(function(){_0x28b51b();_0x3135f8();},0x2710);};