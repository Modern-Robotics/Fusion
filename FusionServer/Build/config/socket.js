var _0x27fc=['win32','./scripts/ReadBatt.py','pipe','data','trim','stderr','then','catch','exec','fusion_current_SHA','git\x20fetch','git\x20describe\x20--tags\x20','fusion_latest_SHA','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','get','Wifi_NIC','child_process','internet-available','shelljs','env','NODE_ENV','dev','path','config','connectedClients','split','sep','pop','push','log','Client\x20connected...','join','emit','Hello\x20from\x20server','success','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','statusCode','sockets','diagnostics_running','indexOf','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','battery-level','internet-access','fusion_current_version','update-available','version-number','gamepad-available','wifi-connection','platform'];(function(_0x214c30,_0x57d012){var _0x336815=function(_0x163661){while(--_0x163661){_0x214c30['push'](_0x214c30['shift']());}};_0x336815(++_0x57d012);}(_0x27fc,0x1e2));var _0x45aa=function(_0x214c30,_0x57d012){_0x214c30=_0x214c30-0x0;var _0x336815=_0x27fc[_0x214c30];return _0x336815;};var spawn=require(_0x45aa('0x0'))['spawn'];var internetAvailable=require(_0x45aa('0x1'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require(_0x45aa('0x2'));var env=process[_0x45aa('0x3')][_0x45aa('0x4')]||_0x45aa('0x5');var path=require(_0x45aa('0x6'));var request=require('request');const config=require(_0x45aa('0x7'));module['exports']=function(_0x1a4da4,_0x18a81d,_0x2cdaa5){_0x2cdaa5[_0x45aa('0x8')]=[];var _0x582986=path['dirname'](__dirname)[_0x45aa('0x9')](path[_0x45aa('0xa')])[_0x45aa('0xb')]();var _0x325117=0x0;var _0x2f2a3f=0xb;_0x1a4da4['on']('connection',function(_0x238ebe){_0x2cdaa5[_0x45aa('0x8')][_0x45aa('0xc')](_0x238ebe);console[_0x45aa('0xd')](_0x45aa('0xe'));_0x2381c0();_0x238ebe['on'](_0x45aa('0xf'),function(_0x1572b1){console[_0x45aa('0xd')](_0x1572b1);_0x238ebe[_0x45aa('0x10')]('global-message',{'message':_0x45aa('0x11'),'type':_0x45aa('0x12')});});_0x238ebe['on']('disconnect',function(_0x313ce7){console['log']('Client\x20disconnected\x20-\x20'+_0x313ce7);if(_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x14')])if(_0x2cdaa5['SocketVariables'][_0x45aa('0x14')][_0x45aa('0x15')]==_0x238ebe['id'])_0x18a81d[_0x45aa('0x16')]();if(_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')])if(_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')]['socket']==_0x238ebe['id']){console['log'](_0x45aa('0x18'));request({'url':_0x45aa('0x19'),'method':_0x45aa('0x1a')},function(_0x481fe5,_0xda8626,_0x3d9410){if(_0x481fe5)console[_0x45aa('0xd')]('Error\x20terminating\x20diagnostic\x20tools\x20:\x20'+_0x481fe5);else{if(_0xda8626[_0x45aa('0x1b')]==0xc8){_0x2cdaa5[_0x45aa('0x13')]['fusion_diagnostics_running']=null;}}_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')](_0x45aa('0x1d'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')]);});}var _0x1b04b2=_0x2cdaa5[_0x45aa('0x8')][_0x45aa('0x1e')](_0x238ebe);_0x2cdaa5[_0x45aa('0x8')][_0x45aa('0x1f')](_0x1b04b2,0x1);});_0x238ebe['on']('error',function(_0x257643){console['log'](_0x45aa('0x20')+_0x257643);});});function _0x586e15(){_0x5dfb9f();_0x1d3f8b();_0x801ab2();_0x2c3d73();_0x4bb197();_0x31ac3e();_0x9bf97b();}function _0x42d459(){if(_0x325117>=_0x2f2a3f){console[_0x45aa('0xd')](_0x45aa('0x21'));console[_0x45aa('0xd')](_0x45aa('0x22')+_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x23')]);console[_0x45aa('0xd')]('fusion_internet_access\x20:\x20'+_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x24')]);console[_0x45aa('0xd')](_0x45aa('0x25')+_0x2cdaa5[_0x45aa('0x13')]['fusion_current_version']);console['log'](_0x45aa('0x26')+_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x27')]);console['log'](_0x45aa('0x28')+_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x29')]);console[_0x45aa('0xd')](_0x45aa('0x2a')+JSON[_0x45aa('0x2b')](_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')]));console['log'](_0x45aa('0x2c')+JSON[_0x45aa('0x2b')](_0x2cdaa5['SocketVariables'][_0x45aa('0x2d')]));console['log'](_0x45aa('0x2e')+_0x2cdaa5[_0x45aa('0x2f')][_0x45aa('0x30')]);console[_0x45aa('0xd')]('fusion_program_running\x20:\x20'+JSON['stringify'](_0x2cdaa5['SocketVariables'][_0x45aa('0x14')]));console[_0x45aa('0xd')](_0x45aa('0x21'));_0x1a4da4[_0x45aa('0x1c')]['emit'](_0x45aa('0x31'),_0x2cdaa5[_0x45aa('0x13')]['fusion_battery_level']);_0x1a4da4[_0x45aa('0x1c')]['emit'](_0x45aa('0x32'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x24')]);_0x1a4da4[_0x45aa('0x1c')]['emit']('version-number',_0x2cdaa5['SocketVariables'][_0x45aa('0x33')]);_0x1a4da4['sockets'][_0x45aa('0x10')](_0x45aa('0x34'),_0x2cdaa5[_0x45aa('0x13')]['fusion_update_available']);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')]('gamepad-available',_0x2cdaa5[_0x45aa('0x13')]['fusion_gamepad_available']);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')](_0x45aa('0x1d'),_0x2cdaa5[_0x45aa('0x13')]['fusion_diagnostics_running']);_0x1a4da4['sockets']['emit']('wifi-connection',_0x2cdaa5['SocketVariables'][_0x45aa('0x2d')]);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')]('wifi-fusion_storage_type',_0x2cdaa5[_0x45aa('0x2f')]['type']);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')]('program-running',_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x14')]);_0x325117=0x0;}else{setTimeout(_0x42d459,0x7d0);}}function _0x2381c0(){_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')](_0x45aa('0x31'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x23')]);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')](_0x45aa('0x32'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x24')]);_0x1a4da4['sockets'][_0x45aa('0x10')](_0x45aa('0x35'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x33')]);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')]('update-available',_0x2cdaa5['SocketVariables'][_0x45aa('0x27')]);_0x1a4da4[_0x45aa('0x1c')]['emit'](_0x45aa('0x36'),_0x2cdaa5['SocketVariables'][_0x45aa('0x29')]);_0x1a4da4[_0x45aa('0x1c')][_0x45aa('0x10')](_0x45aa('0x1d'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')]);_0x1a4da4[_0x45aa('0x1c')]['emit'](_0x45aa('0x37'),_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x2d')]);_0x1a4da4[_0x45aa('0x1c')]['emit']('program-running',_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x14')]);}function _0x5dfb9f(){if(os[_0x45aa('0x38')]()!=_0x45aa('0x39')){var _0x59faec=_0x45aa('0x3a');var _0x6ba4c1=spawn('python',[_0x59faec],{'stdio':_0x45aa('0x3b')});_0x6ba4c1['stdout']['on'](_0x45aa('0x3c'),function(_0x23169b){_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x23')]=String(_0x23169b)[_0x45aa('0x3d')]();_0x325117++;});_0x6ba4c1[_0x45aa('0x3e')]['on'](_0x45aa('0x3c'),function(_0x2a1c16){console[_0x45aa('0xd')]('Error\x20reading\x20battery\x20:\x20\x0a'+String(_0x2a1c16));});}else{_0x325117++;}}function _0x1d3f8b(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x45aa('0x3f')](function(){_0x2cdaa5['SocketVariables'][_0x45aa('0x24')]=!![];_0x325117++;})[_0x45aa('0x40')](function(){_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x24')]=![];_0x325117++;});}function _0x801ab2(){shell[_0x45aa('0x41')]('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x2ff1ae,_0x565507,_0x27e528){(function(_0x28358e){_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x42')]=_0x28358e['trim']();_0x325117++;_0x2cd9a4();}(_0x565507[_0x45aa('0x3d')]()));});}function _0x2cd9a4(){shell[_0x45aa('0x41')]('git\x20describe\x20--tags\x20'+_0x2cdaa5['SocketVariables'][_0x45aa('0x42')],{'silent':!![]},function(_0x496c93,_0x5f28a0,_0x51436b){(function(_0x45362a){_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x33')]=_0x45362a['trim']();_0x325117++;_0x800618();}(_0x5f28a0['trim']()));});}function _0x800618(){if(_0x582986=='Build'){shell['exec'](_0x45aa('0x43'),{'silent':!![]},function(_0x5dd13a,_0x21add6,_0x30e16a){(function(_0x33264c){_0x325117++;_0x423077();}(_0x21add6[_0x45aa('0x3d')]()));});}else{_0x325117++;_0x423077();}}function _0x423077(){shell[_0x45aa('0x41')]('git\x20rev-list\x20--tags\x20--max-count=1',{'silent':!![]},function(_0x386d5d,_0x213910,_0x4f7fc4){(function(_0xae8582){_0x2cdaa5[_0x45aa('0x13')]['fusion_latest_SHA']=_0xae8582['trim']();_0x325117++;_0x425b94();}(_0x213910[_0x45aa('0x3d')]()));});}function _0x425b94(){shell[_0x45aa('0x41')](_0x45aa('0x44')+_0x2cdaa5['SocketVariables'][_0x45aa('0x45')],{'silent':!![]},function(_0x173493,_0x51fa02,_0x3e2c5e){(function(_0x2172e8){_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x46')]=_0x2172e8[_0x45aa('0x3d')]();_0x325117++;}(_0x51fa02[_0x45aa('0x3d')]()));});}function _0x2c3d73(){if(_0x2cdaa5[_0x45aa('0x13')]['fusion_current_SHA']!=_0x2cdaa5[_0x45aa('0x13')]['fusion_latest_SHA']){_0x2cdaa5[_0x45aa('0x13')]['fusion_update_available']=!![];}else{_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x27')]=![];}_0x325117++;}function _0x4bb197(){if(os['platform']()!=_0x45aa('0x39')){shell[_0x45aa('0x41')](_0x45aa('0x47'),{'silent':!![]},function(_0x194ef4,_0x48f184,_0x30cb1b){(function(_0x2f48ad){_0x2cdaa5[_0x45aa('0x13')]['fusion_gamepad_available']=_0x2f48ad['trim']();if(!_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x29')])_0x2cdaa5[_0x45aa('0x13')]['fusion_gamepad_available']=![];else _0x2cdaa5['SocketVariables']['fusion_gamepad_available']=!![];_0x325117++;}(_0x48f184[_0x45aa('0x3d')]()));});}else{_0x2cdaa5[_0x45aa('0x13')]['fusion_gamepad_available']=![];_0x325117++;}}function _0x31ac3e(){if(os[_0x45aa('0x38')]()!=_0x45aa('0x39')){shell[_0x45aa('0x41')](_0x45aa('0x48'),{'silent':!![]},function(_0x15d5df,_0x36b2ba,_0x3c5df4){(function(_0x5bbab0){var _0x5964a9=_0x5bbab0[_0x45aa('0x3d')]();if(_0x5964a9){if(_0x2cdaa5['SocketVariables']['fusion_diagnostics_running'])_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')][_0x45aa('0x49')]=_0x5964a9;else{_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x17')]={'process':_0x5964a9,'socket':-0x1};}}else _0x2cdaa5['SocketVariables'][_0x45aa('0x17')]=null;_0x325117++;}(_0x36b2ba['trim']()));});}else{_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x29')]=null;_0x325117++;}}function _0x9bf97b(){wpa_cli[_0x45aa('0x4a')](config[_0x45aa('0x4b')](_0x45aa('0x4c')),function(_0x37e29e,_0x2f231f){if(_0x37e29e){_0x2f231f={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x2cdaa5[_0x45aa('0x13')][_0x45aa('0x2d')]=_0x2f231f;_0x325117++;});}_0x42d459();_0x586e15();setInterval(function(){_0x42d459();_0x586e15();},0x2710);};