var _0x5ec4=['error','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','fusion_wifi_access\x20:\x20','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','stringify','battery-level','internet-access','update-available','wifi-connection','fusion_wifi_access','wifi-fusion_storage_type','program-running','gamepad-available','platform','win32','./scripts/ReadBatt.py','python','pipe','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','process','get','Wifi_NIC','child_process','spawn','internet-available','shelljs','env','NODE_ENV','dev','path','request','config','exports','connectedClients','split','sep','pop','connection','push','log','emit','global-message','Hello\x20from\x20server','success','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','socket','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','diagnostics_running','indexOf','splice'];(function(_0xb8dad3,_0x26c449){var _0x1ca942=function(_0x22c0ef){while(--_0x22c0ef){_0xb8dad3['push'](_0xb8dad3['shift']());}};_0x1ca942(++_0x26c449);}(_0x5ec4,0x186));var _0x1846=function(_0x171ad2,_0x252e41){_0x171ad2=_0x171ad2-0x0;var _0xe3bbec=_0x5ec4[_0x171ad2];return _0xe3bbec;};var spawn=require(_0x1846('0x0'))[_0x1846('0x1')];var internetAvailable=require(_0x1846('0x2'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require(_0x1846('0x3'));var env=process[_0x1846('0x4')][_0x1846('0x5')]||_0x1846('0x6');var path=require(_0x1846('0x7'));var request=require(_0x1846('0x8'));const config=require(_0x1846('0x9'));module[_0x1846('0xa')]=function(_0x51e7e2,_0x5b4966,_0x416689){_0x416689[_0x1846('0xb')]=[];var _0x3b9845=path['dirname'](__dirname)[_0x1846('0xc')](path[_0x1846('0xd')])[_0x1846('0xe')]();var _0x1fd36e=0x0;var _0x443829=0xb;_0x51e7e2['on'](_0x1846('0xf'),function(_0x38d6a4){_0x416689[_0x1846('0xb')][_0x1846('0x10')](_0x38d6a4);console[_0x1846('0x11')]('Client\x20connected...');_0x59a52d();_0x38d6a4['on']('join',function(_0x28a1f7){console[_0x1846('0x11')](_0x28a1f7);_0x38d6a4[_0x1846('0x12')](_0x1846('0x13'),{'message':_0x1846('0x14'),'type':_0x1846('0x15')});});_0x38d6a4['on']('disconnect',function(_0x5157f8){console['log']('Client\x20disconnected\x20-\x20'+_0x5157f8);if(_0x416689[_0x1846('0x16')][_0x1846('0x17')])if(_0x416689[_0x1846('0x16')][_0x1846('0x17')][_0x1846('0x18')]==_0x38d6a4['id'])_0x5b4966[_0x1846('0x19')]();if(_0x416689[_0x1846('0x16')][_0x1846('0x1a')])if(_0x416689[_0x1846('0x16')][_0x1846('0x1a')][_0x1846('0x1b')]==_0x38d6a4['id']){console[_0x1846('0x11')]('Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client');request({'url':'http://localhost:8080/api/diagnostics/stop','method':_0x1846('0x1c')},function(_0x44d6fb,_0x5319a0,_0x4fb86f){if(_0x44d6fb)console[_0x1846('0x11')](_0x1846('0x1d')+_0x44d6fb);else{if(_0x5319a0[_0x1846('0x1e')]==0xc8){_0x416689[_0x1846('0x16')]['fusion_diagnostics_running']=null;}}_0x51e7e2[_0x1846('0x1f')]['emit'](_0x1846('0x20'),_0x416689[_0x1846('0x16')]['fusion_diagnostics_running']);});}var _0x4dbf0c=_0x416689['connectedClients'][_0x1846('0x21')](_0x38d6a4);_0x416689[_0x1846('0xb')][_0x1846('0x22')](_0x4dbf0c,0x1);});_0x38d6a4['on'](_0x1846('0x23'),function(_0x47563c){console[_0x1846('0x11')]('Socket\x20error\x20-\x20'+_0x47563c);});});function _0x4df788(){_0x1fc238();_0x237658();_0x478e05();_0x44b503();_0x562d2c();_0x59fc40();_0x36b3ea();}function _0xe4f0d4(){if(_0x1fd36e>=_0x443829){console['log'](_0x1846('0x24'));console[_0x1846('0x11')](_0x1846('0x25')+_0x416689['SocketVariables'][_0x1846('0x26')]);console[_0x1846('0x11')](_0x1846('0x27')+_0x416689[_0x1846('0x16')][_0x1846('0x28')]);console[_0x1846('0x11')](_0x1846('0x29')+_0x416689[_0x1846('0x16')][_0x1846('0x2a')]);console[_0x1846('0x11')](_0x1846('0x2b')+_0x416689['SocketVariables'][_0x1846('0x2c')]);console[_0x1846('0x11')](_0x1846('0x2d')+_0x416689['SocketVariables'][_0x1846('0x2e')]);console[_0x1846('0x11')](_0x1846('0x2f')+JSON['stringify'](_0x416689[_0x1846('0x16')]['fusion_diagnostics_running']));console[_0x1846('0x11')](_0x1846('0x30')+JSON['stringify'](_0x416689[_0x1846('0x16')]['fusion_wifi_access']));console[_0x1846('0x11')](_0x1846('0x31')+_0x416689[_0x1846('0x32')][_0x1846('0x33')]);console[_0x1846('0x11')](_0x1846('0x34')+JSON[_0x1846('0x35')](_0x416689[_0x1846('0x16')][_0x1846('0x17')]));console[_0x1846('0x11')]('-----------------------------------------------------');_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x36'),_0x416689['SocketVariables']['fusion_battery_level']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x37'),_0x416689['SocketVariables'][_0x1846('0x28')]);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')]('version-number',_0x416689[_0x1846('0x16')][_0x1846('0x2a')]);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x38'),_0x416689[_0x1846('0x16')]['fusion_update_available']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')]('gamepad-available',_0x416689[_0x1846('0x16')][_0x1846('0x2e')]);_0x51e7e2[_0x1846('0x1f')]['emit']('diagnostics_running',_0x416689['SocketVariables']['fusion_diagnostics_running']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x39'),_0x416689[_0x1846('0x16')][_0x1846('0x3a')]);_0x51e7e2[_0x1846('0x1f')]['emit'](_0x1846('0x3b'),_0x416689[_0x1846('0x32')][_0x1846('0x33')]);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x3c'),_0x416689[_0x1846('0x16')][_0x1846('0x17')]);_0x1fd36e=0x0;}else{setTimeout(_0xe4f0d4,0x7d0);}}function _0x59a52d(){_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x36'),_0x416689[_0x1846('0x16')][_0x1846('0x26')]);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x37'),_0x416689[_0x1846('0x16')][_0x1846('0x28')]);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')]('version-number',_0x416689[_0x1846('0x16')]['fusion_current_version']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x38'),_0x416689[_0x1846('0x16')]['fusion_update_available']);_0x51e7e2['sockets'][_0x1846('0x12')](_0x1846('0x3d'),_0x416689[_0x1846('0x16')][_0x1846('0x2e')]);_0x51e7e2['sockets']['emit']('diagnostics_running',_0x416689[_0x1846('0x16')]['fusion_diagnostics_running']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x39'),_0x416689['SocketVariables']['fusion_wifi_access']);_0x51e7e2[_0x1846('0x1f')][_0x1846('0x12')](_0x1846('0x3c'),_0x416689[_0x1846('0x16')][_0x1846('0x17')]);}function _0x1fc238(){if(os[_0x1846('0x3e')]()!=_0x1846('0x3f')){var _0xf2dab8=_0x1846('0x40');var _0x574c13=spawn(_0x1846('0x41'),[_0xf2dab8],{'stdio':_0x1846('0x42')});_0x574c13['stdout']['on'](_0x1846('0x43'),function(_0x281a9b){_0x416689['SocketVariables'][_0x1846('0x26')]=String(_0x281a9b)[_0x1846('0x44')]();_0x1fd36e++;});_0x574c13[_0x1846('0x45')]['on'](_0x1846('0x43'),function(_0xfbb028){console[_0x1846('0x11')](_0x1846('0x46')+String(_0xfbb028));});}else{_0x1fd36e++;}}function _0x237658(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x1846('0x47')](function(){_0x416689[_0x1846('0x16')][_0x1846('0x28')]=!![];_0x1fd36e++;})['catch'](function(){_0x416689[_0x1846('0x16')][_0x1846('0x28')]=![];_0x1fd36e++;});}function _0x478e05(){shell[_0x1846('0x48')](_0x1846('0x49'),{'silent':!![]},function(_0x37e1ea,_0x242918,_0x358b8c){(function(_0x6c7e30){_0x416689[_0x1846('0x16')][_0x1846('0x4a')]=_0x6c7e30[_0x1846('0x44')]();_0x1fd36e++;_0x98bd51();}(_0x242918[_0x1846('0x44')]()));});}function _0x98bd51(){shell['exec'](_0x1846('0x4b')+_0x416689[_0x1846('0x16')][_0x1846('0x4a')],{'silent':!![]},function(_0x495208,_0x191310,_0x275178){(function(_0x5b8915){_0x416689[_0x1846('0x16')][_0x1846('0x2a')]=_0x5b8915[_0x1846('0x44')]();_0x1fd36e++;_0x23cb35();}(_0x191310[_0x1846('0x44')]()));});}function _0x23cb35(){if(_0x3b9845==_0x1846('0x4c')){shell[_0x1846('0x48')](_0x1846('0x4d'),{'silent':!![]},function(_0x2eef16,_0x1ff6da,_0x3268c4){(function(_0x19ced5){_0x1fd36e++;_0x4bb344();}(_0x1ff6da[_0x1846('0x44')]()));});}else{_0x1fd36e++;_0x4bb344();}}function _0x4bb344(){shell['exec'](_0x1846('0x4e'),{'silent':!![]},function(_0x25908b,_0x2ccfed,_0x305f9c){(function(_0x79865){_0x416689[_0x1846('0x16')]['fusion_latest_SHA']=_0x79865[_0x1846('0x44')]();_0x1fd36e++;_0x37b30c();}(_0x2ccfed[_0x1846('0x44')]()));});}function _0x37b30c(){shell[_0x1846('0x48')](_0x1846('0x4b')+_0x416689[_0x1846('0x16')][_0x1846('0x4f')],{'silent':!![]},function(_0x12be49,_0x37a446,_0x29db14){(function(_0x71a879){_0x416689[_0x1846('0x16')][_0x1846('0x50')]=_0x71a879[_0x1846('0x44')]();_0x1fd36e++;}(_0x37a446[_0x1846('0x44')]()));});}function _0x44b503(){if(_0x416689[_0x1846('0x16')][_0x1846('0x4a')]!=_0x416689[_0x1846('0x16')][_0x1846('0x4f')]){_0x416689['SocketVariables'][_0x1846('0x2c')]=!![];}else{_0x416689['SocketVariables'][_0x1846('0x2c')]=![];}_0x1fd36e++;}function _0x562d2c(){if(os['platform']()!=_0x1846('0x3f')){shell[_0x1846('0x48')](_0x1846('0x51'),{'silent':!![]},function(_0x4b09bf,_0x2b15d3,_0x4bb6dd){(function(_0x5e50ba){_0x416689[_0x1846('0x16')]['fusion_gamepad_available']=_0x5e50ba[_0x1846('0x44')]();if(!_0x416689[_0x1846('0x16')][_0x1846('0x2e')])_0x416689[_0x1846('0x16')][_0x1846('0x2e')]=![];else _0x416689[_0x1846('0x16')][_0x1846('0x2e')]=!![];_0x1fd36e++;}(_0x2b15d3['trim']()));});}else{_0x416689[_0x1846('0x16')][_0x1846('0x2e')]=![];_0x1fd36e++;}}function _0x59fc40(){if(os[_0x1846('0x3e')]()!=_0x1846('0x3f')){shell[_0x1846('0x48')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x1a0645,_0x57fdad,_0x272c54){(function(_0x109598){var _0x1d2378=_0x109598[_0x1846('0x44')]();if(_0x1d2378){if(_0x416689[_0x1846('0x16')]['fusion_diagnostics_running'])_0x416689[_0x1846('0x16')]['fusion_diagnostics_running'][_0x1846('0x52')]=_0x1d2378;else{_0x416689['SocketVariables'][_0x1846('0x1a')]={'process':_0x1d2378,'socket':-0x1};}}else _0x416689['SocketVariables'][_0x1846('0x1a')]=null;_0x1fd36e++;}(_0x57fdad[_0x1846('0x44')]()));});}else{_0x416689[_0x1846('0x16')][_0x1846('0x2e')]=null;_0x1fd36e++;}}function _0x36b3ea(){wpa_cli['status'](config[_0x1846('0x53')](_0x1846('0x54')),function(_0x2249c5,_0x290632){if(_0x2249c5){_0x290632={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x416689['SocketVariables'][_0x1846('0x3a')]=_0x290632;_0x1fd36e++;});}_0xe4f0d4();_0x4df788();setInterval(function(){_0xe4f0d4();_0x4df788();},0x2710);};