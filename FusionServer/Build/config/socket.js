var _0x2b9c=['request','connectedClients','split','pop','push','log','join','emit','global-message','Hello\x20from\x20server','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','fusion_diagnostics_running','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','sockets','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','Storage','type','battery-level','internet-access','fusion_internet_access','version-number','fusion_current_version','update-available','fusion_gamepad_available','wifi-fusion_storage_type','program-running','gamepad-available','wifi-connection','platform','win32','python','pipe','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','status','get','spawn','internet-available','wireless-tools/wpa_cli','env','NODE_ENV','path'];(function(_0x9cca61,_0x2ca01a){var _0x46295a=function(_0x105b64){while(--_0x105b64){_0x9cca61['push'](_0x9cca61['shift']());}};_0x46295a(++_0x2ca01a);}(_0x2b9c,0xd8));var _0x5a8c=function(_0xad7e28,_0x4a9ddc){_0xad7e28=_0xad7e28-0x0;var _0x1cb320=_0x2b9c[_0xad7e28];return _0x1cb320;};var spawn=require('child_process')[_0x5a8c('0x0')];var internetAvailable=require(_0x5a8c('0x1'));var wpa_cli=require(_0x5a8c('0x2'));var os=require('os');var shell=require('shelljs');var env=process[_0x5a8c('0x3')][_0x5a8c('0x4')]||'dev';var path=require(_0x5a8c('0x5'));var request=require(_0x5a8c('0x6'));const config=require('config');module['exports']=function(_0x192203,_0x514acb,_0xcf385a){_0xcf385a[_0x5a8c('0x7')]=[];var _0x13a97a=path['dirname'](__dirname)[_0x5a8c('0x8')](path['sep'])[_0x5a8c('0x9')]();var _0x548c4a=0x0;var _0x39d13d=0xb;_0x192203['on']('connection',function(_0x334c5b){_0xcf385a['connectedClients'][_0x5a8c('0xa')](_0x334c5b);console[_0x5a8c('0xb')]('Client\x20connected...');_0x2d179d();_0x334c5b['on'](_0x5a8c('0xc'),function(_0xbeb843){console['log'](_0xbeb843);_0x334c5b[_0x5a8c('0xd')](_0x5a8c('0xe'),{'message':_0x5a8c('0xf'),'type':'success'});});_0x334c5b['on'](_0x5a8c('0x10'),function(_0x511f03){console['log'](_0x5a8c('0x11')+_0x511f03);if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x13')])if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x13')][_0x5a8c('0x14')]==_0x334c5b['id'])_0x514acb['KillProgram']();if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')])if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]['socket']==_0x334c5b['id']){console[_0x5a8c('0xb')](_0x5a8c('0x16'));request({'url':_0x5a8c('0x17'),'method':_0x5a8c('0x18')},function(_0x31f958,_0x19a1d9,_0x2df77c){if(_0x31f958)console[_0x5a8c('0xb')](_0x5a8c('0x19')+_0x31f958);else{if(_0x19a1d9['statusCode']==0xc8){_0xcf385a['SocketVariables'][_0x5a8c('0x15')]=null;}}_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')]('diagnostics_running',_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]);});}var _0x3909c7=_0xcf385a[_0x5a8c('0x7')]['indexOf'](_0x334c5b);_0xcf385a['connectedClients'][_0x5a8c('0x1b')](_0x3909c7,0x1);});_0x334c5b['on']('error',function(_0x31e804){console[_0x5a8c('0xb')](_0x5a8c('0x1c')+_0x31e804);});});function _0x76554d(){_0x3a6c6e();_0x39840c();_0x554547();_0x20ee57();_0xeec4();_0x14563b();_0x2cff1b();}function _0x472718(){if(_0x548c4a>=_0x39d13d){console['log'](_0x5a8c('0x1d'));console['log']('fusion_battery_level\x20:\x20'+_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x1e')]);console[_0x5a8c('0xb')]('fusion_internet_access\x20:\x20'+_0xcf385a[_0x5a8c('0x12')]['fusion_internet_access']);console[_0x5a8c('0xb')](_0x5a8c('0x1f')+_0xcf385a[_0x5a8c('0x12')]['fusion_current_version']);console[_0x5a8c('0xb')](_0x5a8c('0x20')+_0xcf385a['SocketVariables'][_0x5a8c('0x21')]);console[_0x5a8c('0xb')](_0x5a8c('0x22')+_0xcf385a['SocketVariables']['fusion_gamepad_available']);console[_0x5a8c('0xb')](_0x5a8c('0x23')+JSON[_0x5a8c('0x24')](_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]));console[_0x5a8c('0xb')](_0x5a8c('0x25')+JSON['stringify'](_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x26')]));console[_0x5a8c('0xb')]('fusion_storage_type\x20:\x20'+_0xcf385a[_0x5a8c('0x27')][_0x5a8c('0x28')]);console[_0x5a8c('0xb')]('fusion_program_running\x20:\x20'+JSON[_0x5a8c('0x24')](_0xcf385a['SocketVariables'][_0x5a8c('0x13')]));console['log'](_0x5a8c('0x1d'));_0x192203[_0x5a8c('0x1a')]['emit'](_0x5a8c('0x29'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x1e')]);_0x192203['sockets'][_0x5a8c('0xd')](_0x5a8c('0x2a'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2b')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x2c'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2d')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x2e'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x21')]);_0x192203[_0x5a8c('0x1a')]['emit']('gamepad-available',_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2f')]);_0x192203['sockets'][_0x5a8c('0xd')]('diagnostics_running',_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')]('wifi-connection',_0xcf385a['SocketVariables'][_0x5a8c('0x26')]);_0x192203[_0x5a8c('0x1a')]['emit'](_0x5a8c('0x30'),_0xcf385a[_0x5a8c('0x27')][_0x5a8c('0x28')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x31'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x13')]);_0x548c4a=0x0;}else{setTimeout(_0x472718,0x7d0);}}function _0x2d179d(){_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x29'),_0xcf385a['SocketVariables']['fusion_battery_level']);_0x192203[_0x5a8c('0x1a')]['emit'](_0x5a8c('0x2a'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2b')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')]('version-number',_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2d')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x2e'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x21')]);_0x192203['sockets']['emit'](_0x5a8c('0x32'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2f')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')]('diagnostics_running',_0xcf385a['SocketVariables'][_0x5a8c('0x15')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')](_0x5a8c('0x33'),_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x26')]);_0x192203[_0x5a8c('0x1a')][_0x5a8c('0xd')]('program-running',_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x13')]);}function _0x3a6c6e(){if(os[_0x5a8c('0x34')]()!=_0x5a8c('0x35')){var _0x1d76b6='./scripts/ReadBatt.py';var _0x1c6f0b=spawn(_0x5a8c('0x36'),[_0x1d76b6],{'stdio':_0x5a8c('0x37')});_0x1c6f0b['stdout']['on'](_0x5a8c('0x38'),function(_0x3b4d4c){_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x1e')]=String(_0x3b4d4c)[_0x5a8c('0x39')]();_0x548c4a++;});_0x1c6f0b[_0x5a8c('0x3a')]['on'](_0x5a8c('0x38'),function(_0x37103e){console[_0x5a8c('0xb')](_0x5a8c('0x3b')+String(_0x37103e));});}else{_0x548c4a++;}}function _0x39840c(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x5a8c('0x3c')](function(){_0xcf385a['SocketVariables'][_0x5a8c('0x2b')]=!![];_0x548c4a++;})['catch'](function(){_0xcf385a['SocketVariables'][_0x5a8c('0x2b')]=![];_0x548c4a++;});}function _0x554547(){shell[_0x5a8c('0x3d')](_0x5a8c('0x3e'),{'silent':!![]},function(_0x53e79a,_0x5e1bb7,_0x2a9017){(function(_0x2a0d30){_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x3f')]=_0x2a0d30[_0x5a8c('0x39')]();_0x548c4a++;_0xbe8622();}(_0x5e1bb7[_0x5a8c('0x39')]()));});}function _0xbe8622(){shell['exec'](_0x5a8c('0x40')+_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x3f')],{'silent':!![]},function(_0xc7ed31,_0x2ad1c7,_0x16c5ee){(function(_0x24ee6d){_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2d')]=_0x24ee6d[_0x5a8c('0x39')]();_0x548c4a++;_0x1e3bd3();}(_0x2ad1c7[_0x5a8c('0x39')]()));});}function _0x1e3bd3(){if(_0x13a97a==_0x5a8c('0x41')){shell[_0x5a8c('0x3d')](_0x5a8c('0x42'),{'silent':!![]},function(_0xe83b0f,_0x5926e9,_0x116090){(function(_0x9b9120){_0x548c4a++;_0x4dc969();}(_0x5926e9[_0x5a8c('0x39')]()));});}else{_0x548c4a++;_0x4dc969();}}function _0x4dc969(){shell[_0x5a8c('0x3d')](_0x5a8c('0x43'),{'silent':!![]},function(_0x587db5,_0x122360,_0x52de05){(function(_0x4146c6){_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x44')]=_0x4146c6[_0x5a8c('0x39')]();_0x548c4a++;_0x1d057b();}(_0x122360[_0x5a8c('0x39')]()));});}function _0x1d057b(){shell['exec'](_0x5a8c('0x40')+_0xcf385a[_0x5a8c('0x12')]['fusion_latest_SHA'],{'silent':!![]},function(_0x3fb690,_0x224810,_0x29079b){(function(_0x1df148){_0xcf385a['SocketVariables'][_0x5a8c('0x45')]=_0x1df148['trim']();_0x548c4a++;}(_0x224810[_0x5a8c('0x39')]()));});}function _0x20ee57(){if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x3f')]!=_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x44')]){_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x21')]=!![];}else{_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x21')]=![];}_0x548c4a++;}function _0xeec4(){if(os['platform']()!=_0x5a8c('0x35')){shell['exec'](_0x5a8c('0x46'),{'silent':!![]},function(_0x336a0d,_0x14da1b,_0x3d4987){(function(_0x4a2207){_0xcf385a['SocketVariables'][_0x5a8c('0x2f')]=_0x4a2207['trim']();if(!_0xcf385a[_0x5a8c('0x12')]['fusion_gamepad_available'])_0xcf385a[_0x5a8c('0x12')]['fusion_gamepad_available']=![];else _0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2f')]=!![];_0x548c4a++;}(_0x14da1b[_0x5a8c('0x39')]()));});}else{_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x2f')]=![];_0x548c4a++;}}function _0x14563b(){if(os['platform']()!=_0x5a8c('0x35')){shell[_0x5a8c('0x3d')](_0x5a8c('0x47'),{'silent':!![]},function(_0x3f7593,_0x4def62,_0x439643){(function(_0x3c320f){var _0x32e04a=_0x3c320f['trim']();if(_0x32e04a){if(_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')])_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]['process']=_0x32e04a;else{_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]={'process':_0x32e04a,'socket':-0x1};}}else _0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x15')]=null;_0x548c4a++;}(_0x4def62['trim']()));});}else{_0xcf385a[_0x5a8c('0x12')]['fusion_gamepad_available']=null;_0x548c4a++;}}function _0x2cff1b(){wpa_cli[_0x5a8c('0x48')](config[_0x5a8c('0x49')]('Wifi_NIC'),function(_0x2ad525,_0x3332cd){if(_0x2ad525){_0x3332cd={'ssid':undefined,'ip':undefined,'mac':undefined};}_0xcf385a[_0x5a8c('0x12')][_0x5a8c('0x26')]=_0x3332cd;_0x548c4a++;});}_0x472718();_0x76554d();setInterval(function(){_0x472718();_0x76554d();},0x2710);};