var _0x28df=['exports','dirname','split','sep','pop','connection','connectedClients','push','log','Client\x20connected...','join','emit','global-message','Hello\x20from\x20server','success','disconnect','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','indexOf','splice','error','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','battery-level','internet-access','version-number','update-available','gamepad-available','fusion_gamepad_available','diagnostics_running','wifi-connection','wifi-fusion_storage_type','program-running','win32','./scripts/ReadBatt.py','pipe','stdout','data','trim','stderr','then','catch','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch','exec','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','platform','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','wlan1','child_process','internet-available','shelljs','NODE_ENV','dev','path','request'];(function(_0x1fa896,_0x316ceb){var _0x30f9bf=function(_0x6b5887){while(--_0x6b5887){_0x1fa896['push'](_0x1fa896['shift']());}};_0x30f9bf(++_0x316ceb);}(_0x28df,0x155));var _0x1044=function(_0x975781,_0x278087){_0x975781=_0x975781-0x0;var _0x320ab7=_0x28df[_0x975781];return _0x320ab7;};var spawn=require(_0x1044('0x0'))['spawn'];var internetAvailable=require(_0x1044('0x1'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require(_0x1044('0x2'));var env=process['env'][_0x1044('0x3')]||_0x1044('0x4');var path=require(_0x1044('0x5'));var request=require(_0x1044('0x6'));module[_0x1044('0x7')]=function(_0x4237c4,_0x31af8e,_0x342a5c){_0x342a5c['connectedClients']=[];var _0x3605cb=path[_0x1044('0x8')](__dirname)[_0x1044('0x9')](path[_0x1044('0xa')])[_0x1044('0xb')]();var _0x42eb56=0x0;var _0x378a04=0xb;_0x4237c4['on'](_0x1044('0xc'),function(_0x292ad8){_0x342a5c[_0x1044('0xd')][_0x1044('0xe')](_0x292ad8);console[_0x1044('0xf')](_0x1044('0x10'));_0x195b0c();_0x292ad8['on'](_0x1044('0x11'),function(_0x4bac66){console[_0x1044('0xf')](_0x4bac66);_0x292ad8[_0x1044('0x12')](_0x1044('0x13'),{'message':_0x1044('0x14'),'type':_0x1044('0x15')});});_0x292ad8['on'](_0x1044('0x16'),function(_0x57bc37){console[_0x1044('0xf')]('Client\x20disconnected\x20-\x20'+_0x57bc37);if(_0x342a5c[_0x1044('0x17')][_0x1044('0x18')])if(_0x342a5c['SocketVariables']['fusion_program_running'][_0x1044('0x19')]==_0x292ad8['id'])_0x31af8e[_0x1044('0x1a')]();if(_0x342a5c[_0x1044('0x17')]['fusion_diagnostics_running'])if(_0x342a5c['SocketVariables'][_0x1044('0x1b')][_0x1044('0x1c')]==_0x292ad8['id']){console['log'](_0x1044('0x1d'));request({'url':_0x1044('0x1e'),'method':'GET'},function(_0x1d82e8,_0x1be92e,_0x2e7038){if(_0x1d82e8)console[_0x1044('0xf')](_0x1044('0x1f')+_0x1d82e8);else{if(_0x1be92e[_0x1044('0x20')]==0xc8){_0x342a5c[_0x1044('0x17')]['fusion_diagnostics_running']=null;}}_0x4237c4[_0x1044('0x21')][_0x1044('0x12')]('diagnostics_running',_0x342a5c[_0x1044('0x17')][_0x1044('0x1b')]);});}var _0x4e5604=_0x342a5c[_0x1044('0xd')][_0x1044('0x22')](_0x292ad8);_0x342a5c[_0x1044('0xd')][_0x1044('0x23')](_0x4e5604,0x1);});_0x292ad8['on'](_0x1044('0x24'),function(_0x4de717){console['log'](_0x1044('0x25')+_0x4de717);});});function _0x7e962d(){_0x2ce850();_0x1c7829();_0x39cd19();_0x10ff5b();_0x57c919();_0x599d85();_0x204126();}function _0x1fa546(){if(_0x42eb56>=_0x378a04){console['log'](_0x1044('0x26'));console['log']('fusion_battery_level\x20:\x20'+_0x342a5c['SocketVariables'][_0x1044('0x27')]);console[_0x1044('0xf')](_0x1044('0x28')+_0x342a5c[_0x1044('0x17')][_0x1044('0x29')]);console[_0x1044('0xf')](_0x1044('0x2a')+_0x342a5c[_0x1044('0x17')][_0x1044('0x2b')]);console[_0x1044('0xf')](_0x1044('0x2c')+_0x342a5c[_0x1044('0x17')][_0x1044('0x2d')]);console[_0x1044('0xf')](_0x1044('0x2e')+_0x342a5c[_0x1044('0x17')]['fusion_gamepad_available']);console[_0x1044('0xf')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x1044('0x2f')](_0x342a5c['SocketVariables'][_0x1044('0x1b')]));console['log'](_0x1044('0x30')+JSON[_0x1044('0x2f')](_0x342a5c[_0x1044('0x17')][_0x1044('0x31')]));console[_0x1044('0xf')](_0x1044('0x32')+_0x342a5c[_0x1044('0x33')][_0x1044('0x34')]);console[_0x1044('0xf')]('fusion_program_running\x20:\x20'+JSON[_0x1044('0x2f')](_0x342a5c[_0x1044('0x17')][_0x1044('0x18')]));console['log'](_0x1044('0x26'));_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x35'),_0x342a5c[_0x1044('0x17')][_0x1044('0x27')]);_0x4237c4[_0x1044('0x21')]['emit'](_0x1044('0x36'),_0x342a5c[_0x1044('0x17')][_0x1044('0x29')]);_0x4237c4['sockets'][_0x1044('0x12')](_0x1044('0x37'),_0x342a5c[_0x1044('0x17')]['fusion_current_version']);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x38'),_0x342a5c[_0x1044('0x17')][_0x1044('0x2d')]);_0x4237c4['sockets'][_0x1044('0x12')](_0x1044('0x39'),_0x342a5c[_0x1044('0x17')][_0x1044('0x3a')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x3b'),_0x342a5c[_0x1044('0x17')][_0x1044('0x1b')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x3c'),_0x342a5c[_0x1044('0x17')][_0x1044('0x31')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x3d'),_0x342a5c['Storage'][_0x1044('0x34')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x3e'),_0x342a5c[_0x1044('0x17')][_0x1044('0x18')]);_0x42eb56=0x0;}else{setTimeout(_0x1fa546,0x7d0);}}function _0x195b0c(){_0x4237c4[_0x1044('0x21')]['emit'](_0x1044('0x35'),_0x342a5c[_0x1044('0x17')][_0x1044('0x27')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x36'),_0x342a5c['SocketVariables'][_0x1044('0x29')]);_0x4237c4['sockets'][_0x1044('0x12')]('version-number',_0x342a5c['SocketVariables'][_0x1044('0x2b')]);_0x4237c4['sockets'][_0x1044('0x12')](_0x1044('0x38'),_0x342a5c[_0x1044('0x17')]['fusion_update_available']);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x39'),_0x342a5c[_0x1044('0x17')]['fusion_gamepad_available']);_0x4237c4['sockets']['emit']('diagnostics_running',_0x342a5c[_0x1044('0x17')]['fusion_diagnostics_running']);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')]('wifi-connection',_0x342a5c[_0x1044('0x17')][_0x1044('0x31')]);_0x4237c4[_0x1044('0x21')][_0x1044('0x12')](_0x1044('0x3e'),_0x342a5c[_0x1044('0x17')][_0x1044('0x18')]);}function _0x2ce850(){if(os['platform']()!=_0x1044('0x3f')){var _0x57b209=_0x1044('0x40');var _0x8e0666=spawn('python',[_0x57b209],{'stdio':_0x1044('0x41')});_0x8e0666[_0x1044('0x42')]['on'](_0x1044('0x43'),function(_0xe2c308){_0x342a5c['SocketVariables'][_0x1044('0x27')]=String(_0xe2c308)[_0x1044('0x44')]();_0x42eb56++;});_0x8e0666[_0x1044('0x45')]['on'](_0x1044('0x43'),function(_0x54064a){console[_0x1044('0xf')]('Error\x20reading\x20battery\x20:\x20\x0a'+String(_0x54064a));});}else{_0x42eb56++;}}function _0x1c7829(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x1044('0x46')](function(){_0x342a5c['SocketVariables'][_0x1044('0x29')]=!![];_0x42eb56++;})[_0x1044('0x47')](function(){_0x342a5c[_0x1044('0x17')][_0x1044('0x29')]=![];_0x42eb56++;});}function _0x39cd19(){shell['exec'](_0x1044('0x48'),{'silent':!![]},function(_0x5105b3,_0x22747f,_0xd43e6b){(function(_0x153d0c){_0x342a5c[_0x1044('0x17')][_0x1044('0x49')]=_0x153d0c[_0x1044('0x44')]();_0x42eb56++;_0x2f9f1b();}(_0x22747f[_0x1044('0x44')]()));});}function _0x2f9f1b(){shell['exec'](_0x1044('0x4a')+_0x342a5c[_0x1044('0x17')][_0x1044('0x49')],{'silent':!![]},function(_0x2496fc,_0x32eb86,_0x2ce208){(function(_0x507c8c){_0x342a5c[_0x1044('0x17')][_0x1044('0x2b')]=_0x507c8c[_0x1044('0x44')]();_0x42eb56++;_0x3824ef();}(_0x32eb86[_0x1044('0x44')]()));});}function _0x3824ef(){if(_0x3605cb==_0x1044('0x4b')){shell['exec'](_0x1044('0x4c'),{'silent':!![]},function(_0xb1fc27,_0x508f5f,_0xa36607){(function(_0x2c467c){_0x42eb56++;_0xf62383();}(_0x508f5f[_0x1044('0x44')]()));});}else{_0x42eb56++;_0xf62383();}}function _0xf62383(){shell[_0x1044('0x4d')](_0x1044('0x4e'),{'silent':!![]},function(_0x2c4c22,_0x27dca8,_0x5152e6){(function(_0x55ee62){_0x342a5c[_0x1044('0x17')][_0x1044('0x4f')]=_0x55ee62[_0x1044('0x44')]();_0x42eb56++;_0x1905de();}(_0x27dca8[_0x1044('0x44')]()));});}function _0x1905de(){shell[_0x1044('0x4d')](_0x1044('0x4a')+_0x342a5c['SocketVariables']['fusion_latest_SHA'],{'silent':!![]},function(_0x5e2cc3,_0x243f1a,_0x214edf){(function(_0x59ff7c){_0x342a5c[_0x1044('0x17')][_0x1044('0x50')]=_0x59ff7c['trim']();_0x42eb56++;}(_0x243f1a[_0x1044('0x44')]()));});}function _0x10ff5b(){if(_0x342a5c[_0x1044('0x17')][_0x1044('0x49')]!=_0x342a5c[_0x1044('0x17')]['fusion_latest_SHA']){_0x342a5c[_0x1044('0x17')][_0x1044('0x2d')]=!![];}else{_0x342a5c[_0x1044('0x17')][_0x1044('0x2d')]=![];}_0x42eb56++;}function _0x57c919(){if(os[_0x1044('0x51')]()!=_0x1044('0x3f')){shell[_0x1044('0x4d')](_0x1044('0x52'),{'silent':!![]},function(_0x28290d,_0x4a0c4f,_0x155d37){(function(_0x5c5540){_0x342a5c[_0x1044('0x17')][_0x1044('0x3a')]=_0x5c5540['trim']();if(!_0x342a5c[_0x1044('0x17')][_0x1044('0x3a')])_0x342a5c['SocketVariables'][_0x1044('0x3a')]=![];else _0x342a5c['SocketVariables'][_0x1044('0x3a')]=!![];_0x42eb56++;}(_0x4a0c4f[_0x1044('0x44')]()));});}else{_0x342a5c[_0x1044('0x17')][_0x1044('0x3a')]=![];_0x42eb56++;}}function _0x599d85(){if(os[_0x1044('0x51')]()!=_0x1044('0x3f')){shell[_0x1044('0x4d')](_0x1044('0x53'),{'silent':!![]},function(_0x4a09ff,_0x1d79f3,_0x239c09){(function(_0x2828df){var _0x3af244=_0x2828df['trim']();if(_0x3af244){if(_0x342a5c[_0x1044('0x17')][_0x1044('0x1b')])_0x342a5c[_0x1044('0x17')]['fusion_diagnostics_running'][_0x1044('0x54')]=_0x3af244;else{_0x342a5c[_0x1044('0x17')][_0x1044('0x1b')]={'process':_0x3af244,'socket':-0x1};}}else _0x342a5c[_0x1044('0x17')][_0x1044('0x1b')]=null;_0x42eb56++;}(_0x1d79f3[_0x1044('0x44')]()));});}else{_0x342a5c[_0x1044('0x17')][_0x1044('0x3a')]=null;_0x42eb56++;}}function _0x204126(){wpa_cli[_0x1044('0x55')](_0x1044('0x56'),function(_0x5e710e,_0x391481){if(_0x5e710e){_0x391481={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x342a5c[_0x1044('0x17')][_0x1044('0x31')]=_0x391481;_0x42eb56++;});}_0x1fa546();_0x7e962d();setInterval(function(){_0x1fa546();_0x7e962d();},0x2710);};