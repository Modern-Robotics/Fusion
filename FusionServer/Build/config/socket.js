var _0x35e5=['exports','connectedClients','dirname','split','sep','pop','connection','push','Client\x20connected...','join','log','emit','global-message','Hello\x20from\x20server','success','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','diagnostics_running','indexOf','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','fusion_wifi_access\x20:\x20','stringify','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','battery-level','fusion_battery_level','internet-access','version-number','fusion_current_version','update-available','gamepad-available','wifi-connection','wifi-fusion_storage_type','program-running','win32','pipe','stdout','data','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','trim','git\x20describe\x20--tags\x20','Build','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_version','fusion_latest_SHA','platform','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','get','Wifi_NIC','spawn','internet-available','wireless-tools/wpa_cli','shelljs','env','path','request','config'];(function(_0x3f9264,_0x306726){var _0x36de75=function(_0x47b8f8){while(--_0x47b8f8){_0x3f9264['push'](_0x3f9264['shift']());}};_0x36de75(++_0x306726);}(_0x35e5,0x103));var _0x2970=function(_0x286d04,_0x3ac907){_0x286d04=_0x286d04-0x0;var _0x139022=_0x35e5[_0x286d04];return _0x139022;};var spawn=require('child_process')[_0x2970('0x0')];var internetAvailable=require(_0x2970('0x1'));var wpa_cli=require(_0x2970('0x2'));var os=require('os');var shell=require(_0x2970('0x3'));var env=process[_0x2970('0x4')]['NODE_ENV']||'dev';var path=require(_0x2970('0x5'));var request=require(_0x2970('0x6'));const config=require(_0x2970('0x7'));module[_0x2970('0x8')]=function(_0x233cc5,_0x5489b6,_0x5c4038){_0x5c4038[_0x2970('0x9')]=[];var _0xb79317=path[_0x2970('0xa')](__dirname)[_0x2970('0xb')](path[_0x2970('0xc')])[_0x2970('0xd')]();var _0x114ef2=0x0;var _0x5bf3d0=0xb;_0x233cc5['on'](_0x2970('0xe'),function(_0x2d947d){_0x5c4038[_0x2970('0x9')][_0x2970('0xf')](_0x2d947d);console['log'](_0x2970('0x10'));_0x604f34();_0x2d947d['on'](_0x2970('0x11'),function(_0x43602b){console[_0x2970('0x12')](_0x43602b);_0x2d947d[_0x2970('0x13')](_0x2970('0x14'),{'message':_0x2970('0x15'),'type':_0x2970('0x16')});});_0x2d947d['on'](_0x2970('0x17'),function(_0x5dd3bc){console[_0x2970('0x12')](_0x2970('0x18')+_0x5dd3bc);if(_0x5c4038[_0x2970('0x19')][_0x2970('0x1a')])if(_0x5c4038[_0x2970('0x19')][_0x2970('0x1a')][_0x2970('0x1b')]==_0x2d947d['id'])_0x5489b6[_0x2970('0x1c')]();if(_0x5c4038['SocketVariables'][_0x2970('0x1d')])if(_0x5c4038['SocketVariables'][_0x2970('0x1d')]['socket']==_0x2d947d['id']){console[_0x2970('0x12')](_0x2970('0x1e'));request({'url':_0x2970('0x1f'),'method':'GET'},function(_0x433727,_0x4638f1,_0x4b748a){if(_0x433727)console[_0x2970('0x12')](_0x2970('0x20')+_0x433727);else{if(_0x4638f1[_0x2970('0x21')]==0xc8){_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]=null;}}_0x233cc5[_0x2970('0x22')]['emit'](_0x2970('0x23'),_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]);});}var _0x1f4c98=_0x5c4038[_0x2970('0x9')][_0x2970('0x24')](_0x2d947d);_0x5c4038[_0x2970('0x9')][_0x2970('0x25')](_0x1f4c98,0x1);});_0x2d947d['on']('error',function(_0x8438c0){console[_0x2970('0x12')](_0x2970('0x26')+_0x8438c0);});});function _0x20e688(){_0x2cf19b();_0x8ccefd();_0x3b919d();_0x2c933c();_0x10a910();_0x2eea8e();_0x5b978d();}function _0x194a2d(){if(_0x114ef2>=_0x5bf3d0){console[_0x2970('0x12')](_0x2970('0x27'));console[_0x2970('0x12')](_0x2970('0x28')+_0x5c4038[_0x2970('0x19')]['fusion_battery_level']);console[_0x2970('0x12')](_0x2970('0x29')+_0x5c4038[_0x2970('0x19')][_0x2970('0x2a')]);console[_0x2970('0x12')](_0x2970('0x2b')+_0x5c4038[_0x2970('0x19')]['fusion_current_version']);console[_0x2970('0x12')](_0x2970('0x2c')+_0x5c4038['SocketVariables'][_0x2970('0x2d')]);console[_0x2970('0x12')]('fusion_gamepad_available\x20:\x20'+_0x5c4038[_0x2970('0x19')][_0x2970('0x2e')]);console['log'](_0x2970('0x2f')+JSON['stringify'](_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]));console[_0x2970('0x12')](_0x2970('0x30')+JSON[_0x2970('0x31')](_0x5c4038[_0x2970('0x19')][_0x2970('0x32')]));console['log'](_0x2970('0x33')+_0x5c4038[_0x2970('0x34')][_0x2970('0x35')]);console[_0x2970('0x12')](_0x2970('0x36')+JSON[_0x2970('0x31')](_0x5c4038[_0x2970('0x19')][_0x2970('0x1a')]));console['log'](_0x2970('0x27'));_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x37'),_0x5c4038['SocketVariables'][_0x2970('0x38')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x39'),_0x5c4038[_0x2970('0x19')][_0x2970('0x2a')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x3a'),_0x5c4038['SocketVariables'][_0x2970('0x3b')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x3c'),_0x5c4038['SocketVariables']['fusion_update_available']);_0x233cc5['sockets'][_0x2970('0x13')](_0x2970('0x3d'),_0x5c4038[_0x2970('0x19')][_0x2970('0x2e')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x23'),_0x5c4038['SocketVariables'][_0x2970('0x1d')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x3e'),_0x5c4038[_0x2970('0x19')][_0x2970('0x32')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x3f'),_0x5c4038[_0x2970('0x34')]['type']);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')]('program-running',_0x5c4038['SocketVariables']['fusion_program_running']);_0x114ef2=0x0;}else{setTimeout(_0x194a2d,0x7d0);}}function _0x604f34(){_0x233cc5['sockets'][_0x2970('0x13')](_0x2970('0x37'),_0x5c4038['SocketVariables'][_0x2970('0x38')]);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x39'),_0x5c4038[_0x2970('0x19')][_0x2970('0x2a')]);_0x233cc5[_0x2970('0x22')]['emit'](_0x2970('0x3a'),_0x5c4038[_0x2970('0x19')][_0x2970('0x3b')]);_0x233cc5['sockets'][_0x2970('0x13')](_0x2970('0x3c'),_0x5c4038['SocketVariables']['fusion_update_available']);_0x233cc5['sockets'][_0x2970('0x13')](_0x2970('0x3d'),_0x5c4038[_0x2970('0x19')]['fusion_gamepad_available']);_0x233cc5[_0x2970('0x22')][_0x2970('0x13')](_0x2970('0x23'),_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]);_0x233cc5['sockets'][_0x2970('0x13')](_0x2970('0x3e'),_0x5c4038[_0x2970('0x19')][_0x2970('0x32')]);_0x233cc5[_0x2970('0x22')]['emit'](_0x2970('0x40'),_0x5c4038[_0x2970('0x19')]['fusion_program_running']);}function _0x2cf19b(){if(os['platform']()!=_0x2970('0x41')){var _0x11bc87='./scripts/ReadBatt.py';var _0x19ed0c=spawn('python',[_0x11bc87],{'stdio':_0x2970('0x42')});_0x19ed0c[_0x2970('0x43')]['on'](_0x2970('0x44'),function(_0xd343b4){_0x5c4038[_0x2970('0x19')][_0x2970('0x38')]=String(_0xd343b4)['trim']();_0x114ef2++;});_0x19ed0c[_0x2970('0x45')]['on'](_0x2970('0x44'),function(_0x15a66f){console['log'](_0x2970('0x46')+String(_0x15a66f));});}else{_0x114ef2++;}}function _0x8ccefd(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x2970('0x47')](function(){_0x5c4038['SocketVariables']['fusion_internet_access']=!![];_0x114ef2++;})[_0x2970('0x48')](function(){_0x5c4038[_0x2970('0x19')][_0x2970('0x2a')]=![];_0x114ef2++;});}function _0x3b919d(){shell[_0x2970('0x49')](_0x2970('0x4a'),{'silent':!![]},function(_0x3fb9a9,_0x1651d6,_0x189cf7){(function(_0x6f6800){_0x5c4038['SocketVariables'][_0x2970('0x4b')]=_0x6f6800['trim']();_0x114ef2++;_0x1cb997();}(_0x1651d6[_0x2970('0x4c')]()));});}function _0x1cb997(){shell[_0x2970('0x49')](_0x2970('0x4d')+_0x5c4038[_0x2970('0x19')]['fusion_current_SHA'],{'silent':!![]},function(_0xf8c28,_0x4f8ee6,_0x5ba100){(function(_0x4eb3f9){_0x5c4038[_0x2970('0x19')][_0x2970('0x3b')]=_0x4eb3f9[_0x2970('0x4c')]();_0x114ef2++;_0x25f691();}(_0x4f8ee6['trim']()));});}function _0x25f691(){if(_0xb79317==_0x2970('0x4e')){shell['exec']('git\x20fetch',{'silent':!![]},function(_0xf7f1bb,_0x52c8ee,_0x390d29){(function(_0x4e6ae1){_0x114ef2++;_0x864df9();}(_0x52c8ee[_0x2970('0x4c')]()));});}else{_0x114ef2++;_0x864df9();}}function _0x864df9(){shell[_0x2970('0x49')](_0x2970('0x4f'),{'silent':!![]},function(_0x306237,_0x553553,_0xd52d79){(function(_0x25eeff){_0x5c4038[_0x2970('0x19')]['fusion_latest_SHA']=_0x25eeff[_0x2970('0x4c')]();_0x114ef2++;_0x423a94();}(_0x553553['trim']()));});}function _0x423a94(){shell[_0x2970('0x49')](_0x2970('0x4d')+_0x5c4038['SocketVariables']['fusion_latest_SHA'],{'silent':!![]},function(_0x826ffb,_0xe261a1,_0x118ed8){(function(_0x5d883a){_0x5c4038[_0x2970('0x19')][_0x2970('0x50')]=_0x5d883a['trim']();_0x114ef2++;}(_0xe261a1[_0x2970('0x4c')]()));});}function _0x2c933c(){if(_0x5c4038[_0x2970('0x19')][_0x2970('0x4b')]!=_0x5c4038['SocketVariables'][_0x2970('0x51')]){_0x5c4038[_0x2970('0x19')][_0x2970('0x2d')]=!![];}else{_0x5c4038['SocketVariables'][_0x2970('0x2d')]=![];}_0x114ef2++;}function _0x10a910(){if(os[_0x2970('0x52')]()!=_0x2970('0x41')){shell['exec'](_0x2970('0x53'),{'silent':!![]},function(_0x4d4a5f,_0x3be369,_0x39e361){(function(_0x1eefaa){_0x5c4038['SocketVariables'][_0x2970('0x2e')]=_0x1eefaa[_0x2970('0x4c')]();if(!_0x5c4038[_0x2970('0x19')][_0x2970('0x2e')])_0x5c4038[_0x2970('0x19')][_0x2970('0x2e')]=![];else _0x5c4038['SocketVariables']['fusion_gamepad_available']=!![];_0x114ef2++;}(_0x3be369[_0x2970('0x4c')]()));});}else{_0x5c4038[_0x2970('0x19')][_0x2970('0x2e')]=![];_0x114ef2++;}}function _0x2eea8e(){if(os['platform']()!='win32'){shell[_0x2970('0x49')](_0x2970('0x54'),{'silent':!![]},function(_0x37dcc3,_0x3f6071,_0x135e21){(function(_0x555770){var _0x19dedb=_0x555770['trim']();if(_0x19dedb){if(_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')])_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')][_0x2970('0x55')]=_0x19dedb;else{_0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]={'process':_0x19dedb,'socket':-0x1};}}else _0x5c4038[_0x2970('0x19')][_0x2970('0x1d')]=null;_0x114ef2++;}(_0x3f6071['trim']()));});}else{_0x5c4038['SocketVariables'][_0x2970('0x2e')]=null;_0x114ef2++;}}function _0x5b978d(){wpa_cli[_0x2970('0x56')](config[_0x2970('0x57')](_0x2970('0x58')),function(_0x1b7ad,_0x4a8ad3){if(_0x1b7ad){_0x4a8ad3={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x5c4038[_0x2970('0x19')][_0x2970('0x32')]=_0x4a8ad3;_0x114ef2++;});}_0x194a2d();_0x20e688();setInterval(function(){_0x194a2d();_0x20e688();},0x2710);};