var _0x4d24=['statusCode','fusion_diagnostics_running','sockets','emit','diagnostics_running','connectedClients','indexOf','splice','error','Socket\x20error\x20-\x20','fusion_battery_level\x20:\x20','fusion_internet_access\x20:\x20','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','battery-level','fusion_battery_level','fusion_internet_access','version-number','update-available','wifi-fusion_storage_type','internet-access','wifi-connection','program-running','win32','./scripts/ReadBatt.py','python','stdout','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','fusion_current_SHA','exec','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','fusion_latest_version','platform','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','Wifi_NIC','child_process','spawn','internet-available','wireless-tools/wpa_cli','shelljs','NODE_ENV','dev','path','request','dirname','split','sep','pop','push','log','Client\x20connected...','Hello\x20from\x20server','success','disconnect','SocketVariables','fusion_program_running','SocketId','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET'];(function(_0x41bdc0,_0x3b9b28){var _0x2f8a0c=function(_0x2436d9){while(--_0x2436d9){_0x41bdc0['push'](_0x41bdc0['shift']());}};_0x2f8a0c(++_0x3b9b28);}(_0x4d24,0x136));var _0x23dc=function(_0x2d65c8,_0x4e6da1){_0x2d65c8=_0x2d65c8-0x0;var _0x18d3d5=_0x4d24[_0x2d65c8];return _0x18d3d5;};var spawn=require(_0x23dc('0x0'))[_0x23dc('0x1')];var internetAvailable=require(_0x23dc('0x2'));var wpa_cli=require(_0x23dc('0x3'));var os=require('os');var shell=require(_0x23dc('0x4'));var env=process['env'][_0x23dc('0x5')]||_0x23dc('0x6');var path=require(_0x23dc('0x7'));var request=require(_0x23dc('0x8'));const config=require('config');module['exports']=function(_0x34008a,_0x325f10,_0x381460){_0x381460['connectedClients']=[];var _0x108a30=path[_0x23dc('0x9')](__dirname)[_0x23dc('0xa')](path[_0x23dc('0xb')])[_0x23dc('0xc')]();var _0x34e626=0x0;var _0x17f65b=0xb;_0x34008a['on']('connection',function(_0x401222){_0x381460['connectedClients'][_0x23dc('0xd')](_0x401222);console[_0x23dc('0xe')](_0x23dc('0xf'));_0x4f7c04();_0x401222['on']('join',function(_0x33bf54){console[_0x23dc('0xe')](_0x33bf54);_0x401222['emit']('global-message',{'message':_0x23dc('0x10'),'type':_0x23dc('0x11')});});_0x401222['on'](_0x23dc('0x12'),function(_0xbaef44){console[_0x23dc('0xe')]('Client\x20disconnected\x20-\x20'+_0xbaef44);if(_0x381460[_0x23dc('0x13')][_0x23dc('0x14')])if(_0x381460[_0x23dc('0x13')][_0x23dc('0x14')][_0x23dc('0x15')]==_0x401222['id'])_0x325f10['KillProgram']();if(_0x381460['SocketVariables']['fusion_diagnostics_running'])if(_0x381460[_0x23dc('0x13')]['fusion_diagnostics_running'][_0x23dc('0x16')]==_0x401222['id']){console[_0x23dc('0xe')](_0x23dc('0x17'));request({'url':_0x23dc('0x18'),'method':_0x23dc('0x19')},function(_0x48fccd,_0xf580c8,_0x1f0ac6){if(_0x48fccd)console[_0x23dc('0xe')]('Error\x20terminating\x20diagnostic\x20tools\x20:\x20'+_0x48fccd);else{if(_0xf580c8[_0x23dc('0x1a')]==0xc8){_0x381460[_0x23dc('0x13')][_0x23dc('0x1b')]=null;}}_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x1e'),_0x381460[_0x23dc('0x13')]['fusion_diagnostics_running']);});}var _0x5e4da3=_0x381460[_0x23dc('0x1f')][_0x23dc('0x20')](_0x401222);_0x381460[_0x23dc('0x1f')][_0x23dc('0x21')](_0x5e4da3,0x1);});_0x401222['on'](_0x23dc('0x22'),function(_0x53f791){console[_0x23dc('0xe')](_0x23dc('0x23')+_0x53f791);});});function _0x395e81(){_0x44ef4c();_0x450c37();_0x5a2fdd();_0x37e9bb();_0x5190bc();_0x558a53();_0x2bf538();}function _0x50bce4(){if(_0x34e626>=_0x17f65b){console[_0x23dc('0xe')]('-----------------------------------------------------');console[_0x23dc('0xe')](_0x23dc('0x24')+_0x381460[_0x23dc('0x13')]['fusion_battery_level']);console[_0x23dc('0xe')](_0x23dc('0x25')+_0x381460[_0x23dc('0x13')]['fusion_internet_access']);console[_0x23dc('0xe')](_0x23dc('0x26')+_0x381460['SocketVariables'][_0x23dc('0x27')]);console['log'](_0x23dc('0x28')+_0x381460[_0x23dc('0x13')][_0x23dc('0x29')]);console['log'](_0x23dc('0x2a')+_0x381460['SocketVariables'][_0x23dc('0x2b')]);console[_0x23dc('0xe')](_0x23dc('0x2c')+JSON[_0x23dc('0x2d')](_0x381460['SocketVariables']['fusion_diagnostics_running']));console[_0x23dc('0xe')]('fusion_wifi_access\x20:\x20'+JSON[_0x23dc('0x2d')](_0x381460[_0x23dc('0x13')][_0x23dc('0x2e')]));console[_0x23dc('0xe')](_0x23dc('0x2f')+_0x381460[_0x23dc('0x30')][_0x23dc('0x31')]);console['log'](_0x23dc('0x32')+JSON[_0x23dc('0x2d')](_0x381460['SocketVariables'][_0x23dc('0x14')]));console[_0x23dc('0xe')]('-----------------------------------------------------');_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x33'),_0x381460[_0x23dc('0x13')][_0x23dc('0x34')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')]('internet-access',_0x381460[_0x23dc('0x13')][_0x23dc('0x35')]);_0x34008a['sockets'][_0x23dc('0x1d')](_0x23dc('0x36'),_0x381460['SocketVariables'][_0x23dc('0x27')]);_0x34008a['sockets'][_0x23dc('0x1d')](_0x23dc('0x37'),_0x381460[_0x23dc('0x13')][_0x23dc('0x29')]);_0x34008a['sockets'][_0x23dc('0x1d')]('gamepad-available',_0x381460['SocketVariables'][_0x23dc('0x2b')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')]('diagnostics_running',_0x381460['SocketVariables'][_0x23dc('0x1b')]);_0x34008a['sockets'][_0x23dc('0x1d')]('wifi-connection',_0x381460['SocketVariables'][_0x23dc('0x2e')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x38'),_0x381460[_0x23dc('0x30')][_0x23dc('0x31')]);_0x34008a['sockets'][_0x23dc('0x1d')]('program-running',_0x381460['SocketVariables']['fusion_program_running']);_0x34e626=0x0;}else{setTimeout(_0x50bce4,0x7d0);}}function _0x4f7c04(){_0x34008a[_0x23dc('0x1c')]['emit'](_0x23dc('0x33'),_0x381460['SocketVariables'][_0x23dc('0x34')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x39'),_0x381460[_0x23dc('0x13')]['fusion_internet_access']);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x36'),_0x381460['SocketVariables']['fusion_current_version']);_0x34008a[_0x23dc('0x1c')]['emit']('update-available',_0x381460[_0x23dc('0x13')][_0x23dc('0x29')]);_0x34008a['sockets'][_0x23dc('0x1d')]('gamepad-available',_0x381460[_0x23dc('0x13')][_0x23dc('0x2b')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x1e'),_0x381460[_0x23dc('0x13')]['fusion_diagnostics_running']);_0x34008a[_0x23dc('0x1c')]['emit'](_0x23dc('0x3a'),_0x381460['SocketVariables'][_0x23dc('0x2e')]);_0x34008a[_0x23dc('0x1c')][_0x23dc('0x1d')](_0x23dc('0x3b'),_0x381460[_0x23dc('0x13')][_0x23dc('0x14')]);}function _0x44ef4c(){if(os['platform']()!=_0x23dc('0x3c')){var _0x255084=_0x23dc('0x3d');var _0x2be1bd=spawn(_0x23dc('0x3e'),[_0x255084],{'stdio':'pipe'});_0x2be1bd[_0x23dc('0x3f')]['on'](_0x23dc('0x40'),function(_0x3ff899){_0x381460['SocketVariables'][_0x23dc('0x34')]=String(_0x3ff899)[_0x23dc('0x41')]();_0x34e626++;});_0x2be1bd[_0x23dc('0x42')]['on'](_0x23dc('0x40'),function(_0x58991d){console[_0x23dc('0xe')](_0x23dc('0x43')+String(_0x58991d));});}else{_0x34e626++;}}function _0x450c37(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x23dc('0x44')](function(){_0x381460['SocketVariables'][_0x23dc('0x35')]=!![];_0x34e626++;})[_0x23dc('0x45')](function(){_0x381460[_0x23dc('0x13')][_0x23dc('0x35')]=![];_0x34e626++;});}function _0x5a2fdd(){shell['exec']('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0xda32a1,_0x6e985e,_0x4a9302){(function(_0x870924){_0x381460[_0x23dc('0x13')][_0x23dc('0x46')]=_0x870924[_0x23dc('0x41')]();_0x34e626++;_0x41ec55();}(_0x6e985e[_0x23dc('0x41')]()));});}function _0x41ec55(){shell[_0x23dc('0x47')](_0x23dc('0x48')+_0x381460[_0x23dc('0x13')][_0x23dc('0x46')],{'silent':!![]},function(_0x5f1d38,_0x440674,_0x4ca13c){(function(_0x42795d){_0x381460[_0x23dc('0x13')][_0x23dc('0x27')]=_0x42795d[_0x23dc('0x41')]();_0x34e626++;_0x1467ae();}(_0x440674[_0x23dc('0x41')]()));});}function _0x1467ae(){if(_0x108a30==_0x23dc('0x49')){shell['exec'](_0x23dc('0x4a'),{'silent':!![]},function(_0x361779,_0xb189fa,_0x4a2548){(function(_0x49080b){_0x34e626++;_0x4d9a72();}(_0xb189fa[_0x23dc('0x41')]()));});}else{_0x34e626++;_0x4d9a72();}}function _0x4d9a72(){shell[_0x23dc('0x47')](_0x23dc('0x4b'),{'silent':!![]},function(_0x11720c,_0x440b57,_0x471ef){(function(_0x93c6dc){_0x381460[_0x23dc('0x13')][_0x23dc('0x4c')]=_0x93c6dc['trim']();_0x34e626++;_0x208730();}(_0x440b57['trim']()));});}function _0x208730(){shell[_0x23dc('0x47')](_0x23dc('0x48')+_0x381460[_0x23dc('0x13')][_0x23dc('0x4c')],{'silent':!![]},function(_0x7ac015,_0x25316c,_0x1c9f5e){(function(_0x3f035f){_0x381460[_0x23dc('0x13')][_0x23dc('0x4d')]=_0x3f035f[_0x23dc('0x41')]();_0x34e626++;}(_0x25316c[_0x23dc('0x41')]()));});}function _0x37e9bb(){if(_0x381460[_0x23dc('0x13')]['fusion_current_SHA']!=_0x381460[_0x23dc('0x13')][_0x23dc('0x4c')]){_0x381460[_0x23dc('0x13')][_0x23dc('0x29')]=!![];}else{_0x381460[_0x23dc('0x13')][_0x23dc('0x29')]=![];}_0x34e626++;}function _0x5190bc(){if(os[_0x23dc('0x4e')]()!=_0x23dc('0x3c')){shell['exec'](_0x23dc('0x4f'),{'silent':!![]},function(_0x38e085,_0x3bd568,_0xc23fd){(function(_0x633ff6){_0x381460[_0x23dc('0x13')]['fusion_gamepad_available']=_0x633ff6[_0x23dc('0x41')]();if(!_0x381460[_0x23dc('0x13')][_0x23dc('0x2b')])_0x381460[_0x23dc('0x13')][_0x23dc('0x2b')]=![];else _0x381460[_0x23dc('0x13')][_0x23dc('0x2b')]=!![];_0x34e626++;}(_0x3bd568['trim']()));});}else{_0x381460[_0x23dc('0x13')]['fusion_gamepad_available']=![];_0x34e626++;}}function _0x558a53(){if(os['platform']()!=_0x23dc('0x3c')){shell[_0x23dc('0x47')](_0x23dc('0x50'),{'silent':!![]},function(_0x3bd8f2,_0x5dcabb,_0x2a68cf){(function(_0x38c0a6){var _0x1facbd=_0x38c0a6[_0x23dc('0x41')]();if(_0x1facbd){if(_0x381460['SocketVariables']['fusion_diagnostics_running'])_0x381460[_0x23dc('0x13')][_0x23dc('0x1b')][_0x23dc('0x51')]=_0x1facbd;else{_0x381460[_0x23dc('0x13')]['fusion_diagnostics_running']={'process':_0x1facbd,'socket':-0x1};}}else _0x381460[_0x23dc('0x13')][_0x23dc('0x1b')]=null;_0x34e626++;}(_0x5dcabb[_0x23dc('0x41')]()));});}else{_0x381460['SocketVariables'][_0x23dc('0x2b')]=null;_0x34e626++;}}function _0x2bf538(){wpa_cli[_0x23dc('0x52')](config['get'](_0x23dc('0x53')),function(_0x5e36b6,_0x50501e){if(_0x5e36b6){_0x50501e={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x381460[_0x23dc('0x13')]['fusion_wifi_access']=_0x50501e;_0x34e626++;});}_0x50bce4();_0x395e81();setInterval(function(){_0x50bce4();_0x395e81();},0x2710);};