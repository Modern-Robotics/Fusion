var _0x2410=['fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','socket','GET','statusCode','sockets','diagnostics_running','indexOf','splice','error','Socket\x20error\x20-\x20','fusion_battery_level\x20:\x20','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','Storage','type','fusion_program_running\x20:\x20','stringify','-----------------------------------------------------','battery-level','fusion_battery_level','internet-access','version-number','update-available','gamepad-available','wifi-connection','program-running','platform','./scripts/ReadBatt.py','python','pipe','stdout','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','fusion_current_SHA','Build','git\x20fetch','fusion_latest_SHA','git\x20describe\x20--tags\x20','win32','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','process','status','wlan1','spawn','internet-available','wireless-tools/wpa_cli','NODE_ENV','dev','path','exports','dirname','split','sep','connection','connectedClients','push','log','join','emit','Hello\x20from\x20server','SocketVariables'];(function(_0x4a131e,_0x3ab703){var _0x12db2a=function(_0x3f3cf2){while(--_0x3f3cf2){_0x4a131e['push'](_0x4a131e['shift']());}};_0x12db2a(++_0x3ab703);}(_0x2410,0x88));var _0x2348=function(_0x3b65dc,_0x4c100a){_0x3b65dc=_0x3b65dc-0x0;var _0x457eae=_0x2410[_0x3b65dc];return _0x457eae;};var spawn=require('child_process')[_0x2348('0x0')];var internetAvailable=require(_0x2348('0x1'));var wpa_cli=require(_0x2348('0x2'));var os=require('os');var shell=require('shelljs');var env=process['env'][_0x2348('0x3')]||_0x2348('0x4');var path=require(_0x2348('0x5'));var request=require('request');module[_0x2348('0x6')]=function(_0x372724,_0x5a40bd,_0x49be10){_0x49be10['connectedClients']=[];var _0x377bfb=path[_0x2348('0x7')](__dirname)[_0x2348('0x8')](path[_0x2348('0x9')])['pop']();var _0x33f236=0x0;var _0x4fb253=0xb;_0x372724['on'](_0x2348('0xa'),function(_0xb9c264){_0x49be10[_0x2348('0xb')][_0x2348('0xc')](_0xb9c264);console[_0x2348('0xd')]('Client\x20connected...');_0x265dfa();_0xb9c264['on'](_0x2348('0xe'),function(_0x53cc23){console[_0x2348('0xd')](_0x53cc23);_0xb9c264[_0x2348('0xf')]('global-message',{'message':_0x2348('0x10'),'type':'success'});});_0xb9c264['on']('disconnect',function(_0x13b670){console[_0x2348('0xd')]('Client\x20disconnected\x20-\x20'+_0x13b670);if(_0x49be10[_0x2348('0x11')][_0x2348('0x12')])if(_0x49be10[_0x2348('0x11')][_0x2348('0x12')][_0x2348('0x13')]==_0xb9c264['id'])_0x5a40bd[_0x2348('0x14')]();if(_0x49be10[_0x2348('0x11')][_0x2348('0x15')])if(_0x49be10[_0x2348('0x11')][_0x2348('0x15')][_0x2348('0x16')]==_0xb9c264['id']){console['log']('Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client');request({'url':'http://localhost:8080/api/diagnostics/stop','method':_0x2348('0x17')},function(_0x4df441,_0x5145e7,_0x517d8e){if(_0x4df441)console[_0x2348('0xd')]('Error\x20terminating\x20diagnostic\x20tools\x20:\x20'+_0x4df441);else{if(_0x5145e7[_0x2348('0x18')]==0xc8){_0x49be10[_0x2348('0x11')][_0x2348('0x15')]=null;}}_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x1a'),_0x49be10['SocketVariables'][_0x2348('0x15')]);});}var _0xd10f51=_0x49be10['connectedClients'][_0x2348('0x1b')](_0xb9c264);_0x49be10[_0x2348('0xb')][_0x2348('0x1c')](_0xd10f51,0x1);});_0xb9c264['on'](_0x2348('0x1d'),function(_0x5c9271){console[_0x2348('0xd')](_0x2348('0x1e')+_0x5c9271);});});function _0x1a7937(){_0x1800bd();_0x2b1db8();_0x3e9461();_0x11ecad();_0x52c05b();_0x116534();_0x3fa328();}function _0x4c6a1e(){if(_0x33f236>=_0x4fb253){console[_0x2348('0xd')]('-----------------------------------------------------');console[_0x2348('0xd')](_0x2348('0x1f')+_0x49be10[_0x2348('0x11')]['fusion_battery_level']);console['log'](_0x2348('0x20')+_0x49be10[_0x2348('0x11')][_0x2348('0x21')]);console[_0x2348('0xd')](_0x2348('0x22')+_0x49be10['SocketVariables'][_0x2348('0x23')]);console['log'](_0x2348('0x24')+_0x49be10['SocketVariables'][_0x2348('0x25')]);console[_0x2348('0xd')]('fusion_gamepad_available\x20:\x20'+_0x49be10['SocketVariables'][_0x2348('0x26')]);console[_0x2348('0xd')](_0x2348('0x27')+JSON['stringify'](_0x49be10[_0x2348('0x11')]['fusion_diagnostics_running']));console['log'](_0x2348('0x28')+JSON['stringify'](_0x49be10[_0x2348('0x11')][_0x2348('0x29')]));console[_0x2348('0xd')](_0x2348('0x2a')+_0x49be10[_0x2348('0x2b')][_0x2348('0x2c')]);console['log'](_0x2348('0x2d')+JSON[_0x2348('0x2e')](_0x49be10['SocketVariables'][_0x2348('0x12')]));console[_0x2348('0xd')](_0x2348('0x2f'));_0x372724[_0x2348('0x19')]['emit'](_0x2348('0x30'),_0x49be10[_0x2348('0x11')][_0x2348('0x31')]);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x32'),_0x49be10[_0x2348('0x11')]['fusion_internet_access']);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x33'),_0x49be10['SocketVariables'][_0x2348('0x23')]);_0x372724[_0x2348('0x19')]['emit'](_0x2348('0x34'),_0x49be10[_0x2348('0x11')][_0x2348('0x25')]);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x35'),_0x49be10[_0x2348('0x11')]['fusion_gamepad_available']);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x1a'),_0x49be10[_0x2348('0x11')][_0x2348('0x15')]);_0x372724['sockets'][_0x2348('0xf')](_0x2348('0x36'),_0x49be10[_0x2348('0x11')][_0x2348('0x29')]);_0x372724[_0x2348('0x19')]['emit']('wifi-fusion_storage_type',_0x49be10[_0x2348('0x2b')][_0x2348('0x2c')]);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x37'),_0x49be10[_0x2348('0x11')][_0x2348('0x12')]);_0x33f236=0x0;}else{setTimeout(_0x4c6a1e,0x7d0);}}function _0x265dfa(){_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x30'),_0x49be10[_0x2348('0x11')][_0x2348('0x31')]);_0x372724['sockets'][_0x2348('0xf')]('internet-access',_0x49be10['SocketVariables']['fusion_internet_access']);_0x372724['sockets'][_0x2348('0xf')]('version-number',_0x49be10[_0x2348('0x11')][_0x2348('0x23')]);_0x372724[_0x2348('0x19')][_0x2348('0xf')]('update-available',_0x49be10['SocketVariables'][_0x2348('0x25')]);_0x372724['sockets'][_0x2348('0xf')](_0x2348('0x35'),_0x49be10[_0x2348('0x11')][_0x2348('0x26')]);_0x372724[_0x2348('0x19')]['emit'](_0x2348('0x1a'),_0x49be10['SocketVariables'][_0x2348('0x15')]);_0x372724['sockets'][_0x2348('0xf')](_0x2348('0x36'),_0x49be10[_0x2348('0x11')]['fusion_wifi_access']);_0x372724[_0x2348('0x19')][_0x2348('0xf')](_0x2348('0x37'),_0x49be10['SocketVariables']['fusion_program_running']);}function _0x1800bd(){if(os[_0x2348('0x38')]()!='win32'){var _0x4db0f1=_0x2348('0x39');var _0x72d607=spawn(_0x2348('0x3a'),[_0x4db0f1],{'stdio':_0x2348('0x3b')});_0x72d607[_0x2348('0x3c')]['on']('data',function(_0x532f46){_0x49be10[_0x2348('0x11')][_0x2348('0x31')]=String(_0x532f46)[_0x2348('0x3d')]();_0x33f236++;});_0x72d607[_0x2348('0x3e')]['on']('data',function(_0x506346){console[_0x2348('0xd')](_0x2348('0x3f')+String(_0x506346));});}else{_0x33f236++;}}function _0x2b1db8(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x2348('0x40')](function(){_0x49be10[_0x2348('0x11')][_0x2348('0x21')]=!![];_0x33f236++;})[_0x2348('0x41')](function(){_0x49be10[_0x2348('0x11')]['fusion_internet_access']=![];_0x33f236++;});}function _0x3e9461(){shell[_0x2348('0x42')]('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x1a6e5a,_0x5e2abc,_0x4897f5){(function(_0x3eab68){_0x49be10[_0x2348('0x11')][_0x2348('0x43')]=_0x3eab68[_0x2348('0x3d')]();_0x33f236++;_0x559b8c();}(_0x5e2abc['trim']()));});}function _0x559b8c(){shell[_0x2348('0x42')]('git\x20describe\x20--tags\x20'+_0x49be10[_0x2348('0x11')][_0x2348('0x43')],{'silent':!![]},function(_0x5e99cc,_0x5047cb,_0xe2b8bc){(function(_0x390791){_0x49be10['SocketVariables']['fusion_current_version']=_0x390791[_0x2348('0x3d')]();_0x33f236++;_0x370a5f();}(_0x5047cb[_0x2348('0x3d')]()));});}function _0x370a5f(){if(_0x377bfb==_0x2348('0x44')){shell[_0x2348('0x42')](_0x2348('0x45'),{'silent':!![]},function(_0x514282,_0x1f7ee2,_0x242bf6){(function(_0x319d8f){_0x33f236++;_0x372b10();}(_0x1f7ee2['trim']()));});}else{_0x33f236++;_0x372b10();}}function _0x372b10(){shell[_0x2348('0x42')]('git\x20rev-list\x20--tags\x20--max-count=1',{'silent':!![]},function(_0x49e121,_0x130f6a,_0x23a952){(function(_0x10f277){_0x49be10[_0x2348('0x11')][_0x2348('0x46')]=_0x10f277[_0x2348('0x3d')]();_0x33f236++;_0x103de0();}(_0x130f6a[_0x2348('0x3d')]()));});}function _0x103de0(){shell[_0x2348('0x42')](_0x2348('0x47')+_0x49be10[_0x2348('0x11')][_0x2348('0x46')],{'silent':!![]},function(_0x11b975,_0x384a54,_0x5b8d08){(function(_0x57252c){_0x49be10['SocketVariables']['fusion_latest_version']=_0x57252c[_0x2348('0x3d')]();_0x33f236++;}(_0x384a54[_0x2348('0x3d')]()));});}function _0x11ecad(){if(_0x49be10[_0x2348('0x11')]['fusion_current_SHA']!=_0x49be10[_0x2348('0x11')]['fusion_latest_SHA']){_0x49be10[_0x2348('0x11')]['fusion_update_available']=!![];}else{_0x49be10['SocketVariables'][_0x2348('0x25')]=![];}_0x33f236++;}function _0x52c05b(){if(os['platform']()!=_0x2348('0x48')){shell['exec'](_0x2348('0x49'),{'silent':!![]},function(_0x15a457,_0x388970,_0x513d95){(function(_0x13e690){_0x49be10[_0x2348('0x11')][_0x2348('0x26')]=_0x13e690[_0x2348('0x3d')]();if(!_0x49be10[_0x2348('0x11')][_0x2348('0x26')])_0x49be10['SocketVariables'][_0x2348('0x26')]=![];else _0x49be10[_0x2348('0x11')][_0x2348('0x26')]=!![];_0x33f236++;}(_0x388970[_0x2348('0x3d')]()));});}else{_0x49be10['SocketVariables'][_0x2348('0x26')]=![];_0x33f236++;}}function _0x116534(){if(os[_0x2348('0x38')]()!=_0x2348('0x48')){shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0xa285e2,_0x2b32ad,_0x53fbe2){(function(_0x24b798){var _0x5cb323=_0x24b798[_0x2348('0x3d')]();if(_0x5cb323){if(_0x49be10[_0x2348('0x11')]['fusion_diagnostics_running'])_0x49be10[_0x2348('0x11')]['fusion_diagnostics_running'][_0x2348('0x4a')]=_0x5cb323;else{_0x49be10[_0x2348('0x11')][_0x2348('0x15')]={'process':_0x5cb323,'socket':-0x1};}}else _0x49be10[_0x2348('0x11')]['fusion_diagnostics_running']=null;_0x33f236++;}(_0x2b32ad[_0x2348('0x3d')]()));});}else{_0x49be10[_0x2348('0x11')][_0x2348('0x26')]=null;_0x33f236++;}}function _0x3fa328(){wpa_cli[_0x2348('0x4b')](_0x2348('0x4c'),function(_0x216f34,_0x13b2d8){if(_0x216f34){_0x13b2d8={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x49be10[_0x2348('0x11')][_0x2348('0x29')]=_0x13b2d8;_0x33f236++;});}_0x4c6a1e();_0x1a7937();setInterval(function(){_0x4c6a1e();_0x1a7937();},0x2710);};