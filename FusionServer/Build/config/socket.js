var _0x5a66=['stringify','fusion_wifi_access','Storage','type','fusion_program_running\x20:\x20','battery-level','internet-access','version-number','update-available','gamepad-available','fusion_gamepad_available','wifi-connection','wifi-fusion_storage_type','diagnostics_running','platform','win32','pipe','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','git\x20rev-parse\x20HEAD','exec','Build','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','git\x20describe\x20--tags\x20','fusion_latest_version','fusion_current_SHA','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','status','child_process','spawn','internet-available','wireless-tools/wpa_cli','shelljs','env','dev','path','request','config','connectedClients','dirname','split','sep','connection','Client\x20connected...','join','emit','global-message','disconnect','log','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','KillProgram','fusion_diagnostics_running','socket','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','indexOf','splice','error','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_diagnostics_running\x20:\x20'];(function(_0x219cf4,_0x4eed12){var _0x4a8b0a=function(_0x2b2783){while(--_0x2b2783){_0x219cf4['push'](_0x219cf4['shift']());}};_0x4a8b0a(++_0x4eed12);}(_0x5a66,0xbd));var _0x234b=function(_0x42cd1d,_0x145f3a){_0x42cd1d=_0x42cd1d-0x0;var _0xb9f4cc=_0x5a66[_0x42cd1d];return _0xb9f4cc;};var spawn=require(_0x234b('0x0'))[_0x234b('0x1')];var internetAvailable=require(_0x234b('0x2'));var wpa_cli=require(_0x234b('0x3'));var os=require('os');var shell=require(_0x234b('0x4'));var env=process[_0x234b('0x5')]['NODE_ENV']||_0x234b('0x6');var path=require(_0x234b('0x7'));var request=require(_0x234b('0x8'));const config=require(_0x234b('0x9'));module['exports']=function(_0x2ce742,_0x110df6,_0x1155ac){_0x1155ac[_0x234b('0xa')]=[];var _0x27eb54=path[_0x234b('0xb')](__dirname)[_0x234b('0xc')](path[_0x234b('0xd')])['pop']();var _0x46b1d0=0x0;var _0x241e6d=0xb;_0x2ce742['on'](_0x234b('0xe'),function(_0x984861){_0x1155ac[_0x234b('0xa')]['push'](_0x984861);console['log'](_0x234b('0xf'));_0x47dcb9();_0x984861['on'](_0x234b('0x10'),function(_0x1b3398){console['log'](_0x1b3398);_0x984861[_0x234b('0x11')](_0x234b('0x12'),{'message':'Hello\x20from\x20server','type':'success'});});_0x984861['on'](_0x234b('0x13'),function(_0x1a2320){console[_0x234b('0x14')](_0x234b('0x15')+_0x1a2320);if(_0x1155ac[_0x234b('0x16')][_0x234b('0x17')])if(_0x1155ac['SocketVariables'][_0x234b('0x17')][_0x234b('0x18')]==_0x984861['id'])_0x110df6[_0x234b('0x19')]();if(_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')])if(_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')][_0x234b('0x1b')]==_0x984861['id']){console[_0x234b('0x14')]('Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client');request({'url':_0x234b('0x1c'),'method':_0x234b('0x1d')},function(_0x4b66de,_0x100e28,_0x5acadb){if(_0x4b66de)console['log'](_0x234b('0x1e')+_0x4b66de);else{if(_0x100e28[_0x234b('0x1f')]==0xc8){_0x1155ac[_0x234b('0x16')]['fusion_diagnostics_running']=null;}}_0x2ce742[_0x234b('0x20')][_0x234b('0x11')]('diagnostics_running',_0x1155ac['SocketVariables']['fusion_diagnostics_running']);});}var _0x27ef69=_0x1155ac['connectedClients'][_0x234b('0x21')](_0x984861);_0x1155ac[_0x234b('0xa')][_0x234b('0x22')](_0x27ef69,0x1);});_0x984861['on'](_0x234b('0x23'),function(_0x5bd8a1){console['log']('Socket\x20error\x20-\x20'+_0x5bd8a1);});});function _0x461661(){_0xadf2b3();_0x88c0da();_0x2abf3c();_0xf05d6c();_0x4b97e4();_0x1f92c4();_0x257023();}function _0x50efd5(){if(_0x46b1d0>=_0x241e6d){console[_0x234b('0x14')](_0x234b('0x24'));console[_0x234b('0x14')](_0x234b('0x25')+_0x1155ac[_0x234b('0x16')][_0x234b('0x26')]);console[_0x234b('0x14')]('fusion_internet_access\x20:\x20'+_0x1155ac[_0x234b('0x16')][_0x234b('0x27')]);console[_0x234b('0x14')](_0x234b('0x28')+_0x1155ac[_0x234b('0x16')][_0x234b('0x29')]);console[_0x234b('0x14')]('fusion_update_available\x20:\x20'+_0x1155ac['SocketVariables'][_0x234b('0x2a')]);console['log'](_0x234b('0x2b')+_0x1155ac[_0x234b('0x16')]['fusion_gamepad_available']);console[_0x234b('0x14')](_0x234b('0x2c')+JSON[_0x234b('0x2d')](_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')]));console[_0x234b('0x14')]('fusion_wifi_access\x20:\x20'+JSON[_0x234b('0x2d')](_0x1155ac['SocketVariables'][_0x234b('0x2e')]));console[_0x234b('0x14')]('fusion_storage_type\x20:\x20'+_0x1155ac[_0x234b('0x2f')][_0x234b('0x30')]);console['log'](_0x234b('0x31')+JSON[_0x234b('0x2d')](_0x1155ac[_0x234b('0x16')][_0x234b('0x17')]));console['log']('-----------------------------------------------------');_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x32'),_0x1155ac[_0x234b('0x16')][_0x234b('0x26')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x33'),_0x1155ac[_0x234b('0x16')][_0x234b('0x27')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x34'),_0x1155ac[_0x234b('0x16')][_0x234b('0x29')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x35'),_0x1155ac[_0x234b('0x16')][_0x234b('0x2a')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x36'),_0x1155ac[_0x234b('0x16')][_0x234b('0x37')]);_0x2ce742['sockets']['emit']('diagnostics_running',_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x38'),_0x1155ac[_0x234b('0x16')]['fusion_wifi_access']);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x39'),_0x1155ac[_0x234b('0x2f')][_0x234b('0x30')]);_0x2ce742[_0x234b('0x20')]['emit']('program-running',_0x1155ac[_0x234b('0x16')][_0x234b('0x17')]);_0x46b1d0=0x0;}else{setTimeout(_0x50efd5,0x7d0);}}function _0x47dcb9(){_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x32'),_0x1155ac['SocketVariables']['fusion_battery_level']);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x33'),_0x1155ac[_0x234b('0x16')]['fusion_internet_access']);_0x2ce742['sockets'][_0x234b('0x11')](_0x234b('0x34'),_0x1155ac[_0x234b('0x16')]['fusion_current_version']);_0x2ce742[_0x234b('0x20')]['emit'](_0x234b('0x35'),_0x1155ac[_0x234b('0x16')][_0x234b('0x2a')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x36'),_0x1155ac[_0x234b('0x16')][_0x234b('0x37')]);_0x2ce742[_0x234b('0x20')][_0x234b('0x11')](_0x234b('0x3a'),_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')]);_0x2ce742[_0x234b('0x20')]['emit']('wifi-connection',_0x1155ac[_0x234b('0x16')][_0x234b('0x2e')]);_0x2ce742['sockets'][_0x234b('0x11')]('program-running',_0x1155ac['SocketVariables'][_0x234b('0x17')]);}function _0xadf2b3(){if(os[_0x234b('0x3b')]()!=_0x234b('0x3c')){var _0x313f92='./scripts/ReadBatt.py';var _0x165b3a=spawn('python',[_0x313f92],{'stdio':_0x234b('0x3d')});_0x165b3a['stdout']['on'](_0x234b('0x3e'),function(_0x358f70){_0x1155ac['SocketVariables'][_0x234b('0x26')]=String(_0x358f70)[_0x234b('0x3f')]();_0x46b1d0++;});_0x165b3a[_0x234b('0x40')]['on'](_0x234b('0x3e'),function(_0x539fd9){console[_0x234b('0x14')](_0x234b('0x41')+String(_0x539fd9));});}else{_0x46b1d0++;}}function _0x88c0da(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x234b('0x42')](function(){_0x1155ac[_0x234b('0x16')][_0x234b('0x27')]=!![];_0x46b1d0++;})[_0x234b('0x43')](function(){_0x1155ac[_0x234b('0x16')]['fusion_internet_access']=![];_0x46b1d0++;});}function _0x2abf3c(){shell['exec'](_0x234b('0x44'),{'silent':!![]},function(_0x39a66c,_0x21c334,_0x49fbe7){(function(_0x1295ec){_0x1155ac['SocketVariables']['fusion_current_SHA']=_0x1295ec[_0x234b('0x3f')]();_0x46b1d0++;_0x47f808();}(_0x21c334['trim']()));});}function _0x47f808(){shell[_0x234b('0x45')]('git\x20describe\x20--tags\x20'+_0x1155ac[_0x234b('0x16')]['fusion_current_SHA'],{'silent':!![]},function(_0x357095,_0x5d7126,_0x163aec){(function(_0x3989dc){_0x1155ac[_0x234b('0x16')][_0x234b('0x29')]=_0x3989dc[_0x234b('0x3f')]();_0x46b1d0++;_0x12ec73();}(_0x5d7126[_0x234b('0x3f')]()));});}function _0x12ec73(){if(_0x27eb54==_0x234b('0x46')){shell[_0x234b('0x45')]('git\x20fetch',{'silent':!![]},function(_0x22952b,_0x377510,_0x32d082){(function(_0x3b7fbf){_0x46b1d0++;_0x46ad6b();}(_0x377510[_0x234b('0x3f')]()));});}else{_0x46b1d0++;_0x46ad6b();}}function _0x46ad6b(){shell[_0x234b('0x45')](_0x234b('0x47'),{'silent':!![]},function(_0x3a7652,_0x598831,_0x572b2c){(function(_0x12b09a){_0x1155ac['SocketVariables'][_0x234b('0x48')]=_0x12b09a[_0x234b('0x3f')]();_0x46b1d0++;_0x24bf32();}(_0x598831['trim']()));});}function _0x24bf32(){shell[_0x234b('0x45')](_0x234b('0x49')+_0x1155ac['SocketVariables'][_0x234b('0x48')],{'silent':!![]},function(_0x57c483,_0x559e4e,_0x3dc233){(function(_0x4896e5){_0x1155ac['SocketVariables'][_0x234b('0x4a')]=_0x4896e5[_0x234b('0x3f')]();_0x46b1d0++;}(_0x559e4e[_0x234b('0x3f')]()));});}function _0xf05d6c(){if(_0x1155ac[_0x234b('0x16')][_0x234b('0x4b')]!=_0x1155ac['SocketVariables'][_0x234b('0x48')]){_0x1155ac[_0x234b('0x16')]['fusion_update_available']=!![];}else{_0x1155ac[_0x234b('0x16')][_0x234b('0x2a')]=![];}_0x46b1d0++;}function _0x4b97e4(){if(os[_0x234b('0x3b')]()!='win32'){shell['exec'](_0x234b('0x4c'),{'silent':!![]},function(_0x59562b,_0x26f7ee,_0x1626c0){(function(_0x24ea9e){_0x1155ac[_0x234b('0x16')][_0x234b('0x37')]=_0x24ea9e[_0x234b('0x3f')]();if(!_0x1155ac[_0x234b('0x16')][_0x234b('0x37')])_0x1155ac['SocketVariables'][_0x234b('0x37')]=![];else _0x1155ac[_0x234b('0x16')][_0x234b('0x37')]=!![];_0x46b1d0++;}(_0x26f7ee[_0x234b('0x3f')]()));});}else{_0x1155ac[_0x234b('0x16')][_0x234b('0x37')]=![];_0x46b1d0++;}}function _0x1f92c4(){if(os[_0x234b('0x3b')]()!='win32'){shell[_0x234b('0x45')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x53b312,_0x4a4a0c,_0x53ab60){(function(_0x318f7d){var _0x5904aa=_0x318f7d['trim']();if(_0x5904aa){if(_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')])_0x1155ac[_0x234b('0x16')][_0x234b('0x1a')]['process']=_0x5904aa;else{_0x1155ac['SocketVariables']['fusion_diagnostics_running']={'process':_0x5904aa,'socket':-0x1};}}else _0x1155ac['SocketVariables'][_0x234b('0x1a')]=null;_0x46b1d0++;}(_0x4a4a0c['trim']()));});}else{_0x1155ac['SocketVariables'][_0x234b('0x37')]=null;_0x46b1d0++;}}function _0x257023(){wpa_cli[_0x234b('0x4d')](config['get']('Wifi_NIC'),function(_0x4d7269,_0xc106a4){if(_0x4d7269){_0xc106a4={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x1155ac[_0x234b('0x16')]['fusion_wifi_access']=_0xc106a4;_0x46b1d0++;});}_0x50efd5();_0x461661();setInterval(function(){_0x50efd5();_0x461661();},0x2710);};