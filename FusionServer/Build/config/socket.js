var _0x419d=['path','request','exports','connectedClients','dirname','split','sep','pop','connection','push','log','Client\x20connected...','join','emit','global-message','Hello\x20from\x20server','success','disconnect','fusion_program_running','SocketId','KillProgram','SocketVariables','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','statusCode','sockets','splice','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','Storage','type','battery-level','internet-access','version-number','update-available','gamepad-available','wifi-connection','program-running','diagnostics_running','platform','python','pipe','stdout','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20fetch','fusion_latest_SHA','git\x20describe\x20--tags\x20','fusion_latest_version','win32','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','child_process','spawn','internet-available','env','NODE_ENV','dev'];(function(_0x5585e9,_0x51438e){var _0x277750=function(_0x114db4){while(--_0x114db4){_0x5585e9['push'](_0x5585e9['shift']());}};_0x277750(++_0x51438e);}(_0x419d,0x13a));var _0x5989=function(_0xf1a17e,_0x234ff5){_0xf1a17e=_0xf1a17e-0x0;var _0x124f14=_0x419d[_0xf1a17e];return _0x124f14;};var spawn=require(_0x5989('0x0'))[_0x5989('0x1')];var internetAvailable=require(_0x5989('0x2'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require('shelljs');var env=process[_0x5989('0x3')][_0x5989('0x4')]||_0x5989('0x5');var path=require(_0x5989('0x6'));var request=require(_0x5989('0x7'));module[_0x5989('0x8')]=function(_0x275a52,_0x11a245,_0x48cb71){_0x48cb71[_0x5989('0x9')]=[];var _0x558994=path[_0x5989('0xa')](__dirname)[_0x5989('0xb')](path[_0x5989('0xc')])[_0x5989('0xd')]();var _0x2b3957=0x0;var _0x375a36=0xb;_0x275a52['on'](_0x5989('0xe'),function(_0x446dbe){_0x48cb71[_0x5989('0x9')][_0x5989('0xf')](_0x446dbe);console[_0x5989('0x10')](_0x5989('0x11'));_0x3b119f();_0x446dbe['on'](_0x5989('0x12'),function(_0x43cb43){console[_0x5989('0x10')](_0x43cb43);_0x446dbe[_0x5989('0x13')](_0x5989('0x14'),{'message':_0x5989('0x15'),'type':_0x5989('0x16')});});_0x446dbe['on'](_0x5989('0x17'),function(_0x1d27c7){console[_0x5989('0x10')]('Client\x20disconnected\x20-\x20'+_0x1d27c7);if(_0x48cb71['SocketVariables'][_0x5989('0x18')])if(_0x48cb71['SocketVariables'][_0x5989('0x18')][_0x5989('0x19')]==_0x446dbe['id'])_0x11a245[_0x5989('0x1a')]();if(_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')])if(_0x48cb71[_0x5989('0x1b')]['fusion_diagnostics_running'][_0x5989('0x1d')]==_0x446dbe['id']){console[_0x5989('0x10')](_0x5989('0x1e'));request({'url':_0x5989('0x1f'),'method':'GET'},function(_0x1e1d42,_0xf8200,_0x20e16c){if(_0x1e1d42)console[_0x5989('0x10')](_0x5989('0x20')+_0x1e1d42);else{if(_0xf8200[_0x5989('0x21')]==0xc8){_0x48cb71[_0x5989('0x1b')]['fusion_diagnostics_running']=null;}}_0x275a52[_0x5989('0x22')][_0x5989('0x13')]('diagnostics_running',_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')]);});}var _0x42598b=_0x48cb71[_0x5989('0x9')]['indexOf'](_0x446dbe);_0x48cb71[_0x5989('0x9')][_0x5989('0x23')](_0x42598b,0x1);});_0x446dbe['on']('error',function(_0x4b43f0){console[_0x5989('0x10')](_0x5989('0x24')+_0x4b43f0);});});function _0xfd3caf(){_0x138867();_0x3d9aa2();_0x142fb8();_0x4a5e82();_0x14f7da();_0x42fb20();_0x47a621();}function _0x33ebaa(){if(_0x2b3957>=_0x375a36){console['log'](_0x5989('0x25'));console[_0x5989('0x10')](_0x5989('0x26')+_0x48cb71[_0x5989('0x1b')][_0x5989('0x27')]);console[_0x5989('0x10')](_0x5989('0x28')+_0x48cb71['SocketVariables'][_0x5989('0x29')]);console[_0x5989('0x10')](_0x5989('0x2a')+_0x48cb71[_0x5989('0x1b')][_0x5989('0x2b')]);console[_0x5989('0x10')]('fusion_update_available\x20:\x20'+_0x48cb71[_0x5989('0x1b')][_0x5989('0x2c')]);console[_0x5989('0x10')](_0x5989('0x2d')+_0x48cb71[_0x5989('0x1b')][_0x5989('0x2e')]);console[_0x5989('0x10')]('fusion_diagnostics_running\x20:\x20'+JSON[_0x5989('0x2f')](_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')]));console['log'](_0x5989('0x30')+JSON['stringify'](_0x48cb71[_0x5989('0x1b')][_0x5989('0x31')]));console[_0x5989('0x10')]('fusion_storage_type\x20:\x20'+_0x48cb71[_0x5989('0x32')][_0x5989('0x33')]);console[_0x5989('0x10')]('fusion_program_running\x20:\x20'+JSON['stringify'](_0x48cb71[_0x5989('0x1b')][_0x5989('0x18')]));console[_0x5989('0x10')](_0x5989('0x25'));_0x275a52[_0x5989('0x22')]['emit'](_0x5989('0x34'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x27')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x35'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x29')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x36'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x2b')]);_0x275a52[_0x5989('0x22')]['emit'](_0x5989('0x37'),_0x48cb71['SocketVariables'][_0x5989('0x2c')]);_0x275a52[_0x5989('0x22')]['emit'](_0x5989('0x38'),_0x48cb71[_0x5989('0x1b')]['fusion_gamepad_available']);_0x275a52['sockets'][_0x5989('0x13')]('diagnostics_running',_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')]);_0x275a52[_0x5989('0x22')]['emit'](_0x5989('0x39'),_0x48cb71[_0x5989('0x1b')]['fusion_wifi_access']);_0x275a52[_0x5989('0x22')][_0x5989('0x13')]('wifi-fusion_storage_type',_0x48cb71[_0x5989('0x32')][_0x5989('0x33')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x3a'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x18')]);_0x2b3957=0x0;}else{setTimeout(_0x33ebaa,0x7d0);}}function _0x3b119f(){_0x275a52['sockets'][_0x5989('0x13')]('battery-level',_0x48cb71[_0x5989('0x1b')][_0x5989('0x27')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x35'),_0x48cb71['SocketVariables'][_0x5989('0x29')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')]('version-number',_0x48cb71['SocketVariables'][_0x5989('0x2b')]);_0x275a52['sockets'][_0x5989('0x13')](_0x5989('0x37'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x2c')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x38'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x2e')]);_0x275a52['sockets'][_0x5989('0x13')](_0x5989('0x3b'),_0x48cb71['SocketVariables'][_0x5989('0x1c')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x39'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x31')]);_0x275a52[_0x5989('0x22')][_0x5989('0x13')](_0x5989('0x3a'),_0x48cb71[_0x5989('0x1b')][_0x5989('0x18')]);}function _0x138867(){if(os[_0x5989('0x3c')]()!='win32'){var _0x20e28d='./scripts/ReadBatt.py';var _0xdb96c7=spawn(_0x5989('0x3d'),[_0x20e28d],{'stdio':_0x5989('0x3e')});_0xdb96c7[_0x5989('0x3f')]['on'](_0x5989('0x40'),function(_0x364bb9){_0x48cb71['SocketVariables'][_0x5989('0x27')]=String(_0x364bb9)[_0x5989('0x41')]();_0x2b3957++;});_0xdb96c7[_0x5989('0x42')]['on'](_0x5989('0x40'),function(_0x30af45){console[_0x5989('0x10')](_0x5989('0x43')+String(_0x30af45));});}else{_0x2b3957++;}}function _0x3d9aa2(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x5989('0x44')](function(){_0x48cb71[_0x5989('0x1b')][_0x5989('0x29')]=!![];_0x2b3957++;})['catch'](function(){_0x48cb71[_0x5989('0x1b')]['fusion_internet_access']=![];_0x2b3957++;});}function _0x142fb8(){shell[_0x5989('0x45')](_0x5989('0x46'),{'silent':!![]},function(_0x5edb3d,_0xaf22fb,_0x38beea){(function(_0x54f8a1){_0x48cb71[_0x5989('0x1b')][_0x5989('0x47')]=_0x54f8a1['trim']();_0x2b3957++;_0x3345d0();}(_0xaf22fb[_0x5989('0x41')]()));});}function _0x3345d0(){shell[_0x5989('0x45')]('git\x20describe\x20--tags\x20'+_0x48cb71[_0x5989('0x1b')][_0x5989('0x47')],{'silent':!![]},function(_0x36b8fc,_0x326f51,_0x1c819f){(function(_0x4ed0e4){_0x48cb71[_0x5989('0x1b')][_0x5989('0x2b')]=_0x4ed0e4['trim']();_0x2b3957++;_0x1b0b9f();}(_0x326f51[_0x5989('0x41')]()));});}function _0x1b0b9f(){if(_0x558994=='Build'){shell[_0x5989('0x45')](_0x5989('0x48'),{'silent':!![]},function(_0x2613bb,_0x53c093,_0x4af2a6){(function(_0x5ea90a){_0x2b3957++;_0x1b523a();}(_0x53c093[_0x5989('0x41')]()));});}else{_0x2b3957++;_0x1b523a();}}function _0x1b523a(){shell[_0x5989('0x45')]('git\x20rev-list\x20--tags\x20--max-count=1',{'silent':!![]},function(_0x2d9c40,_0x129ed4,_0x1fb89f){(function(_0x13901b){_0x48cb71['SocketVariables'][_0x5989('0x49')]=_0x13901b[_0x5989('0x41')]();_0x2b3957++;_0x39fc0b();}(_0x129ed4['trim']()));});}function _0x39fc0b(){shell[_0x5989('0x45')](_0x5989('0x4a')+_0x48cb71[_0x5989('0x1b')][_0x5989('0x49')],{'silent':!![]},function(_0x58e808,_0x27c6c9,_0x59e643){(function(_0x25782c){_0x48cb71[_0x5989('0x1b')][_0x5989('0x4b')]=_0x25782c[_0x5989('0x41')]();_0x2b3957++;}(_0x27c6c9[_0x5989('0x41')]()));});}function _0x4a5e82(){if(_0x48cb71['SocketVariables'][_0x5989('0x47')]!=_0x48cb71[_0x5989('0x1b')]['fusion_latest_SHA']){_0x48cb71[_0x5989('0x1b')][_0x5989('0x2c')]=!![];}else{_0x48cb71[_0x5989('0x1b')]['fusion_update_available']=![];}_0x2b3957++;}function _0x14f7da(){if(os[_0x5989('0x3c')]()!=_0x5989('0x4c')){shell[_0x5989('0x45')]('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]},function(_0x483f00,_0x481d8e,_0x2401c2){(function(_0x2bcf06){_0x48cb71[_0x5989('0x1b')]['fusion_gamepad_available']=_0x2bcf06[_0x5989('0x41')]();if(!_0x48cb71[_0x5989('0x1b')][_0x5989('0x2e')])_0x48cb71['SocketVariables'][_0x5989('0x2e')]=![];else _0x48cb71[_0x5989('0x1b')][_0x5989('0x2e')]=!![];_0x2b3957++;}(_0x481d8e[_0x5989('0x41')]()));});}else{_0x48cb71[_0x5989('0x1b')][_0x5989('0x2e')]=![];_0x2b3957++;}}function _0x42fb20(){if(os[_0x5989('0x3c')]()!=_0x5989('0x4c')){shell[_0x5989('0x45')](_0x5989('0x4d'),{'silent':!![]},function(_0x34515d,_0x3b1bfd,_0x5541c9){(function(_0x110d7e){var _0x4c97f0=_0x110d7e[_0x5989('0x41')]();if(_0x4c97f0){if(_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')])_0x48cb71[_0x5989('0x1b')][_0x5989('0x1c')][_0x5989('0x4e')]=_0x4c97f0;else{_0x48cb71[_0x5989('0x1b')]['fusion_diagnostics_running']={'process':_0x4c97f0,'socket':-0x1};}}else _0x48cb71[_0x5989('0x1b')]['fusion_diagnostics_running']=null;_0x2b3957++;}(_0x3b1bfd[_0x5989('0x41')]()));});}else{_0x48cb71['SocketVariables'][_0x5989('0x2e')]=null;_0x2b3957++;}}function _0x47a621(){wpa_cli[_0x5989('0x4f')]('wlan1',function(_0x1f3e12,_0x231e34){if(_0x1f3e12){_0x231e34={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x48cb71[_0x5989('0x1b')]['fusion_wifi_access']=_0x231e34;_0x2b3957++;});}_0x33ebaa();_0xfd3caf();setInterval(function(){_0x33ebaa();_0xfd3caf();},0x2710);};