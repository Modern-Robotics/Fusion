var _0x13a7=['fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','fusion_storage_type\x20:\x20','type','fusion_program_running\x20:\x20','-----------------------------------------------------','battery-level','internet-access','version-number','fusion_current_version','update-available','gamepad-available','diagnostics_running','wifi-fusion_storage_type','wifi-connection','program-running','platform','win32','./scripts/ReadBatt.py','python','data','trim','stderr','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20rev-parse\x20HEAD','fusion_current_SHA','git\x20describe\x20--tags\x20','Build','git\x20fetch','git\x20rev-list\x20--tags\x20--max-count=1','fusion_latest_SHA','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','status','get','Wifi_NIC','spawn','internet-available','wireless-tools/wpa_cli','shelljs','env','NODE_ENV','dev','path','request','config','exports','connectedClients','dirname','sep','pop','push','log','Client\x20connected...','join','emit','global-message','Hello\x20from\x20server','disconnect','Client\x20disconnected\x20-\x20','SocketVariables','fusion_program_running','SocketId','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','GET','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','sockets','indexOf','splice','error','Socket\x20error\x20-\x20','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available'];(function(_0x298738,_0x131e36){var _0x544d77=function(_0x5e66ae){while(--_0x5e66ae){_0x298738['push'](_0x298738['shift']());}};_0x544d77(++_0x131e36);}(_0x13a7,0x12e));var _0x10da=function(_0x1ccf97,_0x2436e8){_0x1ccf97=_0x1ccf97-0x0;var _0x2a04e8=_0x13a7[_0x1ccf97];return _0x2a04e8;};var spawn=require('child_process')[_0x10da('0x0')];var internetAvailable=require(_0x10da('0x1'));var wpa_cli=require(_0x10da('0x2'));var os=require('os');var shell=require(_0x10da('0x3'));var env=process[_0x10da('0x4')][_0x10da('0x5')]||_0x10da('0x6');var path=require(_0x10da('0x7'));var request=require(_0x10da('0x8'));const config=require(_0x10da('0x9'));module[_0x10da('0xa')]=function(_0x4713d0,_0x310434,_0x3288b9){_0x3288b9[_0x10da('0xb')]=[];var _0x55abef=path[_0x10da('0xc')](__dirname)['split'](path[_0x10da('0xd')])[_0x10da('0xe')]();var _0x381e04=0x0;var _0x651c8b=0xb;_0x4713d0['on']('connection',function(_0x48f34d){_0x3288b9[_0x10da('0xb')][_0x10da('0xf')](_0x48f34d);console[_0x10da('0x10')](_0x10da('0x11'));_0x3d8b20();_0x48f34d['on'](_0x10da('0x12'),function(_0x51a574){console[_0x10da('0x10')](_0x51a574);_0x48f34d[_0x10da('0x13')](_0x10da('0x14'),{'message':_0x10da('0x15'),'type':'success'});});_0x48f34d['on'](_0x10da('0x16'),function(_0xc88cc2){console[_0x10da('0x10')](_0x10da('0x17')+_0xc88cc2);if(_0x3288b9[_0x10da('0x18')][_0x10da('0x19')])if(_0x3288b9['SocketVariables'][_0x10da('0x19')][_0x10da('0x1a')]==_0x48f34d['id'])_0x310434['KillProgram']();if(_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')])if(_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')][_0x10da('0x1c')]==_0x48f34d['id']){console[_0x10da('0x10')](_0x10da('0x1d'));request({'url':_0x10da('0x1e'),'method':_0x10da('0x1f')},function(_0x5d1870,_0x1d4209,_0x1d5e04){if(_0x5d1870)console[_0x10da('0x10')](_0x10da('0x20')+_0x5d1870);else{if(_0x1d4209['statusCode']==0xc8){_0x3288b9['SocketVariables'][_0x10da('0x1b')]=null;}}_0x4713d0[_0x10da('0x21')][_0x10da('0x13')]('diagnostics_running',_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]);});}var _0x3b9efa=_0x3288b9['connectedClients'][_0x10da('0x22')](_0x48f34d);_0x3288b9[_0x10da('0xb')][_0x10da('0x23')](_0x3b9efa,0x1);});_0x48f34d['on'](_0x10da('0x24'),function(_0xe03ed0){console['log'](_0x10da('0x25')+_0xe03ed0);});});function _0x47bbe0(){_0xa79d12();_0x101268();_0x2e26eb();_0xc44328();_0x57764b();_0x412e66();_0xc65ed9();}function _0x588752(){if(_0x381e04>=_0x651c8b){console['log']('-----------------------------------------------------');console[_0x10da('0x10')](_0x10da('0x26')+_0x3288b9[_0x10da('0x18')][_0x10da('0x27')]);console['log'](_0x10da('0x28')+_0x3288b9[_0x10da('0x18')][_0x10da('0x29')]);console[_0x10da('0x10')](_0x10da('0x2a')+_0x3288b9['SocketVariables']['fusion_current_version']);console[_0x10da('0x10')]('fusion_update_available\x20:\x20'+_0x3288b9[_0x10da('0x18')][_0x10da('0x2b')]);console['log'](_0x10da('0x2c')+_0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]);console[_0x10da('0x10')](_0x10da('0x2e')+JSON[_0x10da('0x2f')](_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]));console[_0x10da('0x10')](_0x10da('0x30')+JSON[_0x10da('0x2f')](_0x3288b9[_0x10da('0x18')][_0x10da('0x31')]));console[_0x10da('0x10')](_0x10da('0x32')+_0x3288b9['Storage'][_0x10da('0x33')]);console[_0x10da('0x10')](_0x10da('0x34')+JSON[_0x10da('0x2f')](_0x3288b9['SocketVariables']['fusion_program_running']));console[_0x10da('0x10')](_0x10da('0x35'));_0x4713d0[_0x10da('0x21')][_0x10da('0x13')](_0x10da('0x36'),_0x3288b9[_0x10da('0x18')][_0x10da('0x27')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x37'),_0x3288b9[_0x10da('0x18')][_0x10da('0x29')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x38'),_0x3288b9['SocketVariables'][_0x10da('0x39')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x3a'),_0x3288b9[_0x10da('0x18')][_0x10da('0x2b')]);_0x4713d0[_0x10da('0x21')][_0x10da('0x13')](_0x10da('0x3b'),_0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x3c'),_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]);_0x4713d0[_0x10da('0x21')][_0x10da('0x13')]('wifi-connection',_0x3288b9[_0x10da('0x18')][_0x10da('0x31')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x3d'),_0x3288b9['Storage'][_0x10da('0x33')]);_0x4713d0[_0x10da('0x21')][_0x10da('0x13')]('program-running',_0x3288b9[_0x10da('0x18')][_0x10da('0x19')]);_0x381e04=0x0;}else{setTimeout(_0x588752,0x7d0);}}function _0x3d8b20(){_0x4713d0['sockets'][_0x10da('0x13')](_0x10da('0x36'),_0x3288b9[_0x10da('0x18')][_0x10da('0x27')]);_0x4713d0[_0x10da('0x21')][_0x10da('0x13')](_0x10da('0x37'),_0x3288b9['SocketVariables']['fusion_internet_access']);_0x4713d0[_0x10da('0x21')][_0x10da('0x13')]('version-number',_0x3288b9[_0x10da('0x18')][_0x10da('0x39')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x3a'),_0x3288b9[_0x10da('0x18')][_0x10da('0x2b')]);_0x4713d0[_0x10da('0x21')]['emit']('gamepad-available',_0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]);_0x4713d0['sockets'][_0x10da('0x13')]('diagnostics_running',_0x3288b9['SocketVariables'][_0x10da('0x1b')]);_0x4713d0['sockets']['emit'](_0x10da('0x3e'),_0x3288b9['SocketVariables'][_0x10da('0x31')]);_0x4713d0[_0x10da('0x21')]['emit'](_0x10da('0x3f'),_0x3288b9[_0x10da('0x18')][_0x10da('0x19')]);}function _0xa79d12(){if(os[_0x10da('0x40')]()!=_0x10da('0x41')){var _0xa08e1a=_0x10da('0x42');var _0xc49b3c=spawn(_0x10da('0x43'),[_0xa08e1a],{'stdio':'pipe'});_0xc49b3c['stdout']['on'](_0x10da('0x44'),function(_0x29ea2f){_0x3288b9[_0x10da('0x18')][_0x10da('0x27')]=String(_0x29ea2f)[_0x10da('0x45')]();_0x381e04++;});_0xc49b3c[_0x10da('0x46')]['on'](_0x10da('0x44'),function(_0x101503){console[_0x10da('0x10')](_0x10da('0x47')+String(_0x101503));});}else{_0x381e04++;}}function _0x101268(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x10da('0x48')](function(){_0x3288b9[_0x10da('0x18')][_0x10da('0x29')]=!![];_0x381e04++;})[_0x10da('0x49')](function(){_0x3288b9[_0x10da('0x18')][_0x10da('0x29')]=![];_0x381e04++;});}function _0x2e26eb(){shell[_0x10da('0x4a')](_0x10da('0x4b'),{'silent':!![]},function(_0x1b51dc,_0x616c1a,_0x3b8725){(function(_0x5539ae){_0x3288b9[_0x10da('0x18')][_0x10da('0x4c')]=_0x5539ae[_0x10da('0x45')]();_0x381e04++;_0x418141();}(_0x616c1a[_0x10da('0x45')]()));});}function _0x418141(){shell[_0x10da('0x4a')](_0x10da('0x4d')+_0x3288b9[_0x10da('0x18')][_0x10da('0x4c')],{'silent':!![]},function(_0x574fff,_0x3340be,_0x24a36f){(function(_0x576982){_0x3288b9[_0x10da('0x18')][_0x10da('0x39')]=_0x576982[_0x10da('0x45')]();_0x381e04++;_0x582c01();}(_0x3340be[_0x10da('0x45')]()));});}function _0x582c01(){if(_0x55abef==_0x10da('0x4e')){shell[_0x10da('0x4a')](_0x10da('0x4f'),{'silent':!![]},function(_0x2b5807,_0x2ed37b,_0x2912c3){(function(_0x3e391e){_0x381e04++;_0x33ea11();}(_0x2ed37b[_0x10da('0x45')]()));});}else{_0x381e04++;_0x33ea11();}}function _0x33ea11(){shell[_0x10da('0x4a')](_0x10da('0x50'),{'silent':!![]},function(_0x5499b4,_0x3aeef6,_0x565e7a){(function(_0x2dd927){_0x3288b9[_0x10da('0x18')][_0x10da('0x51')]=_0x2dd927['trim']();_0x381e04++;_0x524df3();}(_0x3aeef6[_0x10da('0x45')]()));});}function _0x524df3(){shell['exec'](_0x10da('0x4d')+_0x3288b9[_0x10da('0x18')]['fusion_latest_SHA'],{'silent':!![]},function(_0x5175db,_0x1f1ac7,_0x5514e4){(function(_0x295766){_0x3288b9[_0x10da('0x18')]['fusion_latest_version']=_0x295766[_0x10da('0x45')]();_0x381e04++;}(_0x1f1ac7[_0x10da('0x45')]()));});}function _0xc44328(){if(_0x3288b9[_0x10da('0x18')][_0x10da('0x4c')]!=_0x3288b9[_0x10da('0x18')][_0x10da('0x51')]){_0x3288b9[_0x10da('0x18')][_0x10da('0x2b')]=!![];}else{_0x3288b9[_0x10da('0x18')][_0x10da('0x2b')]=![];}_0x381e04++;}function _0x57764b(){if(os['platform']()!='win32'){shell[_0x10da('0x4a')](_0x10da('0x52'),{'silent':!![]},function(_0x3b3bda,_0x409ca9,_0x346615){(function(_0x252ad7){_0x3288b9['SocketVariables'][_0x10da('0x2d')]=_0x252ad7[_0x10da('0x45')]();if(!_0x3288b9[_0x10da('0x18')]['fusion_gamepad_available'])_0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]=![];else _0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]=!![];_0x381e04++;}(_0x409ca9[_0x10da('0x45')]()));});}else{_0x3288b9['SocketVariables']['fusion_gamepad_available']=![];_0x381e04++;}}function _0x412e66(){if(os[_0x10da('0x40')]()!=_0x10da('0x41')){shell[_0x10da('0x4a')](_0x10da('0x53'),{'silent':!![]},function(_0x4af020,_0x267a09,_0x4a86e8){(function(_0x530e1f){var _0x44f572=_0x530e1f[_0x10da('0x45')]();if(_0x44f572){if(_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')])_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]['process']=_0x44f572;else{_0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]={'process':_0x44f572,'socket':-0x1};}}else _0x3288b9[_0x10da('0x18')][_0x10da('0x1b')]=null;_0x381e04++;}(_0x267a09[_0x10da('0x45')]()));});}else{_0x3288b9[_0x10da('0x18')][_0x10da('0x2d')]=null;_0x381e04++;}}function _0xc65ed9(){wpa_cli[_0x10da('0x54')](config[_0x10da('0x55')](_0x10da('0x56')),function(_0x377d58,_0x17b6ae){if(_0x377d58){_0x17b6ae={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x3288b9[_0x10da('0x18')][_0x10da('0x31')]=_0x17b6ae;_0x381e04++;});}_0x588752();_0x47bbe0();setInterval(function(){_0x588752();_0x47bbe0();},0x2710);};