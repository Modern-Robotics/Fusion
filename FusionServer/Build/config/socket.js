var _0x3493=['data','trim','Error\x20reading\x20battery\x20:\x20\x0a','then','catch','exec','git\x20describe\x20--tags\x20','fusion_current_SHA','Build','git\x20fetch','fusion_latest_SHA','fusion_latest_version','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process','status','wlan1','child_process','internet-available','shelljs','env','NODE_ENV','request','connectedClients','dirname','split','pop','push','log','Client\x20connected...','join','emit','success','disconnect','Client\x20disconnected\x20-\x20','fusion_program_running','SocketVariables','SocketId','fusion_diagnostics_running','socket','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','http://localhost:8080/api/diagnostics/stop','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','splice','error','Socket\x20error\x20-\x20','-----------------------------------------------------','fusion_battery_level\x20:\x20','fusion_battery_level','fusion_internet_access\x20:\x20','fusion_internet_access','fusion_current_version\x20:\x20','fusion_current_version','fusion_update_available\x20:\x20','fusion_update_available','fusion_gamepad_available\x20:\x20','fusion_gamepad_available','fusion_diagnostics_running\x20:\x20','stringify','fusion_wifi_access\x20:\x20','fusion_wifi_access','Storage','type','fusion_program_running\x20:\x20','sockets','battery-level','version-number','update-available','gamepad-available','diagnostics_running','wifi-fusion_storage_type','program-running','platform','win32','./scripts/ReadBatt.py','python','pipe','stdout'];(function(_0x19c298,_0x5135e8){var _0x272506=function(_0x2750ec){while(--_0x2750ec){_0x19c298['push'](_0x19c298['shift']());}};_0x272506(++_0x5135e8);}(_0x3493,0xfb));var _0x81e9=function(_0x37d730,_0x33e279){_0x37d730=_0x37d730-0x0;var _0x3df69b=_0x3493[_0x37d730];return _0x3df69b;};var spawn=require(_0x81e9('0x0'))['spawn'];var internetAvailable=require(_0x81e9('0x1'));var wpa_cli=require('wireless-tools/wpa_cli');var os=require('os');var shell=require(_0x81e9('0x2'));var env=process[_0x81e9('0x3')][_0x81e9('0x4')]||'dev';var path=require('path');var request=require(_0x81e9('0x5'));module['exports']=function(_0x49ffd2,_0x21fa54,_0x470376){_0x470376[_0x81e9('0x6')]=[];var _0x36bf09=path[_0x81e9('0x7')](__dirname)[_0x81e9('0x8')](path['sep'])[_0x81e9('0x9')]();var _0x5dd128=0x0;var _0x4d327a=0xb;_0x49ffd2['on']('connection',function(_0x389816){_0x470376[_0x81e9('0x6')][_0x81e9('0xa')](_0x389816);console[_0x81e9('0xb')](_0x81e9('0xc'));_0x2cee01();_0x389816['on'](_0x81e9('0xd'),function(_0x32ee67){console[_0x81e9('0xb')](_0x32ee67);_0x389816[_0x81e9('0xe')]('global-message',{'message':'Hello\x20from\x20server','type':_0x81e9('0xf')});});_0x389816['on'](_0x81e9('0x10'),function(_0x48ac4a){console[_0x81e9('0xb')](_0x81e9('0x11')+_0x48ac4a);if(_0x470376['SocketVariables'][_0x81e9('0x12')])if(_0x470376[_0x81e9('0x13')]['fusion_program_running'][_0x81e9('0x14')]==_0x389816['id'])_0x21fa54['KillProgram']();if(_0x470376[_0x81e9('0x13')][_0x81e9('0x15')])if(_0x470376[_0x81e9('0x13')]['fusion_diagnostics_running'][_0x81e9('0x16')]==_0x389816['id']){console['log'](_0x81e9('0x17'));request({'url':_0x81e9('0x18'),'method':'GET'},function(_0x127010,_0x49902e,_0x17c201){if(_0x127010)console[_0x81e9('0xb')](_0x81e9('0x19')+_0x127010);else{if(_0x49902e['statusCode']==0xc8){_0x470376[_0x81e9('0x13')][_0x81e9('0x15')]=null;}}_0x49ffd2['sockets']['emit']('diagnostics_running',_0x470376[_0x81e9('0x13')][_0x81e9('0x15')]);});}var _0x41a5e2=_0x470376[_0x81e9('0x6')]['indexOf'](_0x389816);_0x470376[_0x81e9('0x6')][_0x81e9('0x1a')](_0x41a5e2,0x1);});_0x389816['on'](_0x81e9('0x1b'),function(_0x3eb14a){console['log'](_0x81e9('0x1c')+_0x3eb14a);});});function _0x2f487b(){_0x3a6cbe();_0x2be474();_0x333ed9();_0x146392();_0x3784c5();_0x33598b();_0x4f022c();}function _0xe5fb08(){if(_0x5dd128>=_0x4d327a){console[_0x81e9('0xb')](_0x81e9('0x1d'));console['log'](_0x81e9('0x1e')+_0x470376[_0x81e9('0x13')][_0x81e9('0x1f')]);console[_0x81e9('0xb')](_0x81e9('0x20')+_0x470376[_0x81e9('0x13')][_0x81e9('0x21')]);console[_0x81e9('0xb')](_0x81e9('0x22')+_0x470376[_0x81e9('0x13')][_0x81e9('0x23')]);console['log'](_0x81e9('0x24')+_0x470376['SocketVariables'][_0x81e9('0x25')]);console[_0x81e9('0xb')](_0x81e9('0x26')+_0x470376[_0x81e9('0x13')][_0x81e9('0x27')]);console[_0x81e9('0xb')](_0x81e9('0x28')+JSON[_0x81e9('0x29')](_0x470376[_0x81e9('0x13')]['fusion_diagnostics_running']));console[_0x81e9('0xb')](_0x81e9('0x2a')+JSON[_0x81e9('0x29')](_0x470376[_0x81e9('0x13')][_0x81e9('0x2b')]));console[_0x81e9('0xb')]('fusion_storage_type\x20:\x20'+_0x470376[_0x81e9('0x2c')][_0x81e9('0x2d')]);console[_0x81e9('0xb')](_0x81e9('0x2e')+JSON['stringify'](_0x470376[_0x81e9('0x13')]['fusion_program_running']));console[_0x81e9('0xb')]('-----------------------------------------------------');_0x49ffd2[_0x81e9('0x2f')]['emit'](_0x81e9('0x30'),_0x470376[_0x81e9('0x13')]['fusion_battery_level']);_0x49ffd2[_0x81e9('0x2f')]['emit']('internet-access',_0x470376[_0x81e9('0x13')][_0x81e9('0x21')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x31'),_0x470376['SocketVariables'][_0x81e9('0x23')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x32'),_0x470376[_0x81e9('0x13')][_0x81e9('0x25')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x33'),_0x470376[_0x81e9('0x13')]['fusion_gamepad_available']);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x34'),_0x470376['SocketVariables']['fusion_diagnostics_running']);_0x49ffd2[_0x81e9('0x2f')]['emit']('wifi-connection',_0x470376[_0x81e9('0x13')][_0x81e9('0x2b')]);_0x49ffd2['sockets'][_0x81e9('0xe')](_0x81e9('0x35'),_0x470376['Storage'][_0x81e9('0x2d')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x36'),_0x470376[_0x81e9('0x13')][_0x81e9('0x12')]);_0x5dd128=0x0;}else{setTimeout(_0xe5fb08,0x7d0);}}function _0x2cee01(){_0x49ffd2['sockets']['emit'](_0x81e9('0x30'),_0x470376[_0x81e9('0x13')][_0x81e9('0x1f')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')]('internet-access',_0x470376[_0x81e9('0x13')][_0x81e9('0x21')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x31'),_0x470376[_0x81e9('0x13')]['fusion_current_version']);_0x49ffd2['sockets'][_0x81e9('0xe')](_0x81e9('0x32'),_0x470376[_0x81e9('0x13')][_0x81e9('0x25')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x33'),_0x470376['SocketVariables'][_0x81e9('0x27')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x34'),_0x470376[_0x81e9('0x13')][_0x81e9('0x15')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')]('wifi-connection',_0x470376['SocketVariables'][_0x81e9('0x2b')]);_0x49ffd2[_0x81e9('0x2f')][_0x81e9('0xe')](_0x81e9('0x36'),_0x470376[_0x81e9('0x13')]['fusion_program_running']);}function _0x3a6cbe(){if(os[_0x81e9('0x37')]()!=_0x81e9('0x38')){var _0x58bca1=_0x81e9('0x39');var _0x4f4c03=spawn(_0x81e9('0x3a'),[_0x58bca1],{'stdio':_0x81e9('0x3b')});_0x4f4c03[_0x81e9('0x3c')]['on'](_0x81e9('0x3d'),function(_0x1c8636){_0x470376[_0x81e9('0x13')][_0x81e9('0x1f')]=String(_0x1c8636)[_0x81e9('0x3e')]();_0x5dd128++;});_0x4f4c03['stderr']['on'](_0x81e9('0x3d'),function(_0x14941d){console[_0x81e9('0xb')](_0x81e9('0x3f')+String(_0x14941d));});}else{_0x5dd128++;}}function _0x2be474(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x81e9('0x40')](function(){_0x470376[_0x81e9('0x13')]['fusion_internet_access']=!![];_0x5dd128++;})[_0x81e9('0x41')](function(){_0x470376[_0x81e9('0x13')]['fusion_internet_access']=![];_0x5dd128++;});}function _0x333ed9(){shell['exec']('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x3c6d4e,_0x268194,_0x7d013){(function(_0x28e697){_0x470376['SocketVariables']['fusion_current_SHA']=_0x28e697[_0x81e9('0x3e')]();_0x5dd128++;_0x16f2e9();}(_0x268194[_0x81e9('0x3e')]()));});}function _0x16f2e9(){shell[_0x81e9('0x42')](_0x81e9('0x43')+_0x470376[_0x81e9('0x13')][_0x81e9('0x44')],{'silent':!![]},function(_0x3a750e,_0x1568f4,_0x6a7899){(function(_0x5b5cd6){_0x470376[_0x81e9('0x13')]['fusion_current_version']=_0x5b5cd6['trim']();_0x5dd128++;_0x28b59f();}(_0x1568f4[_0x81e9('0x3e')]()));});}function _0x28b59f(){if(_0x36bf09==_0x81e9('0x45')){shell[_0x81e9('0x42')](_0x81e9('0x46'),{'silent':!![]},function(_0x19acca,_0x25e926,_0x52e547){(function(_0x20c792){_0x5dd128++;_0x293967();}(_0x25e926['trim']()));});}else{_0x5dd128++;_0x293967();}}function _0x293967(){shell['exec']('git\x20rev-list\x20--tags\x20--max-count=1',{'silent':!![]},function(_0x399596,_0x5352fe,_0x192445){(function(_0x20f260){_0x470376[_0x81e9('0x13')]['fusion_latest_SHA']=_0x20f260[_0x81e9('0x3e')]();_0x5dd128++;_0x1c1383();}(_0x5352fe[_0x81e9('0x3e')]()));});}function _0x1c1383(){shell['exec'](_0x81e9('0x43')+_0x470376[_0x81e9('0x13')][_0x81e9('0x47')],{'silent':!![]},function(_0x32bdfd,_0xe9acd2,_0x4ea3f4){(function(_0x217e7f){_0x470376['SocketVariables'][_0x81e9('0x48')]=_0x217e7f[_0x81e9('0x3e')]();_0x5dd128++;}(_0xe9acd2[_0x81e9('0x3e')]()));});}function _0x146392(){if(_0x470376[_0x81e9('0x13')][_0x81e9('0x44')]!=_0x470376['SocketVariables'][_0x81e9('0x47')]){_0x470376[_0x81e9('0x13')]['fusion_update_available']=!![];}else{_0x470376['SocketVariables']['fusion_update_available']=![];}_0x5dd128++;}function _0x3784c5(){if(os['platform']()!=_0x81e9('0x38')){shell[_0x81e9('0x42')](_0x81e9('0x49'),{'silent':!![]},function(_0x4680d9,_0x3edbe3,_0x15ca15){(function(_0x18d46c){_0x470376[_0x81e9('0x13')][_0x81e9('0x27')]=_0x18d46c[_0x81e9('0x3e')]();if(!_0x470376[_0x81e9('0x13')][_0x81e9('0x27')])_0x470376[_0x81e9('0x13')][_0x81e9('0x27')]=![];else _0x470376[_0x81e9('0x13')][_0x81e9('0x27')]=!![];_0x5dd128++;}(_0x3edbe3[_0x81e9('0x3e')]()));});}else{_0x470376[_0x81e9('0x13')][_0x81e9('0x27')]=![];_0x5dd128++;}}function _0x33598b(){if(os['platform']()!='win32'){shell[_0x81e9('0x42')](_0x81e9('0x4a'),{'silent':!![]},function(_0x4419bf,_0x16f114,_0x169267){(function(_0x292696){var _0x401fa7=_0x292696[_0x81e9('0x3e')]();if(_0x401fa7){if(_0x470376[_0x81e9('0x13')][_0x81e9('0x15')])_0x470376[_0x81e9('0x13')]['fusion_diagnostics_running'][_0x81e9('0x4b')]=_0x401fa7;else{_0x470376[_0x81e9('0x13')][_0x81e9('0x15')]={'process':_0x401fa7,'socket':-0x1};}}else _0x470376[_0x81e9('0x13')][_0x81e9('0x15')]=null;_0x5dd128++;}(_0x16f114['trim']()));});}else{_0x470376[_0x81e9('0x13')][_0x81e9('0x27')]=null;_0x5dd128++;}}function _0x4f022c(){wpa_cli[_0x81e9('0x4c')](_0x81e9('0x4d'),function(_0x32b9de,_0x47bb50){if(_0x32b9de){_0x47bb50={'ssid':undefined,'ip':undefined,'mac':undefined};}_0x470376['SocketVariables'][_0x81e9('0x2b')]=_0x47bb50;_0x5dd128++;});}_0xe5fb08();_0x2f487b();setInterval(function(){_0xe5fb08();_0x2f487b();},0x2710);};