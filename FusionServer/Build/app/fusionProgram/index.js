const _0x3730=['python','platform','close','shelljs','kill','os.chdir(\x27./app/filesystem/','stdin','lastIndexOf','write','pipe','Program\x20is\x20now\x20stopped','KillProgram','../global/fusionSettings','win32','stderr','Blockly\x20Program\x20is\x20now\x20running','autonomous','Cannot\x20stop\x20another\x20user\x20program','spawn','imp.load_source(\x27util\x27,\x20r\x27','stdout','fusion_program_running','>\x20Program\x20Finished!\x0a','path','Program\x20already\x20running','StartBlocklyProgram','StartProgram','exports','Program\x20is\x20now\x20running','No\x20Program\x20Running','blockly-console-output','gamepad-available','program-running','No\x20program\x20running','fusion_gamepad_available','/Editor\x27)\x0a','SIGINT','SocketVariables','SocketId','/Blockly\x27)\x0a','import\x20os\x0a','sockets','../socket','User','Cannot\x20stop\x20another\x20user\x27s\x20program.','substring','import\x20imp\x0a','emit','../utils/logger','console-output','verbose','child_process','data','>\x20Program\x20Finished!'];(function(_0x58d927,_0x3730a4){const _0x4dce3b=function(_0x420e3a){while(--_0x420e3a){_0x58d927['push'](_0x58d927['shift']());}};_0x4dce3b(++_0x3730a4);}(_0x3730,0x1d9));const _0x4dce=function(_0x58d927,_0x3730a4){_0x58d927=_0x58d927-0x0;let _0x4dce3b=_0x3730[_0x58d927];return _0x4dce3b;};const logger=require(_0x4dce('0x7'));const io=require(_0x4dce('0x1'));const FusionSettings=require(_0x4dce('0x19'));const spawn=require(_0x4dce('0xa'))[_0x4dce('0x1f')];const shell=require(_0x4dce('0x10'));const os=require('os');const path=require(_0x4dce('0x24'));let python_process=null;module[_0x4dce('0x28')]=function(){var _0x1fa6bc=function(){};_0x1fa6bc[_0x4dce('0x27')]=function(_0x397f1a,_0x2f934f,_0x368d7c){if(!FusionSettings['SocketVariables'][_0x4dce('0x22')]){FusionSettings['SocketVariables']['fusion_program_running']={'Code':null,'Program':_0x2f934f,'SocketId':_0x368d7c,'User':_0x397f1a};_0xdb6138(_0x2f934f,_0x397f1a);logger[_0x4dce('0x9')](_0x4dce('0x29'));return{'status':0xc8,'message':_0x4dce('0x29')};}else{if(FusionSettings['SocketVariables']['fusion_program_running'][_0x4dce('0x2')]==_0x397f1a||FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')][_0x4dce('0x33')]==_0x4dce('0x1d')){try{python_process[_0x4dce('0x11')](_0x4dce('0x31'));}catch(_0x10d165){}FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]={'Code':null,'Program':_0x2f934f,'SocketId':_0x368d7c,'User':_0x397f1a};_0xdb6138(_0x2f934f,_0x397f1a);logger[_0x4dce('0x9')](_0x4dce('0x29'));return{'status':0xc8,'message':_0x4dce('0x29')};}else{logger['verbose']('Program\x20already\x20running');return{'status':0x1f4,'message':_0x4dce('0x25')};}}};_0x1fa6bc['StopProgram']=function(_0xa26ffb){if(FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]){if(FusionSettings['SocketVariables']['fusion_program_running'][_0x4dce('0x2')]==_0xa26ffb||FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')][_0x4dce('0x33')]=='autonomous'){FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]=null;try{python_process[_0x4dce('0x11')](_0x4dce('0x31'));}catch(_0x2d5441){}logger['verbose'](_0x4dce('0x17'));return{'status':0xc8,'message':'Program\x20Successfully\x20Stopped'};}else{logger[_0x4dce('0x9')](_0x4dce('0x1e'));return{'status':0x1f4,'message':_0x4dce('0x3')};}}else{logger['verbose'](_0x4dce('0x2e'));return{'status':0x1f4,'message':_0x4dce('0x2a')};}};_0x1fa6bc[_0x4dce('0x18')]=function(){FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]=null;try{python_process[_0x4dce('0x11')]('SIGINT');}catch(_0x28b8d3){}logger[_0x4dce('0x9')](_0x4dce('0x17'));};_0x1fa6bc[_0x4dce('0x26')]=function(_0x10b130,_0x2972a7,_0x595708){if(!FusionSettings['SocketVariables'][_0x4dce('0x22')]){FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]={'Code':_0x10b130,'Program':null,'SocketId':_0x595708,'User':_0x2972a7};_0x1ef526(_0x10b130,_0x2972a7);logger['verbose'](_0x4dce('0x1c'));return{'status':0xc8,'message':_0x4dce('0x1c')};}else{if(FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]['User']==_0x2972a7||FusionSettings['SocketVariables'][_0x4dce('0x22')][_0x4dce('0x33')]==_0x4dce('0x1d')){try{python_process[_0x4dce('0x11')]('SIGINT');}catch(_0x1fd025){}FusionSettings['SocketVariables']['fusion_program_running']={'Code':_0x10b130,'Program':null,'SocketId':_0x595708,'User':_0x2972a7};_0x1ef526(_0x10b130,_0x2972a7);logger[_0x4dce('0x9')](_0x4dce('0x1c'));return{'status':0xc8,'message':_0x4dce('0x1c')};}else{logger['verbose'](_0x4dce('0x25'));return{'status':0x1f4,'message':'Program\x20already\x20running'};}}};_0x1fa6bc['sendInput']=function(_0x1b4693){python_process[_0x4dce('0x13')][_0x4dce('0x15')](_0x1b4693+'\x0a');};function _0xdb6138(_0x411af6,_0x76e22d){let _0x557b7d=_0x4dce('0x35')+(_0x4dce('0x12')+_0x76e22d+_0x4dce('0x30'))+'import\x20imp\x0a'+(_0x4dce('0x20')+path['resolve'](_0x411af6)+'\x27)');python_process=spawn('python',['-u','-B','-c',_0x557b7d],{'stdio':_0x4dce('0x16')});io['sockets'][_0x4dce('0x6')](_0x4dce('0x2d'),FusionSettings['SocketVariables']['fusion_program_running']);_0xbb2a51();python_process['stdout']['on'](_0x4dce('0xb'),function(_0x37b399){logger['verbose'](String(_0x37b399)['substring'](0x0,_0x37b399['lastIndexOf']('\x0a')));io[_0x4dce('0x6')]('console-output',{'output':String(_0x37b399)});});python_process['stderr']['on'](_0x4dce('0xb'),function(_0x8ce1a4){logger[_0x4dce('0x9')](String(_0x8ce1a4)['substring'](0x0,_0x8ce1a4[_0x4dce('0x14')]('\x0a')));io[_0x4dce('0x6')](_0x4dce('0x8'),{'output':String(_0x8ce1a4)});io['sockets'][_0x4dce('0x6')]('program-running',FusionSettings['SocketVariables'][_0x4dce('0x22')]);io['sockets'][_0x4dce('0x6')](_0x4dce('0x2c'),![]);});python_process[_0x4dce('0x21')]['on']('close',function(_0x1ce7cf){FusionSettings[_0x4dce('0x32')]['fusion_program_running']=null;logger[_0x4dce('0x9')](String(_0x4dce('0xc')));io[_0x4dce('0x6')](_0x4dce('0x8'),{'output':String('>\x20Program\x20Finished!\x0a')});io[_0x4dce('0x0')][_0x4dce('0x6')](_0x4dce('0x2d'),FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]);io['sockets']['emit'](_0x4dce('0x2c'),![]);});}function _0x1ef526(_0xf96a6c,_0x1bde8c){let _0x1821bc=_0x4dce('0x35')+(_0x4dce('0x12')+_0x1bde8c+_0x4dce('0x34'))+_0x4dce('0x5')+(''+_0xf96a6c);if(os[_0x4dce('0xe')]()!=_0x4dce('0x1a')){python_process=spawn(_0x4dce('0xd'),['-u','-B','-c',_0x1821bc],{'stdio':_0x4dce('0x16')});}else{python_process=spawn(_0x4dce('0xd'),['-u','-B','-c',_0x1821bc],{'stdio':_0x4dce('0x16')});}io['sockets'][_0x4dce('0x6')](_0x4dce('0x2d'),FusionSettings[_0x4dce('0x32')]['fusion_program_running']);_0xbb2a51();python_process[_0x4dce('0x21')]['on'](_0x4dce('0xb'),function(_0x3e3133){logger[_0x4dce('0x9')](String(_0x3e3133)[_0x4dce('0x4')](0x0,_0x3e3133[_0x4dce('0x14')]('\x0a')));io[_0x4dce('0x6')](_0x4dce('0x2b'),{'output':String(_0x3e3133)});});python_process[_0x4dce('0x1b')]['on'](_0x4dce('0xb'),function(_0x4a0e0d){logger[_0x4dce('0x9')](String(_0x4a0e0d)[_0x4dce('0x4')](0x0,_0x4a0e0d[_0x4dce('0x14')]('\x0a')));io[_0x4dce('0x6')](_0x4dce('0x2b'),{'output':String(_0x4a0e0d)});io['sockets'][_0x4dce('0x6')]('program-running',FusionSettings['SocketVariables']['fusion_program_running']);io[_0x4dce('0x0')][_0x4dce('0x6')](_0x4dce('0x2c'),![]);});python_process[_0x4dce('0x21')]['on'](_0x4dce('0xf'),function(_0x2a161d){FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]=null;logger[_0x4dce('0x9')](String(_0x4dce('0xc')));io['emit'](_0x4dce('0x2b'),{'output':String(_0x4dce('0x23'))});io[_0x4dce('0x0')]['emit'](_0x4dce('0x2d'),FusionSettings[_0x4dce('0x32')][_0x4dce('0x22')]);io['sockets'][_0x4dce('0x6')](_0x4dce('0x2c'),![]);});}function _0xbb2a51(){if(os['platform']()!=_0x4dce('0x1a')){setTimeout(function(){var _0x591d89=shell['exec']('sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN',{'silent':!![]})[_0x4dce('0x21')];if(!_0x591d89)FusionSettings['SocketVariables'][_0x4dce('0x2f')]=![];else FusionSettings[_0x4dce('0x32')][_0x4dce('0x2f')]=!![];io[_0x4dce('0x0')][_0x4dce('0x6')](_0x4dce('0x2c'),FusionSettings[_0x4dce('0x32')]['fusion_gamepad_available']);},0x3e8);}}return _0x1fa6bc;}();