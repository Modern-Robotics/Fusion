const _0x27a8=['gamepad-available','win32','SocketVariables','os.chdir(\x27./app/filesystem/','Blockly\x20Program\x20is\x20now\x20running','lastIndexOf','python','User','SIGINT','stdout','/Editor\x27)\x0a','SocketId','fusion_program_running','verbose','stdin','>\x20Program\x20Finished!','Program\x20Successfully\x20Stopped','shelljs','resolve','../utils/logger','data','../global/fusionSettings','StartBlocklyProgram','console-output','spawn','sockets','No\x20Program\x20Running','child_process','emit','blockly-console-output','KillProgram','stderr','close','autonomous','Program\x20is\x20now\x20running','pipe','import\x20os\x0a','StopProgram','/Blockly\x27)\x0a','Cannot\x20stop\x20another\x20user\x27s\x20program.','imp.load_source(\x27util\x27,\x20r\x27','Cannot\x20stop\x20another\x20user\x20program','substring','platform','path','program-running','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','Program\x20already\x20running','Program\x20is\x20now\x20stopped','kill','fusion_gamepad_available','../socket','exports','import\x20imp\x0a','>\x20Program\x20Finished!\x0a'];(function(_0x1322d1,_0x27a845){const _0xe9c527=function(_0x45805f){while(--_0x45805f){_0x1322d1['push'](_0x1322d1['shift']());}};_0xe9c527(++_0x27a845);}(_0x27a8,0xb4));const _0xe9c5=function(_0x1322d1,_0x27a845){_0x1322d1=_0x1322d1-0x0;let _0xe9c527=_0x27a8[_0x1322d1];return _0xe9c527;};const logger=require(_0xe9c5('0x4'));const io=require(_0xe9c5('0x24'));const FusionSettings=require(_0xe9c5('0x6'));const spawn=require(_0xe9c5('0xc'))[_0xe9c5('0x9')];const shell=require(_0xe9c5('0x2'));const os=require('os');const path=require(_0xe9c5('0x1d'));let python_process=null;module[_0xe9c5('0x25')]=function(){var _0x564b89=function(){};_0x564b89['StartProgram']=function(_0x5f4ea8,_0x2717bb,_0x56bb1c){if(!FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]){FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]={'Code':null,'Program':_0x2717bb,'SocketId':_0x56bb1c,'User':_0x5f4ea8};_0x1da5c2(_0x2717bb,_0x5f4ea8);logger['verbose'](_0xe9c5('0x13'));return{'status':0xc8,'message':_0xe9c5('0x13')};}else{if(FusionSettings['SocketVariables']['fusion_program_running'][_0xe9c5('0x2f')]==_0x5f4ea8||FusionSettings[_0xe9c5('0x2a')]['fusion_program_running']['SocketId']==_0xe9c5('0x12')){try{python_process['kill'](_0xe9c5('0x30'));}catch(_0x4680c0){}FusionSettings[_0xe9c5('0x2a')]['fusion_program_running']={'Code':null,'Program':_0x2717bb,'SocketId':_0x56bb1c,'User':_0x5f4ea8};_0x1da5c2(_0x2717bb,_0x5f4ea8);logger[_0xe9c5('0x35')]('Program\x20is\x20now\x20running');return{'status':0xc8,'message':_0xe9c5('0x13')};}else{logger[_0xe9c5('0x35')](_0xe9c5('0x20'));return{'status':0x1f4,'message':_0xe9c5('0x20')};}}};_0x564b89[_0xe9c5('0x16')]=function(_0x33660d){if(FusionSettings['SocketVariables'][_0xe9c5('0x34')]){if(FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')][_0xe9c5('0x2f')]==_0x33660d||FusionSettings[_0xe9c5('0x2a')]['fusion_program_running'][_0xe9c5('0x33')]=='autonomous'){FusionSettings['SocketVariables']['fusion_program_running']=null;try{python_process[_0xe9c5('0x22')](_0xe9c5('0x30'));}catch(_0x7e75e7){}logger[_0xe9c5('0x35')]('Program\x20is\x20now\x20stopped');return{'status':0xc8,'message':_0xe9c5('0x1')};}else{logger[_0xe9c5('0x35')](_0xe9c5('0x1a'));return{'status':0x1f4,'message':_0xe9c5('0x18')};}}else{logger[_0xe9c5('0x35')]('No\x20program\x20running');return{'status':0x1f4,'message':_0xe9c5('0xb')};}};_0x564b89[_0xe9c5('0xf')]=function(){FusionSettings['SocketVariables'][_0xe9c5('0x34')]=null;try{python_process['kill'](_0xe9c5('0x30'));}catch(_0x341707){}logger[_0xe9c5('0x35')](_0xe9c5('0x21'));};_0x564b89[_0xe9c5('0x7')]=function(_0x2c49ac,_0x304b8d,_0xce99df){if(!FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]){FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]={'Code':_0x2c49ac,'Program':null,'SocketId':_0xce99df,'User':_0x304b8d};_0x102f2f(_0x2c49ac,_0x304b8d);logger[_0xe9c5('0x35')]('Blockly\x20Program\x20is\x20now\x20running');return{'status':0xc8,'message':_0xe9c5('0x2c')};}else{if(FusionSettings['SocketVariables'][_0xe9c5('0x34')][_0xe9c5('0x2f')]==_0x304b8d||FusionSettings['SocketVariables'][_0xe9c5('0x34')][_0xe9c5('0x33')]==_0xe9c5('0x12')){try{python_process[_0xe9c5('0x22')](_0xe9c5('0x30'));}catch(_0x1a8d72){}FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]={'Code':_0x2c49ac,'Program':null,'SocketId':_0xce99df,'User':_0x304b8d};_0x102f2f(_0x2c49ac,_0x304b8d);logger['verbose'](_0xe9c5('0x2c'));return{'status':0xc8,'message':_0xe9c5('0x2c')};}else{logger[_0xe9c5('0x35')]('Program\x20already\x20running');return{'status':0x1f4,'message':_0xe9c5('0x20')};}}};_0x564b89['sendInput']=function(_0x13589d){python_process[_0xe9c5('0x36')]['write'](_0x13589d+'\x0a');};function _0x1da5c2(_0x208bc4,_0x4dfe5c){let _0x5e047a='import\x20os\x0a'+(_0xe9c5('0x2b')+_0x4dfe5c+_0xe9c5('0x32'))+_0xe9c5('0x26')+(_0xe9c5('0x19')+path[_0xe9c5('0x3')](_0x208bc4)+'\x27)');python_process=spawn('python',['-u','-B','-c',_0x5e047a],{'stdio':_0xe9c5('0x14')});io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x1e'),FusionSettings[_0xe9c5('0x2a')]['fusion_program_running']);_0x32de94();python_process['stdout']['on'](_0xe9c5('0x5'),function(_0x21278e){logger['verbose'](String(_0x21278e)[_0xe9c5('0x1b')](0x0,_0x21278e[_0xe9c5('0x2d')]('\x0a')));io['emit'](_0xe9c5('0x8'),{'output':String(_0x21278e)});});python_process[_0xe9c5('0x10')]['on']('data',function(_0x2f36f7){logger['verbose'](String(_0x2f36f7)['substring'](0x0,_0x2f36f7[_0xe9c5('0x2d')]('\x0a')));io[_0xe9c5('0xd')]('console-output',{'output':String(_0x2f36f7)});io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x1e'),FusionSettings[_0xe9c5('0x2a')]['fusion_program_running']);io['sockets']['emit'](_0xe9c5('0x28'),![]);});python_process['stdout']['on'](_0xe9c5('0x11'),function(_0x1f473e){FusionSettings['SocketVariables'][_0xe9c5('0x34')]=null;logger['verbose'](String(_0xe9c5('0x0')));io[_0xe9c5('0xd')](_0xe9c5('0x8'),{'output':String(_0xe9c5('0x27'))});io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x1e'),FusionSettings['SocketVariables'][_0xe9c5('0x34')]);io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x28'),![]);});}function _0x102f2f(_0x15b55b,_0x42feb8){let _0x3000e8=_0xe9c5('0x15')+('os.chdir(\x27./app/filesystem/'+_0x42feb8+_0xe9c5('0x17'))+'import\x20imp\x0a'+(''+_0x15b55b);if(os[_0xe9c5('0x1c')]()!=_0xe9c5('0x29')){python_process=spawn(_0xe9c5('0x2e'),['-u','-B','-c',_0x3000e8],{'stdio':'pipe'});}else{python_process=spawn(_0xe9c5('0x2e'),['-u','-B','-c',_0x3000e8],{'stdio':_0xe9c5('0x14')});}io['sockets']['emit']('program-running',FusionSettings['SocketVariables'][_0xe9c5('0x34')]);_0x32de94();python_process[_0xe9c5('0x31')]['on'](_0xe9c5('0x5'),function(_0x78415c){logger[_0xe9c5('0x35')](String(_0x78415c)['substring'](0x0,_0x78415c[_0xe9c5('0x2d')]('\x0a')));io[_0xe9c5('0xd')](_0xe9c5('0xe'),{'output':String(_0x78415c)});});python_process[_0xe9c5('0x10')]['on'](_0xe9c5('0x5'),function(_0x3bfa1f){logger[_0xe9c5('0x35')](String(_0x3bfa1f)[_0xe9c5('0x1b')](0x0,_0x3bfa1f['lastIndexOf']('\x0a')));io[_0xe9c5('0xd')](_0xe9c5('0xe'),{'output':String(_0x3bfa1f)});io[_0xe9c5('0xa')]['emit']('program-running',FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]);io[_0xe9c5('0xa')][_0xe9c5('0xd')]('gamepad-available',![]);});python_process[_0xe9c5('0x31')]['on'](_0xe9c5('0x11'),function(_0x3c61ab){FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x34')]=null;logger[_0xe9c5('0x35')](String(_0xe9c5('0x0')));io['emit'](_0xe9c5('0xe'),{'output':String(_0xe9c5('0x27'))});io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x1e'),FusionSettings[_0xe9c5('0x2a')]['fusion_program_running']);io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x28'),![]);});}function _0x32de94(){if(os['platform']()!=_0xe9c5('0x29')){setTimeout(function(){var _0x57a057=shell['exec'](_0xe9c5('0x1f'),{'silent':!![]})['stdout'];if(!_0x57a057)FusionSettings[_0xe9c5('0x2a')][_0xe9c5('0x23')]=![];else FusionSettings['SocketVariables'][_0xe9c5('0x23')]=!![];io[_0xe9c5('0xa')][_0xe9c5('0xd')](_0xe9c5('0x28'),FusionSettings['SocketVariables'][_0xe9c5('0x23')]);},0x3e8);}}return _0x564b89;}();