const _0x317f=['/Editor\x27)\x0a','User','shelljs','>\x20Program\x20Finished!\x0a','child_process','SocketId','Program\x20is\x20now\x20stopped','lastIndexOf','blockly-console-output','import\x20imp\x0a','resolve','Blockly\x20Program\x20is\x20now\x20running','Program\x20already\x20running','stdout','>\x20Program\x20Finished!','StartBlocklyProgram','substring','pipe','fusion_program_running','fusion_gamepad_available','autonomous','imp.load_source(\x27util\x27,\x20r\x27','verbose','Cannot\x20stop\x20another\x20user\x20program','win32','write','Program\x20is\x20now\x20running','emit','import\x20os\x0a','console-output','SIGINT','kill','../utils/logger','python','../global/fusionSettings','../socket','SocketVariables','Program\x20Successfully\x20Stopped','KillProgram','path','StopProgram','stdin','os.chdir(\x27./app/filesystem/','platform','No\x20Program\x20Running','stderr','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','close','exports','gamepad-available','sockets','program-running','spawn','data'];(function(_0x2f15db,_0x317f0a){const _0x105989=function(_0x44c3c4){while(--_0x44c3c4){_0x2f15db['push'](_0x2f15db['shift']());}};_0x105989(++_0x317f0a);}(_0x317f,0x129));const _0x1059=function(_0x2f15db,_0x317f0a){_0x2f15db=_0x2f15db-0x0;let _0x105989=_0x317f[_0x2f15db];return _0x105989;};const logger=require(_0x1059('0x5'));const io=require(_0x1059('0x8'));const FusionSettings=require(_0x1059('0x7'));const spawn=require(_0x1059('0x1f'))[_0x1059('0x19')];const shell=require(_0x1059('0x1d'));const os=require('os');const path=require(_0x1059('0xc'));let python_process=null;module[_0x1059('0x15')]=function(){var _0xfa53f3=function(){};_0xfa53f3['StartProgram']=function(_0x42f3d8,_0x15d796,_0x426c0a){if(!FusionSettings['SocketVariables'][_0x1059('0x2d')]){FusionSettings['SocketVariables'][_0x1059('0x2d')]={'Code':null,'Program':_0x15d796,'SocketId':_0x426c0a,'User':_0x42f3d8};_0x5d4bc2(_0x15d796,_0x42f3d8);logger['verbose'](_0x1059('0x35'));return{'status':0xc8,'message':_0x1059('0x35')};}else{if(FusionSettings[_0x1059('0x9')][_0x1059('0x2d')][_0x1059('0x1c')]==_0x42f3d8||FusionSettings['SocketVariables']['fusion_program_running'][_0x1059('0x20')]=='autonomous'){try{python_process['kill'](_0x1059('0x3'));}catch(_0x3e6755){}FusionSettings[_0x1059('0x9')]['fusion_program_running']={'Code':null,'Program':_0x15d796,'SocketId':_0x426c0a,'User':_0x42f3d8};_0x5d4bc2(_0x15d796,_0x42f3d8);logger[_0x1059('0x31')](_0x1059('0x35'));return{'status':0xc8,'message':_0x1059('0x35')};}else{logger[_0x1059('0x31')](_0x1059('0x27'));return{'status':0x1f4,'message':'Program\x20already\x20running'};}}};_0xfa53f3[_0x1059('0xd')]=function(_0x2bde83){if(FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]){if(FusionSettings['SocketVariables'][_0x1059('0x2d')][_0x1059('0x1c')]==_0x2bde83||FusionSettings[_0x1059('0x9')][_0x1059('0x2d')][_0x1059('0x20')]==_0x1059('0x2f')){FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]=null;try{python_process[_0x1059('0x4')](_0x1059('0x3'));}catch(_0x16bdd5){}logger['verbose'](_0x1059('0x21'));return{'status':0xc8,'message':_0x1059('0xa')};}else{logger[_0x1059('0x31')](_0x1059('0x32'));return{'status':0x1f4,'message':'Cannot\x20stop\x20another\x20user\x27s\x20program.'};}}else{logger['verbose']('No\x20program\x20running');return{'status':0x1f4,'message':_0x1059('0x11')};}};_0xfa53f3[_0x1059('0xb')]=function(){FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]=null;try{python_process[_0x1059('0x4')](_0x1059('0x3'));}catch(_0x252436){}logger[_0x1059('0x31')](_0x1059('0x21'));};_0xfa53f3[_0x1059('0x2a')]=function(_0x3910eb,_0x965641,_0x7909b3){if(!FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]){FusionSettings['SocketVariables']['fusion_program_running']={'Code':_0x3910eb,'Program':null,'SocketId':_0x7909b3,'User':_0x965641};_0xb102a6(_0x3910eb,_0x965641);logger[_0x1059('0x31')]('Blockly\x20Program\x20is\x20now\x20running');return{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};}else{if(FusionSettings[_0x1059('0x9')][_0x1059('0x2d')][_0x1059('0x1c')]==_0x965641||FusionSettings[_0x1059('0x9')][_0x1059('0x2d')][_0x1059('0x20')]==_0x1059('0x2f')){try{python_process['kill']('SIGINT');}catch(_0x36d0ac){}FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]={'Code':_0x3910eb,'Program':null,'SocketId':_0x7909b3,'User':_0x965641};_0xb102a6(_0x3910eb,_0x965641);logger[_0x1059('0x31')](_0x1059('0x26'));return{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};}else{logger[_0x1059('0x31')](_0x1059('0x27'));return{'status':0x1f4,'message':_0x1059('0x27')};}}};_0xfa53f3['sendInput']=function(_0x34fb4d){python_process[_0x1059('0xe')][_0x1059('0x34')](_0x34fb4d+'\x0a');};function _0x5d4bc2(_0x24cac6,_0xc676b8){let _0x1e7cde=_0x1059('0x1')+('os.chdir(\x27./app/filesystem/'+_0xc676b8+_0x1059('0x1b'))+_0x1059('0x24')+(_0x1059('0x30')+path[_0x1059('0x25')](_0x24cac6)+'\x27)');python_process=spawn('python',['-u','-B','-c',_0x1e7cde],{'stdio':_0x1059('0x2c')});io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x18'),FusionSettings['SocketVariables'][_0x1059('0x2d')]);_0x221d1b();python_process[_0x1059('0x28')]['on']('data',function(_0x509fac){logger[_0x1059('0x31')](String(_0x509fac)[_0x1059('0x2b')](0x0,_0x509fac['lastIndexOf']('\x0a')));io['emit'](_0x1059('0x2'),{'output':String(_0x509fac)});});python_process['stderr']['on'](_0x1059('0x1a'),function(_0x2fe705){logger[_0x1059('0x31')](String(_0x2fe705)[_0x1059('0x2b')](0x0,_0x2fe705[_0x1059('0x22')]('\x0a')));io[_0x1059('0x0')](_0x1059('0x2'),{'output':String(_0x2fe705)});io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x18'),FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]);io[_0x1059('0x17')]['emit'](_0x1059('0x16'),![]);});python_process[_0x1059('0x28')]['on']('close',function(_0xedaa85){FusionSettings['SocketVariables'][_0x1059('0x2d')]=null;logger[_0x1059('0x31')](String(_0x1059('0x29')));io[_0x1059('0x0')](_0x1059('0x2'),{'output':String('>\x20Program\x20Finished!\x0a')});io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x18'),FusionSettings[_0x1059('0x9')]['fusion_program_running']);io[_0x1059('0x17')]['emit']('gamepad-available',![]);});}function _0xb102a6(_0xeac94f,_0x356710){let _0x379a8a=_0x1059('0x1')+(_0x1059('0xf')+_0x356710+'/Blockly\x27)\x0a')+_0x1059('0x24')+(''+_0xeac94f);if(os['platform']()!='win32'){python_process=spawn(_0x1059('0x6'),['-u','-B','-c',_0x379a8a],{'stdio':_0x1059('0x2c')});}else{python_process=spawn(_0x1059('0x6'),['-u','-B','-c',_0x379a8a],{'stdio':_0x1059('0x2c')});}io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x18'),FusionSettings[_0x1059('0x9')][_0x1059('0x2d')]);_0x221d1b();python_process['stdout']['on'](_0x1059('0x1a'),function(_0xc1dc96){logger[_0x1059('0x31')](String(_0xc1dc96)[_0x1059('0x2b')](0x0,_0xc1dc96[_0x1059('0x22')]('\x0a')));io['emit'](_0x1059('0x23'),{'output':String(_0xc1dc96)});});python_process[_0x1059('0x12')]['on'](_0x1059('0x1a'),function(_0x4661a1){logger[_0x1059('0x31')](String(_0x4661a1)[_0x1059('0x2b')](0x0,_0x4661a1['lastIndexOf']('\x0a')));io['emit'](_0x1059('0x23'),{'output':String(_0x4661a1)});io[_0x1059('0x17')]['emit'](_0x1059('0x18'),FusionSettings['SocketVariables'][_0x1059('0x2d')]);io['sockets'][_0x1059('0x0')]('gamepad-available',![]);});python_process[_0x1059('0x28')]['on'](_0x1059('0x14'),function(_0x23e2c2){FusionSettings['SocketVariables'][_0x1059('0x2d')]=null;logger[_0x1059('0x31')](String(_0x1059('0x29')));io[_0x1059('0x0')]('blockly-console-output',{'output':String(_0x1059('0x1e'))});io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x18'),FusionSettings[_0x1059('0x9')]['fusion_program_running']);io[_0x1059('0x17')][_0x1059('0x0')]('gamepad-available',![]);});}function _0x221d1b(){if(os[_0x1059('0x10')]()!=_0x1059('0x33')){setTimeout(function(){var _0x1daaa9=shell['exec'](_0x1059('0x13'),{'silent':!![]})[_0x1059('0x28')];if(!_0x1daaa9)FusionSettings['SocketVariables'][_0x1059('0x2e')]=![];else FusionSettings[_0x1059('0x9')][_0x1059('0x2e')]=!![];io[_0x1059('0x17')][_0x1059('0x0')](_0x1059('0x16'),FusionSettings[_0x1059('0x9')][_0x1059('0x2e')]);},0x3e8);}}return _0xfa53f3;}();