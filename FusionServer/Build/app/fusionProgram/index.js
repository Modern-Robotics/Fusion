const _0x4231=['imp.load_source(\x27util\x27,\x20r\x27','gamepad-available','../utils/logger','kill','Program\x20is\x20now\x20running','autonomous','platform','stdin','SocketVariables','../socket','win32','Blockly\x20Program\x20is\x20now\x20running','data','stdout','os.chdir(\x27./app/filesystem/','StopProgram','>\x20Program\x20Finished!','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','User','write','SocketId','No\x20program\x20running','resolve','No\x20Program\x20Running','verbose','blockly-console-output','emit','sendInput','substring','python','import\x20imp\x0a','console-output','/Editor\x27)\x0a','fusion_gamepad_available','Program\x20is\x20now\x20stopped','lastIndexOf','SIGINT','import\x20os\x0a','stderr','path','close','>\x20Program\x20Finished!\x0a','fusion_program_running','child_process','Program\x20already\x20running','/Blockly\x27)\x0a','sockets','program-running','Program\x20Successfully\x20Stopped','Cannot\x20stop\x20another\x20user\x20program','StartBlocklyProgram','pipe','KillProgram','spawn','../global/fusionSettings'];(function(_0x4ab8e6,_0x4231fe){const _0x3d5e62=function(_0x285d2a){while(--_0x285d2a){_0x4ab8e6['push'](_0x4ab8e6['shift']());}};_0x3d5e62(++_0x4231fe);}(_0x4231,0x77));const _0x3d5e=function(_0x4ab8e6,_0x4231fe){_0x4ab8e6=_0x4ab8e6-0x0;let _0x3d5e62=_0x4231[_0x4ab8e6];return _0x3d5e62;};const logger=require(_0x3d5e('0x30'));const io=require(_0x3d5e('0x0'));const FusionSettings=require(_0x3d5e('0x2d'));const spawn=require(_0x3d5e('0x22'))[_0x3d5e('0x2c')];const shell=require('shelljs');const os=require('os');const path=require(_0x3d5e('0x1e'));let python_process=null;module['exports']=function(){var _0x5e12c7=function(){};_0x5e12c7['StartProgram']=function(_0x2b3435,_0x3493e5,_0x4187fc){if(!FusionSettings[_0x3d5e('0x36')]['fusion_program_running']){FusionSettings['SocketVariables'][_0x3d5e('0x21')]={'Code':null,'Program':_0x3493e5,'SocketId':_0x4187fc,'User':_0x2b3435};_0x205824(_0x3493e5,_0x2b3435);logger[_0x3d5e('0xf')](_0x3d5e('0x32'));return{'status':0xc8,'message':_0x3d5e('0x32')};}else{if(FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')][_0x3d5e('0x9')]==_0x2b3435||FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')][_0x3d5e('0xb')]==_0x3d5e('0x33')){try{python_process[_0x3d5e('0x31')]('SIGINT');}catch(_0x3b4459){}FusionSettings['SocketVariables'][_0x3d5e('0x21')]={'Code':null,'Program':_0x3493e5,'SocketId':_0x4187fc,'User':_0x2b3435};_0x205824(_0x3493e5,_0x2b3435);logger[_0x3d5e('0xf')](_0x3d5e('0x32'));return{'status':0xc8,'message':_0x3d5e('0x32')};}else{logger[_0x3d5e('0xf')](_0x3d5e('0x23'));return{'status':0x1f4,'message':_0x3d5e('0x23')};}}};_0x5e12c7[_0x3d5e('0x6')]=function(_0x26c712){if(FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]){if(FusionSettings[_0x3d5e('0x36')]['fusion_program_running'][_0x3d5e('0x9')]==_0x26c712||FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')][_0x3d5e('0xb')]==_0x3d5e('0x33')){FusionSettings['SocketVariables']['fusion_program_running']=null;try{python_process[_0x3d5e('0x31')](_0x3d5e('0x1b'));}catch(_0x36df12){}logger['verbose'](_0x3d5e('0x19'));return{'status':0xc8,'message':_0x3d5e('0x27')};}else{logger['verbose'](_0x3d5e('0x28'));return{'status':0x1f4,'message':'Cannot\x20stop\x20another\x20user\x27s\x20program.'};}}else{logger['verbose'](_0x3d5e('0xc'));return{'status':0x1f4,'message':_0x3d5e('0xe')};}};_0x5e12c7[_0x3d5e('0x2b')]=function(){FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]=null;try{python_process[_0x3d5e('0x31')](_0x3d5e('0x1b'));}catch(_0x5bd49f){}logger[_0x3d5e('0xf')]('Program\x20is\x20now\x20stopped');};_0x5e12c7[_0x3d5e('0x29')]=function(_0x36af94,_0x915c4b,_0x50ef5f){if(!FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]){FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]={'Code':_0x36af94,'Program':null,'SocketId':_0x50ef5f,'User':_0x915c4b};_0x3451bb(_0x36af94,_0x915c4b);logger[_0x3d5e('0xf')]('Blockly\x20Program\x20is\x20now\x20running');return{'status':0xc8,'message':_0x3d5e('0x2')};}else{if(FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')][_0x3d5e('0x9')]==_0x915c4b||FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')][_0x3d5e('0xb')]=='autonomous'){try{python_process[_0x3d5e('0x31')](_0x3d5e('0x1b'));}catch(_0x232540){}FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]={'Code':_0x36af94,'Program':null,'SocketId':_0x50ef5f,'User':_0x915c4b};_0x3451bb(_0x36af94,_0x915c4b);logger[_0x3d5e('0xf')](_0x3d5e('0x2'));return{'status':0xc8,'message':_0x3d5e('0x2')};}else{logger[_0x3d5e('0xf')](_0x3d5e('0x23'));return{'status':0x1f4,'message':_0x3d5e('0x23')};}}};_0x5e12c7[_0x3d5e('0x12')]=function(_0x3098c6){python_process[_0x3d5e('0x35')][_0x3d5e('0xa')](_0x3098c6+'\x0a');};function _0x205824(_0x67b9c1,_0x136c0b){let _0x4ada1f=_0x3d5e('0x1c')+(_0x3d5e('0x5')+_0x136c0b+_0x3d5e('0x17'))+'import\x20imp\x0a'+(_0x3d5e('0x2e')+path[_0x3d5e('0xd')](_0x67b9c1)+'\x27)');python_process=spawn('python',['-u','-B','-c',_0x4ada1f],{'stdio':_0x3d5e('0x2a')});io[_0x3d5e('0x25')]['emit'](_0x3d5e('0x26'),FusionSettings['SocketVariables'][_0x3d5e('0x21')]);_0x4ea3b9();python_process['stdout']['on'](_0x3d5e('0x3'),function(_0x4745ca){logger[_0x3d5e('0xf')](String(_0x4745ca)['substring'](0x0,_0x4745ca['lastIndexOf']('\x0a')));io['emit'](_0x3d5e('0x16'),{'output':String(_0x4745ca)});});python_process['stderr']['on'](_0x3d5e('0x3'),function(_0x1ac177){logger[_0x3d5e('0xf')](String(_0x1ac177)[_0x3d5e('0x13')](0x0,_0x1ac177['lastIndexOf']('\x0a')));io[_0x3d5e('0x11')]('console-output',{'output':String(_0x1ac177)});io[_0x3d5e('0x25')][_0x3d5e('0x11')](_0x3d5e('0x26'),FusionSettings['SocketVariables'][_0x3d5e('0x21')]);io[_0x3d5e('0x25')]['emit'](_0x3d5e('0x2f'),![]);});python_process[_0x3d5e('0x4')]['on'](_0x3d5e('0x1f'),function(_0x4808d3){FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]=null;logger['verbose'](String(_0x3d5e('0x7')));io['emit'](_0x3d5e('0x16'),{'output':String(_0x3d5e('0x20'))});io[_0x3d5e('0x25')][_0x3d5e('0x11')](_0x3d5e('0x26'),FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]);io[_0x3d5e('0x25')][_0x3d5e('0x11')](_0x3d5e('0x2f'),![]);});}function _0x3451bb(_0xab073a,_0x438ac8){let _0x53bbe4='import\x20os\x0a'+(_0x3d5e('0x5')+_0x438ac8+_0x3d5e('0x24'))+_0x3d5e('0x15')+(''+_0xab073a);if(os[_0x3d5e('0x34')]()!=_0x3d5e('0x1')){python_process=spawn(_0x3d5e('0x14'),['-u','-B','-c',_0x53bbe4],{'stdio':_0x3d5e('0x2a')});}else{python_process=spawn(_0x3d5e('0x14'),['-u','-B','-c',_0x53bbe4],{'stdio':_0x3d5e('0x2a')});}io['sockets'][_0x3d5e('0x11')](_0x3d5e('0x26'),FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]);_0x4ea3b9();python_process[_0x3d5e('0x4')]['on'](_0x3d5e('0x3'),function(_0x4aa3aa){logger[_0x3d5e('0xf')](String(_0x4aa3aa)[_0x3d5e('0x13')](0x0,_0x4aa3aa[_0x3d5e('0x1a')]('\x0a')));io[_0x3d5e('0x11')](_0x3d5e('0x10'),{'output':String(_0x4aa3aa)});});python_process[_0x3d5e('0x1d')]['on'](_0x3d5e('0x3'),function(_0x19c84d){logger[_0x3d5e('0xf')](String(_0x19c84d)[_0x3d5e('0x13')](0x0,_0x19c84d[_0x3d5e('0x1a')]('\x0a')));io[_0x3d5e('0x11')](_0x3d5e('0x10'),{'output':String(_0x19c84d)});io[_0x3d5e('0x25')][_0x3d5e('0x11')](_0x3d5e('0x26'),FusionSettings[_0x3d5e('0x36')][_0x3d5e('0x21')]);io[_0x3d5e('0x25')][_0x3d5e('0x11')]('gamepad-available',![]);});python_process['stdout']['on'](_0x3d5e('0x1f'),function(_0x5e059c){FusionSettings[_0x3d5e('0x36')]['fusion_program_running']=null;logger[_0x3d5e('0xf')](String(_0x3d5e('0x7')));io[_0x3d5e('0x11')](_0x3d5e('0x10'),{'output':String(_0x3d5e('0x20'))});io[_0x3d5e('0x25')]['emit']('program-running',FusionSettings['SocketVariables'][_0x3d5e('0x21')]);io[_0x3d5e('0x25')][_0x3d5e('0x11')](_0x3d5e('0x2f'),![]);});}function _0x4ea3b9(){if(os[_0x3d5e('0x34')]()!=_0x3d5e('0x1')){setTimeout(function(){var _0x44c3f8=shell['exec'](_0x3d5e('0x8'),{'silent':!![]})[_0x3d5e('0x4')];if(!_0x44c3f8)FusionSettings[_0x3d5e('0x36')]['fusion_gamepad_available']=![];else FusionSettings['SocketVariables'][_0x3d5e('0x18')]=!![];io['sockets']['emit']('gamepad-available',FusionSettings['SocketVariables'][_0x3d5e('0x18')]);},0x3e8);}}return _0x5e12c7;}();