const _0x4d4b=['exec','Cannot\x20stop\x20another\x20user\x20program','child_process','Program\x20is\x20now\x20stopped','../global/fusionSettings','fusion_gamepad_available','stdout','program-running','gamepad-available','../socket','Program\x20already\x20running','lastIndexOf','platform','Blockly\x20Program\x20is\x20now\x20running','>\x20Program\x20Finished!\x0a','SocketId','import\x20imp\x0a','fusion_program_running','/Blockly\x27)\x0a','import\x20os\x0a','win32','/Editor\x27)\x0a','Program\x20Successfully\x20Stopped','>\x20Program\x20Finished!','console-output','python','Program\x20is\x20now\x20running','data','User','close','os.chdir(\x27./app/filesystem/','shelljs','substring','write','stdin','kill','resolve','SIGINT','Cannot\x20stop\x20another\x20user\x27s\x20program.','SocketVariables','StartBlocklyProgram','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','path','emit','imp.load_source(\x27util\x27,\x20r\x27','stderr','../utils/logger','sockets','StartProgram','autonomous','spawn','verbose','blockly-console-output','pipe'];(function(_0x4b48a7,_0x4d4bff){const _0x1a78c3=function(_0x195ec6){while(--_0x195ec6){_0x4b48a7['push'](_0x4b48a7['shift']());}};_0x1a78c3(++_0x4d4bff);}(_0x4d4b,0x1a0));const _0x1a78=function(_0x4b48a7,_0x4d4bff){_0x4b48a7=_0x4b48a7-0x0;let _0x1a78c3=_0x4d4b[_0x4b48a7];return _0x1a78c3;};const logger=require(_0x1a78('0x8'));const io=require(_0x1a78('0x19'));const FusionSettings=require(_0x1a78('0x14'));const spawn=require(_0x1a78('0x12'))[_0x1a78('0xc')];const shell=require(_0x1a78('0x2f'));const os=require('os');const path=require(_0x1a78('0x4'));let python_process=null;module['exports']=function(){var _0x2c0545=function(){};_0x2c0545[_0x1a78('0xa')]=function(_0x2efadb,_0x736ca2,_0x1e7f52){if(!FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]){FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]={'Code':null,'Program':_0x736ca2,'SocketId':_0x1e7f52,'User':_0x2efadb};_0x42042e(_0x736ca2,_0x2efadb);logger[_0x1a78('0xd')](_0x1a78('0x2a'));return{'status':0xc8,'message':_0x1a78('0x2a')};}else{if(FusionSettings[_0x1a78('0x1')]['fusion_program_running'][_0x1a78('0x2c')]==_0x2efadb||FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')][_0x1a78('0x1f')]==_0x1a78('0xb')){try{python_process[_0x1a78('0x33')]('SIGINT');}catch(_0x2e0d33){}FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]={'Code':null,'Program':_0x736ca2,'SocketId':_0x1e7f52,'User':_0x2efadb};_0x42042e(_0x736ca2,_0x2efadb);logger[_0x1a78('0xd')]('Program\x20is\x20now\x20running');return{'status':0xc8,'message':_0x1a78('0x2a')};}else{logger[_0x1a78('0xd')](_0x1a78('0x1a'));return{'status':0x1f4,'message':_0x1a78('0x1a')};}}};_0x2c0545['StopProgram']=function(_0x2cc364){if(FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]){if(FusionSettings['SocketVariables']['fusion_program_running']['User']==_0x2cc364||FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')][_0x1a78('0x1f')]==_0x1a78('0xb')){FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]=null;try{python_process[_0x1a78('0x33')](_0x1a78('0x35'));}catch(_0x465992){}logger['verbose']('Program\x20is\x20now\x20stopped');return{'status':0xc8,'message':_0x1a78('0x26')};}else{logger[_0x1a78('0xd')](_0x1a78('0x11'));return{'status':0x1f4,'message':_0x1a78('0x0')};}}else{logger[_0x1a78('0xd')]('No\x20program\x20running');return{'status':0x1f4,'message':'No\x20Program\x20Running'};}};_0x2c0545['KillProgram']=function(){FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]=null;try{python_process[_0x1a78('0x33')]('SIGINT');}catch(_0x1b5870){}logger[_0x1a78('0xd')](_0x1a78('0x13'));};_0x2c0545[_0x1a78('0x2')]=function(_0x455eb0,_0x433f36,_0xfc313){if(!FusionSettings['SocketVariables'][_0x1a78('0x21')]){FusionSettings['SocketVariables'][_0x1a78('0x21')]={'Code':_0x455eb0,'Program':null,'SocketId':_0xfc313,'User':_0x433f36};_0x29ffb2(_0x455eb0,_0x433f36);logger[_0x1a78('0xd')](_0x1a78('0x1d'));return{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};}else{if(FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]['User']==_0x433f36||FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')][_0x1a78('0x1f')]==_0x1a78('0xb')){try{python_process[_0x1a78('0x33')]('SIGINT');}catch(_0x24043c){}FusionSettings[_0x1a78('0x1')]['fusion_program_running']={'Code':_0x455eb0,'Program':null,'SocketId':_0xfc313,'User':_0x433f36};_0x29ffb2(_0x455eb0,_0x433f36);logger[_0x1a78('0xd')](_0x1a78('0x1d'));return{'status':0xc8,'message':_0x1a78('0x1d')};}else{logger[_0x1a78('0xd')](_0x1a78('0x1a'));return{'status':0x1f4,'message':_0x1a78('0x1a')};}}};_0x2c0545['sendInput']=function(_0x22ec5a){python_process[_0x1a78('0x32')][_0x1a78('0x31')](_0x22ec5a+'\x0a');};function _0x42042e(_0x1e34b6,_0x3648aa){let _0x2d1a39=_0x1a78('0x23')+(_0x1a78('0x2e')+_0x3648aa+_0x1a78('0x25'))+_0x1a78('0x20')+(_0x1a78('0x6')+path[_0x1a78('0x34')](_0x1e34b6)+'\x27)');python_process=spawn(_0x1a78('0x29'),['-u','-B','-c',_0x2d1a39],{'stdio':_0x1a78('0xf')});io[_0x1a78('0x9')][_0x1a78('0x5')](_0x1a78('0x17'),FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]);_0x6d3540();python_process['stdout']['on'](_0x1a78('0x2b'),function(_0x1e0654){logger[_0x1a78('0xd')](String(_0x1e0654)[_0x1a78('0x30')](0x0,_0x1e0654[_0x1a78('0x1b')]('\x0a')));io[_0x1a78('0x5')](_0x1a78('0x28'),{'output':String(_0x1e0654)});});python_process[_0x1a78('0x7')]['on'](_0x1a78('0x2b'),function(_0x5b5a7d){logger[_0x1a78('0xd')](String(_0x5b5a7d)[_0x1a78('0x30')](0x0,_0x5b5a7d[_0x1a78('0x1b')]('\x0a')));io['emit']('console-output',{'output':String(_0x5b5a7d)});io[_0x1a78('0x9')][_0x1a78('0x5')]('program-running',FusionSettings['SocketVariables'][_0x1a78('0x21')]);io[_0x1a78('0x9')][_0x1a78('0x5')](_0x1a78('0x18'),![]);});python_process[_0x1a78('0x16')]['on'](_0x1a78('0x2d'),function(_0x2e0a93){FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]=null;logger['verbose'](String(_0x1a78('0x27')));io['emit'](_0x1a78('0x28'),{'output':String('>\x20Program\x20Finished!\x0a')});io[_0x1a78('0x9')][_0x1a78('0x5')](_0x1a78('0x17'),FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]);io[_0x1a78('0x9')][_0x1a78('0x5')](_0x1a78('0x18'),![]);});}function _0x29ffb2(_0x34d25d,_0x309349){let _0x170902=_0x1a78('0x23')+(_0x1a78('0x2e')+_0x309349+_0x1a78('0x22'))+_0x1a78('0x20')+(''+_0x34d25d);if(os[_0x1a78('0x1c')]()!=_0x1a78('0x24')){python_process=spawn(_0x1a78('0x29'),['-u','-B','-c',_0x170902],{'stdio':_0x1a78('0xf')});}else{python_process=spawn(_0x1a78('0x29'),['-u','-B','-c',_0x170902],{'stdio':_0x1a78('0xf')});}io[_0x1a78('0x9')]['emit'](_0x1a78('0x17'),FusionSettings[_0x1a78('0x1')]['fusion_program_running']);_0x6d3540();python_process[_0x1a78('0x16')]['on']('data',function(_0x15a917){logger[_0x1a78('0xd')](String(_0x15a917)['substring'](0x0,_0x15a917[_0x1a78('0x1b')]('\x0a')));io[_0x1a78('0x5')](_0x1a78('0xe'),{'output':String(_0x15a917)});});python_process[_0x1a78('0x7')]['on'](_0x1a78('0x2b'),function(_0x2f785b){logger[_0x1a78('0xd')](String(_0x2f785b)[_0x1a78('0x30')](0x0,_0x2f785b['lastIndexOf']('\x0a')));io[_0x1a78('0x5')](_0x1a78('0xe'),{'output':String(_0x2f785b)});io[_0x1a78('0x9')]['emit']('program-running',FusionSettings[_0x1a78('0x1')]['fusion_program_running']);io[_0x1a78('0x9')][_0x1a78('0x5')](_0x1a78('0x18'),![]);});python_process['stdout']['on'](_0x1a78('0x2d'),function(_0x86ca30){FusionSettings[_0x1a78('0x1')][_0x1a78('0x21')]=null;logger['verbose'](String(_0x1a78('0x27')));io[_0x1a78('0x5')](_0x1a78('0xe'),{'output':String(_0x1a78('0x1e'))});io[_0x1a78('0x9')]['emit'](_0x1a78('0x17'),FusionSettings['SocketVariables'][_0x1a78('0x21')]);io[_0x1a78('0x9')]['emit'](_0x1a78('0x18'),![]);});}function _0x6d3540(){if(os[_0x1a78('0x1c')]()!='win32'){setTimeout(function(){var _0x26ca04=shell[_0x1a78('0x10')](_0x1a78('0x3'),{'silent':!![]})[_0x1a78('0x16')];if(!_0x26ca04)FusionSettings['SocketVariables'][_0x1a78('0x15')]=![];else FusionSettings[_0x1a78('0x1')][_0x1a78('0x15')]=!![];io[_0x1a78('0x9')][_0x1a78('0x5')]('gamepad-available',FusionSettings['SocketVariables'][_0x1a78('0x15')]);},0x3e8);}}return _0x2c0545;}();