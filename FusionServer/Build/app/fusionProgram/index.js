const _0x3a7f=['imp.load_source(\x27util\x27,\x20r\x27','441239tgYMIg','pipe','Program\x20already\x20running','SocketId','console-output','Cannot\x20stop\x20another\x20user\x27s\x20program.','StopProgram','gamepad-available','User','close','sockets','autonomous','resolve','platform','blockly-console-output','/Blockly\x27)\x0a','substring','../utils/logger','path','955439KudJFN','6299hBmPbw','../global/fusionSettings','fusion_program_running','python','lastIndexOf','1fhRvnD','shelljs','Program\x20is\x20now\x20running','program-running','kill','SocketVariables','sendInput','import\x20os\x0a','Program\x20is\x20now\x20stopped','fusion_gamepad_available','1bXczNI','exec','data','stdout','spawn','122859jwtwHo','exports','Program\x20Successfully\x20Stopped','import\x20imp\x0a','104565yjCtmZ','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','SIGINT','1TkdUrI','31LbyHSN','2904341ZlKxWJ','verbose','>\x20Program\x20Finished!\x0a','stderr','14DqmEiZ','write','win32','child_process','Cannot\x20stop\x20another\x20user\x20program','44915mVManT','No\x20Program\x20Running','9iVnDVf','No\x20program\x20running','Blockly\x20Program\x20is\x20now\x20running','emit'];const _0x34b0=function(_0x5d2eaa,_0x2f0874){_0x5d2eaa=_0x5d2eaa-0x17c;let _0x3a7f7e=_0x3a7f[_0x5d2eaa];return _0x3a7f7e;};const _0x2a5e15=_0x34b0;(function(_0xec4e6c,_0x879c8d){const _0x319256=_0x34b0;while(!![]){try{const _0x40421a=parseInt(_0x319256(0x19a))*-parseInt(_0x319256(0x181))+parseInt(_0x319256(0x1bb))*parseInt(_0x319256(0x1b6))+parseInt(_0x319256(0x195))*-parseInt(_0x319256(0x1b1))+parseInt(_0x319256(0x194))*-parseInt(_0x319256(0x1a4))+parseInt(_0x319256(0x1ad))*parseInt(_0x319256(0x1b0))+parseInt(_0x319256(0x1a9))*-parseInt(_0x319256(0x17c))+parseInt(_0x319256(0x1b2));if(_0x40421a===_0x879c8d)break;else _0xec4e6c['push'](_0xec4e6c['shift']());}catch(_0x2c733f){_0xec4e6c['push'](_0xec4e6c['shift']());}}}(_0x3a7f,0xe5806));const logger=require(_0x2a5e15(0x192)),io=require('../socket'),FusionSettings=require(_0x2a5e15(0x196)),spawn=require(_0x2a5e15(0x1b9))[_0x2a5e15(0x1a8)],shell=require(_0x2a5e15(0x19b)),os=require('os'),path=require(_0x2a5e15(0x193));let python_process=null;module[_0x2a5e15(0x1aa)]=function(){const _0x21aad8=_0x2a5e15;var _0x5c691c=function(){};_0x5c691c['StartProgram']=function(_0x2e30fb,_0x288945,_0x32a9f3){const _0xed676c=_0x34b0;if(!FusionSettings['SocketVariables'][_0xed676c(0x197)])return FusionSettings['SocketVariables'][_0xed676c(0x197)]={'Code':null,'Program':_0x288945,'SocketId':_0x32a9f3,'User':_0x2e30fb},_0x71ad2b(_0x288945,_0x2e30fb),logger[_0xed676c(0x1b3)](_0xed676c(0x19c)),{'status':0xc8,'message':_0xed676c(0x19c)};else{if(FusionSettings['SocketVariables'][_0xed676c(0x197)][_0xed676c(0x189)]==_0x2e30fb||FusionSettings[_0xed676c(0x19f)][_0xed676c(0x197)][_0xed676c(0x184)]==_0xed676c(0x18c)){try{python_process[_0xed676c(0x19e)](_0xed676c(0x1af));}catch(_0x44d62a){}return FusionSettings[_0xed676c(0x19f)][_0xed676c(0x197)]={'Code':null,'Program':_0x288945,'SocketId':_0x32a9f3,'User':_0x2e30fb},_0x71ad2b(_0x288945,_0x2e30fb),logger[_0xed676c(0x1b3)](_0xed676c(0x19c)),{'status':0xc8,'message':_0xed676c(0x19c)};}else return logger[_0xed676c(0x1b3)](_0xed676c(0x183)),{'status':0x1f4,'message':'Program\x20already\x20running'};}},_0x5c691c[_0x21aad8(0x187)]=function(_0x3be87f){const _0x6a3323=_0x21aad8;if(FusionSettings[_0x6a3323(0x19f)][_0x6a3323(0x197)]){if(FusionSettings[_0x6a3323(0x19f)]['fusion_program_running']['User']==_0x3be87f||FusionSettings[_0x6a3323(0x19f)]['fusion_program_running']['SocketId']==_0x6a3323(0x18c)){FusionSettings[_0x6a3323(0x19f)][_0x6a3323(0x197)]=null;try{python_process[_0x6a3323(0x19e)](_0x6a3323(0x1af));}catch(_0x3e50e6){}return logger['verbose']('Program\x20is\x20now\x20stopped'),{'status':0xc8,'message':_0x6a3323(0x1ab)};}else return logger[_0x6a3323(0x1b3)](_0x6a3323(0x1ba)),{'status':0x1f4,'message':_0x6a3323(0x186)};}else return logger[_0x6a3323(0x1b3)](_0x6a3323(0x17d)),{'status':0x1f4,'message':_0x6a3323(0x1bc)};},_0x5c691c['KillProgram']=function(){const _0xcf54ff=_0x21aad8;FusionSettings[_0xcf54ff(0x19f)][_0xcf54ff(0x197)]=null;try{python_process[_0xcf54ff(0x19e)](_0xcf54ff(0x1af));}catch(_0x5c07bf){}logger[_0xcf54ff(0x1b3)](_0xcf54ff(0x1a2));},_0x5c691c['StartBlocklyProgram']=function(_0x5bd60d,_0x38091c,_0x23755c){const _0x26f677=_0x21aad8;if(!FusionSettings[_0x26f677(0x19f)]['fusion_program_running'])return FusionSettings[_0x26f677(0x19f)]['fusion_program_running']={'Code':_0x5bd60d,'Program':null,'SocketId':_0x23755c,'User':_0x38091c},_0x5444ab(_0x5bd60d,_0x38091c),logger[_0x26f677(0x1b3)](_0x26f677(0x17e)),{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};else{if(FusionSettings[_0x26f677(0x19f)]['fusion_program_running'][_0x26f677(0x189)]==_0x38091c||FusionSettings[_0x26f677(0x19f)]['fusion_program_running']['SocketId']==_0x26f677(0x18c)){try{python_process[_0x26f677(0x19e)](_0x26f677(0x1af));}catch(_0x440b4c){}return FusionSettings['SocketVariables'][_0x26f677(0x197)]={'Code':_0x5bd60d,'Program':null,'SocketId':_0x23755c,'User':_0x38091c},_0x5444ab(_0x5bd60d,_0x38091c),logger[_0x26f677(0x1b3)](_0x26f677(0x17e)),{'status':0xc8,'message':_0x26f677(0x17e)};}else return logger['verbose'](_0x26f677(0x183)),{'status':0x1f4,'message':_0x26f677(0x183)};}},_0x5c691c[_0x21aad8(0x1a0)]=function(_0x436bb9){const _0x4433f9=_0x21aad8;python_process['stdin'][_0x4433f9(0x1b7)](_0x436bb9+'\x0a');};function _0x71ad2b(_0x2576e0,_0x238d6c){const _0x13f37b=_0x21aad8;let _0x294b73=_0x13f37b(0x1a1)+('os.chdir(\x27./app/filesystem/'+_0x238d6c+'/Editor\x27)\x0a')+'import\x20imp\x0a'+(_0x13f37b(0x180)+path[_0x13f37b(0x18d)](_0x2576e0)+'\x27)');python_process=spawn(_0x13f37b(0x198),['-u','-B','-c',_0x294b73],{'stdio':'pipe'}),io[_0x13f37b(0x18b)][_0x13f37b(0x17f)](_0x13f37b(0x19d),FusionSettings['SocketVariables'][_0x13f37b(0x197)]),_0x4025ea(),python_process['stdout']['on'](_0x13f37b(0x1a6),function(_0x4ddca1){const _0x59807b=_0x13f37b;logger[_0x59807b(0x1b3)](String(_0x4ddca1)['substring'](0x0,_0x4ddca1[_0x59807b(0x199)]('\x0a'))),io[_0x59807b(0x17f)]('console-output',{'output':String(_0x4ddca1)});}),python_process[_0x13f37b(0x1b5)]['on'](_0x13f37b(0x1a6),function(_0x5a1400){const _0x2c93bf=_0x13f37b;logger[_0x2c93bf(0x1b3)](String(_0x5a1400)[_0x2c93bf(0x191)](0x0,_0x5a1400[_0x2c93bf(0x199)]('\x0a'))),io[_0x2c93bf(0x17f)](_0x2c93bf(0x185),{'output':String(_0x5a1400)}),io[_0x2c93bf(0x18b)]['emit'](_0x2c93bf(0x19d),FusionSettings[_0x2c93bf(0x19f)][_0x2c93bf(0x197)]),io[_0x2c93bf(0x18b)][_0x2c93bf(0x17f)](_0x2c93bf(0x188),![]);}),python_process[_0x13f37b(0x1a7)]['on']('close',function(_0x5b30cd){const _0x2dc4eb=_0x13f37b;FusionSettings[_0x2dc4eb(0x19f)][_0x2dc4eb(0x197)]=null,logger[_0x2dc4eb(0x1b3)](String('>\x20Program\x20Finished!')),io[_0x2dc4eb(0x17f)](_0x2dc4eb(0x185),{'output':String('>\x20Program\x20Finished!\x0a')}),io[_0x2dc4eb(0x18b)][_0x2dc4eb(0x17f)]('program-running',FusionSettings[_0x2dc4eb(0x19f)][_0x2dc4eb(0x197)]),io[_0x2dc4eb(0x18b)][_0x2dc4eb(0x17f)]('gamepad-available',![]);});}function _0x5444ab(_0x3e25cc,_0x400392){const _0xff7867=_0x21aad8;let _0x13e565=_0xff7867(0x1a1)+('os.chdir(\x27./app/filesystem/'+_0x400392+_0xff7867(0x190))+_0xff7867(0x1ac)+(''+_0x3e25cc);os['platform']()!=_0xff7867(0x1b8)?python_process=spawn(_0xff7867(0x198),['-u','-B','-c',_0x13e565],{'stdio':_0xff7867(0x182)}):python_process=spawn(_0xff7867(0x198),['-u','-B','-c',_0x13e565],{'stdio':_0xff7867(0x182)}),io[_0xff7867(0x18b)][_0xff7867(0x17f)]('program-running',FusionSettings[_0xff7867(0x19f)]['fusion_program_running']),_0x4025ea(),python_process[_0xff7867(0x1a7)]['on'](_0xff7867(0x1a6),function(_0x123506){const _0x5b4f87=_0xff7867;logger[_0x5b4f87(0x1b3)](String(_0x123506)[_0x5b4f87(0x191)](0x0,_0x123506[_0x5b4f87(0x199)]('\x0a'))),io[_0x5b4f87(0x17f)](_0x5b4f87(0x18f),{'output':String(_0x123506)});}),python_process['stderr']['on'](_0xff7867(0x1a6),function(_0x2eebd4){const _0xeae7dc=_0xff7867;logger[_0xeae7dc(0x1b3)](String(_0x2eebd4)[_0xeae7dc(0x191)](0x0,_0x2eebd4['lastIndexOf']('\x0a'))),io[_0xeae7dc(0x17f)](_0xeae7dc(0x18f),{'output':String(_0x2eebd4)}),io[_0xeae7dc(0x18b)][_0xeae7dc(0x17f)](_0xeae7dc(0x19d),FusionSettings['SocketVariables'][_0xeae7dc(0x197)]),io[_0xeae7dc(0x18b)][_0xeae7dc(0x17f)]('gamepad-available',![]);}),python_process[_0xff7867(0x1a7)]['on'](_0xff7867(0x18a),function(_0x29879f){const _0x3e6837=_0xff7867;FusionSettings[_0x3e6837(0x19f)][_0x3e6837(0x197)]=null,logger[_0x3e6837(0x1b3)](String('>\x20Program\x20Finished!')),io[_0x3e6837(0x17f)](_0x3e6837(0x18f),{'output':String(_0x3e6837(0x1b4))}),io['sockets']['emit'](_0x3e6837(0x19d),FusionSettings[_0x3e6837(0x19f)][_0x3e6837(0x197)]),io[_0x3e6837(0x18b)][_0x3e6837(0x17f)](_0x3e6837(0x188),![]);});}function _0x4025ea(){const _0x542692=_0x21aad8;os[_0x542692(0x18e)]()!='win32'&&setTimeout(function(){const _0x173a55=_0x542692;var _0x14f7c2=shell[_0x173a55(0x1a5)](_0x173a55(0x1ae),{'silent':!![]})[_0x173a55(0x1a7)];if(!_0x14f7c2)FusionSettings[_0x173a55(0x19f)]['fusion_gamepad_available']=![];else FusionSettings[_0x173a55(0x19f)][_0x173a55(0x1a3)]=!![];io[_0x173a55(0x18b)][_0x173a55(0x17f)](_0x173a55(0x188),FusionSettings[_0x173a55(0x19f)][_0x173a55(0x1a3)]);},0x3e8);}return _0x5c691c;}();