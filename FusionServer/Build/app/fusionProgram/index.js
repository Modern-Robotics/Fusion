const _0x41d5=['sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','console-output','sockets','gamepad-available','stdout','stdin','StartBlocklyProgram','imp.load_source(\x27util\x27,\x20r\x27','import\x20os\x0a','KillProgram','Program\x20is\x20now\x20stopped','Program\x20is\x20now\x20running','sendInput','shelljs','win32','../global/fusionSettings','substring','autonomous','../socket','>\x20Program\x20Finished!','Blockly\x20Program\x20is\x20now\x20running','data','fusion_gamepad_available','>\x20Program\x20Finished!\x0a','fusion_program_running','lastIndexOf','Program\x20already\x20running','python','write','path','platform','Cannot\x20stop\x20another\x20user\x20program','emit','User','StopProgram','pipe','stderr','os.chdir(\x27./app/filesystem/','No\x20Program\x20Running','import\x20imp\x0a','spawn','verbose','close','SocketVariables','SocketId','No\x20program\x20running','program-running','resolve','exports','kill','SIGINT','blockly-console-output'];(function(_0x3dad2b,_0x41d5f2){const _0xdbd830=function(_0x5028ae){while(--_0x5028ae){_0x3dad2b['push'](_0x3dad2b['shift']());}};_0xdbd830(++_0x41d5f2);}(_0x41d5,0x167));const _0xdbd8=function(_0x3dad2b,_0x41d5f2){_0x3dad2b=_0x3dad2b-0x0;let _0xdbd830=_0x41d5[_0x3dad2b];return _0xdbd830;};const logger=require('../utils/logger');const io=require(_0xdbd8('0x17'));const FusionSettings=require(_0xdbd8('0x14'));const spawn=require('child_process')[_0xdbd8('0x2d')];const shell=require(_0xdbd8('0x12'));const os=require('os');const path=require(_0xdbd8('0x22'));let python_process=null;module[_0xdbd8('0x1')]=function(){var _0x38ea02=function(){};_0x38ea02['StartProgram']=function(_0x36f7f9,_0x10266e,_0x2e7e18){if(!FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]){FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]={'Code':null,'Program':_0x10266e,'SocketId':_0x2e7e18,'User':_0x36f7f9};_0x47847a(_0x10266e,_0x36f7f9);logger[_0xdbd8('0x2e')](_0xdbd8('0x10'));return{'status':0xc8,'message':_0xdbd8('0x10')};}else{if(FusionSettings['SocketVariables']['fusion_program_running'][_0xdbd8('0x26')]==_0x36f7f9||FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')][_0xdbd8('0x31')]=='autonomous'){try{python_process[_0xdbd8('0x2')](_0xdbd8('0x3'));}catch(_0x522a8c){}FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]={'Code':null,'Program':_0x10266e,'SocketId':_0x2e7e18,'User':_0x36f7f9};_0x47847a(_0x10266e,_0x36f7f9);logger[_0xdbd8('0x2e')](_0xdbd8('0x10'));return{'status':0xc8,'message':_0xdbd8('0x10')};}else{logger[_0xdbd8('0x2e')](_0xdbd8('0x1f'));return{'status':0x1f4,'message':_0xdbd8('0x1f')};}}};_0x38ea02[_0xdbd8('0x27')]=function(_0x63af72){if(FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]){if(FusionSettings['SocketVariables'][_0xdbd8('0x1d')][_0xdbd8('0x26')]==_0x63af72||FusionSettings[_0xdbd8('0x30')]['fusion_program_running'][_0xdbd8('0x31')]==_0xdbd8('0x16')){FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]=null;try{python_process[_0xdbd8('0x2')]('SIGINT');}catch(_0x1048c4){}logger['verbose'](_0xdbd8('0xf'));return{'status':0xc8,'message':'Program\x20Successfully\x20Stopped'};}else{logger[_0xdbd8('0x2e')](_0xdbd8('0x24'));return{'status':0x1f4,'message':'Cannot\x20stop\x20another\x20user\x27s\x20program.'};}}else{logger[_0xdbd8('0x2e')](_0xdbd8('0x32'));return{'status':0x1f4,'message':_0xdbd8('0x2b')};}};_0x38ea02[_0xdbd8('0xe')]=function(){FusionSettings['SocketVariables'][_0xdbd8('0x1d')]=null;try{python_process[_0xdbd8('0x2')](_0xdbd8('0x3'));}catch(_0x28d494){}logger[_0xdbd8('0x2e')]('Program\x20is\x20now\x20stopped');};_0x38ea02[_0xdbd8('0xb')]=function(_0x21fb8a,_0x1029d2,_0x53b56d){if(!FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]){FusionSettings[_0xdbd8('0x30')]['fusion_program_running']={'Code':_0x21fb8a,'Program':null,'SocketId':_0x53b56d,'User':_0x1029d2};_0x406ae1(_0x21fb8a,_0x1029d2);logger[_0xdbd8('0x2e')]('Blockly\x20Program\x20is\x20now\x20running');return{'status':0xc8,'message':_0xdbd8('0x19')};}else{if(FusionSettings[_0xdbd8('0x30')]['fusion_program_running'][_0xdbd8('0x26')]==_0x1029d2||FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')][_0xdbd8('0x31')]==_0xdbd8('0x16')){try{python_process[_0xdbd8('0x2')](_0xdbd8('0x3'));}catch(_0x14d9ee){}FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]={'Code':_0x21fb8a,'Program':null,'SocketId':_0x53b56d,'User':_0x1029d2};_0x406ae1(_0x21fb8a,_0x1029d2);logger[_0xdbd8('0x2e')]('Blockly\x20Program\x20is\x20now\x20running');return{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};}else{logger['verbose']('Program\x20already\x20running');return{'status':0x1f4,'message':_0xdbd8('0x1f')};}}};_0x38ea02[_0xdbd8('0x11')]=function(_0x28e96d){python_process[_0xdbd8('0xa')][_0xdbd8('0x21')](_0x28e96d+'\x0a');};function _0x47847a(_0x37074d,_0x5bc8b8){let _0x141455=_0xdbd8('0xd')+(_0xdbd8('0x2a')+_0x5bc8b8+'/Editor\x27)\x0a')+'import\x20imp\x0a'+(_0xdbd8('0xc')+path[_0xdbd8('0x0')](_0x37074d)+'\x27)');python_process=spawn(_0xdbd8('0x20'),['-u','-B','-c',_0x141455],{'stdio':_0xdbd8('0x28')});io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x33'),FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]);_0x1dbf5e();python_process[_0xdbd8('0x9')]['on'](_0xdbd8('0x1a'),function(_0x150972){logger[_0xdbd8('0x2e')](String(_0x150972)['substring'](0x0,_0x150972[_0xdbd8('0x1e')]('\x0a')));io['emit'](_0xdbd8('0x6'),{'output':String(_0x150972)});});python_process[_0xdbd8('0x29')]['on'](_0xdbd8('0x1a'),function(_0x8d581){logger[_0xdbd8('0x2e')](String(_0x8d581)[_0xdbd8('0x15')](0x0,_0x8d581[_0xdbd8('0x1e')]('\x0a')));io[_0xdbd8('0x25')](_0xdbd8('0x6'),{'output':String(_0x8d581)});io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x33'),FusionSettings[_0xdbd8('0x30')]['fusion_program_running']);io['sockets'][_0xdbd8('0x25')](_0xdbd8('0x8'),![]);});python_process['stdout']['on']('close',function(_0x313f63){FusionSettings['SocketVariables'][_0xdbd8('0x1d')]=null;logger[_0xdbd8('0x2e')](String(_0xdbd8('0x18')));io[_0xdbd8('0x25')]('console-output',{'output':String('>\x20Program\x20Finished!\x0a')});io['sockets']['emit'](_0xdbd8('0x33'),FusionSettings[_0xdbd8('0x30')]['fusion_program_running']);io[_0xdbd8('0x7')]['emit'](_0xdbd8('0x8'),![]);});}function _0x406ae1(_0x45b6a0,_0x19426c){let _0x34e75c=_0xdbd8('0xd')+(_0xdbd8('0x2a')+_0x19426c+'/Blockly\x27)\x0a')+_0xdbd8('0x2c')+(''+_0x45b6a0);if(os[_0xdbd8('0x23')]()!=_0xdbd8('0x13')){python_process=spawn('python',['-u','-B','-c',_0x34e75c],{'stdio':'pipe'});}else{python_process=spawn('python',['-u','-B','-c',_0x34e75c],{'stdio':_0xdbd8('0x28')});}io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x33'),FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]);_0x1dbf5e();python_process['stdout']['on'](_0xdbd8('0x1a'),function(_0x28c7bb){logger[_0xdbd8('0x2e')](String(_0x28c7bb)[_0xdbd8('0x15')](0x0,_0x28c7bb[_0xdbd8('0x1e')]('\x0a')));io['emit'](_0xdbd8('0x4'),{'output':String(_0x28c7bb)});});python_process['stderr']['on'](_0xdbd8('0x1a'),function(_0x3f512d){logger[_0xdbd8('0x2e')](String(_0x3f512d)['substring'](0x0,_0x3f512d[_0xdbd8('0x1e')]('\x0a')));io[_0xdbd8('0x25')](_0xdbd8('0x4'),{'output':String(_0x3f512d)});io[_0xdbd8('0x7')]['emit']('program-running',FusionSettings[_0xdbd8('0x30')]['fusion_program_running']);io[_0xdbd8('0x7')][_0xdbd8('0x25')]('gamepad-available',![]);});python_process[_0xdbd8('0x9')]['on'](_0xdbd8('0x2f'),function(_0x2fc145){FusionSettings['SocketVariables']['fusion_program_running']=null;logger['verbose'](String(_0xdbd8('0x18')));io[_0xdbd8('0x25')](_0xdbd8('0x4'),{'output':String(_0xdbd8('0x1c'))});io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x33'),FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1d')]);io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x8'),![]);});}function _0x1dbf5e(){if(os[_0xdbd8('0x23')]()!=_0xdbd8('0x13')){setTimeout(function(){var _0x5371bd=shell['exec'](_0xdbd8('0x5'),{'silent':!![]})[_0xdbd8('0x9')];if(!_0x5371bd)FusionSettings[_0xdbd8('0x30')]['fusion_gamepad_available']=![];else FusionSettings[_0xdbd8('0x30')][_0xdbd8('0x1b')]=!![];io[_0xdbd8('0x7')][_0xdbd8('0x25')](_0xdbd8('0x8'),FusionSettings['SocketVariables'][_0xdbd8('0x1b')]);},0x3e8);}}return _0x38ea02;}();