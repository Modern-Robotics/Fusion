const _0x28d5=['sendInput','exports','os.chdir(\x27./app/filesystem/','Program\x20is\x20now\x20running','console-output','blockly-console-output','SocketId','>\x20Program\x20Finished!\x0a','path','Cannot\x20stop\x20another\x20user\x27s\x20program.','exec','win32','SocketVariables','>\x20Program\x20Finished!','SIGINT','stdout','sockets','/Editor\x27)\x0a','python','stdin','/Blockly\x27)\x0a','Program\x20already\x20running','data','substring','Program\x20Successfully\x20Stopped','../utils/logger','../socket','KillProgram','platform','StartProgram','close','fusion_program_running','spawn','Blockly\x20Program\x20is\x20now\x20running','Program\x20is\x20now\x20stopped','lastIndexOf','write','fusion_gamepad_available','autonomous','imp.load_source(\x27util\x27,\x20r\x27','stderr','gamepad-available','import\x20os\x0a','../global/fusionSettings','pipe','kill','resolve','StartBlocklyProgram','child_process','import\x20imp\x0a','User','emit','verbose','shelljs','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','program-running','StopProgram'];(function(_0x5c00f2,_0x28d5bb){const _0x49ef0b=function(_0x3e5cfd){while(--_0x3e5cfd){_0x5c00f2['push'](_0x5c00f2['shift']());}};_0x49ef0b(++_0x28d5bb);}(_0x28d5,0x1e6));const _0x49ef=function(_0x5c00f2,_0x28d5bb){_0x5c00f2=_0x5c00f2-0x0;let _0x49ef0b=_0x28d5[_0x5c00f2];return _0x49ef0b;};const logger=require(_0x49ef('0x34'));const io=require(_0x49ef('0x35'));const FusionSettings=require(_0x49ef('0xd'));const spawn=require(_0x49ef('0x12'))[_0x49ef('0x2')];const shell=require(_0x49ef('0x17'));const os=require('os');const path=require(_0x49ef('0x23'));let python_process=null;module[_0x49ef('0x1c')]=function(){var _0x43310=function(){};_0x43310[_0x49ef('0x38')]=function(_0x2bbb03,_0x35f217,_0x595b3a){if(!FusionSettings[_0x49ef('0x27')]['fusion_program_running']){FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]={'Code':null,'Program':_0x35f217,'SocketId':_0x595b3a,'User':_0x2bbb03};_0x37e476(_0x35f217,_0x2bbb03);logger[_0x49ef('0x16')](_0x49ef('0x1e'));return{'status':0xc8,'message':_0x49ef('0x1e')};}else{if(FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')][_0x49ef('0x14')]==_0x2bbb03||FusionSettings['SocketVariables'][_0x49ef('0x1')]['SocketId']==_0x49ef('0x8')){try{python_process[_0x49ef('0xf')](_0x49ef('0x29'));}catch(_0x2097d2){}FusionSettings[_0x49ef('0x27')]['fusion_program_running']={'Code':null,'Program':_0x35f217,'SocketId':_0x595b3a,'User':_0x2bbb03};_0x37e476(_0x35f217,_0x2bbb03);logger[_0x49ef('0x16')](_0x49ef('0x1e'));return{'status':0xc8,'message':'Program\x20is\x20now\x20running'};}else{logger[_0x49ef('0x16')]('Program\x20already\x20running');return{'status':0x1f4,'message':'Program\x20already\x20running'};}}};_0x43310[_0x49ef('0x1a')]=function(_0x167471){if(FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]){if(FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]['User']==_0x167471||FusionSettings['SocketVariables']['fusion_program_running']['SocketId']==_0x49ef('0x8')){FusionSettings['SocketVariables'][_0x49ef('0x1')]=null;try{python_process[_0x49ef('0xf')](_0x49ef('0x29'));}catch(_0x5cb9b5){}logger[_0x49ef('0x16')](_0x49ef('0x4'));return{'status':0xc8,'message':_0x49ef('0x33')};}else{logger['verbose']('Cannot\x20stop\x20another\x20user\x20program');return{'status':0x1f4,'message':_0x49ef('0x24')};}}else{logger[_0x49ef('0x16')]('No\x20program\x20running');return{'status':0x1f4,'message':'No\x20Program\x20Running'};}};_0x43310[_0x49ef('0x36')]=function(){FusionSettings['SocketVariables']['fusion_program_running']=null;try{python_process[_0x49ef('0xf')](_0x49ef('0x29'));}catch(_0x3ef17e){}logger['verbose'](_0x49ef('0x4'));};_0x43310[_0x49ef('0x11')]=function(_0x27d79b,_0x486ed4,_0x748f4d){if(!FusionSettings['SocketVariables'][_0x49ef('0x1')]){FusionSettings['SocketVariables'][_0x49ef('0x1')]={'Code':_0x27d79b,'Program':null,'SocketId':_0x748f4d,'User':_0x486ed4};_0x17bacb(_0x27d79b,_0x486ed4);logger['verbose'](_0x49ef('0x3'));return{'status':0xc8,'message':_0x49ef('0x3')};}else{if(FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]['User']==_0x486ed4||FusionSettings[_0x49ef('0x27')]['fusion_program_running'][_0x49ef('0x21')]==_0x49ef('0x8')){try{python_process[_0x49ef('0xf')](_0x49ef('0x29'));}catch(_0x3199ec){}FusionSettings['SocketVariables'][_0x49ef('0x1')]={'Code':_0x27d79b,'Program':null,'SocketId':_0x748f4d,'User':_0x486ed4};_0x17bacb(_0x27d79b,_0x486ed4);logger['verbose'](_0x49ef('0x3'));return{'status':0xc8,'message':'Blockly\x20Program\x20is\x20now\x20running'};}else{logger['verbose'](_0x49ef('0x30'));return{'status':0x1f4,'message':_0x49ef('0x30')};}}};_0x43310[_0x49ef('0x1b')]=function(_0x58fd0d){python_process[_0x49ef('0x2e')][_0x49ef('0x6')](_0x58fd0d+'\x0a');};function _0x37e476(_0x1377ed,_0x329dcf){let _0x24dc83=_0x49ef('0xc')+('os.chdir(\x27./app/filesystem/'+_0x329dcf+_0x49ef('0x2c'))+'import\x20imp\x0a'+(_0x49ef('0x9')+path[_0x49ef('0x10')](_0x1377ed)+'\x27)');python_process=spawn(_0x49ef('0x2d'),['-u','-B','-c',_0x24dc83],{'stdio':_0x49ef('0xe')});io[_0x49ef('0x2b')][_0x49ef('0x15')](_0x49ef('0x19'),FusionSettings['SocketVariables'][_0x49ef('0x1')]);_0x2a7d07();python_process[_0x49ef('0x2a')]['on'](_0x49ef('0x31'),function(_0x538fb9){logger[_0x49ef('0x16')](String(_0x538fb9)[_0x49ef('0x32')](0x0,_0x538fb9[_0x49ef('0x5')]('\x0a')));io[_0x49ef('0x15')](_0x49ef('0x1f'),{'output':String(_0x538fb9)});});python_process[_0x49ef('0xa')]['on'](_0x49ef('0x31'),function(_0x475060){logger[_0x49ef('0x16')](String(_0x475060)[_0x49ef('0x32')](0x0,_0x475060[_0x49ef('0x5')]('\x0a')));io[_0x49ef('0x15')](_0x49ef('0x1f'),{'output':String(_0x475060)});io['sockets'][_0x49ef('0x15')]('program-running',FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]);io[_0x49ef('0x2b')][_0x49ef('0x15')](_0x49ef('0xb'),![]);});python_process[_0x49ef('0x2a')]['on'](_0x49ef('0x0'),function(_0x20618b){FusionSettings[_0x49ef('0x27')]['fusion_program_running']=null;logger['verbose'](String(_0x49ef('0x28')));io[_0x49ef('0x15')](_0x49ef('0x1f'),{'output':String(_0x49ef('0x22'))});io[_0x49ef('0x2b')][_0x49ef('0x15')]('program-running',FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]);io[_0x49ef('0x2b')]['emit'](_0x49ef('0xb'),![]);});}function _0x17bacb(_0x45aa65,_0x33ce04){let _0x553444=_0x49ef('0xc')+(_0x49ef('0x1d')+_0x33ce04+_0x49ef('0x2f'))+_0x49ef('0x13')+(''+_0x45aa65);if(os['platform']()!=_0x49ef('0x26')){python_process=spawn(_0x49ef('0x2d'),['-u','-B','-c',_0x553444],{'stdio':'pipe'});}else{python_process=spawn('python',['-u','-B','-c',_0x553444],{'stdio':_0x49ef('0xe')});}io[_0x49ef('0x2b')][_0x49ef('0x15')](_0x49ef('0x19'),FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]);_0x2a7d07();python_process['stdout']['on'](_0x49ef('0x31'),function(_0x38bfba){logger[_0x49ef('0x16')](String(_0x38bfba)[_0x49ef('0x32')](0x0,_0x38bfba[_0x49ef('0x5')]('\x0a')));io[_0x49ef('0x15')](_0x49ef('0x20'),{'output':String(_0x38bfba)});});python_process[_0x49ef('0xa')]['on']('data',function(_0x2abaeb){logger[_0x49ef('0x16')](String(_0x2abaeb)[_0x49ef('0x32')](0x0,_0x2abaeb['lastIndexOf']('\x0a')));io[_0x49ef('0x15')]('blockly-console-output',{'output':String(_0x2abaeb)});io['sockets'][_0x49ef('0x15')](_0x49ef('0x19'),FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]);io[_0x49ef('0x2b')][_0x49ef('0x15')](_0x49ef('0xb'),![]);});python_process['stdout']['on']('close',function(_0x54cc81){FusionSettings[_0x49ef('0x27')][_0x49ef('0x1')]=null;logger[_0x49ef('0x16')](String(_0x49ef('0x28')));io[_0x49ef('0x15')](_0x49ef('0x20'),{'output':String(_0x49ef('0x22'))});io['sockets'][_0x49ef('0x15')](_0x49ef('0x19'),FusionSettings[_0x49ef('0x27')]['fusion_program_running']);io[_0x49ef('0x2b')][_0x49ef('0x15')]('gamepad-available',![]);});}function _0x2a7d07(){if(os[_0x49ef('0x37')]()!=_0x49ef('0x26')){setTimeout(function(){var _0x4083e3=shell[_0x49ef('0x25')](_0x49ef('0x18'),{'silent':!![]})[_0x49ef('0x2a')];if(!_0x4083e3)FusionSettings[_0x49ef('0x27')][_0x49ef('0x7')]=![];else FusionSettings[_0x49ef('0x27')]['fusion_gamepad_available']=!![];io[_0x49ef('0x2b')][_0x49ef('0x15')](_0x49ef('0xb'),FusionSettings[_0x49ef('0x27')][_0x49ef('0x7')]);},0x3e8);}}return _0x43310;}();