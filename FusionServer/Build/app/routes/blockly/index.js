var _0x57c8=['<md-button\x20ng-click=\x22SaveAsDialog(ev)\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_SAVE_AS\x22></div></md-button>','../../utils/logger','scp','Updated:\x20\x27','<md-menu>','\x27)\x22>','<md-button\x20ng-click=\x22NewBlocklyFile()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_NEW\x22></div></md-button>','<md-button\x20ng-click=\x22$mdMenu.open()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_VIEW_MODE\x22></div></md-button>','delete','</md-button>','<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_SHOW_CODE\x22></div></md-tooltip>','<md-button\x20ng-click=\x22takeToBlocklyDocs()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_HELP_DOCUMENTATION\x22></div></md-button>','An\x20error\x20occurred',',\x20signal:\x20','Program\x20Created\x20Successfully','<md-menu-item\x20type=\x22checkbox\x22\x20ng-model=\x22Settings.ShowConsole\x22\x20ng-click=\x22resizeBlockly()\x22><div>{{\x22BLOCKLY.MENUBAR_VIEW_PROGRAM_OUTPUT\x22\x20|\x20translate}}</div></md-menu-item>','message','\x27\x20in\x20classroom\x20server','connected','send','STDOUT:\x20','connect','status','path','<md-menu-item\x20type=\x22radio\x22\x20ng-model=\x22Settings.Mode\x22\x20value=\x22intermediate\x22\x20ng-click=\x22setToolbox()\x22><div>{{\x22BLOCKLY.MENUBAR_VIEW_MODE_INTERMEDIATE\x22\x20|\x20translate}}</div></md-menu-item>','</md-menu-bar>','File\x20Does\x20Not\x20Exist.','\x20</md-menu-item>','username','<md-menu-content>','user','type','<div\x20class=\x22fusion-ribbon\x22>','error','post','writeFile','<div\x20class=\x22fusion-toolbar\x22>','<md-button\x20class=\x22md-primary\x20fusion-ribbon-button\x22\x20ng-click=\x22runExistingBlocklyProgram()\x22>','Program\x20Deleted\x20Successfully','<md-button\x20ng-click=\x22$mdMenu.open()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_HELP_EXAMPLES\x22></div></md-button>','filepath','/Blockly/','exec','utf-8','<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_OPEN_IN_EDITOR\x22></div></md-tooltip>','</div>','Created:\x20\x27','<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22SaveBlocklyFile()\x22>','ready','utf8','<button\x20ng-click=\x22$mdMenu.open()\x22\x20class=\x22fusion-toolbar-item\x22\x20translate=\x22BLOCKLY.MENUBAR_MANAGE\x22></button>','code','debug','</md-menu-content>','StartBlocklyProgram','Stream\x20::\x20close\x20::\x20code:\x20','<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_GAMEPAD_TOOLTIP\x22></div></md-tooltip>','<button\x20ng-click=\x22$mdMenu.open()\x22\x20class=\x22fusion-toolbar-item\x22\x20translate=\x22BLOCKLY.MENUBAR_VIEW\x22></button>','<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22OpenFileDialog(ev)\x22>','children','/api/blocklyToolbar','params','readdir','<md-menu-item\x20type=\x22radio\x22\x20ng-model=\x22Settings.Mode\x22\x20value=\x22basic\x22\x20ng-click=\x22setToolbox()\x22><div>{{\x22BLOCKLY.MENUBAR_VIEW_MODE_BASIC\x22\x20|\x20translate}}</div></md-menu-item>','put','/api/blockly/:Program_Name','close','unlinkSync','ssh2','stat','<button\x20ng-click=\x22$mdMenu.open()\x22\x20class=\x22fusion-toolbar-item\x22\x20translate=\x22BLOCKLY.MENUBAR_FILE\x22></button>','<i\x20class=\x22fas\x20fa-external-link-square-alt\x20fa-lg\x20fa-fw\x22></i>','A\x20file\x20with\x20that\x20name\x20already\x20exists','</md-menu>','Program\x20Updated\x20Successfully','/api/blockly/stop','<i\x20class=\x22fas\x20fa-gamepad\x20fa-lg\x20fa-fw\x22></i>','exports','</md-menu-item>','split','public/app/components/blockly/Examples','<i\x20class=\x22fas\x20fa-stop\x20fa-lg\x20fa-fw\x22></i>','readFile','../../fusionProgram','<md-button\x20class=\x22fusion-ribbon-button\x20tooltip\x22\x20ng-click=\x22NewBlocklyFile()\x22>','<i\x20class=\x22fas\x20fa-terminal\x20fa-lg\x20fa-fw\x22></i>','\x27,\x27','../../express','json','rm\x20/home/c3/FusionFilesystem/','<md-button\x20ng-click=\x22UploadFilesDialog()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_MANAGE_IMPORT\x22></div></md-button>','constructor','<md-button\x20ng-click=\x22DownloadFilesDialog()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_MANAGE_EXPORT\x22></div></md-button>','<md-button\x20ng-click=\x22$mdMenu.open()\x22>','directory-tree','<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_OPEN_FILE_TOOLTIP\x22></div></md-tooltip>','<i\x20class=\x22far\x20fa-save\x20fa-lg\x20fa-fw\x22></i>','<i\x20class=\x22fas\x20fa-play\x20fa-lg\x20fa-fw\x22></i>','join','User\x20Unauthenticated','<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22openInEditor()\x22>','<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_NEW_FILE_TOOLTIP\x22></div></md-tooltip>','<md-menu-divider></md-menu-divider>','Program_Name','<div\x20layout=\x22row\x22>','<md-menu-content\x20width=\x223\x22>','<md-menu-item\x20class=\x22md-indent\x22>','Client','body','<button\x20ng-click=\x22$mdMenu.open()\x22\x20class=\x22fusion-toolbar-item\x22\x20translate=\x22BLOCKLY.MENUBAR_HELP\x22></button>','<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22OpenVirtualGamepad()\x22\x20ng-disabled=\x22DisableVirtualGamepad()\x22>','get','/api/blockly','<div>','Error\x20loading\x20example','<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22toggleCodeWindow()\x22>','<md-menu-item>','filename','<md-button\x20ng-click=\x22openExampleProgram(\x27','name'];(function(_0x5cc04c,_0x57c85b){var _0x295907=function(_0x32cf0d){while(--_0x32cf0d){_0x5cc04c['push'](_0x5cc04c['shift']());}};_0x295907(++_0x57c85b);}(_0x57c8,0x1e9));var _0x2959=function(_0x5cc04c,_0x57c85b){_0x5cc04c=_0x5cc04c-0x0;var _0x295907=_0x57c8[_0x5cc04c];return _0x295907;};var dirTree=require(_0x2959('0x55'));var SCP=require('scp2');var SSH=require(_0x2959('0x3b'))[_0x2959('0x62')];var path=require(_0x2959('0xe'));const classroomConnection=require('../../classroom/connection');const logger=require(_0x2959('0x70'));const app=require(_0x2959('0x4e'));const fs=require('fs');const mkdirp=require('mkdirp');const fusionProgram=require(_0x2959('0x4a'));var examplesHtml='';var examplesFilePath=_0x2959('0x47');var tree=dirTree(examplesFilePath,{'extensions':/\.blk$/});module[_0x2959('0x44')]=function(){app[_0x2959('0x66')](_0x2959('0x67'),_0xd4e9e6(),function(_0x8135d6,_0x762e25){var _0x19c6bf=_0x8135d6[_0x2959('0x15')]['filepath']+'/Blockly';mkdirp(_0x19c6bf,function(_0x38a83c){if(_0x38a83c)return _0x762e25[_0x2959('0xd')](0x1f4)[_0x2959('0xa')](_0x38a83c);fs[_0x2959('0x35')](_0x19c6bf,function(_0x267487,_0x41ed44){if(_0x267487)return _0x762e25[_0x2959('0xd')](0x1f4)[_0x2959('0xa')](_0x267487);return _0x762e25[_0x2959('0xd')](0xc8)[_0x2959('0xa')](_0x41ed44);});});});app[_0x2959('0x19')](_0x2959('0x67'),_0xd4e9e6(),function(_0x2357ed,_0x7b5009){fs[_0x2959('0x3c')](_0x2357ed[_0x2959('0x15')][_0x2959('0x1f')]+_0x2959('0x20')+_0x2357ed[_0x2959('0x63')][_0x2959('0x6c')],function(_0x584c3b,_0x2a23e8){if(_0x584c3b==null){return _0x7b5009[_0x2959('0xd')](0x1f4)[_0x2959('0x4f')]({'serverMessage':_0x2959('0x3f')});}else if(_0x584c3b['code']=='ENOENT'){fs[_0x2959('0x1a')](_0x2357ed[_0x2959('0x15')][_0x2959('0x1f')]+_0x2959('0x20')+_0x2357ed[_0x2959('0x63')][_0x2959('0x6c')],_0x2357ed[_0x2959('0x63')][_0x2959('0x2a')],function(_0x93e43e){if(_0x93e43e)return _0x7b5009[_0x2959('0xd')](0x1f4)[_0x2959('0x4f')]({'serverMessage':_0x93e43e});if(classroomConnection[_0x2959('0x9')]){_0x114b56(_0x2357ed[_0x2959('0x15')][_0x2959('0x1f')]+_0x2959('0x20')+_0x2357ed[_0x2959('0x63')][_0x2959('0x6c')],_0x2357ed[_0x2959('0x15')][_0x2959('0x13')]+_0x2959('0x20')+_0x2357ed['body'][_0x2959('0x6c')]);}return _0x7b5009[_0x2959('0xd')](0xc8)[_0x2959('0x4f')]({'serverMessage':_0x2959('0x5')});});}else{return _0x7b5009[_0x2959('0xd')](0x1f4)[_0x2959('0x4f')]({'serverMessage':_0x2959('0x3')});}});});app[_0x2959('0x66')](_0x2959('0x38'),_0xd4e9e6(),function(_0x8da181,_0x470179){fs[_0x2959('0x49')](_0x8da181[_0x2959('0x15')]['filepath']+'/Blockly/'+_0x8da181[_0x2959('0x34')][_0x2959('0x5e')],_0x2959('0x28'),function(_0x1e5c06,_0x5a0d29){if(_0x1e5c06)_0x470179[_0x2959('0xd')](0x1f4)[_0x2959('0xa')](_0x1e5c06);_0x470179[_0x2959('0xd')](0xc8)['send'](_0x5a0d29);});});app[_0x2959('0x37')]('/api/blockly/:Program_Name',_0xd4e9e6(),function(_0x1b1fda,_0x25e6b1){fs[_0x2959('0x49')](_0x1b1fda['user']['filepath']+'/Blockly/'+_0x1b1fda[_0x2959('0x34')]['Program_Name'],_0x2959('0x28'),function(_0x3f3411,_0x59051d){if(_0x3f3411)return _0x25e6b1['status'](0x1f4)['send'](_0x3f3411);fs['writeFile'](_0x1b1fda[_0x2959('0x15')]['filepath']+_0x2959('0x20')+_0x1b1fda[_0x2959('0x34')][_0x2959('0x5e')],_0x1b1fda['body'][_0x2959('0x2a')],_0x2959('0x22'),function(_0x106101){if(_0x106101)return _0x25e6b1['status'](0x1f4)[_0x2959('0xa')](_0x106101);if(classroomConnection[_0x2959('0x9')]){_0x8e0d56(_0x1b1fda['user'][_0x2959('0x1f')]+_0x2959('0x20')+_0x1b1fda['params']['Program_Name'],_0x1b1fda[_0x2959('0x15')][_0x2959('0x13')]+_0x2959('0x20')+_0x1b1fda[_0x2959('0x34')][_0x2959('0x5e')]);}return _0x25e6b1[_0x2959('0xd')](0xc8)[_0x2959('0x4f')]({'serverMessage':_0x2959('0x41')});});});});app[_0x2959('0x77')](_0x2959('0x38'),_0xd4e9e6(),function(_0x46b514,_0x5da9f8){fs['readFile'](_0x46b514[_0x2959('0x15')][_0x2959('0x1f')]+_0x2959('0x20')+_0x46b514[_0x2959('0x34')][_0x2959('0x5e')],_0x2959('0x28'),function(_0x3cc945,_0x134e8d){if(_0x3cc945)return _0x5da9f8['status'](0x1f4)[_0x2959('0x4f')]({'serverMessage':_0x2959('0x11')});fs[_0x2959('0x3a')](_0x46b514[_0x2959('0x15')][_0x2959('0x1f')]+_0x2959('0x20')+_0x46b514[_0x2959('0x34')][_0x2959('0x5e')]);if(classroomConnection[_0x2959('0x9')]){_0x464869(_0x46b514['user'][_0x2959('0x13')]+_0x2959('0x20')+_0x46b514[_0x2959('0x34')]['Program_Name']);}return _0x5da9f8[_0x2959('0xd')](0xc8)['json']({'serverMessage':_0x2959('0x1d')});});});app['post']('/api/blockly/start',_0xd4e9e6(),function(_0x754099,_0x5e767a){var _0xcf08a9=fusionProgram[_0x2959('0x2d')](_0x754099[_0x2959('0x63')][_0x2959('0x2a')],_0x754099[_0x2959('0x15')][_0x2959('0x13')],_0x754099[_0x2959('0x63')]['socketId']);return _0x5e767a['status'](_0xcf08a9[_0x2959('0xd')])[_0x2959('0x4f')]({'serverMessage':_0xcf08a9[_0x2959('0x7')]});});app[_0x2959('0x19')](_0x2959('0x42'),_0xd4e9e6(),function(_0x30789f,_0xf80a8){var _0x505590=fusionProgram['StopProgram'](_0x30789f[_0x2959('0x15')][_0x2959('0x13')]);return _0xf80a8[_0x2959('0xd')](_0x505590['status'])[_0x2959('0x4f')]({'serverMessage':_0x505590[_0x2959('0x7')]});});app['post']('/api/blocklySamplePrograms',function(_0x579dac,_0x3bff1c){fs[_0x2959('0x49')](_0x579dac[_0x2959('0x63')][_0x2959('0x1f')],_0x2959('0x28'),function(_0x570597,_0x743cd4){if(_0x570597)return _0x3bff1c[_0x2959('0xd')](0x1f4)['send'](_0x2959('0x69'));return _0x3bff1c[_0x2959('0xd')](0xc8)[_0x2959('0xa')](_0x743cd4);});});app[_0x2959('0x66')](_0x2959('0x33'),function(_0x89d32e,_0x57d547){var _0x120668='<div\x20class=\x22fusion-toolbar-container\x22>'+'<md-toolbar\x20class=\x22md-menu-toolbar\x22\x20ng-cloak>'+_0x2959('0x5f')+_0x2959('0x1b')+'<h2\x20class=\x22md-toolbar-tools\x22\x20ng-class=\x22isExampleFile(SelectedFile)\x22>{{displaySaveSymbol(SelectedFile.NeedsSaving)}}\x20{{SelectedFile.Name}}</h2>'+_0x2959('0x68')+'<md-menu-bar>'+_0x2959('0x73')+_0x2959('0x3d')+_0x2959('0x14')+_0x2959('0x6b')+_0x2959('0x75')+_0x2959('0x45')+_0x2959('0x6b')+'<md-button\x20ng-click=\x22OpenFileDialog(ev)\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_OPEN\x22></div></md-button>'+'</md-menu-item>'+_0x2959('0x6b')+'<md-button\x20ng-click=\x22NewBlocklyFile()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_CLOSE\x22></div></md-button>'+_0x2959('0x45')+'<md-menu-divider></md-menu-divider>'+_0x2959('0x6b')+'<md-button\x20ng-click=\x22SaveBlocklyFile()\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_SAVE\x22></div></md-button>'+'\x20</md-menu-item>'+_0x2959('0x6b')+_0x2959('0x6f')+_0x2959('0x45')+'<md-menu-divider></md-menu-divider>'+_0x2959('0x6b')+'<md-button\x20ng-click=\x22DeleteDialog(ev)\x22><div\x20translate=\x22BLOCKLY.MENUBAR_FILE_DELETE\x22></div></md-button>'+_0x2959('0x45')+_0x2959('0x2c')+'</md-menu>'+_0x2959('0x73')+_0x2959('0x30')+'<md-menu-content>'+_0x2959('0x61')+_0x2959('0x73')+_0x2959('0x76')+_0x2959('0x60')+_0x2959('0x36')+_0x2959('0xf')+'</md-menu-content>'+_0x2959('0x40')+_0x2959('0x12')+_0x2959('0x5d')+_0x2959('0x6')+'<md-menu-item\x20type=\x22checkbox\x22\x20ng-model=\x22Settings.ShowCode\x22\x20ng-click=\x22resizeBlockly()\x22><div>{{\x22BLOCKLY.MENUBAR_VIEW_CODE_WINDOW\x22\x20|\x20translate}}</div><div\x20translate=\x22\x22></div></md-menu-item>'+_0x2959('0x2c')+'</md-menu>'+_0x2959('0x73')+_0x2959('0x29')+_0x2959('0x14')+_0x2959('0x6b')+_0x2959('0x51')+_0x2959('0x45')+_0x2959('0x6b')+_0x2959('0x53')+_0x2959('0x45')+'</md-menu-content>'+_0x2959('0x40')+_0x2959('0x73')+_0x2959('0x64')+_0x2959('0x14')+examplesHtml+_0x2959('0x6b')+_0x2959('0x2')+_0x2959('0x45')+'</md-menu-content>'+_0x2959('0x40')+_0x2959('0x10')+_0x2959('0x24')+'</div>'+_0x2959('0x24')+_0x2959('0x17')+_0x2959('0x4b')+_0x2959('0x5c')+'<i\x20class=\x22far\x20fa-file-alt\x20fa-lg\x20fa-fw\x22></i>'+_0x2959('0x0')+_0x2959('0x31')+_0x2959('0x56')+'<i\x20class=\x22far\x20fa-folder-open\x20fa-lg\x20fa-fw\x22></i>'+'</md-button>'+_0x2959('0x26')+'<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_SAVE_FILE_TOOLTIP\x22></div></md-tooltip>'+_0x2959('0x57')+_0x2959('0x0')+_0x2959('0x1c')+'<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_RUN_FILE_TOOLTIP\x22></div></md-tooltip>'+_0x2959('0x58')+_0x2959('0x0')+'<md-button\x20class=\x22md-warn\x20fusion-ribbon-button\x22\x20ng-click=\x22stopRunningBlocklyProgram()\x22>'+'<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_STOP_FILE_TOOLTIP\x22></div></md-tooltip>'+_0x2959('0x48')+_0x2959('0x0')+'<md-button\x20class=\x22fusion-ribbon-button\x22\x20ng-click=\x22toggleProgramOutput()\x22>'+'<md-tooltip><div\x20translate=\x22BLOCKLY.TOOLBAR_TOGGLE_OUTPUT\x22></div></md-tooltip>'+_0x2959('0x4c')+_0x2959('0x0')+_0x2959('0x6a')+_0x2959('0x1')+'<i\x20class=\x22fas\x20fa-code\x20fa-lg\x20fa-fw\x22></i>'+_0x2959('0x0')+_0x2959('0x65')+_0x2959('0x2f')+_0x2959('0x43')+_0x2959('0x0')+_0x2959('0x5b')+_0x2959('0x23')+_0x2959('0x3e')+'</md-button>'+_0x2959('0x24')+'</md-toolbar>'+_0x2959('0x24');return _0x57d547['status'](0xc8)[_0x2959('0xa')](_0x120668);});function _0xd4e9e6(){return function(_0x2cac19,_0x50fe48,_0x30f2f9){if(_0x2cac19['isAuthenticated']()){return _0x30f2f9();}else{return _0x50fe48[_0x2959('0xd')](0x191)['send'](_0x2959('0x5a'));}};}function _0x114b56(_0x48a451,_0x4e42c5){SCP[_0x2959('0x71')](_0x48a451,'c3:root@172.16.0.1:/home/c3/FusionFilesystem/'+_0x4e42c5,function(_0x2401da){if(_0x2401da)logger[_0x2959('0x18')](_0x2401da);else logger[_0x2959('0x2b')](_0x2959('0x25')+_0x4e42c5+_0x2959('0x8'));});}function _0x8e0d56(_0x41e2c9,_0x363afc){SCP[_0x2959('0x71')](_0x41e2c9,'c3:root@172.16.0.1:/home/c3/FusionFilesystem/'+_0x363afc,function(_0x31b743){if(_0x31b743)logger['error'](_0x31b743);else logger[_0x2959('0x2b')](_0x2959('0x72')+_0x363afc+_0x2959('0x8'));});}function _0x464869(_0x1d735a){var _0x143a2b=new SSH();_0x143a2b['on'](_0x2959('0x27'),function(){_0x143a2b[_0x2959('0x21')](_0x2959('0x50')+_0x1d735a,function(_0x1be104,_0x399f55){if(_0x1be104)throw _0x1be104;_0x399f55['on'](_0x2959('0x39'),function(_0x630d1,_0x9c9fa4){logger[_0x2959('0x2b')](_0x2959('0x2e')+_0x630d1+_0x2959('0x4')+_0x9c9fa4);_0x143a2b['end']();})['on']('data',function(_0x4f7c92){logger['verbose'](_0x2959('0xb')+_0x4f7c92);})['stderr']['on']('data',function(_0x2e32a6){logger[_0x2959('0x18')]('STDERR:\x20'+_0x2e32a6);});});})[_0x2959('0xc')]({'host':'172.16.0.1','port':0x16,'username':'c3','password':'root'});}function _0x3bce74(_0x2425f3){if(_0x2425f3[_0x2959('0x16')]=='directory'){if(_0x2425f3[_0x2959('0x6e')]=='Examples'){examplesHtml+=_0x2959('0x73');examplesHtml+=_0x2959('0x1e');examplesHtml+=_0x2959('0x14');_0x3bce74(_0x2425f3[_0x2959('0x32')]);examplesHtml+=_0x2959('0x2c');examplesHtml+=_0x2959('0x40');}else{examplesHtml+='<md-menu-item>';examplesHtml+=_0x2959('0x73');examplesHtml+=_0x2959('0x54')+_0x2425f3[_0x2959('0x6e')]+_0x2959('0x0');examplesHtml+=_0x2959('0x14');_0x3bce74(_0x2425f3['children']);examplesHtml+=_0x2959('0x2c');examplesHtml+=_0x2959('0x40');examplesHtml+=_0x2959('0x45');}}else if(_0x2425f3[_0x2959('0x52')]===Array){for(var _0xa9e0c8=0x0;_0xa9e0c8<_0x2425f3['length'];_0xa9e0c8++){_0x3bce74(_0x2425f3[_0xa9e0c8]);}}else if(_0x2425f3['type']=='file'){examplesHtml+=_0x2959('0x6b');examplesHtml+=_0x2959('0x6d')+_0x2425f3[_0x2959('0x6e')]+_0x2959('0x4d')+_0x2425f3[_0x2959('0xe')][_0x2959('0x46')]('\x5c')[_0x2959('0x59')]('/')+_0x2959('0x74')+_0x2425f3['name']+_0x2959('0x0');examplesHtml+='</md-menu-item>';}}_0x3bce74(tree);}();