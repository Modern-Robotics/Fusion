var _0x39af=['/api/users/logout','Logged\x20out\x20successfully','User\x20does\x20not\x20exist','/api/recovery','local-recovery','/api/allowedUserGroups','Admin','unshift','connectedClients','length','User\x20Unauthenticated','info','Error\x20downloading\x20classroom\x20files\x20for\x20','sftp','Error\x20communicating\x20with\x20c3:\x20','end','stringify','readdir','/home/c3/FusionFilesystem/','mkdir','Classroom\x20file\x20system\x20found','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','User\x27s\x20classroom\x20file\x20system\x20created','User\x27s\x20classroom\x20file\x20system\x20found','/Editor/','User\x27s\x20editor\x20directory\x20created','User\x27s\x20editor\x20directory\x20found','/Blockly/','User\x27s\x20blockly\x20directory\x20created','User\x27s\x20blockly\x20directory\x20found','Editor','filename','push','verbose','Blockly','/Editor','Getting\x20data\x20for\x20','stat','name','debug','Local\x20mtime:\x20','floor','mtimeMs','attrs','\x22\x20newer,\x20updating\x20classroom\x20version','Remote\x20\x22','\x22\x20newer,\x20updating\x20local\x20version','Error:\x20','\x20not\x20a\x20common\x20file!','Remote\x20mtime:\x20','mtime','Local\x20\x22','filepath','Remote\x20path:\x20','Local\x20Path:\x20','fastPut','Uploaded\x20','fastGet','Error\x20downloading\x20file:\x20','Retrieved\x20','Error\x20reading\x20user\x20file\x20system:\x20','Error\x20creating\x20editor\x20directory:\x20','Editor\x20directory\x20created','Error\x20creating\x20blockly\x20directory:\x20','Blockly\x20directory\x20created','Error\x20reading\x20classroom\x20editor\x20files:\x20','Retrieving\x20files','app/filesystem/','scp','c3:root@172.16.0.1:','Error\x20downloading:\x20',',\x20error:\x20','ssh2','Client','winston','exports','/api/users','Guest','json','post','authenticate','local-signup','user','Error','status','send','body','socketId','User\x20created!','connected','logout','get','/api/users/:User_Id','findOne','params','toLowerCase','User_Id','password','generateHash','firstname','lastname','language','email','defaultprogramminglanguage','securityquestion','securityanswer','usergroup','User\x20updated!','delete','username','SocketVariables','fusion_program_running','User','KillProgram','remove','removeFileSystem','Successfully\x20deleted','/api/users/login','local-login','MultiUserAccess','Login\x20Successful','log','\x20connected\x20to\x20classroom?\x20','/api/users/cloudLogin','in\x20cloud\x20login','POST','https://172.16.0.1/backend/auth/ldap','exec','login','create','Error\x20with\x20request\x20promise.\x20'];(function(_0x3e1fa0,_0x3ebd19){var _0x4e078b=function(_0xf98955){while(--_0xf98955){_0x3e1fa0['push'](_0x3e1fa0['shift']());}};_0x4e078b(++_0x3ebd19);}(_0x39af,0x14e));var _0x4af0=function(_0x3c9201,_0x251889){_0x3c9201=_0x3c9201-0x0;var _0x27c0ec=_0x39af[_0x3c9201];return _0x27c0ec;};var SCP=require('scp2');var SSH=require(_0x4af0('0x0'))[_0x4af0('0x1')];var fs=require('fs-extra');var path=require('path');var rp=require('request-promise');const classroomConnection=require('./../../server/classroom/connection/');const winston=require(_0x4af0('0x2'));module[_0x4af0('0x3')]=function(_0x56fe74,_0x4ec096,_0x273515,_0x5daf9d,_0x51badb,_0x2190fb){_0x56fe74['get'](_0x4af0('0x4'),_0x4a0acd(),function(_0x2e3c52,_0x9a35f5){_0x4ec096['find']({'usergroup':{'$ne':_0x4af0('0x5')}},function(_0x2dd874,_0x1cae86){if(_0x2dd874)_0x9a35f5['send'](_0x2dd874);_0x9a35f5[_0x4af0('0x6')](_0x1cae86);});});_0x56fe74[_0x4af0('0x7')](_0x4af0('0x4'),_0x273515[_0x4af0('0x8')](_0x4af0('0x9'),{'session':!![]}),function(_0x184acf,_0x58a812){if(_0x184acf[_0x4af0('0xa')][_0x4af0('0xb')]){return _0x58a812[_0x4af0('0xc')](0x1f4)[_0x4af0('0xd')](_0x184acf[_0x4af0('0xa')][_0x4af0('0xb')]);}else{if(_0x2190fb['MultiUserAccess']){if(classroomConnection['connected']){_0x40578c(_0x184acf['user']);}_0x12dd48(_0x184acf[_0x4af0('0xe')][_0x4af0('0xf')],_0x184acf[_0x4af0('0xa')]);return _0x58a812['status'](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x10'),'user':_0x184acf[_0x4af0('0xa')]});}else{if(_0x100c15()==0x0){_0x12dd48(_0x184acf[_0x4af0('0xe')][_0x4af0('0xf')],_0x184acf[_0x4af0('0xa')]);if(classroomConnection[_0x4af0('0x11')]){_0x40578c(_0x184acf['user']);}return _0x58a812['status'](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x10'),'user':_0x184acf[_0x4af0('0xa')]});}else{_0x184acf[_0x4af0('0x12')]();return _0x58a812[_0x4af0('0xc')](0x1f4)[_0x4af0('0xd')]('User\x20created\x20but\x20another\x20user\x20is\x20already\x20logged\x20in.');}}}});_0x56fe74[_0x4af0('0x13')](_0x4af0('0x14'),_0x4a0acd(),function(_0xdccbe3,_0x21fa18){_0x4ec096[_0x4af0('0x15')]({'username':_0xdccbe3[_0x4af0('0x16')]['User_Id'][_0x4af0('0x17')]()['trim']()},function(_0x32c869,_0x187880){if(_0x32c869)_0x21fa18[_0x4af0('0xd')](_0x32c869);_0x21fa18[_0x4af0('0x6')](_0x187880);});});_0x56fe74['put']('/api/users/:User_Id',_0x4a0acd(),function(_0x40ef5e,_0x59e12e){_0x4ec096[_0x4af0('0x15')]({'username':_0x40ef5e[_0x4af0('0x16')][_0x4af0('0x18')][_0x4af0('0x17')]()['trim']()},function(_0x59d7e3,_0x23127d){if(_0x59d7e3)_0x59e12e[_0x4af0('0xd')](_0x59d7e3);if(_0x40ef5e['body'][_0x4af0('0x19')]){_0x23127d[_0x4af0('0x19')]=_0x23127d[_0x4af0('0x1a')](_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x19')]);}if(_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x1b')]){_0x23127d[_0x4af0('0x1b')]=_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x1b')];}if(_0x40ef5e[_0x4af0('0xe')]['lastname']){_0x23127d[_0x4af0('0x1c')]=_0x40ef5e['body']['lastname'];}if(_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x1d')]){_0x23127d['language']=_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x1d')];}if(_0x40ef5e['body'][_0x4af0('0x1e')]){_0x23127d[_0x4af0('0x1e')]=_0x40ef5e['body'][_0x4af0('0x1e')];}if(_0x40ef5e['body'][_0x4af0('0x1f')]){_0x23127d[_0x4af0('0x1f')]=_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x1f')];}if(_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x20')]){_0x23127d[_0x4af0('0x20')]=_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x20')];}if(_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x21')]){_0x23127d[_0x4af0('0x21')]=_0x40ef5e['body']['securityanswer'];}if(_0x40ef5e[_0x4af0('0xe')][_0x4af0('0x22')]){_0x23127d[_0x4af0('0x22')]=_0x40ef5e[_0x4af0('0xe')]['usergroup'];}_0x23127d['save'](function(_0x59d7e3){if(_0x59d7e3)_0x59e12e[_0x4af0('0xc')](0x1f4)['send'](_0x59d7e3);_0x59e12e[_0x4af0('0xc')](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x23')});});});});_0x56fe74[_0x4af0('0x24')](_0x4af0('0x14'),_0x4a0acd(),function(_0x273cba,_0x508a1f){if(_0x273cba[_0x4af0('0x16')][_0x4af0('0x18')][_0x4af0('0x17')]()['trim']()==_0x273cba[_0x4af0('0xa')][_0x4af0('0x25')]){if(_0x2190fb[_0x4af0('0x26')][_0x4af0('0x27')])if(_0x2190fb[_0x4af0('0x26')][_0x4af0('0x27')][_0x4af0('0x28')]==_0x273cba[_0x4af0('0xa')][_0x4af0('0x25')])_0x5daf9d[_0x4af0('0x29')]();_0x3dcaf0(_0x273cba[_0x4af0('0xa')]['username']);_0x273cba[_0x4af0('0x12')]();}_0x4ec096[_0x4af0('0x2a')]({'username':_0x273cba[_0x4af0('0x16')][_0x4af0('0x18')][_0x4af0('0x17')]()['trim']()},function(_0x45df8d,_0x37103f){if(_0x45df8d)return _0x508a1f[_0x4af0('0xd')](_0x45df8d);_0x4ec096[_0x4af0('0x2b')](_0x273cba[_0x4af0('0x16')][_0x4af0('0x18')][_0x4af0('0x17')]()['trim']());return _0x508a1f[_0x4af0('0xc')](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x2c')});});});_0x56fe74[_0x4af0('0x7')](_0x4af0('0x2d'),_0x273515['authenticate'](_0x4af0('0x2e'),{'session':!![]}),function(_0x4c3cf3,_0x55843f){if(_0x2190fb[_0x4af0('0x2f')]){if(classroomConnection['connected']){_0x40578c(_0x4c3cf3[_0x4af0('0xa')]);}_0x12dd48(_0x4c3cf3[_0x4af0('0xe')][_0x4af0('0xf')],_0x4c3cf3[_0x4af0('0xa')]);return _0x55843f[_0x4af0('0xc')](0xc8)['json']({'serverMessage':_0x4af0('0x30'),'user':_0x4c3cf3[_0x4af0('0xa')]});}else{if(_0x100c15()==0x0){_0x12dd48(_0x4c3cf3['body']['socketId'],_0x4c3cf3[_0x4af0('0xa')]);console[_0x4af0('0x31')]('User:\x20'+_0x4c3cf3[_0x4af0('0xa')]+_0x4af0('0x32')+classroomConnection[_0x4af0('0x11')]);if(classroomConnection[_0x4af0('0x11')]){_0x40578c(_0x4c3cf3[_0x4af0('0xa')]);}return _0x55843f['status'](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x30'),'user':_0x4c3cf3[_0x4af0('0xa')]});}else{_0x4c3cf3[_0x4af0('0x12')]();return _0x55843f[_0x4af0('0xc')](0x1f4)[_0x4af0('0xd')]('Another\x20user\x20is\x20already\x20logged\x20in.');}}});_0x56fe74['post'](_0x4af0('0x33'),async function(_0x1a5c54,_0x430632){console[_0x4af0('0x31')](_0x4af0('0x34'));var _0x31ddf8={'method':_0x4af0('0x35'),'uri':_0x4af0('0x36'),'body':{'username':_0x1a5c54[_0x4af0('0xe')][_0x4af0('0x25')],'password':_0x1a5c54[_0x4af0('0xe')][_0x4af0('0x19')]},'json':!![],'rejectUnauthorized':![]};try{let _0xe59e06=await rp(_0x31ddf8);let _0x5b745e=await _0x4ec096[_0x4af0('0x15')]({'username':_0x1a5c54[_0x4af0('0xe')][_0x4af0('0x25')]})[_0x4af0('0x37')]();if(_0x5b745e){return _0x430632[_0x4af0('0xc')](0xc8)[_0x4af0('0xd')](_0x4af0('0x38'));}else{return _0x430632[_0x4af0('0xc')](0xc8)[_0x4af0('0xd')](_0x4af0('0x39'));}}catch(_0xcaf76e){console[_0x4af0('0x31')](_0x4af0('0x3a')+_0xcaf76e);return _0x430632[_0x4af0('0xc')](0x1f4)['send'](_0xcaf76e);}});_0x56fe74[_0x4af0('0x7')](_0x4af0('0x3b'),_0x4a0acd(),function(_0x562f79,_0x5b3f5c){if(_0x2190fb['SocketVariables'][_0x4af0('0x27')])if(_0x2190fb[_0x4af0('0x26')]['fusion_program_running'][_0x4af0('0x28')]==_0x562f79[_0x4af0('0xa')][_0x4af0('0x25')])_0x5daf9d['KillProgram']();_0x303db2(_0x562f79[_0x4af0('0xe')][_0x4af0('0xf')]);_0x562f79['logout']();_0x5b3f5c['status'](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x3c')});});_0x56fe74[_0x4af0('0x13')]('/api/recovery/:User_Id',function(_0x5e224d,_0x16695f){_0x4ec096[_0x4af0('0x15')]({'username':_0x5e224d['params'][_0x4af0('0x18')][_0x4af0('0x17')]()['trim']()},function(_0x46e77e,_0x3a9e7f){if(_0x46e77e)return _0x16695f[_0x4af0('0xc')](0x1f4)[_0x4af0('0xd')](_0x46e77e);if(!_0x3a9e7f)return _0x16695f['status'](0x1f4)[_0x4af0('0xd')](_0x4af0('0x3d'));else return _0x16695f[_0x4af0('0xc')](0xc8)['json'](_0x3a9e7f[_0x4af0('0x20')]);});});_0x56fe74[_0x4af0('0x7')](_0x4af0('0x3e'),_0x273515[_0x4af0('0x8')](_0x4af0('0x3f'),{'session':!![]}),function(_0x52f0e8,_0x1e3bb1){if(_0x2190fb[_0x4af0('0x2f')]){if(classroomConnection[_0x4af0('0x11')]){_0x40578c(_0x52f0e8[_0x4af0('0xa')]);}_0x12dd48(_0x52f0e8[_0x4af0('0xe')]['socketId'],_0x52f0e8[_0x4af0('0xa')]);return _0x1e3bb1[_0x4af0('0xc')](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x30'),'user':_0x52f0e8['user']});}else{if(_0x100c15()==0x0){_0x12dd48(_0x52f0e8[_0x4af0('0xe')][_0x4af0('0xf')],_0x52f0e8[_0x4af0('0xa')]);if(classroomConnection[_0x4af0('0x11')]){_0x40578c(_0x52f0e8[_0x4af0('0xa')]);}return _0x1e3bb1['status'](0xc8)[_0x4af0('0x6')]({'serverMessage':_0x4af0('0x30'),'user':_0x52f0e8[_0x4af0('0xa')]});}else{_0x52f0e8[_0x4af0('0x12')]();return _0x1e3bb1['status'](0x1f4)[_0x4af0('0xd')]('Another\x20user\x20is\x20already\x20logged\x20in.');}}});_0x56fe74[_0x4af0('0x13')](_0x4af0('0x40'),function(_0x5b2b86,_0x1a00f1){var _0x49278f=[_0x4af0('0x28')];_0x4ec096[_0x4af0('0x15')]({'usergroup':_0x4af0('0x41')},function(_0x323d88,_0x2e57b8){if(_0x323d88)return _0x1a00f1['status'](0xc8)[_0x4af0('0xd')](_0x49278f);if(!_0x2e57b8)_0x49278f[_0x4af0('0x42')](_0x4af0('0x41'));return _0x1a00f1[_0x4af0('0xc')](0xc8)[_0x4af0('0xd')](_0x49278f);});});function _0x100c15(){var _0x229da0=0x0;for(var _0x477952=0x0;_0x477952<_0x2190fb[_0x4af0('0x43')][_0x4af0('0x44')];_0x477952++){if(_0x2190fb[_0x4af0('0x43')][_0x477952][_0x4af0('0x28')]){_0x229da0++;}}return _0x229da0;}function _0x12dd48(_0x442d62,_0x4b65b2){for(var _0x2e6467=0x0;_0x2e6467<_0x2190fb[_0x4af0('0x43')][_0x4af0('0x44')];_0x2e6467++){if(_0x2190fb['connectedClients'][_0x2e6467]['id']==_0x442d62){_0x2190fb[_0x4af0('0x43')][_0x2e6467][_0x4af0('0x28')]=_0x4b65b2;break;}}}function _0x303db2(_0x1eee47){for(var _0x557418=0x0;_0x557418<_0x2190fb[_0x4af0('0x43')][_0x4af0('0x44')];_0x557418++){if(_0x2190fb[_0x4af0('0x43')][_0x557418]['id']==_0x1eee47){_0x2190fb['connectedClients'][_0x557418][_0x4af0('0x28')]=undefined;break;}}}function _0x3dcaf0(_0x2fcde0){for(var _0x5cd044=0x0;_0x5cd044<_0x2190fb['connectedClients']['length'];_0x5cd044++){if(_0x2190fb[_0x4af0('0x43')][_0x5cd044][_0x4af0('0x28')][_0x4af0('0x25')]==_0x2fcde0){_0x2190fb['connectedClients'][_0x5cd044][_0x4af0('0x28')]=undefined;break;}}}function _0x4a0acd(){return function(_0x40320f,_0x1f1dfd,_0x276a52){if(_0x40320f['isAuthenticated']()){return _0x276a52();}else{_0x1f1dfd['status'](0x191)[_0x4af0('0xd')](_0x4af0('0x45'));}};}async function _0x40578c(_0x109b7e){try{await _0x2eaae9(_0x109b7e);}catch(_0x16c701){winston[_0x4af0('0x46')](_0x16c701);winston[_0x4af0('0x46')](_0x4af0('0x47')+_0x109b7e[_0x4af0('0x25')]);}};function _0x2eaae9(_0x43a753){return new Promise(function(_0x3053f2,_0x2689df){var _0x36e9e1=new SSH();_0x36e9e1['on']('ready',function(){_0x36e9e1[_0x4af0('0x48')](async function(_0x7d85f3,_0x36e356){if(_0x7d85f3){winston[_0x4af0('0x46')](_0x4af0('0x49')+_0x7d85f3);_0x36e9e1[_0x4af0('0x4a')]();return _0x2689df(_0x7d85f3);}try{await _0xa0db6c(_0x36e356);await _0x30989b(_0x36e356,_0x43a753[_0x4af0('0x25')]);await _0x5ec951(_0x36e356,_0x43a753[_0x4af0('0x25')]);await _0x44d683(_0x36e356,_0x43a753[_0x4af0('0x25')]);let _0x29f820=await _0x53247b(_0x36e356,_0x43a753[_0x4af0('0x25')]);winston[_0x4af0('0x46')](JSON[_0x4af0('0x4b')](_0x29f820));let _0x14f6d7=await _0x58ff21(_0x43a753['filepath']);winston[_0x4af0('0x46')](JSON['stringify'](_0x14f6d7));await _0x520b6e(_0x36e356,_0x43a753,_0x29f820,_0x14f6d7);_0x36e9e1[_0x4af0('0x4a')]();return _0x3053f2();}catch(_0x484aa3){winston[_0x4af0('0x46')](_0x484aa3);_0x36e9e1['end']();return _0x2689df(_0x484aa3);}});})['connect']({'host':'c3edu.online','port':0x16,'username':'c3','password':'root'});});};function _0xa0db6c(_0x66abba){return new Promise(function(_0xa90f06,_0x31a194){_0x66abba[_0x4af0('0x4c')](_0x4af0('0x4d'),function(_0x104bcc){if(_0x104bcc){_0x66abba[_0x4af0('0x4e')](_0x4af0('0x4d'),function(_0x4613ba){if(_0x4613ba){return _0x31a194('Error\x20creating\x20classroom\x20file\x20system:\x20'+_0x4613ba);}else{winston[_0x4af0('0x46')]('Classroom\x20file\x20system\x20created');return _0xa90f06();}});}else{winston[_0x4af0('0x46')](_0x4af0('0x4f'));return _0xa90f06();}});});};function _0x30989b(_0x5eca6d,_0x54c501){return new Promise(function(_0x43e4b7,_0x4bc5ea){_0x5eca6d[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x54c501,function(_0x511ab5){if(_0x511ab5){_0x5eca6d[_0x4af0('0x4e')]('/home/c3/FusionFilesystem/'+_0x54c501,function(_0x202ce5){if(_0x202ce5){return _0x4bc5ea(_0x4af0('0x50')+_0x202ce5);}else{winston[_0x4af0('0x46')](_0x4af0('0x51'));return _0x43e4b7();}});}else{winston['info'](_0x4af0('0x52'));return _0x43e4b7();}});});};function _0x5ec951(_0x594830,_0x4f7231){return new Promise(function(_0x1adc28,_0x1ab281){_0x594830[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x4f7231+_0x4af0('0x53'),function(_0x33d32d){if(_0x33d32d){_0x594830['mkdir'](_0x4af0('0x4d')+_0x4f7231+_0x4af0('0x53'),function(_0x1befa8){if(_0x1befa8){return _0x1ab281('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x1befa8);}else{winston[_0x4af0('0x46')](_0x4af0('0x54'));return _0x1adc28();}});}else{winston['info'](_0x4af0('0x55'));return _0x1adc28();}});});};function _0x44d683(_0x317aaa,_0x37ba6d){return new Promise(function(_0x34ba03,_0x2e92d8){_0x317aaa[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x37ba6d+_0x4af0('0x56'),function(_0x78f3f0){if(_0x78f3f0){_0x317aaa[_0x4af0('0x4e')]('/home/c3/FusionFilesystem/'+_0x37ba6d+_0x4af0('0x56'),function(_0x187677){if(_0x187677){return _0x2e92d8('Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20'+_0x187677);}else{winston[_0x4af0('0x46')](_0x4af0('0x57'));return _0x34ba03();}});}else{winston[_0x4af0('0x46')](_0x4af0('0x58'));return _0x34ba03();}});});};function _0x53247b(_0x52c52b,_0x4374ff){return new Promise(async function(_0x4970ae,_0xe73ee1){try{let _0x104fcf={};_0x104fcf[_0x4af0('0x59')]=await _0x166768(_0x52c52b,_0x4374ff);_0x104fcf['Blockly']=await _0x4c9ae4(_0x52c52b,_0x4374ff);return _0x4970ae(_0x104fcf);}catch(_0x3c3810){return _0xe73ee1(_0x3c3810);}});};function _0x166768(_0x2acf97,_0x3c8228){return new Promise(function(_0x4034ae,_0x4a5dda){_0x2acf97['readdir'](_0x4af0('0x4d')+_0x3c8228+'/Editor/',function(_0x491736,_0x2e121e){if(_0x491736)return _0x4a5dda(_0x491736);let _0x28bf25=[];for(let _0x52de83=0x0;_0x52de83<_0x2e121e[_0x4af0('0x44')];_0x52de83++){winston['verbose']('Getting\x20data\x20for\x20'+_0x2e121e[_0x52de83][_0x4af0('0x5a')]);_0x28bf25[_0x4af0('0x5b')](_0x2e121e[_0x52de83]);}return _0x4034ae(_0x28bf25);});});};function _0x4c9ae4(_0x34a6e9,_0x4248ef){return new Promise(function(_0x49a9ba,_0xa3da5e){_0x34a6e9[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x4248ef+'/Blockly/',function(_0x1313e4,_0x591ac3){if(_0x1313e4)return _0xa3da5e(_0x1313e4);let _0x2f6744=[];for(let _0x56baba=0x0;_0x56baba<_0x591ac3[_0x4af0('0x44')];_0x56baba++){winston[_0x4af0('0x5c')]('Getting\x20data\x20for\x20'+_0x591ac3[_0x56baba]['filename']);_0x2f6744['push'](_0x591ac3[_0x56baba]);}return _0x49a9ba(_0x2f6744);});});};function _0x58ff21(_0x42cae5){return new Promise(async function(_0x1b1978,_0x235b1f){try{let _0x2da718={};_0x2da718[_0x4af0('0x59')]=await _0x5810cf(_0x42cae5);_0x2da718[_0x4af0('0x5d')]=await _0x48995e(_0x42cae5);return _0x1b1978(_0x2da718);}catch(_0x47f499){return _0x235b1f(_0x47f499);}});};function _0x5810cf(_0x3745dd){return new Promise(async function(_0x3e9d67,_0x225a56){try{let _0xb91bbd=[];let _0x354a1a=await fs[_0x4af0('0x4c')](_0x3745dd+_0x4af0('0x5e'));for(let _0x5d2153=0x0;_0x5d2153<_0x354a1a['length'];_0x5d2153++){winston[_0x4af0('0x5c')](_0x4af0('0x5f')+_0x354a1a[_0x5d2153]);let _0xd71ab=await fs[_0x4af0('0x60')](_0x3745dd+_0x4af0('0x53')+_0x354a1a[_0x5d2153]);_0xd71ab[_0x4af0('0x61')]=_0x354a1a[_0x5d2153];_0xb91bbd[_0x4af0('0x5b')](_0xd71ab);}return _0x3e9d67(_0xb91bbd);}catch(_0x3b0867){return _0x225a56(_0x3b0867);}});};function _0x48995e(_0x42f796){return new Promise(async function(_0x416dfb,_0x4aca45){try{let _0x389a8c=[];let _0x2f0630=await fs[_0x4af0('0x4c')](_0x42f796+'/Blockly');for(let _0x3ad6de=0x0;_0x3ad6de<_0x2f0630[_0x4af0('0x44')];_0x3ad6de++){winston[_0x4af0('0x5c')](_0x4af0('0x5f')+_0x2f0630[_0x3ad6de]);let _0x22757e=await fs[_0x4af0('0x60')](_0x42f796+_0x4af0('0x56')+_0x2f0630[_0x3ad6de]);_0x22757e[_0x4af0('0x61')]=_0x2f0630[_0x3ad6de];_0x389a8c[_0x4af0('0x5b')](_0x22757e);}return _0x416dfb(_0x389a8c);}catch(_0x4569bd){return _0x4aca45(_0x4569bd);}});};function _0x520b6e(_0x11f91c,_0x1928b4,_0x4495db,_0x14e4fb){return new Promise(async function(_0x3db9a7,_0x6cbf9b){try{for(let _0x14aefd=0x0;_0x14aefd<_0x4495db[_0x4af0('0x59')]['length'];_0x14aefd++){let _0x32663c=![];for(let _0x90a38b=0x0;_0x90a38b<_0x14e4fb['Editor'][_0x4af0('0x44')];_0x90a38b++){if(_0x14e4fb['Editor'][_0x90a38b][_0x4af0('0x61')]==_0x4495db[_0x4af0('0x59')][_0x14aefd]['filename']){winston[_0x4af0('0x62')](_0x4af0('0x63')+Math[_0x4af0('0x64')](_0x14e4fb[_0x4af0('0x59')][_0x90a38b][_0x4af0('0x65')]/0x3e8));winston['debug']('Remote\x20mtime:\x20'+_0x4495db['Editor'][_0x14aefd][_0x4af0('0x66')]['mtime']);if(Math[_0x4af0('0x64')](_0x14e4fb['Editor'][_0x90a38b][_0x4af0('0x65')]/0x3e8)>_0x4495db[_0x4af0('0x59')][_0x14aefd][_0x4af0('0x66')]['mtime']){_0x32663c=!![];winston['verbose']('Local\x20\x22'+_0x14e4fb['Editor'][_0x90a38b]['name']+_0x4af0('0x67'));try{await _0x5a429b(_0x11f91c,_0x1928b4,_0x4495db[_0x4af0('0x59')][_0x14aefd][_0x4af0('0x5a')],_0x4af0('0x59'));}catch(_0x1f7b6c){return _0x6cbf9b(_0x1f7b6c);}break;}else{_0x32663c=!![];winston[_0x4af0('0x5c')](_0x4af0('0x68')+_0x14e4fb['Editor'][_0x90a38b][_0x4af0('0x61')]+_0x4af0('0x69'));try{await _0x128d29(_0x11f91c,_0x1928b4,_0x4495db[_0x4af0('0x59')][_0x14aefd]['filename'],'Editor');}catch(_0x43bcd3){winston[_0x4af0('0x62')](_0x4af0('0x6a')+_0x43bcd3);return _0x6cbf9b(_0x43bcd3);}break;}}}if(!_0x32663c){winston[_0x4af0('0x5c')](_0x4495db[_0x4af0('0x59')][_0x14aefd][_0x4af0('0x5a')]+_0x4af0('0x6b'));try{await _0x128d29(_0x11f91c,_0x1928b4,_0x4495db[_0x4af0('0x59')][_0x14aefd]['filename'],'Editor');}catch(_0x3b0f79){return _0x6cbf9b(_0x3b0f79);}}}for(let _0x2ead27=0x0;_0x2ead27<_0x4495db[_0x4af0('0x5d')][_0x4af0('0x44')];_0x2ead27++){let _0x32663c=![];for(let _0x90a38b=0x0;_0x90a38b<_0x14e4fb[_0x4af0('0x5d')][_0x4af0('0x44')];_0x90a38b++){if(_0x14e4fb[_0x4af0('0x5d')][_0x90a38b][_0x4af0('0x61')]==_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x5a')]){winston[_0x4af0('0x62')](_0x4af0('0x63')+Math[_0x4af0('0x64')](_0x14e4fb[_0x4af0('0x5d')][_0x90a38b][_0x4af0('0x65')]/0x3e8));winston[_0x4af0('0x62')](_0x4af0('0x6c')+_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x66')][_0x4af0('0x6d')]);if(Math[_0x4af0('0x64')](_0x14e4fb[_0x4af0('0x5d')][_0x90a38b][_0x4af0('0x65')]/0x3e8)>_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x66')]['mtime']){_0x32663c=!![];winston[_0x4af0('0x5c')](_0x4af0('0x6e')+_0x14e4fb[_0x4af0('0x5d')][_0x90a38b][_0x4af0('0x61')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x5a429b(_0x11f91c,_0x1928b4,_0x4495db['Blockly'][_0x2ead27][_0x4af0('0x5a')],_0x4af0('0x5d'));}catch(_0x202ce7){return _0x6cbf9b(_0x202ce7);}break;}else{_0x32663c=!![];winston[_0x4af0('0x5c')]('Remote\x20\x22'+_0x14e4fb[_0x4af0('0x5d')][_0x90a38b][_0x4af0('0x61')]+_0x4af0('0x69'));try{await _0x128d29(_0x11f91c,_0x1928b4,_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x5a')],_0x4af0('0x5d'));}catch(_0x4207d2){winston[_0x4af0('0x62')]('Error:\x20'+_0x4207d2);return _0x6cbf9b(_0x4207d2);}break;}}}if(!_0x32663c){winston['verbose'](_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x5a')]+'\x20not\x20a\x20common\x20file!');try{await _0x128d29(_0x11f91c,_0x1928b4,_0x4495db[_0x4af0('0x5d')][_0x2ead27][_0x4af0('0x5a')],_0x4af0('0x5d'));}catch(_0x3a5ba9){return _0x6cbf9b(_0x3a5ba9);}}}return _0x3db9a7();}catch(_0x14e55a){return _0x6cbf9b(_0x14e55a);}});};function _0x5a429b(_0x314d72,_0x1ce440,_0x5c714a,_0x3f31e0){return new Promise((_0x172505,_0x20393b)=>{try{let _0x1110c6=_0x4af0('0x4d')+_0x1ce440['username']+'/'+_0x3f31e0+'/'+_0x5c714a;let _0xd036f7=_0x1ce440[_0x4af0('0x6f')]+'/'+_0x3f31e0+'/'+_0x5c714a;winston[_0x4af0('0x5c')](_0x4af0('0x70')+_0x1110c6);winston[_0x4af0('0x5c')](_0x4af0('0x71')+_0xd036f7);_0x314d72[_0x4af0('0x72')](_0xd036f7,_0x1110c6,{},function(_0x29590e){if(_0x29590e){winston['debug']('Error\x20uploading\x20file:\x20'+_0x5c714a);return _0x20393b(_0x29590e);}winston[_0x4af0('0x46')](_0x4af0('0x73')+_0x5c714a);return _0x172505();});}catch(_0x1d3fb8){return _0x20393b(_0x1d3fb8);}});};function _0x128d29(_0x588708,_0x31f0c5,_0x36dfcc,_0x5b0b3f){return new Promise((_0x3a5505,_0x3a5ec2)=>{try{let _0x4f1f34=_0x4af0('0x4d')+_0x31f0c5[_0x4af0('0x25')]+'/'+_0x5b0b3f+'/'+_0x36dfcc;let _0x35190f=_0x31f0c5['filepath']+'/'+_0x5b0b3f+'/'+_0x36dfcc;winston['verbose']('Remote\x20path:\x20'+_0x4f1f34);winston[_0x4af0('0x5c')](_0x4af0('0x71')+_0x35190f);_0x588708[_0x4af0('0x74')](_0x4f1f34,_0x35190f,{},function(_0x1231a3){if(_0x1231a3){winston[_0x4af0('0x62')](_0x4af0('0x75')+_0x36dfcc);return _0x3a5ec2(_0x1231a3);}winston['info'](_0x4af0('0x76')+_0x36dfcc);return _0x3a5505();});}catch(_0x511082){return _0x3a5ec2(_0x511082);}});};function _0xc73a05(_0x3596d2,_0x571943,_0x4361e4,_0x3c682c){_0x3596d2[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x571943[_0x4af0('0x25')],function(_0x2d8f24){if(_0x2d8f24){console[_0x4af0('0x31')](_0x4af0('0x77')+_0x2d8f24);_0x3596d2['mkdir'](_0x4af0('0x4d')+_0x571943[_0x4af0('0x25')],function(_0x3281b1){if(_0x3281b1){console[_0x4af0('0x31')]('Error\x20creating\x20user\x20file\x20system:\x20'+_0x3281b1);throw _0x3281b1;}console[_0x4af0('0x31')]('User\x20c3\x20directory\x20created');_0x3596d2[_0x4af0('0x4e')](_0x4af0('0x4d')+_0x571943[_0x4af0('0x25')]+'/Editor/',function(_0x398a44){if(_0x398a44){console[_0x4af0('0x31')](_0x4af0('0x78')+_0x398a44);throw _0x398a44;}console['log'](_0x4af0('0x79'));_0x3596d2['mkdir'](_0x4af0('0x4d')+_0x571943[_0x4af0('0x25')]+_0x4af0('0x56'),function(_0x20169d){if(_0x20169d){console[_0x4af0('0x31')](_0x4af0('0x7a')+_0x20169d);throw _0x20169d;}console[_0x4af0('0x31')](_0x4af0('0x7b'));_0x3c682c(_0x3596d2,_0x571943,_0x4361e4);});});});}_0x3c682c(_0x3596d2,_0x571943,_0x4361e4);});};function _0xd9df30(_0x35b751,_0x132198,_0x38958a){_0x35b751[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x132198[_0x4af0('0x25')]+'/Editor/',function(_0x42967d,_0x2af5fe){if(_0x42967d){console[_0x4af0('0x31')](_0x4af0('0x7c')+_0x42967d);throw _0x42967d;}_0x14c92b(_0x132198,_0x4af0('0x59'),_0x2af5fe,_0x38958a);});_0x35b751[_0x4af0('0x4c')](_0x4af0('0x4d')+_0x132198[_0x4af0('0x25')]+_0x4af0('0x56'),function(_0x268bec,_0x5091c4){if(_0x268bec){console[_0x4af0('0x31')]('Error\x20reading\x20classroom\x20blockly\x20files:\x20'+_0x268bec);throw _0x268bec;}_0x14c92b(_0x132198,'Blockly',_0x5091c4,_0x38958a);});};function _0x14c92b(_0x2ab955,_0x2b244b,_0x4b4661,_0x537424){console[_0x4af0('0x31')](_0x4af0('0x7d'));if(_0x2b244b==_0x4af0('0x5d')&&_0x4b4661[_0x4af0('0x44')]==0x0){_0x537424[_0x4af0('0x4a')]();}for(var _0x234346=0x0;_0x234346<_0x4b4661['length'];_0x234346++){let _0x3be1d9=_0x4af0('0x4d')+_0x2ab955[_0x4af0('0x25')]+'/'+_0x2b244b+'/'+_0x4b4661[_0x234346][_0x4af0('0x5a')];let _0x33ef07=_0x4af0('0x7e')+_0x2ab955[_0x4af0('0x25')]+'/'+_0x2b244b+'/';console[_0x4af0('0x31')]('Moving:\x20'+_0x3be1d9+'\x20to\x20'+_0x33ef07);SCP[_0x4af0('0x7f')](_0x4af0('0x80')+_0x3be1d9,_0x33ef07,function(_0x365e10){if(_0x365e10){console[_0x4af0('0x31')](_0x4af0('0x81')+_0x3be1d9+_0x4af0('0x82')+_0x365e10);}if(_0x2b244b==_0x4af0('0x5d')&&(_0x234346=_0x4b4661[_0x4af0('0x44')]-0x1)){_0x537424[_0x4af0('0x4a')]();}});}};};