var _0xb69c=['Classroom\x20file\x20system\x20created','Classroom\x20file\x20system\x20found','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','User\x27s\x20classroom\x20file\x20system\x20found','/Editor/','User\x27s\x20editor\x20directory\x20created','User\x27s\x20editor\x20directory\x20found','/Blockly/','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','User\x27s\x20blockly\x20directory\x20found','Editor','verbose','Getting\x20data\x20for\x20','filename','push','Blockly','stat','name','/Blockly','debug','Local\x20mtime:\x20','floor','mtimeMs','Remote\x20mtime:\x20','attrs','Local\x20\x22','Remote\x20\x22','Error:\x20','\x20not\x20a\x20common\x20file!','mtime','\x22\x20newer,\x20updating\x20local\x20version','Remote\x20path:\x20','Local\x20Path:\x20','fastPut','Error\x20uploading\x20file:\x20','fastGet','Error\x20downloading\x20file:\x20','Error\x20reading\x20user\x20file\x20system:\x20','Error\x20creating\x20user\x20file\x20system:\x20','User\x20c3\x20directory\x20created','Error\x20creating\x20editor\x20directory:\x20','Editor\x20directory\x20created','Error\x20creating\x20blockly\x20directory:\x20','Error\x20reading\x20classroom\x20editor\x20files:\x20','Error\x20reading\x20classroom\x20blockly\x20files:\x20','app/filesystem/','\x20to\x20','c3:root@172.16.0.1:',',\x20error:\x20','scp2','fs-extra','path','./../../server/classroom/connection/','winston','exports','/api/users','find','Guest','send','json','post','authenticate','message','status','connected','logIn','body','socketId','REGISTER.CREATED','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','user','Error','get','params','User_Id','toLowerCase','trim','put','/api/users/:User_Id','findOne','password','firstname','lastname','language','email','defaultprogramminglanguage','securityquestion','securityanswer','usergroup','save','delete','username','SocketVariables','fusion_program_running','remove','removeFileSystem','Successfully\x20deleted','/api/users/login','local-login','MultiUserAccess','LOGIN.SUCCESS','/api/users/cloudLogin','in\x20cloud\x20login','exec','login','log','/api/users/logout','User','KillProgram','logout','Logged\x20out\x20successfully','/api/recovery/:User_Id','User\x20does\x20not\x20exist','/api/recovery','local-recovery','Login\x20Successful','Another\x20user\x20is\x20already\x20logged\x20in.','Admin','unshift','connectedClients','length','isAuthenticated','User\x20Unauthenticated','info','sftp','Error\x20communicating\x20with\x20c3:\x20','end','stringify','filepath','connect','10.200.200.1','root','readdir','/home/c3/FusionFilesystem/','mkdir','Error\x20creating\x20classroom\x20file\x20system:\x20'];(function(_0xb34f16,_0x63ac1){var _0x1d7b2e=function(_0x32d913){while(--_0x32d913){_0xb34f16['push'](_0xb34f16['shift']());}};_0x1d7b2e(++_0x63ac1);}(_0xb69c,0x141));var _0x2cb3=function(_0x45658b,_0xa6ed42){_0x45658b=_0x45658b-0x0;var _0x51c273=_0xb69c[_0x45658b];return _0x51c273;};var SCP=require(_0x2cb3('0x0'));var SSH=require('ssh2')['Client'];var fs=require(_0x2cb3('0x1'));var path=require(_0x2cb3('0x2'));var rp=require('request-promise');const classroomConnection=require(_0x2cb3('0x3'));const winston=require(_0x2cb3('0x4'));module[_0x2cb3('0x5')]=function(_0x191702,_0x55e771,_0xdaa7b6,_0x54b234,_0x54c88e,_0x2ff1aa){_0x191702['get'](_0x2cb3('0x6'),_0x2b69b2(),function(_0x340e30,_0xf8aeae){_0x55e771[_0x2cb3('0x7')]({'usergroup':{'$ne':_0x2cb3('0x8')}},function(_0xb764dd,_0x4525b5){if(_0xb764dd)_0xf8aeae[_0x2cb3('0x9')](_0xb764dd);_0xf8aeae[_0x2cb3('0xa')](_0x4525b5);});});_0x191702[_0x2cb3('0xb')]('/api/users',function(_0x2b1e40,_0x396b4e,_0x4479c7){_0xdaa7b6[_0x2cb3('0xc')]('local-signup',async function(_0x3675a2,_0x4b8ed5,_0x1b341d){if(_0x3675a2)return _0x396b4e['status'](0x1f4)[_0x2cb3('0x9')](_0x3675a2);if(_0x1b341d&&_0x1b341d[_0x2cb3('0xd')])return _0x396b4e[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x2b1e40['__'](_0x1b341d[_0x2cb3('0xd')]));if(_0x2ff1aa['MultiUserAccess']){if(classroomConnection[_0x2cb3('0xf')]){await _0x3f5c48(_0x4b8ed5);}_0x2b1e40[_0x2cb3('0x10')](_0x4b8ed5,function(_0x3675a2){if(_0x3675a2){return _0x4479c7(_0x3675a2);}_0x59c344(_0x2b1e40[_0x2cb3('0x11')][_0x2cb3('0x12')],_0x4b8ed5);return _0x396b4e[_0x2cb3('0xe')](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x2b1e40['__'](_0x2cb3('0x13')),'user':_0x4b8ed5});});}else{if(_0x366f59()==0x0){_0x59c344(_0x2b1e40['body'][_0x2cb3('0x12')],_0x4b8ed5);if(classroomConnection[_0x2cb3('0xf')]){await _0x3f5c48(_0x4b8ed5);}_0x2b1e40[_0x2cb3('0x10')](_0x4b8ed5,function(_0x3675a2){if(_0x3675a2){return _0x4479c7(_0x3675a2);}_0x59c344(_0x2b1e40[_0x2cb3('0x11')]['socketId'],_0x4b8ed5);return _0x396b4e[_0x2cb3('0xe')](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x2b1e40['__'](_0x2cb3('0x13')),'user':_0x4b8ed5});});}else{return _0x396b4e['status'](0x1f4)[_0x2cb3('0x9')](_0x2b1e40['__'](_0x2cb3('0x14')));}}})(_0x2b1e40,_0x396b4e,_0x4479c7);});_0x191702[_0x2cb3('0xb')](_0x2cb3('0x6'),_0xdaa7b6['authenticate']('local-signup',{'session':!![]}),function(_0x4178a8,_0x50917c){if(_0x4178a8[_0x2cb3('0x15')][_0x2cb3('0x16')]){return _0x50917c[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x4178a8[_0x2cb3('0x15')][_0x2cb3('0x16')]);}else{}});_0x191702[_0x2cb3('0x17')]('/api/users/:User_Id',_0x2b69b2(),function(_0x180baa,_0x9fa540){_0x55e771['findOne']({'username':_0x180baa[_0x2cb3('0x18')][_0x2cb3('0x19')][_0x2cb3('0x1a')]()[_0x2cb3('0x1b')]()},function(_0x38992d,_0x40a251){if(_0x38992d)_0x9fa540['send'](_0x38992d);_0x9fa540[_0x2cb3('0xa')](_0x40a251);});});_0x191702[_0x2cb3('0x1c')](_0x2cb3('0x1d'),_0x2b69b2(),function(_0x35eb9e,_0x4116ad){_0x55e771[_0x2cb3('0x1e')]({'username':_0x35eb9e[_0x2cb3('0x18')][_0x2cb3('0x19')]['toLowerCase']()['trim']()},function(_0x595098,_0x4929d5){if(_0x595098)_0x4116ad[_0x2cb3('0x9')](_0x595098);if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x1f')]){_0x4929d5[_0x2cb3('0x1f')]=_0x4929d5['generateHash'](_0x35eb9e[_0x2cb3('0x11')]['password']);}if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x20')]){_0x4929d5['firstname']=_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x20')];}if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x21')]){_0x4929d5['lastname']=_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x21')];}if(_0x35eb9e['body'][_0x2cb3('0x22')]){_0x4929d5[_0x2cb3('0x22')]=_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x22')];}if(_0x35eb9e['body']['email']){_0x4929d5[_0x2cb3('0x23')]=_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x23')];}if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x24')]){_0x4929d5[_0x2cb3('0x24')]=_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x24')];}if(_0x35eb9e['body'][_0x2cb3('0x25')]){_0x4929d5[_0x2cb3('0x25')]=_0x35eb9e['body']['securityquestion'];}if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x26')]){_0x4929d5[_0x2cb3('0x26')]=_0x35eb9e[_0x2cb3('0x11')]['securityanswer'];}if(_0x35eb9e[_0x2cb3('0x11')][_0x2cb3('0x27')]){_0x4929d5[_0x2cb3('0x27')]=_0x35eb9e['body'][_0x2cb3('0x27')];}_0x4929d5[_0x2cb3('0x28')](function(_0x595098){if(_0x595098)_0x4116ad[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x595098);_0x4116ad[_0x2cb3('0xe')](0xc8)[_0x2cb3('0xa')]({'serverMessage':'User\x20updated!'});});});});_0x191702[_0x2cb3('0x29')](_0x2cb3('0x1d'),_0x2b69b2(),function(_0x4bf1da,_0x469fa0){if(_0x4bf1da['params']['User_Id'][_0x2cb3('0x1a')]()[_0x2cb3('0x1b')]()==_0x4bf1da['user'][_0x2cb3('0x2a')]){if(_0x2ff1aa[_0x2cb3('0x2b')][_0x2cb3('0x2c')])if(_0x2ff1aa[_0x2cb3('0x2b')][_0x2cb3('0x2c')]['User']==_0x4bf1da[_0x2cb3('0x15')][_0x2cb3('0x2a')])_0x54b234['KillProgram']();_0x2ec62d(_0x4bf1da[_0x2cb3('0x15')]['username']);_0x4bf1da['logout']();}_0x55e771[_0x2cb3('0x2d')]({'username':_0x4bf1da['params'][_0x2cb3('0x19')]['toLowerCase']()[_0x2cb3('0x1b')]()},function(_0xe2718e,_0x2cfbac){if(_0xe2718e)return _0x469fa0[_0x2cb3('0x9')](_0xe2718e);_0x55e771[_0x2cb3('0x2e')](_0x4bf1da['params'][_0x2cb3('0x19')][_0x2cb3('0x1a')]()['trim']());return _0x469fa0[_0x2cb3('0xe')](0xc8)['json']({'serverMessage':_0x2cb3('0x2f')});});});_0x191702[_0x2cb3('0xb')](_0x2cb3('0x30'),function(_0x185e17,_0x173bfe,_0x15ead1){_0xdaa7b6[_0x2cb3('0xc')](_0x2cb3('0x31'),async function(_0x291a6f,_0xc4e442,_0xd9c4e2){if(_0x291a6f)return _0x173bfe[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x185e17['__'](_0x291a6f['message']));if(!_0xc4e442)return _0x173bfe[_0x2cb3('0xe')](0x191)['send'](_0x185e17['__'](_0xd9c4e2['message']));if(_0x2ff1aa[_0x2cb3('0x32')]){if(classroomConnection[_0x2cb3('0xf')]){await _0x3f5c48(_0xc4e442);}_0x185e17[_0x2cb3('0x10')](_0xc4e442,function(_0x291a6f){if(_0x291a6f){return _0x15ead1(_0x291a6f);}_0x59c344(_0x185e17[_0x2cb3('0x11')][_0x2cb3('0x12')],_0xc4e442);return _0x173bfe['status'](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x185e17['__'](_0x2cb3('0x33')),'user':_0xc4e442});});}else{if(_0x366f59()==0x0){_0x59c344(_0x185e17[_0x2cb3('0x11')][_0x2cb3('0x12')],_0xc4e442);if(classroomConnection[_0x2cb3('0xf')]){await _0x3f5c48(_0xc4e442);}_0x185e17['logIn'](_0xc4e442,function(_0x291a6f){if(_0x291a6f){return _0x15ead1(_0x291a6f);}_0x59c344(_0x185e17['body'][_0x2cb3('0x12')],_0xc4e442);return _0x173bfe[_0x2cb3('0xe')](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x185e17['__'](_0x2cb3('0x33')),'user':_0xc4e442});});}else{return _0x173bfe['status'](0x1f4)[_0x2cb3('0x9')](_0x185e17['__']('LOGIN.MULTIUSER_DENIED'));}}})(_0x185e17,_0x173bfe,_0x15ead1);});_0x191702[_0x2cb3('0xb')](_0x2cb3('0x34'),async function(_0x4fb45d,_0x107bde){console['log'](_0x2cb3('0x35'));var _0x6a7848={'method':'POST','uri':'https://172.16.0.1/backend/auth/ldap','body':{'username':_0x4fb45d['body'][_0x2cb3('0x2a')],'password':_0x4fb45d[_0x2cb3('0x11')][_0x2cb3('0x1f')]},'json':!![],'rejectUnauthorized':![]};try{let _0x1136a9=await rp(_0x6a7848);let _0x273d0b=await _0x55e771[_0x2cb3('0x1e')]({'username':_0x4fb45d[_0x2cb3('0x11')][_0x2cb3('0x2a')]})[_0x2cb3('0x36')]();if(_0x273d0b){return _0x107bde['status'](0xc8)['send'](_0x2cb3('0x37'));}else{return _0x107bde[_0x2cb3('0xe')](0xc8)[_0x2cb3('0x9')]('create');}}catch(_0x41ac28){console[_0x2cb3('0x38')]('Error\x20with\x20request\x20promise.\x20'+_0x41ac28);return _0x107bde[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x41ac28);}});_0x191702[_0x2cb3('0xb')](_0x2cb3('0x39'),_0x2b69b2(),function(_0x3b6dea,_0x5869c5){if(_0x2ff1aa[_0x2cb3('0x2b')][_0x2cb3('0x2c')])if(_0x2ff1aa[_0x2cb3('0x2b')][_0x2cb3('0x2c')][_0x2cb3('0x3a')]==_0x3b6dea[_0x2cb3('0x15')][_0x2cb3('0x2a')])_0x54b234[_0x2cb3('0x3b')]();_0x292ce1(_0x3b6dea['body'][_0x2cb3('0x12')]);_0x3b6dea[_0x2cb3('0x3c')]();_0x5869c5[_0x2cb3('0xe')](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x2cb3('0x3d')});});_0x191702['get'](_0x2cb3('0x3e'),function(_0x3c01dd,_0x10222d){_0x55e771[_0x2cb3('0x1e')]({'username':_0x3c01dd[_0x2cb3('0x18')][_0x2cb3('0x19')][_0x2cb3('0x1a')]()[_0x2cb3('0x1b')]()},function(_0x21716e,_0x41d152){if(_0x21716e)return _0x10222d['status'](0x1f4)[_0x2cb3('0x9')](_0x21716e);if(!_0x41d152)return _0x10222d[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x2cb3('0x3f'));else return _0x10222d['status'](0xc8)[_0x2cb3('0xa')](_0x41d152[_0x2cb3('0x25')]);});});_0x191702['post'](_0x2cb3('0x40'),_0xdaa7b6[_0x2cb3('0xc')](_0x2cb3('0x41'),{'session':!![]}),function(_0x464319,_0x4d641b){if(_0x2ff1aa[_0x2cb3('0x32')]){if(classroomConnection[_0x2cb3('0xf')]){_0x3f5c48(_0x464319[_0x2cb3('0x15')]);}_0x59c344(_0x464319['body'][_0x2cb3('0x12')],_0x464319['user']);return _0x4d641b['status'](0xc8)[_0x2cb3('0xa')]({'serverMessage':_0x2cb3('0x42'),'user':_0x464319['user']});}else{if(_0x366f59()==0x0){_0x59c344(_0x464319[_0x2cb3('0x11')][_0x2cb3('0x12')],_0x464319[_0x2cb3('0x15')]);if(classroomConnection[_0x2cb3('0xf')]){_0x3f5c48(_0x464319[_0x2cb3('0x15')]);}return _0x4d641b[_0x2cb3('0xe')](0xc8)['json']({'serverMessage':_0x2cb3('0x42'),'user':_0x464319[_0x2cb3('0x15')]});}else{_0x464319[_0x2cb3('0x3c')]();return _0x4d641b[_0x2cb3('0xe')](0x1f4)[_0x2cb3('0x9')](_0x2cb3('0x43'));}}});_0x191702['get']('/api/allowedUserGroups',function(_0xe20e01,_0x2ae416){var _0x1d3be2=['User'];_0x55e771[_0x2cb3('0x1e')]({'usergroup':_0x2cb3('0x44')},function(_0x1bfdac,_0x4c1238){if(_0x1bfdac)return _0x2ae416[_0x2cb3('0xe')](0xc8)['send'](_0x1d3be2);if(!_0x4c1238)_0x1d3be2[_0x2cb3('0x45')](_0x2cb3('0x44'));return _0x2ae416[_0x2cb3('0xe')](0xc8)['send'](_0x1d3be2);});});function _0x366f59(){var _0x637e16=0x0;for(var _0x27dcf6=0x0;_0x27dcf6<_0x2ff1aa['connectedClients']['length'];_0x27dcf6++){if(_0x2ff1aa[_0x2cb3('0x46')][_0x27dcf6][_0x2cb3('0x3a')]){_0x637e16++;}}return _0x637e16;}function _0x59c344(_0x4b963d,_0x219d5a){for(var _0xe764dc=0x0;_0xe764dc<_0x2ff1aa[_0x2cb3('0x46')][_0x2cb3('0x47')];_0xe764dc++){if(_0x2ff1aa[_0x2cb3('0x46')][_0xe764dc]['id']==_0x4b963d){_0x2ff1aa[_0x2cb3('0x46')][_0xe764dc][_0x2cb3('0x3a')]=_0x219d5a;break;}}}function _0x292ce1(_0x217012){for(var _0x51ff0e=0x0;_0x51ff0e<_0x2ff1aa['connectedClients'][_0x2cb3('0x47')];_0x51ff0e++){if(_0x2ff1aa[_0x2cb3('0x46')][_0x51ff0e]['id']==_0x217012){_0x2ff1aa[_0x2cb3('0x46')][_0x51ff0e][_0x2cb3('0x3a')]=undefined;break;}}}function _0x2ec62d(_0xdf9875){for(var _0x434f66=0x0;_0x434f66<_0x2ff1aa[_0x2cb3('0x46')][_0x2cb3('0x47')];_0x434f66++){if(_0x2ff1aa[_0x2cb3('0x46')][_0x434f66][_0x2cb3('0x3a')]['username']==_0xdf9875){_0x2ff1aa['connectedClients'][_0x434f66][_0x2cb3('0x3a')]=undefined;break;}}}function _0x2b69b2(){return function(_0x424838,_0x43c20d,_0x4baa98){if(_0x424838[_0x2cb3('0x48')]()){return _0x4baa98();}else{return _0x43c20d['status'](0x191)[_0x2cb3('0x9')](_0x2cb3('0x49'));}};}async function _0x3f5c48(_0x3df5d4){try{await _0x4f5468(_0x3df5d4);}catch(_0xfd6920){winston[_0x2cb3('0x4a')](_0xfd6920);winston[_0x2cb3('0x4a')]('Error\x20downloading\x20classroom\x20files\x20for\x20'+_0x3df5d4['username']);}};function _0x4f5468(_0x7718fa){return new Promise(function(_0x1ea1df,_0x1dae35){var _0x4c66f3=new SSH();_0x4c66f3['on']('ready',function(){_0x4c66f3[_0x2cb3('0x4b')](async function(_0x1a3e06,_0x88b1f0){if(_0x1a3e06){winston[_0x2cb3('0x4a')](_0x2cb3('0x4c')+_0x1a3e06);_0x4c66f3[_0x2cb3('0x4d')]();return _0x1dae35(_0x1a3e06);}try{await _0x4c9d13(_0x88b1f0);await _0x3f58f4(_0x88b1f0,_0x7718fa[_0x2cb3('0x2a')]);await _0x4fce6b(_0x88b1f0,_0x7718fa[_0x2cb3('0x2a')]);await _0x146834(_0x88b1f0,_0x7718fa['username']);let _0x4f2b10=await _0x25f128(_0x88b1f0,_0x7718fa[_0x2cb3('0x2a')]);winston[_0x2cb3('0x4a')](JSON[_0x2cb3('0x4e')](_0x4f2b10));let _0x2b50f2=await _0x30273f(_0x7718fa[_0x2cb3('0x4f')]);winston[_0x2cb3('0x4a')](JSON['stringify'](_0x2b50f2));await _0x2f4f87(_0x88b1f0,_0x7718fa,_0x4f2b10,_0x2b50f2);_0x4c66f3[_0x2cb3('0x4d')]();return _0x1ea1df();}catch(_0x2335bd){winston[_0x2cb3('0x4a')](_0x2335bd);_0x4c66f3['end']();return _0x1dae35(_0x2335bd);}});})[_0x2cb3('0x50')]({'host':_0x2cb3('0x51'),'port':0x16,'username':'c3','password':_0x2cb3('0x52')});});};function _0x4c9d13(_0x4c2e8a){return new Promise(function(_0x10eb82,_0x3be431){_0x4c2e8a[_0x2cb3('0x53')](_0x2cb3('0x54'),function(_0x3b901e){if(_0x3b901e){_0x4c2e8a[_0x2cb3('0x55')](_0x2cb3('0x54'),function(_0x1fbbb8){if(_0x1fbbb8){return _0x3be431(_0x2cb3('0x56')+_0x1fbbb8);}else{winston[_0x2cb3('0x4a')](_0x2cb3('0x57'));return _0x10eb82();}});}else{winston[_0x2cb3('0x4a')](_0x2cb3('0x58'));return _0x10eb82();}});});};function _0x3f58f4(_0x5187f1,_0x490869){return new Promise(function(_0x4d340a,_0x3b3d47){_0x5187f1['readdir'](_0x2cb3('0x54')+_0x490869,function(_0x74b4fc){if(_0x74b4fc){_0x5187f1['mkdir'](_0x2cb3('0x54')+_0x490869,function(_0x19fb44){if(_0x19fb44){return _0x3b3d47(_0x2cb3('0x59')+_0x19fb44);}else{winston[_0x2cb3('0x4a')]('User\x27s\x20classroom\x20file\x20system\x20created');return _0x4d340a();}});}else{winston[_0x2cb3('0x4a')](_0x2cb3('0x5a'));return _0x4d340a();}});});};function _0x4fce6b(_0x57fd20,_0x25a08){return new Promise(function(_0x2a44e7,_0x1b8641){_0x57fd20[_0x2cb3('0x53')](_0x2cb3('0x54')+_0x25a08+_0x2cb3('0x5b'),function(_0x2ff39e){if(_0x2ff39e){_0x57fd20['mkdir'](_0x2cb3('0x54')+_0x25a08+_0x2cb3('0x5b'),function(_0x49c459){if(_0x49c459){return _0x1b8641('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x49c459);}else{winston['info'](_0x2cb3('0x5c'));return _0x2a44e7();}});}else{winston[_0x2cb3('0x4a')](_0x2cb3('0x5d'));return _0x2a44e7();}});});};function _0x146834(_0x364d14,_0x389429){return new Promise(function(_0x30acd8,_0x1ed03a){_0x364d14[_0x2cb3('0x53')](_0x2cb3('0x54')+_0x389429+_0x2cb3('0x5e'),function(_0x4b4186){if(_0x4b4186){_0x364d14['mkdir'](_0x2cb3('0x54')+_0x389429+_0x2cb3('0x5e'),function(_0x59bbdf){if(_0x59bbdf){return _0x1ed03a(_0x2cb3('0x5f')+_0x59bbdf);}else{winston['info']('User\x27s\x20blockly\x20directory\x20created');return _0x30acd8();}});}else{winston[_0x2cb3('0x4a')](_0x2cb3('0x60'));return _0x30acd8();}});});};function _0x25f128(_0xbb8a38,_0x53c568){return new Promise(async function(_0x558b48,_0x492d81){try{let _0x488717={};_0x488717[_0x2cb3('0x61')]=await _0x475b38(_0xbb8a38,_0x53c568);_0x488717['Blockly']=await _0x570212(_0xbb8a38,_0x53c568);return _0x558b48(_0x488717);}catch(_0x35c33b){return _0x492d81(_0x35c33b);}});};function _0x475b38(_0x29d971,_0x1ec912){return new Promise(function(_0x542b35,_0x58b79e){_0x29d971[_0x2cb3('0x53')]('/home/c3/FusionFilesystem/'+_0x1ec912+_0x2cb3('0x5b'),function(_0x10336b,_0x32d554){if(_0x10336b)return _0x58b79e(_0x10336b);let _0x25fd1c=[];for(let _0x5c193e=0x0;_0x5c193e<_0x32d554[_0x2cb3('0x47')];_0x5c193e++){winston[_0x2cb3('0x62')](_0x2cb3('0x63')+_0x32d554[_0x5c193e][_0x2cb3('0x64')]);_0x25fd1c[_0x2cb3('0x65')](_0x32d554[_0x5c193e]);}return _0x542b35(_0x25fd1c);});});};function _0x570212(_0x53d540,_0x371e83){return new Promise(function(_0x4808f3,_0x1be276){_0x53d540['readdir'](_0x2cb3('0x54')+_0x371e83+_0x2cb3('0x5e'),function(_0x6f4a72,_0x50c9dd){if(_0x6f4a72)return _0x1be276(_0x6f4a72);let _0x14cd1e=[];for(let _0x268021=0x0;_0x268021<_0x50c9dd['length'];_0x268021++){winston[_0x2cb3('0x62')]('Getting\x20data\x20for\x20'+_0x50c9dd[_0x268021]['filename']);_0x14cd1e[_0x2cb3('0x65')](_0x50c9dd[_0x268021]);}return _0x4808f3(_0x14cd1e);});});};function _0x30273f(_0x58feed){return new Promise(async function(_0x3ba3e8,_0x559f33){try{let _0x2f6f8a={};_0x2f6f8a['Editor']=await _0x3ebea4(_0x58feed);_0x2f6f8a[_0x2cb3('0x66')]=await _0xfac217(_0x58feed);return _0x3ba3e8(_0x2f6f8a);}catch(_0x373d45){return _0x559f33(_0x373d45);}});};function _0x3ebea4(_0x4caec7){return new Promise(async function(_0x2db28c,_0x483da1){try{let _0x52b4ea=[];let _0x5f3d14=await fs[_0x2cb3('0x53')](_0x4caec7+'/Editor');for(let _0x28c3e6=0x0;_0x28c3e6<_0x5f3d14[_0x2cb3('0x47')];_0x28c3e6++){winston[_0x2cb3('0x62')](_0x2cb3('0x63')+_0x5f3d14[_0x28c3e6]);let _0x13d635=await fs[_0x2cb3('0x67')](_0x4caec7+_0x2cb3('0x5b')+_0x5f3d14[_0x28c3e6]);_0x13d635[_0x2cb3('0x68')]=_0x5f3d14[_0x28c3e6];_0x52b4ea[_0x2cb3('0x65')](_0x13d635);}return _0x2db28c(_0x52b4ea);}catch(_0x304697){return _0x483da1(_0x304697);}});};function _0xfac217(_0x1df30a){return new Promise(async function(_0x6afa43,_0x275fb4){try{let _0x3db503=[];let _0x55974d=await fs[_0x2cb3('0x53')](_0x1df30a+_0x2cb3('0x69'));for(let _0x1b8552=0x0;_0x1b8552<_0x55974d[_0x2cb3('0x47')];_0x1b8552++){winston[_0x2cb3('0x62')]('Getting\x20data\x20for\x20'+_0x55974d[_0x1b8552]);let _0x3379a4=await fs[_0x2cb3('0x67')](_0x1df30a+_0x2cb3('0x5e')+_0x55974d[_0x1b8552]);_0x3379a4[_0x2cb3('0x68')]=_0x55974d[_0x1b8552];_0x3db503[_0x2cb3('0x65')](_0x3379a4);}return _0x6afa43(_0x3db503);}catch(_0xbb32e0){return _0x275fb4(_0xbb32e0);}});};function _0x2f4f87(_0x5a6ef9,_0x30feb4,_0x258531,_0x1700ad){return new Promise(async function(_0x2e99d2,_0x2affa5){try{for(let _0x1cdf08=0x0;_0x1cdf08<_0x258531['Editor']['length'];_0x1cdf08++){let _0x3a0eae=![];for(let _0x2a3e89=0x0;_0x2a3e89<_0x1700ad[_0x2cb3('0x61')]['length'];_0x2a3e89++){if(_0x1700ad[_0x2cb3('0x61')][_0x2a3e89][_0x2cb3('0x68')]==_0x258531[_0x2cb3('0x61')][_0x1cdf08][_0x2cb3('0x64')]){winston[_0x2cb3('0x6a')](_0x2cb3('0x6b')+Math[_0x2cb3('0x6c')](_0x1700ad['Editor'][_0x2a3e89][_0x2cb3('0x6d')]/0x3e8));winston[_0x2cb3('0x6a')](_0x2cb3('0x6e')+_0x258531[_0x2cb3('0x61')][_0x1cdf08][_0x2cb3('0x6f')]['mtime']);if(Math[_0x2cb3('0x6c')](_0x1700ad['Editor'][_0x2a3e89][_0x2cb3('0x6d')]/0x3e8)>_0x258531['Editor'][_0x1cdf08][_0x2cb3('0x6f')]['mtime']){_0x3a0eae=!![];winston[_0x2cb3('0x62')](_0x2cb3('0x70')+_0x1700ad['Editor'][_0x2a3e89][_0x2cb3('0x68')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x4a5bd0(_0x5a6ef9,_0x30feb4,_0x258531['Editor'][_0x1cdf08][_0x2cb3('0x64')],'Editor');}catch(_0x2cecf4){return _0x2affa5(_0x2cecf4);}break;}else{_0x3a0eae=!![];winston[_0x2cb3('0x62')](_0x2cb3('0x71')+_0x1700ad['Editor'][_0x2a3e89]['name']+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x5b037b(_0x5a6ef9,_0x30feb4,_0x258531[_0x2cb3('0x61')][_0x1cdf08][_0x2cb3('0x64')],'Editor');}catch(_0xe89831){winston[_0x2cb3('0x6a')](_0x2cb3('0x72')+_0xe89831);return _0x2affa5(_0xe89831);}break;}}}if(!_0x3a0eae){winston[_0x2cb3('0x62')](_0x258531[_0x2cb3('0x61')][_0x1cdf08][_0x2cb3('0x64')]+_0x2cb3('0x73'));try{await _0x5b037b(_0x5a6ef9,_0x30feb4,_0x258531[_0x2cb3('0x61')][_0x1cdf08]['filename'],_0x2cb3('0x61'));}catch(_0x12e492){return _0x2affa5(_0x12e492);}}}for(let _0x4601cd=0x0;_0x4601cd<_0x258531[_0x2cb3('0x66')][_0x2cb3('0x47')];_0x4601cd++){let _0x3a0eae=![];for(let _0x2a3e89=0x0;_0x2a3e89<_0x1700ad[_0x2cb3('0x66')][_0x2cb3('0x47')];_0x2a3e89++){if(_0x1700ad['Blockly'][_0x2a3e89][_0x2cb3('0x68')]==_0x258531[_0x2cb3('0x66')][_0x4601cd]['filename']){winston[_0x2cb3('0x6a')](_0x2cb3('0x6b')+Math['floor'](_0x1700ad['Blockly'][_0x2a3e89][_0x2cb3('0x6d')]/0x3e8));winston[_0x2cb3('0x6a')](_0x2cb3('0x6e')+_0x258531[_0x2cb3('0x66')][_0x4601cd][_0x2cb3('0x6f')][_0x2cb3('0x74')]);if(Math[_0x2cb3('0x6c')](_0x1700ad[_0x2cb3('0x66')][_0x2a3e89]['mtimeMs']/0x3e8)>_0x258531[_0x2cb3('0x66')][_0x4601cd]['attrs'][_0x2cb3('0x74')]){_0x3a0eae=!![];winston[_0x2cb3('0x62')](_0x2cb3('0x70')+_0x1700ad[_0x2cb3('0x66')][_0x2a3e89][_0x2cb3('0x68')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x4a5bd0(_0x5a6ef9,_0x30feb4,_0x258531['Blockly'][_0x4601cd][_0x2cb3('0x64')],_0x2cb3('0x66'));}catch(_0x1b38e2){return _0x2affa5(_0x1b38e2);}break;}else{_0x3a0eae=!![];winston[_0x2cb3('0x62')]('Remote\x20\x22'+_0x1700ad[_0x2cb3('0x66')][_0x2a3e89][_0x2cb3('0x68')]+_0x2cb3('0x75'));try{await _0x5b037b(_0x5a6ef9,_0x30feb4,_0x258531['Blockly'][_0x4601cd]['filename'],_0x2cb3('0x66'));}catch(_0xa714e4){winston[_0x2cb3('0x6a')]('Error:\x20'+_0xa714e4);return _0x2affa5(_0xa714e4);}break;}}}if(!_0x3a0eae){winston[_0x2cb3('0x62')](_0x258531[_0x2cb3('0x66')][_0x4601cd][_0x2cb3('0x64')]+_0x2cb3('0x73'));try{await _0x5b037b(_0x5a6ef9,_0x30feb4,_0x258531[_0x2cb3('0x66')][_0x4601cd]['filename'],_0x2cb3('0x66'));}catch(_0x477774){return _0x2affa5(_0x477774);}}}return _0x2e99d2();}catch(_0x566f6a){return _0x2affa5(_0x566f6a);}});};function _0x4a5bd0(_0x1b1086,_0x397519,_0x43024c,_0x447068){return new Promise((_0x2ac5c4,_0x41eb70)=>{try{let _0x502f10=_0x2cb3('0x54')+_0x397519[_0x2cb3('0x2a')]+'/'+_0x447068+'/'+_0x43024c;let _0x39e60b=_0x397519[_0x2cb3('0x4f')]+'/'+_0x447068+'/'+_0x43024c;winston[_0x2cb3('0x62')](_0x2cb3('0x76')+_0x502f10);winston[_0x2cb3('0x62')](_0x2cb3('0x77')+_0x39e60b);_0x1b1086[_0x2cb3('0x78')](_0x39e60b,_0x502f10,{},function(_0x86a075){if(_0x86a075){winston['debug'](_0x2cb3('0x79')+_0x43024c);return _0x41eb70(_0x86a075);}winston[_0x2cb3('0x4a')]('Uploaded\x20'+_0x43024c);return _0x2ac5c4();});}catch(_0x23cff0){return _0x41eb70(_0x23cff0);}});};function _0x5b037b(_0x1a577b,_0x4932b7,_0x1b425d,_0x17f490){return new Promise((_0x1e7513,_0x2a0744)=>{try{let _0x6e6909=_0x2cb3('0x54')+_0x4932b7[_0x2cb3('0x2a')]+'/'+_0x17f490+'/'+_0x1b425d;let _0x18b2a4=_0x4932b7[_0x2cb3('0x4f')]+'/'+_0x17f490+'/'+_0x1b425d;winston['verbose'](_0x2cb3('0x76')+_0x6e6909);winston['verbose']('Local\x20Path:\x20'+_0x18b2a4);_0x1a577b[_0x2cb3('0x7a')](_0x6e6909,_0x18b2a4,{},function(_0x7db96a){if(_0x7db96a){winston['debug'](_0x2cb3('0x7b')+_0x1b425d);return _0x2a0744(_0x7db96a);}winston[_0x2cb3('0x4a')]('Retrieved\x20'+_0x1b425d);return _0x1e7513();});}catch(_0x47653b){return _0x2a0744(_0x47653b);}});};function _0x487fa9(_0x2e6ce1,_0x28b844,_0x3391a6,_0xfa83a6){_0x2e6ce1[_0x2cb3('0x53')](_0x2cb3('0x54')+_0x28b844[_0x2cb3('0x2a')],function(_0x29c330){if(_0x29c330){console['log'](_0x2cb3('0x7c')+_0x29c330);_0x2e6ce1['mkdir']('/home/c3/FusionFilesystem/'+_0x28b844[_0x2cb3('0x2a')],function(_0x42379b){if(_0x42379b){console[_0x2cb3('0x38')](_0x2cb3('0x7d')+_0x42379b);throw _0x42379b;}console[_0x2cb3('0x38')](_0x2cb3('0x7e'));_0x2e6ce1['mkdir'](_0x2cb3('0x54')+_0x28b844[_0x2cb3('0x2a')]+_0x2cb3('0x5b'),function(_0x22be66){if(_0x22be66){console['log'](_0x2cb3('0x7f')+_0x22be66);throw _0x22be66;}console[_0x2cb3('0x38')](_0x2cb3('0x80'));_0x2e6ce1[_0x2cb3('0x55')](_0x2cb3('0x54')+_0x28b844[_0x2cb3('0x2a')]+_0x2cb3('0x5e'),function(_0x3db9f5){if(_0x3db9f5){console[_0x2cb3('0x38')](_0x2cb3('0x81')+_0x3db9f5);throw _0x3db9f5;}console[_0x2cb3('0x38')]('Blockly\x20directory\x20created');_0xfa83a6(_0x2e6ce1,_0x28b844,_0x3391a6);});});});}_0xfa83a6(_0x2e6ce1,_0x28b844,_0x3391a6);});};function _0x1b8ade(_0x43944a,_0x7bee4c,_0x14199e){_0x43944a[_0x2cb3('0x53')](_0x2cb3('0x54')+_0x7bee4c['username']+_0x2cb3('0x5b'),function(_0x53b9fe,_0x42066f){if(_0x53b9fe){console[_0x2cb3('0x38')](_0x2cb3('0x82')+_0x53b9fe);throw _0x53b9fe;}_0xbe0c07(_0x7bee4c,_0x2cb3('0x61'),_0x42066f,_0x14199e);});_0x43944a[_0x2cb3('0x53')](_0x2cb3('0x54')+_0x7bee4c['username']+'/Blockly/',function(_0x748156,_0xb5b4ed){if(_0x748156){console[_0x2cb3('0x38')](_0x2cb3('0x83')+_0x748156);throw _0x748156;}_0xbe0c07(_0x7bee4c,_0x2cb3('0x66'),_0xb5b4ed,_0x14199e);});};function _0xbe0c07(_0xd3e99,_0xfab633,_0x8a7c89,_0x2c244d){console[_0x2cb3('0x38')]('Retrieving\x20files');if(_0xfab633==_0x2cb3('0x66')&&_0x8a7c89[_0x2cb3('0x47')]==0x0){_0x2c244d[_0x2cb3('0x4d')]();}for(var _0xab9f16=0x0;_0xab9f16<_0x8a7c89[_0x2cb3('0x47')];_0xab9f16++){let _0x1790e2=_0x2cb3('0x54')+_0xd3e99[_0x2cb3('0x2a')]+'/'+_0xfab633+'/'+_0x8a7c89[_0xab9f16]['filename'];let _0x39fc3b=_0x2cb3('0x84')+_0xd3e99[_0x2cb3('0x2a')]+'/'+_0xfab633+'/';console[_0x2cb3('0x38')]('Moving:\x20'+_0x1790e2+_0x2cb3('0x85')+_0x39fc3b);SCP['scp'](_0x2cb3('0x86')+_0x1790e2,_0x39fc3b,function(_0x60dadb){if(_0x60dadb){console[_0x2cb3('0x38')]('Error\x20downloading:\x20'+_0x1790e2+_0x2cb3('0x87')+_0x60dadb);}if(_0xfab633==_0x2cb3('0x66')&&(_0xab9f16=_0x8a7c89['length']-0x1)){_0x2c244d[_0x2cb3('0x4d')]();}});}};};