const _0x278c=['884587pXEQhn','Remote\x20mtime:\x20','authenticate','end','/api/users','scp2','lastname','Classroom\x20file\x20system\x20found','generateHash','Editor','Error\x20reaching\x20classroom\x20server','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','fastPut','164678EgpVKb','Retrieved\x20','User\x27s\x20classroom\x20file\x20system\x20created','\x20not\x20a\x20common\x20file!','usergroup','local-login','https://172.16.0.1/backend/auth/ldap','filepath','/Editor/','connect','/Blockly','REGISTER.CREATED','language','Classroom\x20file\x20system\x20created','172.16.0.1',',\x20error:\x20','968519flwCQr','Error\x20creating\x20editor\x20directory:\x20','send','email','Attempting\x20standard\x20login','\x22\x20newer,\x20updating\x20local\x20version','filename','MultiUserAccess','/home/c3/FusionFilesystem/','mtime','Client','firstname','unshift','debug','User\x27s\x20classroom\x20file\x20system\x20found','length','Blockly','mkdir','attrs','150223AvCFLs','user','819829DiHuXP','logout','/api/recovery','securityanswer','POST','exec','Error:\x20','stringify','Error\x20reading\x20classroom\x20editor\x20files:\x20','User\x27s\x20blockly\x20directory\x20created','\x20to\x20','2uTddLg','findOne','User\x27s\x20blockly\x20directory\x20found','Error\x20creating\x20user\x20file\x20system:\x20','name','Error\x20reading\x20classroom\x20blockly\x20files:\x20','info','../../utils/logger','mriguest','stat','Error','post','logIn','Local\x20Path:\x20','floor','toLowerCase','../../classroom/connection','/api/users/login','message','SocketVariables','Admin','app/filesystem/','Local\x20mtime:\x20','KillProgram','fusion_program_running','User\x20c3\x20directory\x20created','Error\x20creating\x20classroom\x20file\x20system:\x20','543249OSMhMS','LOGIN.SUCCESS','Error\x20reading\x20user\x20file\x20system:\x20','Logged\x20out\x20successfully','ssh2','local-signup','Editor\x20directory\x20created','User\x20does\x20not\x20exist','Error\x20communicating\x20with\x20c3:\x20','User','json','User_Id','../../global/fusionSettings','User\x20Unauthenticated','969150pDSwRt','defaultprogramminglanguage','Error\x20creating\x20blockly\x20directory:\x20','securityquestion','Getting\x20data\x20for\x20','push','/api/allowedUserGroups','Remote\x20path:\x20','Attempting\x20classroom\x20login','trim','delete','verbose','mtimeMs','local-recovery','Guest','get','../../fusionProgram','params','error','Local\x20\x22','readdir','Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','../../express','passport','Blockly\x20directory\x20created','password','\x22\x20newer,\x20updating\x20classroom\x20version','path','connectedClients','/api/recovery/:User_Id','socketId','/api/users/logout','sftp','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','removeFileSystem','Successfully\x20deleted','/api/users/:User_Id','Error\x20downloading\x20classroom\x20files\x20for\x20','ready','LOGIN.MULTIUSER_DENIED','username','Remote\x20\x22','status','body','connected','find','/Blockly/'];const _0x5bc4=function(_0x2f7c9a,_0x5877aa){_0x2f7c9a=_0x2f7c9a-0x15f;let _0x278c03=_0x278c[_0x2f7c9a];return _0x278c03;};const _0x538013=_0x5bc4;(function(_0x1fe504,_0x25a3da){const _0x475129=_0x5bc4;while(!![]){try{const _0x2780fa=-parseInt(_0x475129(0x197))+parseInt(_0x475129(0x18a))+parseInt(_0x475129(0x1f0))+-parseInt(_0x475129(0x1e2))+-parseInt(_0x475129(0x1ba))*parseInt(_0x475129(0x1c7))+parseInt(_0x475129(0x1bc))+-parseInt(_0x475129(0x1a7));if(_0x2780fa===_0x25a3da)break;else _0x1fe504['push'](_0x1fe504['shift']());}catch(_0x5bed0c){_0x1fe504['push'](_0x1fe504['shift']());}}}(_0x278c,0xaa162));var SCP=require(_0x538013(0x18f)),SSH=require(_0x538013(0x1e6))[_0x538013(0x1b1)],fs=require('fs-extra'),path=require(_0x538013(0x176)),rp=require('request-promise');const classroomConnection=require(_0x538013(0x1d7)),logger=require(_0x538013(0x1ce)),app=require(_0x538013(0x171)),User=require('../../models/user'),passport=require(_0x538013(0x172)),FusionSettings=require(_0x538013(0x1ee)),fusionProgram=require(_0x538013(0x16a));module['exports']=function(){const _0x5315e8=_0x538013;app[_0x5315e8(0x169)](_0x5315e8(0x18e),_0x52cf76(),function(_0x50607b,_0x4f613){const _0x496338=_0x5315e8;User[_0x496338(0x188)]({'usergroup':{'$ne':_0x496338(0x168)}},function(_0x5da837,_0x213ade){const _0x563229=_0x496338;if(_0x5da837)_0x4f613[_0x563229(0x1a9)](_0x5da837);_0x4f613['json'](_0x213ade);});}),app[_0x5315e8(0x1d2)](_0x5315e8(0x18e),async function(_0x53c44e,_0x4fcc85,_0xf02fe2){await _0x326cc7(_0x53c44e,_0x4fcc85,_0xf02fe2);});async function _0x326cc7(_0x22e71d,_0x38da23,_0x579d33){passport['authenticate']('local-signup',async function(_0x15f379,_0x11bc51,_0x125f37){const _0x52501f=_0x5bc4;if(_0x15f379)return _0x38da23[_0x52501f(0x185)](0x1f4)[_0x52501f(0x1a9)](_0x15f379);if(_0x125f37&&_0x125f37[_0x52501f(0x1d9)])return _0x38da23[_0x52501f(0x185)](0x1f4)[_0x52501f(0x1a9)](_0x22e71d['__'](_0x125f37['message']));if(FusionSettings[_0x52501f(0x1ae)]){if(classroomConnection[_0x52501f(0x187)])try{await _0x405c72(_0x11bc51);}catch(_0x149584){logger[_0x52501f(0x16c)](_0x149584);}_0x22e71d['logIn'](_0x11bc51,function(_0x111d0b){const _0x13b4ef=_0x52501f;if(_0x111d0b)return _0x579d33(_0x111d0b);return _0x4f537f(_0x22e71d['body'][_0x13b4ef(0x179)],_0x11bc51),_0x38da23[_0x13b4ef(0x185)](0xc8)[_0x13b4ef(0x1ec)]({'serverMessage':_0x22e71d['__'](_0x13b4ef(0x1a2)),'user':_0x11bc51});});}else{if(_0x43004c()==0x0){if(classroomConnection[_0x52501f(0x187)])try{await _0x405c72(_0x11bc51);}catch(_0x22f519){logger['error'](_0x22f519);}_0x22e71d[_0x52501f(0x1d3)](_0x11bc51,function(_0xaccd77){const _0x4102df=_0x52501f;if(_0xaccd77)return _0x579d33(_0xaccd77);return _0x4f537f(_0x22e71d[_0x4102df(0x186)][_0x4102df(0x179)],_0x11bc51),_0x38da23[_0x4102df(0x185)](0xc8)[_0x4102df(0x1ec)]({'serverMessage':_0x22e71d['__'](_0x4102df(0x1a2)),'user':_0x11bc51});});}else return _0x38da23[_0x52501f(0x185)](0x1f4)['send'](_0x22e71d['__'](_0x52501f(0x17c)));}})(_0x22e71d,_0x38da23,_0x579d33);};app['post'](_0x5315e8(0x18e),passport[_0x5315e8(0x18c)](_0x5315e8(0x1e7),{'session':!![]}),function(_0x1591e9,_0x51fdf3){const _0x509391=_0x5315e8;if(_0x1591e9[_0x509391(0x1bb)][_0x509391(0x1d1)])return _0x51fdf3[_0x509391(0x185)](0x1f4)[_0x509391(0x1a9)](_0x1591e9[_0x509391(0x1bb)][_0x509391(0x1d1)]);else{}}),app[_0x5315e8(0x169)](_0x5315e8(0x17f),_0x52cf76(),function(_0x2d05c3,_0x4da8bb){const _0xaa7d60=_0x5315e8;User[_0xaa7d60(0x1c8)]({'username':_0x2d05c3[_0xaa7d60(0x16b)][_0xaa7d60(0x1ed)]['toLowerCase']()['trim']()},function(_0x367cd2,_0x46825d){const _0x1a7dbc=_0xaa7d60;if(_0x367cd2)_0x4da8bb[_0x1a7dbc(0x1a9)](_0x367cd2);_0x4da8bb[_0x1a7dbc(0x1ec)](_0x46825d);});}),app['put'](_0x5315e8(0x17f),_0x52cf76(),function(_0x3e6cac,_0x5a942d){const _0x1e71f6=_0x5315e8;User[_0x1e71f6(0x1c8)]({'username':_0x3e6cac[_0x1e71f6(0x16b)][_0x1e71f6(0x1ed)]['toLowerCase']()[_0x1e71f6(0x163)]()},function(_0x1d1b36,_0x2bfe2f){const _0x2018a3=_0x1e71f6;if(_0x1d1b36)_0x5a942d[_0x2018a3(0x1a9)](_0x1d1b36);_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x174)]&&(_0x2bfe2f[_0x2018a3(0x174)]=_0x2bfe2f[_0x2018a3(0x192)](_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x174)])),_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1b2)]&&(_0x2bfe2f[_0x2018a3(0x1b2)]=_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1b2)]),_0x3e6cac['body'][_0x2018a3(0x190)]&&(_0x2bfe2f[_0x2018a3(0x190)]=_0x3e6cac[_0x2018a3(0x186)]['lastname']),_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1a3)]&&(_0x2bfe2f[_0x2018a3(0x1a3)]=_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1a3)]),_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1aa)]&&(_0x2bfe2f[_0x2018a3(0x1aa)]=_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1aa)]),_0x3e6cac['body'][_0x2018a3(0x1f1)]&&(_0x2bfe2f[_0x2018a3(0x1f1)]=_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x1f1)]),_0x3e6cac['body']['securityquestion']&&(_0x2bfe2f[_0x2018a3(0x1f3)]=_0x3e6cac[_0x2018a3(0x186)]['securityquestion']),_0x3e6cac[_0x2018a3(0x186)]['securityanswer']&&(_0x2bfe2f[_0x2018a3(0x1bf)]=_0x3e6cac[_0x2018a3(0x186)]['securityanswer']),_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x19b)]&&(_0x2bfe2f['usergroup']=_0x3e6cac[_0x2018a3(0x186)][_0x2018a3(0x19b)]),_0x2bfe2f['save'](function(_0x3d70eb){const _0x47d95d=_0x2018a3;if(_0x3d70eb)_0x5a942d[_0x47d95d(0x185)](0x1f4)[_0x47d95d(0x1a9)](_0x3d70eb);_0x5a942d[_0x47d95d(0x185)](0xc8)[_0x47d95d(0x1ec)]({'serverMessage':'User\x20updated!'});});});}),app[_0x5315e8(0x164)](_0x5315e8(0x17f),_0x52cf76(),function(_0x1fd83d,_0x1a5e2d){const _0x277a10=_0x5315e8;if(_0x1fd83d[_0x277a10(0x16b)]['User_Id'][_0x277a10(0x1d6)]()[_0x277a10(0x163)]()==_0x1fd83d['user'][_0x277a10(0x183)]){if(FusionSettings['SocketVariables'][_0x277a10(0x1df)]){if(FusionSettings['SocketVariables'][_0x277a10(0x1df)][_0x277a10(0x1eb)]==_0x1fd83d['user'][_0x277a10(0x183)])fusionProgram[_0x277a10(0x1de)]();}_0x378240(_0x1fd83d['user']['username']),_0x1fd83d[_0x277a10(0x1bd)]();}User['remove']({'username':_0x1fd83d[_0x277a10(0x16b)][_0x277a10(0x1ed)][_0x277a10(0x1d6)]()[_0x277a10(0x163)]()},function(_0x321abc,_0x5ef94e){const _0x1e05f0=_0x277a10;if(_0x321abc)return _0x1a5e2d['send'](_0x321abc);return User[_0x1e05f0(0x17d)](_0x1fd83d[_0x1e05f0(0x16b)][_0x1e05f0(0x1ed)][_0x1e05f0(0x1d6)]()[_0x1e05f0(0x163)]()),_0x1a5e2d['status'](0xc8)[_0x1e05f0(0x1ec)]({'serverMessage':_0x1e05f0(0x17e)});});}),app['post'](_0x5315e8(0x1d8),async(_0x2018c7,_0x3128aa,_0x25d735)=>{const _0x444363=_0x5315e8;if(!FusionSettings[_0x444363(0x1ae)]&&_0x43004c()>0x0)return _0x3128aa[_0x444363(0x185)](0x1f4)[_0x444363(0x1a9)](_0x2018c7['__'](_0x444363(0x182)));if(!classroomConnection[_0x444363(0x187)])logger[_0x444363(0x1b4)](_0x444363(0x1ab)),await _0x500e7f(_0x2018c7,_0x3128aa,_0x25d735);else{logger[_0x444363(0x1b4)](_0x444363(0x162));if(_0x2018c7[_0x444363(0x186)]['username']=='mriguest'&&_0x2018c7[_0x444363(0x186)][_0x444363(0x174)]==_0x444363(0x1cf))return _0x3128aa[_0x444363(0x185)](0x1f4)[_0x444363(0x1a9)]('Guest\x20login\x20unavailable\x20in\x20classroom\x20mode');let _0x5e8980={'method':_0x444363(0x1c0),'uri':_0x444363(0x19d),'body':{'username':_0x2018c7[_0x444363(0x186)][_0x444363(0x183)],'password':_0x2018c7[_0x444363(0x186)][_0x444363(0x174)]},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x5e8980);let _0x5eba31=await User[_0x444363(0x1c8)]({'username':_0x2018c7[_0x444363(0x186)]['username']})[_0x444363(0x1c1)]();_0x5eba31?await _0x500e7f(_0x2018c7,_0x3128aa,_0x25d735):(_0x2018c7['body'][_0x444363(0x1f3)]=_0x444363(0x16f),_0x2018c7[_0x444363(0x186)][_0x444363(0x1bf)]=_0x2018c7[_0x444363(0x186)][_0x444363(0x183)],_0x2018c7[_0x444363(0x186)][_0x444363(0x19b)]=_0x444363(0x1eb),await _0x326cc7(_0x2018c7,_0x3128aa,_0x25d735));}catch(_0x5272b1){logger[_0x444363(0x1cd)]('Error\x20with\x20request\x20promise.\x20'+_0x5272b1);if(_0x5272b1[_0x444363(0x1cb)]=='StatusCodeError')return _0x3128aa[_0x444363(0x185)](0x191)['send'](_0x2018c7['__']('LOGIN.INVALID'));else return _0x5272b1[_0x444363(0x1cb)]=='RequestError'?_0x3128aa['status'](0x1f4)[_0x444363(0x1a9)](_0x444363(0x194)):_0x3128aa[_0x444363(0x185)](0x1f4)[_0x444363(0x1a9)](_0x5272b1[_0x444363(0x1d9)]);}}});async function _0x500e7f(_0x2f04be,_0x3f77f4,_0x3543e0){const _0x3481ec=_0x5315e8;passport['authenticate'](_0x3481ec(0x19c),async function(_0x1df9e3,_0x21b56b,_0x2fd445){const _0x135325=_0x3481ec;if(_0x1df9e3)return _0x3f77f4['status'](0x1f4)[_0x135325(0x1a9)](_0x2f04be['__'](_0x1df9e3['message']));if(!_0x21b56b)return _0x3f77f4[_0x135325(0x185)](0x191)['send'](_0x2f04be['__'](_0x2fd445[_0x135325(0x1d9)]));_0x2f04be[_0x135325(0x1d3)](_0x21b56b,async function(_0x26bf60){const _0x27cca9=_0x135325;if(_0x26bf60)return _0x3543e0(_0x26bf60);_0x4f537f(_0x2f04be[_0x27cca9(0x186)][_0x27cca9(0x179)],_0x21b56b);try{if(classroomConnection[_0x27cca9(0x187)])await _0x405c72(_0x21b56b);}catch(_0x50a4be){logger[_0x27cca9(0x16c)](_0x50a4be);}return _0x3f77f4[_0x27cca9(0x185)](0xc8)['json']({'serverMessage':_0x2f04be['__'](_0x27cca9(0x1e3)),'user':_0x21b56b});});})(_0x2f04be,_0x3f77f4,_0x3543e0);};app[_0x5315e8(0x1d2)](_0x5315e8(0x17a),_0x52cf76(),function(_0x5942ed,_0x813495){const _0x5448bf=_0x5315e8;if(FusionSettings[_0x5448bf(0x1da)][_0x5448bf(0x1df)]){if(FusionSettings[_0x5448bf(0x1da)][_0x5448bf(0x1df)][_0x5448bf(0x1eb)]==_0x5942ed[_0x5448bf(0x1bb)][_0x5448bf(0x183)])fusionProgram['KillProgram']();}_0x22c115(_0x5942ed[_0x5448bf(0x186)][_0x5448bf(0x179)]),_0x5942ed[_0x5448bf(0x1bd)](),_0x813495[_0x5448bf(0x185)](0xc8)['json']({'serverMessage':_0x5448bf(0x1e5)});}),app[_0x5315e8(0x169)](_0x5315e8(0x178),function(_0x1260ce,_0x1ef98a){const _0xd28914=_0x5315e8;User['findOne']({'username':_0x1260ce[_0xd28914(0x16b)][_0xd28914(0x1ed)][_0xd28914(0x1d6)]()[_0xd28914(0x163)]()},function(_0x3fab65,_0x5d37b0){const _0x555b55=_0xd28914;if(_0x3fab65)return _0x1ef98a['status'](0x1f4)['send'](_0x3fab65);if(!_0x5d37b0)return _0x1ef98a[_0x555b55(0x185)](0x1f4)[_0x555b55(0x1a9)](_0x555b55(0x1e9));else return _0x1ef98a[_0x555b55(0x185)](0xc8)['json'](_0x5d37b0[_0x555b55(0x1f3)]);});}),app[_0x5315e8(0x1d2)](_0x5315e8(0x1be),passport[_0x5315e8(0x18c)](_0x5315e8(0x167),{'session':!![]}),async function(_0x116c02,_0x307885){const _0x1f48ee=_0x5315e8;if(FusionSettings[_0x1f48ee(0x1ae)]){if(classroomConnection[_0x1f48ee(0x187)])try{await _0x405c72(user);}catch(_0x2c8bef){logger[_0x1f48ee(0x16c)](_0x2c8bef);}return _0x4f537f(_0x116c02[_0x1f48ee(0x186)]['socketId'],_0x116c02[_0x1f48ee(0x1bb)]),_0x307885['status'](0xc8)[_0x1f48ee(0x1ec)]({'serverMessage':'Login\x20Successful','user':_0x116c02['user']});}else{if(_0x43004c()==0x0){_0x4f537f(_0x116c02[_0x1f48ee(0x186)][_0x1f48ee(0x179)],_0x116c02[_0x1f48ee(0x1bb)]);if(classroomConnection[_0x1f48ee(0x187)])try{await _0x405c72(user);}catch(_0x52df91){logger[_0x1f48ee(0x16c)](_0x52df91);}return _0x307885[_0x1f48ee(0x185)](0xc8)[_0x1f48ee(0x1ec)]({'serverMessage':'Login\x20Successful','user':_0x116c02[_0x1f48ee(0x1bb)]});}else return _0x116c02[_0x1f48ee(0x1bd)](),_0x307885[_0x1f48ee(0x185)](0x1f4)[_0x1f48ee(0x1a9)]('Another\x20user\x20is\x20already\x20logged\x20in.');}}),app[_0x5315e8(0x169)](_0x5315e8(0x160),function(_0x348605,_0xdef54f){const _0x3aa8c5=_0x5315e8;var _0xa00363=[_0x3aa8c5(0x1eb)];User['findOne']({'usergroup':_0x3aa8c5(0x1db)},function(_0x249b5a,_0x8755ef){const _0xfd5f7a=_0x3aa8c5;if(_0x249b5a)return _0xdef54f['status'](0xc8)[_0xfd5f7a(0x1a9)](_0xa00363);if(!_0x8755ef)_0xa00363[_0xfd5f7a(0x1b3)](_0xfd5f7a(0x1db));return _0xdef54f['status'](0xc8)[_0xfd5f7a(0x1a9)](_0xa00363);});}),app[_0x5315e8(0x169)]('/User/Login',async(_0x4c6f0b,_0x339cd9,_0x264027)=>{_0x264027();});function _0x43004c(){const _0xf978c4=_0x5315e8;var _0x388186=0x0;for(var _0x53f87d=0x0;_0x53f87d<FusionSettings[_0xf978c4(0x177)][_0xf978c4(0x1b6)];_0x53f87d++){FusionSettings['connectedClients'][_0x53f87d][_0xf978c4(0x1eb)]&&_0x388186++;}return _0x388186;}function _0x4f537f(_0x54fac1,_0x657de8){const _0x2783a0=_0x5315e8;for(var _0x4e0f81=0x0;_0x4e0f81<FusionSettings[_0x2783a0(0x177)][_0x2783a0(0x1b6)];_0x4e0f81++){if(FusionSettings[_0x2783a0(0x177)][_0x4e0f81]['id']==_0x54fac1){FusionSettings[_0x2783a0(0x177)][_0x4e0f81][_0x2783a0(0x1eb)]=_0x657de8;break;}}}function _0x22c115(_0x2642bb){const _0x2f181b=_0x5315e8;for(var _0x437d34=0x0;_0x437d34<FusionSettings['connectedClients'][_0x2f181b(0x1b6)];_0x437d34++){if(FusionSettings[_0x2f181b(0x177)][_0x437d34]['id']==_0x2642bb){FusionSettings['connectedClients'][_0x437d34][_0x2f181b(0x1eb)]=undefined;break;}}}function _0x378240(_0x66e967){const _0x5db046=_0x5315e8;for(var _0x5a0cfb=0x0;_0x5a0cfb<FusionSettings[_0x5db046(0x177)]['length'];_0x5a0cfb++){if(FusionSettings[_0x5db046(0x177)][_0x5a0cfb][_0x5db046(0x1eb)][_0x5db046(0x183)]==_0x66e967){FusionSettings[_0x5db046(0x177)][_0x5a0cfb]['User']=undefined;break;}}}function _0x52cf76(){return function(_0x186006,_0x11ccfa,_0x2a55be){const _0x1979c2=_0x5bc4;return _0x186006['isAuthenticated']()?_0x2a55be():_0x11ccfa[_0x1979c2(0x185)](0x191)[_0x1979c2(0x1a9)](_0x1979c2(0x1ef));};}async function _0x405c72(_0x58d150){const _0x430863=_0x5315e8;try{await _0x4090f2(_0x58d150);}catch(_0x3a2d13){logger[_0x430863(0x16c)](_0x430863(0x180)+_0x58d150[_0x430863(0x183)]);}};function _0x4090f2(_0x2842b9){return new Promise(function(_0xd67bc7,_0x154180){const _0x4ca36f=_0x5bc4;var _0x1012e5=new SSH();_0x1012e5['on'](_0x4ca36f(0x181),function(){const _0x37bcef=_0x4ca36f;_0x1012e5[_0x37bcef(0x17b)](async function(_0x249ece,_0x45e29e){const _0x405b38=_0x37bcef;if(_0x249ece)return logger[_0x405b38(0x16c)](_0x405b38(0x1ea)+_0x249ece),_0x1012e5['end'](),_0x154180(_0x249ece);try{await _0x38a132(_0x45e29e),await _0x4074bd(_0x45e29e,_0x2842b9[_0x405b38(0x183)]),await _0x271001(_0x45e29e,_0x2842b9[_0x405b38(0x183)]),await _0x38ac27(_0x45e29e,_0x2842b9['username']);let _0x3c5be3=await _0x35b7c7(_0x45e29e,_0x2842b9[_0x405b38(0x183)]);logger['debug'](JSON['stringify'](_0x3c5be3));let _0x51f3e1=await _0x2319e4(_0x2842b9[_0x405b38(0x19e)]);return logger['debug'](JSON[_0x405b38(0x1c3)](_0x51f3e1)),await _0xa05551(_0x45e29e,_0x2842b9,_0x3c5be3,_0x51f3e1),_0x1012e5['end'](),_0xd67bc7();}catch(_0x54ce48){return logger['info'](_0x54ce48),_0x1012e5[_0x405b38(0x18d)](),_0x154180(_0x54ce48);}});})[_0x4ca36f(0x1a0)]({'host':_0x4ca36f(0x1a5),'port':0x16,'username':'c3','password':'root'});});};function _0x38a132(_0x5d6ebd){return new Promise(function(_0x239862,_0xac8605){const _0x39ce73=_0x5bc4;_0x5d6ebd[_0x39ce73(0x16e)](_0x39ce73(0x1af),function(_0x4f8c91){const _0x11c42f=_0x39ce73;if(_0x4f8c91)_0x5d6ebd[_0x11c42f(0x1b8)](_0x11c42f(0x1af),function(_0x5daebc){const _0x51c368=_0x11c42f;return _0x5daebc?_0xac8605(_0x51c368(0x1e1)+_0x5daebc):(logger['verbose'](_0x51c368(0x1a4)),_0x239862());});else return logger[_0x11c42f(0x165)](_0x11c42f(0x191)),_0x239862();});});};function _0x4074bd(_0x5523a5,_0x4ec5d8){return new Promise(function(_0x37ebd7,_0x1bf2e8){const _0x34fc4e=_0x5bc4;_0x5523a5[_0x34fc4e(0x16e)](_0x34fc4e(0x1af)+_0x4ec5d8,function(_0x158f3d){const _0x377279=_0x34fc4e;if(_0x158f3d)_0x5523a5['mkdir'](_0x377279(0x1af)+_0x4ec5d8,function(_0x5ea101){const _0x1e0d52=_0x377279;return _0x5ea101?_0x1bf2e8(_0x1e0d52(0x170)+_0x5ea101):(logger[_0x1e0d52(0x165)](_0x1e0d52(0x199)),_0x37ebd7());});else return logger[_0x377279(0x165)](_0x377279(0x1b5)),_0x37ebd7();});});};function _0x271001(_0x367373,_0x4077f5){return new Promise(function(_0x1db946,_0x578d1a){const _0x44c212=_0x5bc4;_0x367373[_0x44c212(0x16e)](_0x44c212(0x1af)+_0x4077f5+_0x44c212(0x19f),function(_0xbdc484){const _0x52c85d=_0x44c212;if(_0xbdc484)_0x367373[_0x52c85d(0x1b8)]('/home/c3/FusionFilesystem/'+_0x4077f5+_0x52c85d(0x19f),function(_0x247d88){const _0x20dcdc=_0x52c85d;return _0x247d88?_0x578d1a('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x247d88):(logger[_0x20dcdc(0x165)]('User\x27s\x20editor\x20directory\x20created'),_0x1db946());});else return logger[_0x52c85d(0x165)]('User\x27s\x20editor\x20directory\x20found'),_0x1db946();});});};function _0x38ac27(_0x1abd67,_0x2f77e2){return new Promise(function(_0x21cae3,_0x3cf90f){const _0x4a8961=_0x5bc4;_0x1abd67[_0x4a8961(0x16e)](_0x4a8961(0x1af)+_0x2f77e2+_0x4a8961(0x189),function(_0x3624f2){const _0x4da486=_0x4a8961;if(_0x3624f2)_0x1abd67[_0x4da486(0x1b8)](_0x4da486(0x1af)+_0x2f77e2+_0x4da486(0x189),function(_0x5915f6){const _0x516e43=_0x4da486;return _0x5915f6?_0x3cf90f(_0x516e43(0x195)+_0x5915f6):(logger[_0x516e43(0x165)](_0x516e43(0x1c5)),_0x21cae3());});else return logger[_0x4da486(0x165)](_0x4da486(0x1c9)),_0x21cae3();});});};function _0x35b7c7(_0xdddfcd,_0x199025){return new Promise(async function(_0x430589,_0x49abb3){const _0x174d46=_0x5bc4;try{let _0x208880={};return _0x208880[_0x174d46(0x193)]=await _0x4ce247(_0xdddfcd,_0x199025),_0x208880[_0x174d46(0x1b7)]=await _0x164d9c(_0xdddfcd,_0x199025),_0x430589(_0x208880);}catch(_0x271d03){return _0x49abb3(_0x271d03);}});};function _0x4ce247(_0x41548b,_0x21d3b0){return new Promise(function(_0x401d18,_0x25a58b){const _0x23e31d=_0x5bc4;_0x41548b['readdir'](_0x23e31d(0x1af)+_0x21d3b0+_0x23e31d(0x19f),function(_0x98a649,_0x4aec9a){const _0x519019=_0x23e31d;if(_0x98a649)return _0x25a58b(_0x98a649);let _0x32bf8f=[];for(let _0x44c5b8=0x0;_0x44c5b8<_0x4aec9a[_0x519019(0x1b6)];_0x44c5b8++){logger[_0x519019(0x1b4)]('Getting\x20data\x20for\x20'+_0x4aec9a[_0x44c5b8][_0x519019(0x1ad)]),_0x32bf8f[_0x519019(0x15f)](_0x4aec9a[_0x44c5b8]);}return _0x401d18(_0x32bf8f);});});};function _0x164d9c(_0x53b602,_0x35ed41){return new Promise(function(_0x4196b2,_0x27d026){const _0x590f8a=_0x5bc4;_0x53b602['readdir'](_0x590f8a(0x1af)+_0x35ed41+_0x590f8a(0x189),function(_0x1a21c9,_0x1d1db9){const _0x1dda94=_0x590f8a;if(_0x1a21c9)return _0x27d026(_0x1a21c9);let _0xbca912=[];for(let _0x4558c6=0x0;_0x4558c6<_0x1d1db9['length'];_0x4558c6++){logger[_0x1dda94(0x1b4)](_0x1dda94(0x1f4)+_0x1d1db9[_0x4558c6][_0x1dda94(0x1ad)]),_0xbca912['push'](_0x1d1db9[_0x4558c6]);}return _0x4196b2(_0xbca912);});});};function _0x2319e4(_0x83d433){return new Promise(async function(_0x2529f5,_0x4aabbc){const _0x4a2278=_0x5bc4;try{let _0x269478={};return _0x269478['Editor']=await _0x33f995(_0x83d433),_0x269478[_0x4a2278(0x1b7)]=await _0x57da17(_0x83d433),_0x2529f5(_0x269478);}catch(_0x24e4cc){return _0x4aabbc(_0x24e4cc);}});};function _0x33f995(_0x4c6979){return new Promise(async function(_0x5d854e,_0x495164){const _0x32d4d6=_0x5bc4;try{let _0x5588ba=[],_0x54b329=await fs[_0x32d4d6(0x16e)](_0x4c6979+'/Editor');for(let _0x218cf4=0x0;_0x218cf4<_0x54b329[_0x32d4d6(0x1b6)];_0x218cf4++){logger[_0x32d4d6(0x1b4)]('Getting\x20data\x20for\x20'+_0x54b329[_0x218cf4]);let _0x2f4790=await fs[_0x32d4d6(0x1d0)](_0x4c6979+_0x32d4d6(0x19f)+_0x54b329[_0x218cf4]);_0x2f4790[_0x32d4d6(0x1cb)]=_0x54b329[_0x218cf4],_0x5588ba[_0x32d4d6(0x15f)](_0x2f4790);}return _0x5d854e(_0x5588ba);}catch(_0x5c30a9){return _0x495164(_0x5c30a9);}});};function _0x57da17(_0x1c3844){return new Promise(async function(_0x1458a6,_0x4315a1){const _0x155443=_0x5bc4;try{let _0xf9aac9=[],_0x3d3a7c=await fs['readdir'](_0x1c3844+_0x155443(0x1a1));for(let _0x45fee6=0x0;_0x45fee6<_0x3d3a7c[_0x155443(0x1b6)];_0x45fee6++){logger[_0x155443(0x1b4)](_0x155443(0x1f4)+_0x3d3a7c[_0x45fee6]);let _0xfc5b0d=await fs[_0x155443(0x1d0)](_0x1c3844+_0x155443(0x189)+_0x3d3a7c[_0x45fee6]);_0xfc5b0d[_0x155443(0x1cb)]=_0x3d3a7c[_0x45fee6],_0xf9aac9['push'](_0xfc5b0d);}return _0x1458a6(_0xf9aac9);}catch(_0x231315){return _0x4315a1(_0x231315);}});};function _0xa05551(_0x39c59c,_0xce9b16,_0x4d62ff,_0x3d0c89){return new Promise(async function(_0x18cdb8,_0x68b37a){const _0xb320e1=_0x5bc4;try{for(let _0x107716=0x0;_0x107716<_0x4d62ff[_0xb320e1(0x193)][_0xb320e1(0x1b6)];_0x107716++){let _0xa85d17=![];for(let _0x2bbe36=0x0;_0x2bbe36<_0x3d0c89['Editor'][_0xb320e1(0x1b6)];_0x2bbe36++){if(_0x3d0c89[_0xb320e1(0x193)][_0x2bbe36][_0xb320e1(0x1cb)]==_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1ad)]){logger[_0xb320e1(0x1b4)](_0xb320e1(0x1dd)+Math[_0xb320e1(0x1d5)](_0x3d0c89['Editor'][_0x2bbe36][_0xb320e1(0x166)]/0x3e8)),logger[_0xb320e1(0x1b4)](_0xb320e1(0x18b)+_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1b9)][_0xb320e1(0x1b0)]);if(Math[_0xb320e1(0x1d5)](_0x3d0c89[_0xb320e1(0x193)][_0x2bbe36][_0xb320e1(0x166)]/0x3e8)>_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1b9)]['mtime']){_0xa85d17=!![],logger[_0xb320e1(0x1b4)](_0xb320e1(0x16d)+_0x3d0c89[_0xb320e1(0x193)][_0x2bbe36][_0xb320e1(0x1cb)]+_0xb320e1(0x175));try{await _0x444653(_0x39c59c,_0xce9b16,_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1ad)],'Editor');}catch(_0x21989e){return _0x68b37a(_0x21989e);}break;}else{_0xa85d17=!![],logger[_0xb320e1(0x1b4)](_0xb320e1(0x184)+_0x3d0c89['Editor'][_0x2bbe36][_0xb320e1(0x1cb)]+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x324b68(_0x39c59c,_0xce9b16,_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1ad)],_0xb320e1(0x193));}catch(_0xe36568){return logger[_0xb320e1(0x16c)](_0xb320e1(0x1c2)+_0xe36568),_0x68b37a(_0xe36568);}break;}}}if(!_0xa85d17){logger[_0xb320e1(0x1b4)](_0x4d62ff[_0xb320e1(0x193)][_0x107716]['filename']+_0xb320e1(0x19a));try{await _0x324b68(_0x39c59c,_0xce9b16,_0x4d62ff[_0xb320e1(0x193)][_0x107716][_0xb320e1(0x1ad)],_0xb320e1(0x193));}catch(_0x4cdde3){return _0x68b37a(_0x4cdde3);}}}for(let _0x3539c6=0x0;_0x3539c6<_0x4d62ff[_0xb320e1(0x1b7)][_0xb320e1(0x1b6)];_0x3539c6++){let _0x18987e=![];for(let _0x3844f3=0x0;_0x3844f3<_0x3d0c89[_0xb320e1(0x1b7)][_0xb320e1(0x1b6)];_0x3844f3++){if(_0x3d0c89['Blockly'][_0x3844f3][_0xb320e1(0x1cb)]==_0x4d62ff[_0xb320e1(0x1b7)][_0x3539c6]['filename']){logger[_0xb320e1(0x1b4)]('Local\x20mtime:\x20'+Math[_0xb320e1(0x1d5)](_0x3d0c89[_0xb320e1(0x1b7)][_0x3844f3][_0xb320e1(0x166)]/0x3e8)),logger[_0xb320e1(0x1b4)]('Remote\x20mtime:\x20'+_0x4d62ff[_0xb320e1(0x1b7)][_0x3539c6][_0xb320e1(0x1b9)]['mtime']);if(Math[_0xb320e1(0x1d5)](_0x3d0c89[_0xb320e1(0x1b7)][_0x3844f3]['mtimeMs']/0x3e8)>_0x4d62ff[_0xb320e1(0x1b7)][_0x3539c6][_0xb320e1(0x1b9)][_0xb320e1(0x1b0)]){_0x18987e=!![],logger[_0xb320e1(0x1b4)](_0xb320e1(0x16d)+_0x3d0c89[_0xb320e1(0x1b7)][_0x3844f3]['name']+_0xb320e1(0x175));try{await _0x444653(_0x39c59c,_0xce9b16,_0x4d62ff[_0xb320e1(0x1b7)][_0x3539c6][_0xb320e1(0x1ad)],'Blockly');}catch(_0x1389a0){return _0x68b37a(_0x1389a0);}break;}else{_0x18987e=!![],logger[_0xb320e1(0x1b4)](_0xb320e1(0x184)+_0x3d0c89[_0xb320e1(0x1b7)][_0x3844f3][_0xb320e1(0x1cb)]+_0xb320e1(0x1ac));try{await _0x324b68(_0x39c59c,_0xce9b16,_0x4d62ff[_0xb320e1(0x1b7)][_0x3539c6]['filename'],_0xb320e1(0x1b7));}catch(_0x5dd46f){return logger[_0xb320e1(0x16c)](_0xb320e1(0x1c2)+_0x5dd46f),_0x68b37a(_0x5dd46f);}break;}}}if(!_0x18987e){logger[_0xb320e1(0x1b4)](_0x4d62ff['Blockly'][_0x3539c6][_0xb320e1(0x1ad)]+_0xb320e1(0x19a));try{await _0x324b68(_0x39c59c,_0xce9b16,_0x4d62ff['Blockly'][_0x3539c6][_0xb320e1(0x1ad)],_0xb320e1(0x1b7));}catch(_0x1ef002){return _0x68b37a(_0x1ef002);}}}return _0x18cdb8();}catch(_0x45a9c8){return _0x68b37a(_0x45a9c8);}});};function _0x444653(_0x15f17d,_0x2c1fe6,_0x58986d,_0x5ecfa8){return new Promise((_0x4150bf,_0x40b13a)=>{const _0x5c70cb=_0x5bc4;try{let _0x56431c=_0x5c70cb(0x1af)+_0x2c1fe6[_0x5c70cb(0x183)]+'/'+_0x5ecfa8+'/'+_0x58986d,_0x355905=_0x2c1fe6['filepath']+'/'+_0x5ecfa8+'/'+_0x58986d;logger[_0x5c70cb(0x1b4)]('Remote\x20path:\x20'+_0x56431c),logger['debug'](_0x5c70cb(0x1d4)+_0x355905),_0x15f17d[_0x5c70cb(0x196)](_0x355905,_0x56431c,{},function(_0x551c62){const _0x541bbc=_0x5c70cb;if(_0x551c62)return logger['error']('Error\x20uploading\x20file:\x20'+_0x58986d),_0x40b13a(_0x551c62);return logger[_0x541bbc(0x1b4)]('Uploaded\x20'+_0x58986d),_0x4150bf();});}catch(_0x40cc17){return _0x40b13a(_0x40cc17);}});};function _0x324b68(_0x4670a9,_0x2047de,_0x1d8970,_0x118c4b){return new Promise((_0x414929,_0x2de687)=>{const _0x5f30d3=_0x5bc4;try{let _0x346ca7='/home/c3/FusionFilesystem/'+_0x2047de['username']+'/'+_0x118c4b+'/'+_0x1d8970,_0x5ddb06=_0x2047de[_0x5f30d3(0x19e)]+'/'+_0x118c4b+'/'+_0x1d8970;logger[_0x5f30d3(0x1b4)](_0x5f30d3(0x161)+_0x346ca7),logger[_0x5f30d3(0x1b4)](_0x5f30d3(0x1d4)+_0x5ddb06),_0x4670a9['fastGet'](_0x346ca7,_0x5ddb06,{},function(_0x411208){const _0x24ae35=_0x5f30d3;if(_0x411208)return logger['error']('Error\x20downloading\x20file:\x20'+_0x1d8970),_0x2de687(_0x411208);return logger[_0x24ae35(0x1b4)](_0x24ae35(0x198)+_0x1d8970),_0x414929();});}catch(_0x54e2a5){return _0x2de687(_0x54e2a5);}});};function _0x5da198(_0x203e68,_0x47e1db,_0x16b3ab,_0x58f5ac){const _0x6f06c9=_0x5315e8;_0x203e68[_0x6f06c9(0x16e)](_0x6f06c9(0x1af)+_0x47e1db[_0x6f06c9(0x183)],function(_0x461e1c){const _0x7f57b1=_0x6f06c9;_0x461e1c&&(logger[_0x7f57b1(0x1cd)](_0x7f57b1(0x1e4)+_0x461e1c),_0x203e68[_0x7f57b1(0x1b8)](_0x7f57b1(0x1af)+_0x47e1db[_0x7f57b1(0x183)],function(_0x491504){const _0x34cc45=_0x7f57b1;if(_0x491504){logger[_0x34cc45(0x1cd)](_0x34cc45(0x1ca)+_0x491504);throw _0x491504;}logger[_0x34cc45(0x1cd)](_0x34cc45(0x1e0)),_0x203e68['mkdir'](_0x34cc45(0x1af)+_0x47e1db[_0x34cc45(0x183)]+_0x34cc45(0x19f),function(_0x1fafa6){const _0x1766d6=_0x34cc45;if(_0x1fafa6){logger[_0x1766d6(0x1cd)](_0x1766d6(0x1a8)+_0x1fafa6);throw _0x1fafa6;}logger[_0x1766d6(0x1cd)](_0x1766d6(0x1e8)),_0x203e68['mkdir']('/home/c3/FusionFilesystem/'+_0x47e1db[_0x1766d6(0x183)]+_0x1766d6(0x189),function(_0x219a52){const _0x13cfff=_0x1766d6;if(_0x219a52){logger['info'](_0x13cfff(0x1f2)+_0x219a52);throw _0x219a52;}logger[_0x13cfff(0x1cd)](_0x13cfff(0x173)),_0x58f5ac(_0x203e68,_0x47e1db,_0x16b3ab);});});})),_0x58f5ac(_0x203e68,_0x47e1db,_0x16b3ab);});};function _0x54dce8(_0x214c94,_0x40972d,_0x13ab80){const _0x19e1a5=_0x5315e8;_0x214c94[_0x19e1a5(0x16e)](_0x19e1a5(0x1af)+_0x40972d[_0x19e1a5(0x183)]+_0x19e1a5(0x19f),function(_0x42e488,_0x27fe7f){const _0x52558c=_0x19e1a5;if(_0x42e488){logger['info'](_0x52558c(0x1c4)+_0x42e488);throw _0x42e488;}_0x1c67da(_0x40972d,_0x52558c(0x193),_0x27fe7f,_0x13ab80);}),_0x214c94['readdir'](_0x19e1a5(0x1af)+_0x40972d[_0x19e1a5(0x183)]+'/Blockly/',function(_0x4eca52,_0x394801){const _0x513e35=_0x19e1a5;if(_0x4eca52){logger[_0x513e35(0x1cd)](_0x513e35(0x1cc)+_0x4eca52);throw _0x4eca52;}_0x1c67da(_0x40972d,_0x513e35(0x1b7),_0x394801,_0x13ab80);});};function _0x1c67da(_0x5ede12,_0x4eebda,_0x3b284f,_0x4bd5e0){const _0x255ab8=_0x5315e8;logger[_0x255ab8(0x1cd)]('Retrieving\x20files');_0x4eebda==_0x255ab8(0x1b7)&&_0x3b284f[_0x255ab8(0x1b6)]==0x0&&_0x4bd5e0[_0x255ab8(0x18d)]();for(var _0x1b5f60=0x0;_0x1b5f60<_0x3b284f[_0x255ab8(0x1b6)];_0x1b5f60++){let _0x3f8e2d='/home/c3/FusionFilesystem/'+_0x5ede12[_0x255ab8(0x183)]+'/'+_0x4eebda+'/'+_0x3b284f[_0x1b5f60][_0x255ab8(0x1ad)],_0x4ebf0e=_0x255ab8(0x1dc)+_0x5ede12[_0x255ab8(0x183)]+'/'+_0x4eebda+'/';logger[_0x255ab8(0x1cd)]('Moving:\x20'+_0x3f8e2d+_0x255ab8(0x1c6)+_0x4ebf0e),SCP['scp']('c3:root@172.16.0.1:'+_0x3f8e2d,_0x4ebf0e,function(_0x1826fc){const _0x2bbd77=_0x255ab8;_0x1826fc&&logger['info']('Error\x20downloading:\x20'+_0x3f8e2d+_0x2bbd77(0x1a6)+_0x1826fc),_0x4eebda==_0x2bbd77(0x1b7)&&(_0x1b5f60=_0x3b284f[_0x2bbd77(0x1b6)]-0x1)&&_0x4bd5e0['end']();});}};}();