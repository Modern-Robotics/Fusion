const _0x1710=['securityanswer','fastGet','LOGIN.MULTIUSER_DENIED','Error\x20communicating\x20with\x20c3:\x20','connectedClients','Error\x20creating\x20editor\x20directory:\x20','unshift','Uploaded\x20','params','firstname','Remote\x20mtime:\x20','findOne','email','name','create','User\x20Unauthenticated','Retrieving\x20files','body','User\x20does\x20not\x20exist','/api/users','fusion_program_running','Classroom\x20file\x20system\x20created','removeFileSystem','User_Id','info','mkdir','local-signup','readdir','Error\x20downloading:\x20','path','filename','message','\x22\x20newer,\x20updating\x20classroom\x20version','end','Error','attrs','sftp','Login\x20Successful','exec','length','local-recovery','Another\x20user\x20is\x20already\x20logged\x20in.','logIn','lastname','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','socketId','Classroom\x20file\x20system\x20found','ssh2','stringify','/api/recovery','User\x27s\x20editor\x20directory\x20found','\x20not\x20a\x20common\x20file!','../../global/fusionSettings','User\x27s\x20editor\x20directory\x20created','/api/users/:User_Id','Error\x20downloading\x20file:\x20','/api/users/logout','SocketVariables','Error\x20with\x20request\x20promise.\x20','Editor\x20directory\x20created','/api/users/cloudLogin','securityquestion','Error\x20creating\x20user\x20file\x20system:\x20','../../utils/logger','10.200.200.1','Blockly','User','../../models/user','Local\x20Path:\x20','../../fusionProgram','root','Blockly\x20directory\x20created','language','save','put','REGISTER.CREATED','post','Error\x20downloading\x20classroom\x20files\x20for\x20','json','connect','scp','Error\x20reading\x20classroom\x20editor\x20files:\x20','Admin','logout','Local\x20\x22','Editor','delete','Remote\x20path:\x20','User\x27s\x20blockly\x20directory\x20found','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','User\x27s\x20classroom\x20file\x20system\x20found','Guest','/api/recovery/:User_Id','app/filesystem/','Local\x20mtime:\x20','generateHash','Error:\x20','password','Retrieved\x20','LOGIN.SUCCESS','User\x20updated!','floor','Error\x20creating\x20blockly\x20directory:\x20','push','find','connected','/api/users/login','KillProgram','/Editor/','filepath','mtimeMs','/Blockly','defaultprogramminglanguage','Getting\x20data\x20for\x20','get','Error\x20reading\x20user\x20file\x20system:\x20','status','Client','Logged\x20out\x20successfully','username','mtime','User\x27s\x20classroom\x20file\x20system\x20created','trim','toLowerCase','/Blockly/','user','usergroup','local-login','Error\x20reading\x20classroom\x20blockly\x20files:\x20','stat','\x20to\x20','/home/c3/FusionFilesystem/','authenticate','send','User\x20c3\x20directory\x20created','MultiUserAccess','Remote\x20\x22','../../express','../../classroom/connection','\x22\x20newer,\x20updating\x20local\x20version'];(function(_0x2dec1e,_0x171001){const _0x105628=function(_0x5435ce){while(--_0x5435ce){_0x2dec1e['push'](_0x2dec1e['shift']());}};_0x105628(++_0x171001);}(_0x1710,0x70));const _0x1056=function(_0x2dec1e,_0x171001){_0x2dec1e=_0x2dec1e-0x0;let _0x105628=_0x1710[_0x2dec1e];return _0x105628;};var SCP=require('scp2');var SSH=require(_0x1056('0x4b'))[_0x1056('0x5')];var fs=require('fs-extra');var path=require(_0x1056('0x39'));var rp=require('request-promise');const classroomConnection=require(_0x1056('0x1a'));const logger=require(_0x1056('0x5b'));const app=require(_0x1056('0x19'));const User=require(_0x1056('0x5f'));const passport=require('passport');const FusionSettings=require(_0x1056('0x50'));const fusionProgram=require(_0x1056('0x61'));module['exports']=function(){app[_0x1056('0x2')](_0x1056('0x2f'),_0x3cb3d3(),function(_0x518f1c,_0x268a04){User[_0x1056('0x84')]({'usergroup':{'$ne':_0x1056('0x77')}},function(_0x3f2545,_0x268bae){if(_0x3f2545)_0x268a04[_0x1056('0x15')](_0x3f2545);_0x268a04[_0x1056('0x6a')](_0x268bae);});});app[_0x1056('0x68')](_0x1056('0x2f'),function(_0x610caa,_0x355cd4,_0x58212d){passport['authenticate'](_0x1056('0x36'),async function(_0x55ee30,_0x1e10f3,_0x3316e8){if(_0x55ee30)return _0x355cd4['status'](0x1f4)['send'](_0x55ee30);if(_0x3316e8&&_0x3316e8[_0x1056('0x3b')])return _0x355cd4[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x610caa['__'](_0x3316e8['message']));if(FusionSettings[_0x1056('0x17')]){if(classroomConnection['connected']){await _0x1403a7(_0x1e10f3);}_0x610caa[_0x1056('0x46')](_0x1e10f3,function(_0xe4d2dc){if(_0xe4d2dc){return _0x58212d(_0xe4d2dc);}_0x55826e(_0x610caa[_0x1056('0x2d')]['socketId'],_0x1e10f3);return _0x355cd4[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x610caa['__'](_0x1056('0x67')),'user':_0x1e10f3});});}else{if(_0x4891a0()==0x0){_0x55826e(_0x610caa['body'][_0x1056('0x49')],_0x1e10f3);if(classroomConnection['connected']){await _0x1403a7(_0x1e10f3);}_0x610caa[_0x1056('0x46')](_0x1e10f3,function(_0x3fbb6a){if(_0x3fbb6a){return _0x58212d(_0x3fbb6a);}_0x55826e(_0x610caa['body'][_0x1056('0x49')],_0x1e10f3);return _0x355cd4['status'](0xc8)['json']({'serverMessage':_0x610caa['__'](_0x1056('0x67')),'user':_0x1e10f3});});}else{return _0x355cd4[_0x1056('0x4')](0x1f4)['send'](_0x610caa['__'](_0x1056('0x48')));}}})(_0x610caa,_0x355cd4,_0x58212d);});app[_0x1056('0x68')](_0x1056('0x2f'),passport[_0x1056('0x14')](_0x1056('0x36'),{'session':!![]}),function(_0x4d66e5,_0x16b0b4){if(_0x4d66e5['user'][_0x1056('0x3e')]){return _0x16b0b4[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x4d66e5[_0x1056('0xd')][_0x1056('0x3e')]);}else{}});app[_0x1056('0x2')](_0x1056('0x52'),_0x3cb3d3(),function(_0x21ca40,_0x1658ac){User[_0x1056('0x27')]({'username':_0x21ca40['params']['User_Id'][_0x1056('0xb')]()['trim']()},function(_0x31e1bc,_0x422520){if(_0x31e1bc)_0x1658ac[_0x1056('0x15')](_0x31e1bc);_0x1658ac[_0x1056('0x6a')](_0x422520);});});app[_0x1056('0x66')](_0x1056('0x52'),_0x3cb3d3(),function(_0x1c1ac9,_0x3d6fc6){User[_0x1056('0x27')]({'username':_0x1c1ac9[_0x1056('0x24')][_0x1056('0x33')][_0x1056('0xb')]()[_0x1056('0xa')]()},function(_0x244074,_0x4d44ef){if(_0x244074)_0x3d6fc6['send'](_0x244074);if(_0x1c1ac9['body'][_0x1056('0x7d')]){_0x4d44ef[_0x1056('0x7d')]=_0x4d44ef[_0x1056('0x7b')](_0x1c1ac9['body'][_0x1056('0x7d')]);}if(_0x1c1ac9['body'][_0x1056('0x25')]){_0x4d44ef[_0x1056('0x25')]=_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x25')];}if(_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x47')]){_0x4d44ef['lastname']=_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x47')];}if(_0x1c1ac9['body']['language']){_0x4d44ef[_0x1056('0x64')]=_0x1c1ac9['body']['language'];}if(_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x28')]){_0x4d44ef[_0x1056('0x28')]=_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x28')];}if(_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x0')]){_0x4d44ef[_0x1056('0x0')]=_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x0')];}if(_0x1c1ac9['body']['securityquestion']){_0x4d44ef[_0x1056('0x59')]=_0x1c1ac9[_0x1056('0x2d')][_0x1056('0x59')];}if(_0x1c1ac9[_0x1056('0x2d')]['securityanswer']){_0x4d44ef[_0x1056('0x1c')]=_0x1c1ac9[_0x1056('0x2d')]['securityanswer'];}if(_0x1c1ac9[_0x1056('0x2d')]['usergroup']){_0x4d44ef[_0x1056('0xe')]=_0x1c1ac9[_0x1056('0x2d')]['usergroup'];}_0x4d44ef[_0x1056('0x65')](function(_0x43e8fa){if(_0x43e8fa)_0x3d6fc6[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x43e8fa);_0x3d6fc6[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x1056('0x80')});});});});app[_0x1056('0x72')](_0x1056('0x52'),_0x3cb3d3(),function(_0x46314b,_0xc0b988){if(_0x46314b['params']['User_Id'][_0x1056('0xb')]()['trim']()==_0x46314b[_0x1056('0xd')][_0x1056('0x7')]){if(FusionSettings['SocketVariables'][_0x1056('0x30')])if(FusionSettings[_0x1056('0x55')][_0x1056('0x30')][_0x1056('0x5e')]==_0x46314b[_0x1056('0xd')][_0x1056('0x7')])fusionProgram[_0x1056('0x87')]();_0x4673e1(_0x46314b['user']['username']);_0x46314b[_0x1056('0x6f')]();}User['remove']({'username':_0x46314b['params']['User_Id'][_0x1056('0xb')]()[_0x1056('0xa')]()},function(_0x5dbd27,_0x4bee2a){if(_0x5dbd27)return _0xc0b988['send'](_0x5dbd27);User[_0x1056('0x32')](_0x46314b[_0x1056('0x24')][_0x1056('0x33')]['toLowerCase']()[_0x1056('0xa')]());return _0xc0b988['status'](0xc8)[_0x1056('0x6a')]({'serverMessage':'Successfully\x20deleted'});});});app[_0x1056('0x68')](_0x1056('0x86'),function(_0x4d1eeb,_0x7313f5,_0x19e92d){passport[_0x1056('0x14')](_0x1056('0xf'),async function(_0x589bea,_0x120ad,_0x367cc3){if(_0x589bea)return _0x7313f5[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x4d1eeb['__'](_0x589bea[_0x1056('0x3b')]));if(!_0x120ad)return _0x7313f5[_0x1056('0x4')](0x191)['send'](_0x4d1eeb['__'](_0x367cc3[_0x1056('0x3b')]));if(FusionSettings[_0x1056('0x17')]){if(classroomConnection[_0x1056('0x85')]){await _0x1403a7(_0x120ad);}_0x4d1eeb[_0x1056('0x46')](_0x120ad,function(_0x428bb4){if(_0x428bb4){return _0x19e92d(_0x428bb4);}_0x55826e(_0x4d1eeb['body'][_0x1056('0x49')],_0x120ad);return _0x7313f5[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x4d1eeb['__'](_0x1056('0x7f')),'user':_0x120ad});});}else{if(_0x4891a0()==0x0){_0x55826e(_0x4d1eeb[_0x1056('0x2d')][_0x1056('0x49')],_0x120ad);if(classroomConnection[_0x1056('0x85')]){await _0x1403a7(_0x120ad);}_0x4d1eeb[_0x1056('0x46')](_0x120ad,function(_0x1ca474){if(_0x1ca474){return _0x19e92d(_0x1ca474);}_0x55826e(_0x4d1eeb[_0x1056('0x2d')][_0x1056('0x49')],_0x120ad);return _0x7313f5['status'](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x4d1eeb['__'](_0x1056('0x7f')),'user':_0x120ad});});}else{return _0x7313f5[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x4d1eeb['__'](_0x1056('0x1e')));}}})(_0x4d1eeb,_0x7313f5,_0x19e92d);});app[_0x1056('0x68')](_0x1056('0x58'),async function(_0x41b313,_0x2fd4e1){logger['info']('in\x20cloud\x20login');var _0x3a9de4={'method':'POST','uri':'https://172.16.0.1/backend/auth/ldap','body':{'username':_0x41b313[_0x1056('0x2d')][_0x1056('0x7')],'password':_0x41b313['body'][_0x1056('0x7d')]},'json':!![],'rejectUnauthorized':![]};try{let _0x40d9e2=await rp(_0x3a9de4);let _0x452067=await User[_0x1056('0x27')]({'username':_0x41b313[_0x1056('0x2d')][_0x1056('0x7')]})[_0x1056('0x42')]();if(_0x452067){return _0x2fd4e1[_0x1056('0x4')](0xc8)[_0x1056('0x15')]('login');}else{return _0x2fd4e1['status'](0xc8)['send'](_0x1056('0x2a'));}}catch(_0x11cb85){logger[_0x1056('0x34')](_0x1056('0x56')+_0x11cb85);return _0x2fd4e1[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x11cb85);}});app[_0x1056('0x68')](_0x1056('0x54'),_0x3cb3d3(),function(_0x46cdfb,_0x2079c5){if(FusionSettings[_0x1056('0x55')][_0x1056('0x30')])if(FusionSettings[_0x1056('0x55')][_0x1056('0x30')][_0x1056('0x5e')]==_0x46cdfb[_0x1056('0xd')]['username'])fusionProgram[_0x1056('0x87')]();_0x6f952(_0x46cdfb[_0x1056('0x2d')][_0x1056('0x49')]);_0x46cdfb[_0x1056('0x6f')]();_0x2079c5[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x1056('0x6')});});app[_0x1056('0x2')](_0x1056('0x78'),function(_0x139624,_0x44a409){User[_0x1056('0x27')]({'username':_0x139624[_0x1056('0x24')][_0x1056('0x33')][_0x1056('0xb')]()[_0x1056('0xa')]()},function(_0x453fea,_0x49df9f){if(_0x453fea)return _0x44a409[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x453fea);if(!_0x49df9f)return _0x44a409[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x1056('0x2e'));else return _0x44a409[_0x1056('0x4')](0xc8)[_0x1056('0x6a')](_0x49df9f[_0x1056('0x59')]);});});app[_0x1056('0x68')](_0x1056('0x4d'),passport[_0x1056('0x14')](_0x1056('0x44'),{'session':!![]}),function(_0x17c820,_0x276095){if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x1056('0x85')]){_0x1403a7(_0x17c820[_0x1056('0xd')]);}_0x55826e(_0x17c820[_0x1056('0x2d')][_0x1056('0x49')],_0x17c820[_0x1056('0xd')]);return _0x276095[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x1056('0x41'),'user':_0x17c820[_0x1056('0xd')]});}else{if(_0x4891a0()==0x0){_0x55826e(_0x17c820[_0x1056('0x2d')]['socketId'],_0x17c820[_0x1056('0xd')]);if(classroomConnection[_0x1056('0x85')]){_0x1403a7(_0x17c820[_0x1056('0xd')]);}return _0x276095[_0x1056('0x4')](0xc8)[_0x1056('0x6a')]({'serverMessage':_0x1056('0x41'),'user':_0x17c820[_0x1056('0xd')]});}else{_0x17c820['logout']();return _0x276095[_0x1056('0x4')](0x1f4)[_0x1056('0x15')](_0x1056('0x45'));}}});app[_0x1056('0x2')]('/api/allowedUserGroups',function(_0x48046e,_0x5bf859){var _0x9f7516=[_0x1056('0x5e')];User[_0x1056('0x27')]({'usergroup':_0x1056('0x6e')},function(_0x15f224,_0x221ec9){if(_0x15f224)return _0x5bf859[_0x1056('0x4')](0xc8)[_0x1056('0x15')](_0x9f7516);if(!_0x221ec9)_0x9f7516[_0x1056('0x22')]('Admin');return _0x5bf859[_0x1056('0x4')](0xc8)['send'](_0x9f7516);});});function _0x4891a0(){var _0x25c0aa=0x0;for(var _0x280e6e=0x0;_0x280e6e<FusionSettings[_0x1056('0x20')]['length'];_0x280e6e++){if(FusionSettings[_0x1056('0x20')][_0x280e6e][_0x1056('0x5e')]){_0x25c0aa++;}}return _0x25c0aa;}function _0x55826e(_0x398228,_0x2cc313){for(var _0x25b35c=0x0;_0x25b35c<FusionSettings['connectedClients'][_0x1056('0x43')];_0x25b35c++){if(FusionSettings[_0x1056('0x20')][_0x25b35c]['id']==_0x398228){FusionSettings[_0x1056('0x20')][_0x25b35c][_0x1056('0x5e')]=_0x2cc313;break;}}}function _0x6f952(_0x45d6d6){for(var _0x294692=0x0;_0x294692<FusionSettings['connectedClients']['length'];_0x294692++){if(FusionSettings['connectedClients'][_0x294692]['id']==_0x45d6d6){FusionSettings[_0x1056('0x20')][_0x294692][_0x1056('0x5e')]=undefined;break;}}}function _0x4673e1(_0x2c8ce7){for(var _0x5642b1=0x0;_0x5642b1<FusionSettings['connectedClients'][_0x1056('0x43')];_0x5642b1++){if(FusionSettings['connectedClients'][_0x5642b1][_0x1056('0x5e')][_0x1056('0x7')]==_0x2c8ce7){FusionSettings[_0x1056('0x20')][_0x5642b1][_0x1056('0x5e')]=undefined;break;}}}function _0x3cb3d3(){return function(_0x449634,_0xf2489f,_0x3d9559){if(_0x449634['isAuthenticated']()){return _0x3d9559();}else{return _0xf2489f[_0x1056('0x4')](0x191)['send'](_0x1056('0x2b'));}};}async function _0x1403a7(_0x39b21f){try{await _0x13a4d0(_0x39b21f);}catch(_0x7aa3ef){logger[_0x1056('0x34')](_0x7aa3ef);logger[_0x1056('0x34')](_0x1056('0x69')+_0x39b21f['username']);}};function _0x13a4d0(_0x5be219){return new Promise(function(_0x32bfcb,_0xa75917){var _0x50f0bf=new SSH();_0x50f0bf['on']('ready',function(){_0x50f0bf[_0x1056('0x40')](async function(_0x6c7a32,_0x488407){if(_0x6c7a32){logger[_0x1056('0x34')](_0x1056('0x1f')+_0x6c7a32);_0x50f0bf[_0x1056('0x3d')]();return _0xa75917(_0x6c7a32);}try{await _0x263411(_0x488407);await _0x4e38aa(_0x488407,_0x5be219[_0x1056('0x7')]);await _0x3cec0d(_0x488407,_0x5be219[_0x1056('0x7')]);await _0x22486a(_0x488407,_0x5be219[_0x1056('0x7')]);let _0x5e6c88=await _0x26a9ed(_0x488407,_0x5be219['username']);logger[_0x1056('0x34')](JSON['stringify'](_0x5e6c88));let _0x341fbb=await _0x30fa1a(_0x5be219[_0x1056('0x89')]);logger[_0x1056('0x34')](JSON[_0x1056('0x4c')](_0x341fbb));await _0x23434b(_0x488407,_0x5be219,_0x5e6c88,_0x341fbb);_0x50f0bf[_0x1056('0x3d')]();return _0x32bfcb();}catch(_0x5e77d8){logger[_0x1056('0x34')](_0x5e77d8);_0x50f0bf['end']();return _0xa75917(_0x5e77d8);}});})[_0x1056('0x6b')]({'host':_0x1056('0x5c'),'port':0x16,'username':'c3','password':_0x1056('0x62')});});};function _0x263411(_0xa25f7f){return new Promise(function(_0x3c6da8,_0x460013){_0xa25f7f['readdir'](_0x1056('0x13'),function(_0x1bf396){if(_0x1bf396){_0xa25f7f[_0x1056('0x35')](_0x1056('0x13'),function(_0x4eb405){if(_0x4eb405){return _0x460013('Error\x20creating\x20classroom\x20file\x20system:\x20'+_0x4eb405);}else{logger[_0x1056('0x34')](_0x1056('0x31'));return _0x3c6da8();}});}else{logger[_0x1056('0x34')](_0x1056('0x4a'));return _0x3c6da8();}});});};function _0x4e38aa(_0x143e97,_0x1cd7ec){return new Promise(function(_0x135afc,_0x288c79){_0x143e97[_0x1056('0x37')](_0x1056('0x13')+_0x1cd7ec,function(_0x14cbef){if(_0x14cbef){_0x143e97[_0x1056('0x35')](_0x1056('0x13')+_0x1cd7ec,function(_0x430609){if(_0x430609){return _0x288c79('Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20'+_0x430609);}else{logger[_0x1056('0x34')](_0x1056('0x9'));return _0x135afc();}});}else{logger[_0x1056('0x34')](_0x1056('0x76'));return _0x135afc();}});});};function _0x3cec0d(_0x3a7a3e,_0x4c87ee){return new Promise(function(_0x2f3908,_0x45544b){_0x3a7a3e['readdir'](_0x1056('0x13')+_0x4c87ee+'/Editor/',function(_0x554688){if(_0x554688){_0x3a7a3e[_0x1056('0x35')]('/home/c3/FusionFilesystem/'+_0x4c87ee+_0x1056('0x88'),function(_0x27633b){if(_0x27633b){return _0x45544b('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x27633b);}else{logger['info'](_0x1056('0x51'));return _0x2f3908();}});}else{logger['info'](_0x1056('0x4e'));return _0x2f3908();}});});};function _0x22486a(_0x46af85,_0x3d5887){return new Promise(function(_0x41a214,_0x32f10e){_0x46af85[_0x1056('0x37')](_0x1056('0x13')+_0x3d5887+_0x1056('0xc'),function(_0x1d5062){if(_0x1d5062){_0x46af85[_0x1056('0x35')](_0x1056('0x13')+_0x3d5887+_0x1056('0xc'),function(_0x3ea398){if(_0x3ea398){return _0x32f10e(_0x1056('0x75')+_0x3ea398);}else{logger[_0x1056('0x34')]('User\x27s\x20blockly\x20directory\x20created');return _0x41a214();}});}else{logger[_0x1056('0x34')](_0x1056('0x74'));return _0x41a214();}});});};function _0x26a9ed(_0x32685f,_0x129da5){return new Promise(async function(_0x7c385b,_0x2c161f){try{let _0x40473c={};_0x40473c[_0x1056('0x71')]=await _0x5ecf94(_0x32685f,_0x129da5);_0x40473c['Blockly']=await _0x19ea48(_0x32685f,_0x129da5);return _0x7c385b(_0x40473c);}catch(_0x287010){return _0x2c161f(_0x287010);}});};function _0x5ecf94(_0x79b9cb,_0x2cb7c9){return new Promise(function(_0x233ec5,_0x51998a){_0x79b9cb[_0x1056('0x37')]('/home/c3/FusionFilesystem/'+_0x2cb7c9+'/Editor/',function(_0x3c091e,_0x4123c5){if(_0x3c091e)return _0x51998a(_0x3c091e);let _0x6fd117=[];for(let _0x317e3e=0x0;_0x317e3e<_0x4123c5['length'];_0x317e3e++){logger[_0x1056('0x34')]('Getting\x20data\x20for\x20'+_0x4123c5[_0x317e3e]['filename']);_0x6fd117[_0x1056('0x83')](_0x4123c5[_0x317e3e]);}return _0x233ec5(_0x6fd117);});});};function _0x19ea48(_0x4de051,_0x40dacb){return new Promise(function(_0x277c0e,_0x52d315){_0x4de051[_0x1056('0x37')](_0x1056('0x13')+_0x40dacb+_0x1056('0xc'),function(_0x53dcc3,_0x1ec54a){if(_0x53dcc3)return _0x52d315(_0x53dcc3);let _0x953b25=[];for(let _0x3681d3=0x0;_0x3681d3<_0x1ec54a[_0x1056('0x43')];_0x3681d3++){logger[_0x1056('0x34')](_0x1056('0x1')+_0x1ec54a[_0x3681d3][_0x1056('0x3a')]);_0x953b25[_0x1056('0x83')](_0x1ec54a[_0x3681d3]);}return _0x277c0e(_0x953b25);});});};function _0x30fa1a(_0xe861b6){return new Promise(async function(_0x589b97,_0x201b36){try{let _0x12b392={};_0x12b392['Editor']=await _0x4bb6e4(_0xe861b6);_0x12b392[_0x1056('0x5d')]=await _0x53d868(_0xe861b6);return _0x589b97(_0x12b392);}catch(_0x453d9e){return _0x201b36(_0x453d9e);}});};function _0x4bb6e4(_0x209ec2){return new Promise(async function(_0x8b1f27,_0x5bea2e){try{let _0x4e244d=[];let _0x2b2607=await fs[_0x1056('0x37')](_0x209ec2+'/Editor');for(let _0x4a22ab=0x0;_0x4a22ab<_0x2b2607[_0x1056('0x43')];_0x4a22ab++){logger['info'](_0x1056('0x1')+_0x2b2607[_0x4a22ab]);let _0x3f2418=await fs['stat'](_0x209ec2+_0x1056('0x88')+_0x2b2607[_0x4a22ab]);_0x3f2418['name']=_0x2b2607[_0x4a22ab];_0x4e244d['push'](_0x3f2418);}return _0x8b1f27(_0x4e244d);}catch(_0x26370d){return _0x5bea2e(_0x26370d);}});};function _0x53d868(_0x89a192){return new Promise(async function(_0xf21d01,_0x3dfd71){try{let _0x500aec=[];let _0x9b04b9=await fs[_0x1056('0x37')](_0x89a192+_0x1056('0x8b'));for(let _0x542740=0x0;_0x542740<_0x9b04b9[_0x1056('0x43')];_0x542740++){logger['info']('Getting\x20data\x20for\x20'+_0x9b04b9[_0x542740]);let _0x29ed93=await fs[_0x1056('0x11')](_0x89a192+'/Blockly/'+_0x9b04b9[_0x542740]);_0x29ed93[_0x1056('0x29')]=_0x9b04b9[_0x542740];_0x500aec[_0x1056('0x83')](_0x29ed93);}return _0xf21d01(_0x500aec);}catch(_0x2f2503){return _0x3dfd71(_0x2f2503);}});};function _0x23434b(_0x116228,_0x38c955,_0x38769d,_0x17edfe){return new Promise(async function(_0x14350f,_0xfbfbe7){try{for(let _0x4b9a1e=0x0;_0x4b9a1e<_0x38769d[_0x1056('0x71')][_0x1056('0x43')];_0x4b9a1e++){let _0x2eaee8=![];for(let _0x5892d7=0x0;_0x5892d7<_0x17edfe['Editor']['length'];_0x5892d7++){if(_0x17edfe[_0x1056('0x71')][_0x5892d7][_0x1056('0x29')]==_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3a')]){logger[_0x1056('0x34')]('Local\x20mtime:\x20'+Math[_0x1056('0x81')](_0x17edfe[_0x1056('0x71')][_0x5892d7][_0x1056('0x8a')]/0x3e8));logger[_0x1056('0x34')](_0x1056('0x26')+_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3f')][_0x1056('0x8')]);if(Math[_0x1056('0x81')](_0x17edfe[_0x1056('0x71')][_0x5892d7][_0x1056('0x8a')]/0x3e8)>_0x38769d[_0x1056('0x71')][_0x4b9a1e]['attrs'][_0x1056('0x8')]){_0x2eaee8=!![];logger[_0x1056('0x34')]('Local\x20\x22'+_0x17edfe['Editor'][_0x5892d7]['name']+_0x1056('0x3c'));try{await _0x2cbcf1(_0x116228,_0x38c955,_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3a')],_0x1056('0x71'));}catch(_0x2bf312){return _0xfbfbe7(_0x2bf312);}break;}else{_0x2eaee8=!![];logger['info'](_0x1056('0x18')+_0x17edfe['Editor'][_0x5892d7][_0x1056('0x29')]+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x3775d6(_0x116228,_0x38c955,_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3a')],_0x1056('0x71'));}catch(_0x50689e){logger[_0x1056('0x34')](_0x1056('0x7c')+_0x50689e);return _0xfbfbe7(_0x50689e);}break;}}}if(!_0x2eaee8){logger[_0x1056('0x34')](_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3a')]+_0x1056('0x4f'));try{await _0x3775d6(_0x116228,_0x38c955,_0x38769d[_0x1056('0x71')][_0x4b9a1e][_0x1056('0x3a')],_0x1056('0x71'));}catch(_0x3dac0e){return _0xfbfbe7(_0x3dac0e);}}}for(let _0x100967=0x0;_0x100967<_0x38769d[_0x1056('0x5d')][_0x1056('0x43')];_0x100967++){let _0x393004=![];for(let _0x16ab08=0x0;_0x16ab08<_0x17edfe['Blockly'][_0x1056('0x43')];_0x16ab08++){if(_0x17edfe[_0x1056('0x5d')][_0x16ab08][_0x1056('0x29')]==_0x38769d[_0x1056('0x5d')][_0x100967]['filename']){logger['info'](_0x1056('0x7a')+Math['floor'](_0x17edfe[_0x1056('0x5d')][_0x16ab08]['mtimeMs']/0x3e8));logger['info'](_0x1056('0x26')+_0x38769d[_0x1056('0x5d')][_0x100967][_0x1056('0x3f')][_0x1056('0x8')]);if(Math[_0x1056('0x81')](_0x17edfe[_0x1056('0x5d')][_0x16ab08][_0x1056('0x8a')]/0x3e8)>_0x38769d['Blockly'][_0x100967][_0x1056('0x3f')]['mtime']){_0x393004=!![];logger[_0x1056('0x34')](_0x1056('0x70')+_0x17edfe[_0x1056('0x5d')][_0x16ab08][_0x1056('0x29')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x2cbcf1(_0x116228,_0x38c955,_0x38769d[_0x1056('0x5d')][_0x100967][_0x1056('0x3a')],'Blockly');}catch(_0x6cc7d1){return _0xfbfbe7(_0x6cc7d1);}break;}else{_0x393004=!![];logger['info']('Remote\x20\x22'+_0x17edfe[_0x1056('0x5d')][_0x16ab08][_0x1056('0x29')]+_0x1056('0x1b'));try{await _0x3775d6(_0x116228,_0x38c955,_0x38769d[_0x1056('0x5d')][_0x100967][_0x1056('0x3a')],_0x1056('0x5d'));}catch(_0x52e659){logger['info'](_0x1056('0x7c')+_0x52e659);return _0xfbfbe7(_0x52e659);}break;}}}if(!_0x393004){logger[_0x1056('0x34')](_0x38769d[_0x1056('0x5d')][_0x100967][_0x1056('0x3a')]+'\x20not\x20a\x20common\x20file!');try{await _0x3775d6(_0x116228,_0x38c955,_0x38769d['Blockly'][_0x100967][_0x1056('0x3a')],_0x1056('0x5d'));}catch(_0x4d7e8f){return _0xfbfbe7(_0x4d7e8f);}}}return _0x14350f();}catch(_0x3b5c7d){return _0xfbfbe7(_0x3b5c7d);}});};function _0x2cbcf1(_0x3a4b4a,_0x3eddd3,_0x4b25e7,_0x313aef){return new Promise((_0x484451,_0x2c86dc)=>{try{let _0x219011='/home/c3/FusionFilesystem/'+_0x3eddd3[_0x1056('0x7')]+'/'+_0x313aef+'/'+_0x4b25e7;let _0x241af6=_0x3eddd3[_0x1056('0x89')]+'/'+_0x313aef+'/'+_0x4b25e7;logger[_0x1056('0x34')]('Remote\x20path:\x20'+_0x219011);logger['info'](_0x1056('0x60')+_0x241af6);_0x3a4b4a['fastPut'](_0x241af6,_0x219011,{},function(_0xf71875){if(_0xf71875){logger[_0x1056('0x34')]('Error\x20uploading\x20file:\x20'+_0x4b25e7);return _0x2c86dc(_0xf71875);}logger[_0x1056('0x34')](_0x1056('0x23')+_0x4b25e7);return _0x484451();});}catch(_0x58ff22){return _0x2c86dc(_0x58ff22);}});};function _0x3775d6(_0x281d62,_0x4e27f4,_0x1a209b,_0x19cd95){return new Promise((_0xfc75a,_0x3e98f0)=>{try{let _0x2ed209=_0x1056('0x13')+_0x4e27f4['username']+'/'+_0x19cd95+'/'+_0x1a209b;let _0x4ff21f=_0x4e27f4[_0x1056('0x89')]+'/'+_0x19cd95+'/'+_0x1a209b;logger[_0x1056('0x34')](_0x1056('0x73')+_0x2ed209);logger[_0x1056('0x34')]('Local\x20Path:\x20'+_0x4ff21f);_0x281d62[_0x1056('0x1d')](_0x2ed209,_0x4ff21f,{},function(_0x29ef90){if(_0x29ef90){logger[_0x1056('0x34')](_0x1056('0x53')+_0x1a209b);return _0x3e98f0(_0x29ef90);}logger['info'](_0x1056('0x7e')+_0x1a209b);return _0xfc75a();});}catch(_0x420715){return _0x3e98f0(_0x420715);}});};function _0xa50421(_0x12ca9f,_0x39b15b,_0x526377,_0x2f3bfd){_0x12ca9f[_0x1056('0x37')](_0x1056('0x13')+_0x39b15b[_0x1056('0x7')],function(_0x2c16cd){if(_0x2c16cd){logger[_0x1056('0x34')](_0x1056('0x3')+_0x2c16cd);_0x12ca9f[_0x1056('0x35')](_0x1056('0x13')+_0x39b15b[_0x1056('0x7')],function(_0x48ecff){if(_0x48ecff){logger['info'](_0x1056('0x5a')+_0x48ecff);throw _0x48ecff;}logger['info'](_0x1056('0x16'));_0x12ca9f[_0x1056('0x35')](_0x1056('0x13')+_0x39b15b['username']+_0x1056('0x88'),function(_0x3fa064){if(_0x3fa064){logger['info'](_0x1056('0x21')+_0x3fa064);throw _0x3fa064;}logger['info'](_0x1056('0x57'));_0x12ca9f[_0x1056('0x35')]('/home/c3/FusionFilesystem/'+_0x39b15b[_0x1056('0x7')]+_0x1056('0xc'),function(_0x4245cc){if(_0x4245cc){logger[_0x1056('0x34')](_0x1056('0x82')+_0x4245cc);throw _0x4245cc;}logger[_0x1056('0x34')](_0x1056('0x63'));_0x2f3bfd(_0x12ca9f,_0x39b15b,_0x526377);});});});}_0x2f3bfd(_0x12ca9f,_0x39b15b,_0x526377);});};function _0x1607af(_0x463803,_0x17ba24,_0x25173f){_0x463803[_0x1056('0x37')](_0x1056('0x13')+_0x17ba24[_0x1056('0x7')]+_0x1056('0x88'),function(_0xede2ac,_0x1e565){if(_0xede2ac){logger[_0x1056('0x34')](_0x1056('0x6d')+_0xede2ac);throw _0xede2ac;}_0x373da3(_0x17ba24,_0x1056('0x71'),_0x1e565,_0x25173f);});_0x463803[_0x1056('0x37')](_0x1056('0x13')+_0x17ba24[_0x1056('0x7')]+_0x1056('0xc'),function(_0x6c4ca8,_0x54f4c1){if(_0x6c4ca8){logger[_0x1056('0x34')](_0x1056('0x10')+_0x6c4ca8);throw _0x6c4ca8;}_0x373da3(_0x17ba24,_0x1056('0x5d'),_0x54f4c1,_0x25173f);});};function _0x373da3(_0x5f5541,_0x5236a8,_0x526f22,_0x2daeb3){logger[_0x1056('0x34')](_0x1056('0x2c'));if(_0x5236a8==_0x1056('0x5d')&&_0x526f22['length']==0x0){_0x2daeb3[_0x1056('0x3d')]();}for(var _0x5cbe14=0x0;_0x5cbe14<_0x526f22['length'];_0x5cbe14++){let _0x550fed=_0x1056('0x13')+_0x5f5541[_0x1056('0x7')]+'/'+_0x5236a8+'/'+_0x526f22[_0x5cbe14][_0x1056('0x3a')];let _0x5cc813=_0x1056('0x79')+_0x5f5541[_0x1056('0x7')]+'/'+_0x5236a8+'/';logger[_0x1056('0x34')]('Moving:\x20'+_0x550fed+_0x1056('0x12')+_0x5cc813);SCP[_0x1056('0x6c')]('c3:root@172.16.0.1:'+_0x550fed,_0x5cc813,function(_0x3d1e9d){if(_0x3d1e9d){logger[_0x1056('0x34')](_0x1056('0x38')+_0x550fed+',\x20error:\x20'+_0x3d1e9d);}if(_0x5236a8==_0x1056('0x5d')&&(_0x5cbe14=_0x526f22[_0x1056('0x43')]-0x1)){_0x2daeb3[_0x1056('0x3d')]();}});}};}();