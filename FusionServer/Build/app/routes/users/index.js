const _0x296b=['findOne','Error\x20reading\x20user\x20file\x20system:\x20','request-promise','filepath','Editor','fastGet','https://172.16.0.1/backend/auth/ldap','User\x27s\x20blockly\x20directory\x20created','stat','../../models/user','Error\x20downloading\x20classroom\x20files\x20for\x20','Error\x20reading\x20classroom\x20blockly\x20files:\x20','Classroom\x20file\x20system\x20created','Attempting\x20classroom\x20login','Error\x20reaching\x20classroom\x20server','lastname','fastPut','exec','verbose','error','logIn','/User/Login','SocketVariables','message','\x22\x20newer,\x20updating\x20classroom\x20version','attrs','fusion_program_running','send','/api/users/logout','logout','User\x27s\x20editor\x20directory\x20found','end','mkdir','User','local-recovery','Guest','socketId','push','Guest\x20login\x20unavailable\x20in\x20classroom\x20mode','generateHash','\x22\x20newer,\x20updating\x20local\x20version','path','post','filename','User_Id','Remote\x20mtime:\x20','get','../../fusionProgram','connect','/Blockly','app/filesystem/','/home/c3/FusionFilesystem/','remove','floor','Error\x20creating\x20blockly\x20directory:\x20','body','/Editor/','c3:root@172.16.0.1:','username','unshift','defaultprogramminglanguage','Getting\x20data\x20for\x20','../../utils/logger','Classroom\x20file\x20system\x20found','debug','Error','Another\x20user\x20is\x20already\x20logged\x20in.','connectedClients','local-login','usergroup','User\x27s\x20editor\x20directory\x20created','sftp','User\x20c3\x20directory\x20created','stringify','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','email','Admin','/Editor','info','Editor\x20directory\x20created','firstname','scp','password','name','\x20not\x20a\x20common\x20file!','toLowerCase','Retrieving\x20files','securityquestion','Error\x20with\x20request\x20promise.\x20','exports','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','local-signup','length','user','/Blockly/','Local\x20mtime:\x20','trim','StatusCodeError','authenticate','/api/users/:User_Id','Error\x20communicating\x20with\x20c3:\x20','securityanswer','language','Local\x20Path:\x20','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','Retrieved\x20','RequestError','Error:\x20','Blockly','mtime','Client','User\x20Unauthenticated','Error\x20uploading\x20file:\x20','/api/users','readdir','Local\x20\x22','172.16.0.1','status','KillProgram','mriguest','delete','put',',\x20error:\x20','root','Remote\x20\x22','scp2','mtimeMs','../../express','Uploaded\x20','Logged\x20out\x20successfully','LOGIN.SUCCESS','Login\x20Successful','connected','User\x27s\x20classroom\x20file\x20system\x20created','params','json','Remote\x20path:\x20','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED'];(function(_0x1e1428,_0x296b21){const _0x3b17df=function(_0x2ddb0e){while(--_0x2ddb0e){_0x1e1428['push'](_0x1e1428['shift']());}};_0x3b17df(++_0x296b21);}(_0x296b,0xe2));const _0x3b17=function(_0x1e1428,_0x296b21){_0x1e1428=_0x1e1428-0x0;let _0x3b17df=_0x296b[_0x1e1428];return _0x3b17df;};var SCP=require(_0x3b17('0x25'));var SSH=require('ssh2')[_0x3b17('0x16')];var fs=require('fs-extra');var path=require(_0x3b17('0x5b'));var rp=require(_0x3b17('0x34'));const classroomConnection=require('../../classroom/connection');const logger=require(_0x3b17('0x70'));const app=require(_0x3b17('0x27'));const User=require(_0x3b17('0x3b'));const passport=require('passport');const FusionSettings=require('../../global/fusionSettings');const fusionProgram=require(_0x3b17('0x61'));module[_0x3b17('0x1')]=function(){app[_0x3b17('0x60')](_0x3b17('0x19'),_0x31dc4c(),function(_0x56a45a,_0x146b6b){User['find']({'usergroup':{'$ne':_0x3b17('0x55')}},function(_0x4c1185,_0x566ad4){if(_0x4c1185)_0x146b6b[_0x3b17('0x4d')](_0x4c1185);_0x146b6b[_0x3b17('0x2f')](_0x566ad4);});});app[_0x3b17('0x5c')]('/api/users',async function(_0xce0d7e,_0x50b78c,_0x2994b4){await _0x40d058(_0xce0d7e,_0x50b78c,_0x2994b4);});async function _0x40d058(_0x87d37d,_0x448454,_0x396322){passport[_0x3b17('0xa')](_0x3b17('0x3'),async function(_0x3a2252,_0x2fb49f,_0x1507d3){if(_0x3a2252)return _0x448454[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x3a2252);if(_0x1507d3&&_0x1507d3['message'])return _0x448454[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x87d37d['__'](_0x1507d3[_0x3b17('0x49')]));if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x3b17('0x2c')]){try{await _0x2c4a28(_0x2fb49f);}catch(_0x35b81f){logger[_0x3b17('0x45')](_0x35b81f);}}_0x87d37d[_0x3b17('0x46')](_0x2fb49f,function(_0x3e93fa){if(_0x3e93fa){return _0x396322(_0x3e93fa);}_0x39b671(_0x87d37d[_0x3b17('0x69')][_0x3b17('0x56')],_0x2fb49f);return _0x448454['status'](0xc8)['json']({'serverMessage':_0x87d37d['__']('REGISTER.CREATED'),'user':_0x2fb49f});});}else{if(_0x3c3022()==0x0){if(classroomConnection[_0x3b17('0x2c')]){try{await _0x2c4a28(_0x2fb49f);}catch(_0x49e8d3){logger[_0x3b17('0x45')](_0x49e8d3);}}_0x87d37d[_0x3b17('0x46')](_0x2fb49f,function(_0x4c2b65){if(_0x4c2b65){return _0x396322(_0x4c2b65);}_0x39b671(_0x87d37d['body'][_0x3b17('0x56')],_0x2fb49f);return _0x448454[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':_0x87d37d['__']('REGISTER.CREATED'),'user':_0x2fb49f});});}else{return _0x448454[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x87d37d['__'](_0x3b17('0x31')));}}})(_0x87d37d,_0x448454,_0x396322);};app[_0x3b17('0x5c')](_0x3b17('0x19'),passport['authenticate'](_0x3b17('0x3'),{'session':!![]}),function(_0x12042b,_0x3ec095){if(_0x12042b[_0x3b17('0x5')][_0x3b17('0x73')]){return _0x3ec095[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x12042b['user'][_0x3b17('0x73')]);}else{}});app[_0x3b17('0x60')](_0x3b17('0xb'),_0x31dc4c(),function(_0x259cb5,_0x43ae91){User[_0x3b17('0x32')]({'username':_0x259cb5[_0x3b17('0x2e')][_0x3b17('0x5e')][_0x3b17('0x87')]()[_0x3b17('0x8')]()},function(_0x49ad7d,_0x49b727){if(_0x49ad7d)_0x43ae91[_0x3b17('0x4d')](_0x49ad7d);_0x43ae91[_0x3b17('0x2f')](_0x49b727);});});app[_0x3b17('0x21')](_0x3b17('0xb'),_0x31dc4c(),function(_0x4be7ec,_0x85269a){User[_0x3b17('0x32')]({'username':_0x4be7ec[_0x3b17('0x2e')][_0x3b17('0x5e')][_0x3b17('0x87')]()[_0x3b17('0x8')]()},function(_0x41ddbf,_0x36b871){if(_0x41ddbf)_0x85269a['send'](_0x41ddbf);if(_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x84')]){_0x36b871[_0x3b17('0x84')]=_0x36b871[_0x3b17('0x59')](_0x4be7ec[_0x3b17('0x69')]['password']);}if(_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x82')]){_0x36b871['firstname']=_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x82')];}if(_0x4be7ec[_0x3b17('0x69')]['lastname']){_0x36b871['lastname']=_0x4be7ec['body'][_0x3b17('0x41')];}if(_0x4be7ec[_0x3b17('0x69')][_0x3b17('0xe')]){_0x36b871[_0x3b17('0xe')]=_0x4be7ec[_0x3b17('0x69')][_0x3b17('0xe')];}if(_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x7d')]){_0x36b871['email']=_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x7d')];}if(_0x4be7ec['body']['defaultprogramminglanguage']){_0x36b871[_0x3b17('0x6e')]=_0x4be7ec['body'][_0x3b17('0x6e')];}if(_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x89')]){_0x36b871['securityquestion']=_0x4be7ec[_0x3b17('0x69')][_0x3b17('0x89')];}if(_0x4be7ec['body'][_0x3b17('0xd')]){_0x36b871[_0x3b17('0xd')]=_0x4be7ec[_0x3b17('0x69')][_0x3b17('0xd')];}if(_0x4be7ec['body']['usergroup']){_0x36b871[_0x3b17('0x77')]=_0x4be7ec['body'][_0x3b17('0x77')];}_0x36b871['save'](function(_0x3e2c82){if(_0x3e2c82)_0x85269a['status'](0x1f4)[_0x3b17('0x4d')](_0x3e2c82);_0x85269a[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':'User\x20updated!'});});});});app[_0x3b17('0x20')]('/api/users/:User_Id',_0x31dc4c(),function(_0x431bd3,_0x3d05ae){if(_0x431bd3['params'][_0x3b17('0x5e')][_0x3b17('0x87')]()[_0x3b17('0x8')]()==_0x431bd3['user'][_0x3b17('0x6c')]){if(FusionSettings[_0x3b17('0x48')][_0x3b17('0x4c')])if(FusionSettings[_0x3b17('0x48')][_0x3b17('0x4c')][_0x3b17('0x53')]==_0x431bd3[_0x3b17('0x5')][_0x3b17('0x6c')])fusionProgram[_0x3b17('0x1e')]();_0x1136b7(_0x431bd3[_0x3b17('0x5')][_0x3b17('0x6c')]);_0x431bd3['logout']();}User[_0x3b17('0x66')]({'username':_0x431bd3[_0x3b17('0x2e')]['User_Id'][_0x3b17('0x87')]()['trim']()},function(_0x29d5ef,_0x419cff){if(_0x29d5ef)return _0x3d05ae[_0x3b17('0x4d')](_0x29d5ef);User['removeFileSystem'](_0x431bd3[_0x3b17('0x2e')]['User_Id'][_0x3b17('0x87')]()[_0x3b17('0x8')]());return _0x3d05ae[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':'Successfully\x20deleted'});});});app['post']('/api/users/login',async(_0x5c37bb,_0x33c733,_0x3d058d)=>{if(!FusionSettings['MultiUserAccess']&&_0x3c3022()>0x0)return _0x33c733['status'](0x1f4)['send'](_0x5c37bb['__']('LOGIN.MULTIUSER_DENIED'));if(!classroomConnection[_0x3b17('0x2c')]){logger['debug']('Attempting\x20standard\x20login');await _0x45e5e4(_0x5c37bb,_0x33c733,_0x3d058d);}else{logger['debug'](_0x3b17('0x3f'));if(_0x5c37bb[_0x3b17('0x69')][_0x3b17('0x6c')]==_0x3b17('0x1f')&&_0x5c37bb[_0x3b17('0x69')]['password']==_0x3b17('0x1f')){return _0x33c733['status'](0x1f4)[_0x3b17('0x4d')](_0x3b17('0x58'));}let _0x32c580={'method':'POST','uri':_0x3b17('0x38'),'body':{'username':_0x5c37bb[_0x3b17('0x69')][_0x3b17('0x6c')],'password':_0x5c37bb[_0x3b17('0x69')][_0x3b17('0x84')]},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x32c580);let _0x4f582c=await User[_0x3b17('0x32')]({'username':_0x5c37bb[_0x3b17('0x69')]['username']})[_0x3b17('0x43')]();if(_0x4f582c){await _0x45e5e4(_0x5c37bb,_0x33c733,_0x3d058d);}else{_0x5c37bb['body'][_0x3b17('0x89')]='Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?';_0x5c37bb[_0x3b17('0x69')][_0x3b17('0xd')]=_0x5c37bb['body'][_0x3b17('0x6c')];_0x5c37bb['body'][_0x3b17('0x77')]=_0x3b17('0x53');await _0x40d058(_0x5c37bb,_0x33c733,_0x3d058d);}}catch(_0x10ca57){logger[_0x3b17('0x80')](_0x3b17('0x0')+_0x10ca57);if(_0x10ca57[_0x3b17('0x85')]==_0x3b17('0x9')){return _0x33c733[_0x3b17('0x1d')](0x191)['send'](_0x5c37bb['__']('LOGIN.INVALID'));}else if(_0x10ca57[_0x3b17('0x85')]==_0x3b17('0x12')){return _0x33c733[_0x3b17('0x1d')](0x1f4)['send'](_0x3b17('0x40'));}else{return _0x33c733[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x10ca57[_0x3b17('0x49')]);}}}});async function _0x45e5e4(_0x1bee87,_0x3a39b5,_0x3441be){passport[_0x3b17('0xa')](_0x3b17('0x76'),async function(_0x48a1da,_0x348db7,_0x469489){if(_0x48a1da)return _0x3a39b5[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x1bee87['__'](_0x48a1da[_0x3b17('0x49')]));if(!_0x348db7)return _0x3a39b5[_0x3b17('0x1d')](0x191)[_0x3b17('0x4d')](_0x1bee87['__'](_0x469489['message']));_0x1bee87['logIn'](_0x348db7,async function(_0xc9dbb3){if(_0xc9dbb3){return _0x3441be(_0xc9dbb3);}_0x39b671(_0x1bee87[_0x3b17('0x69')][_0x3b17('0x56')],_0x348db7);try{if(classroomConnection[_0x3b17('0x2c')])await _0x2c4a28(_0x348db7);}catch(_0x45cb53){logger[_0x3b17('0x45')](_0x45cb53);}return _0x3a39b5[_0x3b17('0x1d')](0xc8)['json']({'serverMessage':_0x1bee87['__'](_0x3b17('0x2a')),'user':_0x348db7});});})(_0x1bee87,_0x3a39b5,_0x3441be);};app[_0x3b17('0x5c')](_0x3b17('0x4e'),_0x31dc4c(),function(_0x25d51e,_0x33ea27){if(FusionSettings[_0x3b17('0x48')][_0x3b17('0x4c')])if(FusionSettings[_0x3b17('0x48')]['fusion_program_running']['User']==_0x25d51e[_0x3b17('0x5')][_0x3b17('0x6c')])fusionProgram[_0x3b17('0x1e')]();_0x769063(_0x25d51e[_0x3b17('0x69')][_0x3b17('0x56')]);_0x25d51e[_0x3b17('0x4f')]();_0x33ea27[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':_0x3b17('0x29')});});app[_0x3b17('0x60')]('/api/recovery/:User_Id',function(_0x52f628,_0x54b3a2){User[_0x3b17('0x32')]({'username':_0x52f628[_0x3b17('0x2e')]['User_Id'][_0x3b17('0x87')]()['trim']()},function(_0x341ac7,_0x1bf245){if(_0x341ac7)return _0x54b3a2['status'](0x1f4)[_0x3b17('0x4d')](_0x341ac7);if(!_0x1bf245)return _0x54b3a2[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')]('User\x20does\x20not\x20exist');else return _0x54b3a2[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')](_0x1bf245[_0x3b17('0x89')]);});});app[_0x3b17('0x5c')]('/api/recovery',passport['authenticate'](_0x3b17('0x54'),{'session':!![]}),async function(_0x57f612,_0x1e1c9b){if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x3b17('0x2c')]){try{await _0x2c4a28(user);}catch(_0x540408){logger[_0x3b17('0x45')](_0x540408);}}_0x39b671(_0x57f612[_0x3b17('0x69')][_0x3b17('0x56')],_0x57f612[_0x3b17('0x5')]);return _0x1e1c9b[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':_0x3b17('0x2b'),'user':_0x57f612[_0x3b17('0x5')]});}else{if(_0x3c3022()==0x0){_0x39b671(_0x57f612[_0x3b17('0x69')]['socketId'],_0x57f612['user']);if(classroomConnection['connected']){try{await _0x2c4a28(user);}catch(_0x3dec5f){logger[_0x3b17('0x45')](_0x3dec5f);}}return _0x1e1c9b[_0x3b17('0x1d')](0xc8)[_0x3b17('0x2f')]({'serverMessage':'Login\x20Successful','user':_0x57f612['user']});}else{_0x57f612[_0x3b17('0x4f')]();return _0x1e1c9b[_0x3b17('0x1d')](0x1f4)[_0x3b17('0x4d')](_0x3b17('0x74'));}}});app['get']('/api/allowedUserGroups',function(_0x528067,_0xa0de9a){var _0x252920=['User'];User[_0x3b17('0x32')]({'usergroup':_0x3b17('0x7e')},function(_0x43c86f,_0x1c583b){if(_0x43c86f)return _0xa0de9a['status'](0xc8)['send'](_0x252920);if(!_0x1c583b)_0x252920[_0x3b17('0x6d')](_0x3b17('0x7e'));return _0xa0de9a[_0x3b17('0x1d')](0xc8)[_0x3b17('0x4d')](_0x252920);});});app['get'](_0x3b17('0x47'),async(_0x4904d0,_0x41c04a,_0x504d18)=>{_0x504d18();});function _0x3c3022(){var _0x5e7de1=0x0;for(var _0x122db8=0x0;_0x122db8<FusionSettings[_0x3b17('0x75')][_0x3b17('0x4')];_0x122db8++){if(FusionSettings[_0x3b17('0x75')][_0x122db8][_0x3b17('0x53')]){_0x5e7de1++;}}return _0x5e7de1;}function _0x39b671(_0x1b1662,_0x57add7){for(var _0x234e2=0x0;_0x234e2<FusionSettings[_0x3b17('0x75')][_0x3b17('0x4')];_0x234e2++){if(FusionSettings[_0x3b17('0x75')][_0x234e2]['id']==_0x1b1662){FusionSettings['connectedClients'][_0x234e2][_0x3b17('0x53')]=_0x57add7;break;}}}function _0x769063(_0x277fe2){for(var _0x4e0e7d=0x0;_0x4e0e7d<FusionSettings[_0x3b17('0x75')]['length'];_0x4e0e7d++){if(FusionSettings[_0x3b17('0x75')][_0x4e0e7d]['id']==_0x277fe2){FusionSettings[_0x3b17('0x75')][_0x4e0e7d]['User']=undefined;break;}}}function _0x1136b7(_0x24d817){for(var _0x2ccca5=0x0;_0x2ccca5<FusionSettings[_0x3b17('0x75')][_0x3b17('0x4')];_0x2ccca5++){if(FusionSettings[_0x3b17('0x75')][_0x2ccca5][_0x3b17('0x53')][_0x3b17('0x6c')]==_0x24d817){FusionSettings[_0x3b17('0x75')][_0x2ccca5][_0x3b17('0x53')]=undefined;break;}}}function _0x31dc4c(){return function(_0x1afa84,_0x2f18e4,_0x9f8a53){if(_0x1afa84['isAuthenticated']()){return _0x9f8a53();}else{return _0x2f18e4[_0x3b17('0x1d')](0x191)[_0x3b17('0x4d')](_0x3b17('0x17'));}};}async function _0x2c4a28(_0x577523){try{await _0x298afe(_0x577523);}catch(_0x41eda8){logger[_0x3b17('0x45')](_0x3b17('0x3c')+_0x577523[_0x3b17('0x6c')]);}};function _0x298afe(_0x232470){return new Promise(function(_0x247163,_0x609e21){var _0x3f1a61=new SSH();_0x3f1a61['on']('ready',function(){_0x3f1a61[_0x3b17('0x79')](async function(_0x1b7a3e,_0x3df85b){if(_0x1b7a3e){logger[_0x3b17('0x45')](_0x3b17('0xc')+_0x1b7a3e);_0x3f1a61[_0x3b17('0x51')]();return _0x609e21(_0x1b7a3e);}try{await _0x851810(_0x3df85b);await _0x39362d(_0x3df85b,_0x232470[_0x3b17('0x6c')]);await _0x130bea(_0x3df85b,_0x232470['username']);await _0x1b9cfe(_0x3df85b,_0x232470['username']);let _0x30a4a2=await _0x164a62(_0x3df85b,_0x232470['username']);logger['debug'](JSON['stringify'](_0x30a4a2));let _0x1d2681=await _0x4a9784(_0x232470[_0x3b17('0x35')]);logger[_0x3b17('0x72')](JSON[_0x3b17('0x7b')](_0x1d2681));await _0x4ab65d(_0x3df85b,_0x232470,_0x30a4a2,_0x1d2681);_0x3f1a61['end']();return _0x247163();}catch(_0x27314f){logger[_0x3b17('0x80')](_0x27314f);_0x3f1a61[_0x3b17('0x51')]();return _0x609e21(_0x27314f);}});})[_0x3b17('0x62')]({'host':_0x3b17('0x1c'),'port':0x16,'username':'c3','password':_0x3b17('0x23')});});};function _0x851810(_0xf736c0){return new Promise(function(_0x8009c,_0x29239b){_0xf736c0['readdir'](_0x3b17('0x65'),function(_0x2a38b5){if(_0x2a38b5){_0xf736c0[_0x3b17('0x52')](_0x3b17('0x65'),function(_0xa6441){if(_0xa6441){return _0x29239b('Error\x20creating\x20classroom\x20file\x20system:\x20'+_0xa6441);}else{logger['verbose'](_0x3b17('0x3e'));return _0x8009c();}});}else{logger['verbose'](_0x3b17('0x71'));return _0x8009c();}});});};function _0x39362d(_0x93809f,_0x27d63b){return new Promise(function(_0x1ef611,_0x203c08){_0x93809f['readdir']('/home/c3/FusionFilesystem/'+_0x27d63b,function(_0x3f2951){if(_0x3f2951){_0x93809f[_0x3b17('0x52')](_0x3b17('0x65')+_0x27d63b,function(_0x5f13ec){if(_0x5f13ec){return _0x203c08(_0x3b17('0x2')+_0x5f13ec);}else{logger[_0x3b17('0x44')](_0x3b17('0x2d'));return _0x1ef611();}});}else{logger[_0x3b17('0x44')]('User\x27s\x20classroom\x20file\x20system\x20found');return _0x1ef611();}});});};function _0x130bea(_0x3dd972,_0x4155d9){return new Promise(function(_0x3116af,_0x48a2d2){_0x3dd972[_0x3b17('0x1a')](_0x3b17('0x65')+_0x4155d9+_0x3b17('0x6a'),function(_0x2a6858){if(_0x2a6858){_0x3dd972['mkdir'](_0x3b17('0x65')+_0x4155d9+_0x3b17('0x6a'),function(_0x196423){if(_0x196423){return _0x48a2d2(_0x3b17('0x7c')+_0x196423);}else{logger[_0x3b17('0x44')](_0x3b17('0x78'));return _0x3116af();}});}else{logger[_0x3b17('0x44')](_0x3b17('0x50'));return _0x3116af();}});});};function _0x1b9cfe(_0x3e18c1,_0x2626f1){return new Promise(function(_0x4241eb,_0x3d2dc3){_0x3e18c1[_0x3b17('0x1a')]('/home/c3/FusionFilesystem/'+_0x2626f1+_0x3b17('0x6'),function(_0x42a596){if(_0x42a596){_0x3e18c1[_0x3b17('0x52')]('/home/c3/FusionFilesystem/'+_0x2626f1+_0x3b17('0x6'),function(_0x3c5277){if(_0x3c5277){return _0x3d2dc3(_0x3b17('0x10')+_0x3c5277);}else{logger[_0x3b17('0x44')](_0x3b17('0x39'));return _0x4241eb();}});}else{logger[_0x3b17('0x44')]('User\x27s\x20blockly\x20directory\x20found');return _0x4241eb();}});});};function _0x164a62(_0x4f54fe,_0x399506){return new Promise(async function(_0x241a8c,_0x464e71){try{let _0x47fe70={};_0x47fe70[_0x3b17('0x36')]=await _0x160c94(_0x4f54fe,_0x399506);_0x47fe70['Blockly']=await _0x199d32(_0x4f54fe,_0x399506);return _0x241a8c(_0x47fe70);}catch(_0x52d116){return _0x464e71(_0x52d116);}});};function _0x160c94(_0x1a2cd4,_0x144995){return new Promise(function(_0x5eb335,_0x53a406){_0x1a2cd4[_0x3b17('0x1a')](_0x3b17('0x65')+_0x144995+_0x3b17('0x6a'),function(_0x1328d1,_0xb6549a){if(_0x1328d1)return _0x53a406(_0x1328d1);let _0x14b37b=[];for(let _0x403fe7=0x0;_0x403fe7<_0xb6549a[_0x3b17('0x4')];_0x403fe7++){logger[_0x3b17('0x72')](_0x3b17('0x6f')+_0xb6549a[_0x403fe7]['filename']);_0x14b37b[_0x3b17('0x57')](_0xb6549a[_0x403fe7]);}return _0x5eb335(_0x14b37b);});});};function _0x199d32(_0x2e2871,_0x27ccf0){return new Promise(function(_0xb3e58a,_0x2e27f1){_0x2e2871[_0x3b17('0x1a')](_0x3b17('0x65')+_0x27ccf0+_0x3b17('0x6'),function(_0x139200,_0x27a6c3){if(_0x139200)return _0x2e27f1(_0x139200);let _0x58c231=[];for(let _0x9a224e=0x0;_0x9a224e<_0x27a6c3[_0x3b17('0x4')];_0x9a224e++){logger[_0x3b17('0x72')](_0x3b17('0x6f')+_0x27a6c3[_0x9a224e]['filename']);_0x58c231['push'](_0x27a6c3[_0x9a224e]);}return _0xb3e58a(_0x58c231);});});};function _0x4a9784(_0x3f4b52){return new Promise(async function(_0x1a9220,_0x1f9b2a){try{let _0x50e0f6={};_0x50e0f6[_0x3b17('0x36')]=await _0x3e1adb(_0x3f4b52);_0x50e0f6['Blockly']=await _0x5cf68e(_0x3f4b52);return _0x1a9220(_0x50e0f6);}catch(_0x20c445){return _0x1f9b2a(_0x20c445);}});};function _0x3e1adb(_0x1bbcf9){return new Promise(async function(_0x44887b,_0x240656){try{let _0x32d0a3=[];let _0x2104ef=await fs[_0x3b17('0x1a')](_0x1bbcf9+_0x3b17('0x7f'));for(let _0x99665b=0x0;_0x99665b<_0x2104ef[_0x3b17('0x4')];_0x99665b++){logger[_0x3b17('0x72')]('Getting\x20data\x20for\x20'+_0x2104ef[_0x99665b]);let _0x5411c6=await fs[_0x3b17('0x3a')](_0x1bbcf9+_0x3b17('0x6a')+_0x2104ef[_0x99665b]);_0x5411c6[_0x3b17('0x85')]=_0x2104ef[_0x99665b];_0x32d0a3[_0x3b17('0x57')](_0x5411c6);}return _0x44887b(_0x32d0a3);}catch(_0xb6a864){return _0x240656(_0xb6a864);}});};function _0x5cf68e(_0x142b62){return new Promise(async function(_0x589ca4,_0x42ad2c){try{let _0x1a41c2=[];let _0x47fcf6=await fs['readdir'](_0x142b62+_0x3b17('0x63'));for(let _0x39ee93=0x0;_0x39ee93<_0x47fcf6[_0x3b17('0x4')];_0x39ee93++){logger['debug'](_0x3b17('0x6f')+_0x47fcf6[_0x39ee93]);let _0x371cae=await fs[_0x3b17('0x3a')](_0x142b62+_0x3b17('0x6')+_0x47fcf6[_0x39ee93]);_0x371cae[_0x3b17('0x85')]=_0x47fcf6[_0x39ee93];_0x1a41c2[_0x3b17('0x57')](_0x371cae);}return _0x589ca4(_0x1a41c2);}catch(_0x35374b){return _0x42ad2c(_0x35374b);}});};function _0x4ab65d(_0x1482ab,_0x4ae532,_0x1a0161,_0x3d9ed6){return new Promise(async function(_0x22de1d,_0x83fe43){try{for(let _0x498342=0x0;_0x498342<_0x1a0161[_0x3b17('0x36')][_0x3b17('0x4')];_0x498342++){let _0x2381ab=![];for(let _0x13723b=0x0;_0x13723b<_0x3d9ed6['Editor']['length'];_0x13723b++){if(_0x3d9ed6[_0x3b17('0x36')][_0x13723b][_0x3b17('0x85')]==_0x1a0161[_0x3b17('0x36')][_0x498342][_0x3b17('0x5d')]){logger[_0x3b17('0x72')](_0x3b17('0x7')+Math[_0x3b17('0x67')](_0x3d9ed6[_0x3b17('0x36')][_0x13723b]['mtimeMs']/0x3e8));logger[_0x3b17('0x72')](_0x3b17('0x5f')+_0x1a0161[_0x3b17('0x36')][_0x498342][_0x3b17('0x4b')][_0x3b17('0x15')]);if(Math[_0x3b17('0x67')](_0x3d9ed6[_0x3b17('0x36')][_0x13723b]['mtimeMs']/0x3e8)>_0x1a0161[_0x3b17('0x36')][_0x498342][_0x3b17('0x4b')][_0x3b17('0x15')]){_0x2381ab=!![];logger[_0x3b17('0x72')](_0x3b17('0x1b')+_0x3d9ed6[_0x3b17('0x36')][_0x13723b][_0x3b17('0x85')]+_0x3b17('0x4a'));try{await _0x16510c(_0x1482ab,_0x4ae532,_0x1a0161['Editor'][_0x498342][_0x3b17('0x5d')],_0x3b17('0x36'));}catch(_0x11dd09){return _0x83fe43(_0x11dd09);}break;}else{_0x2381ab=!![];logger[_0x3b17('0x72')](_0x3b17('0x24')+_0x3d9ed6[_0x3b17('0x36')][_0x13723b][_0x3b17('0x85')]+_0x3b17('0x5a'));try{await _0x4efcc4(_0x1482ab,_0x4ae532,_0x1a0161[_0x3b17('0x36')][_0x498342][_0x3b17('0x5d')],_0x3b17('0x36'));}catch(_0x2974dd){logger[_0x3b17('0x45')](_0x3b17('0x13')+_0x2974dd);return _0x83fe43(_0x2974dd);}break;}}}if(!_0x2381ab){logger[_0x3b17('0x72')](_0x1a0161[_0x3b17('0x36')][_0x498342]['filename']+_0x3b17('0x86'));try{await _0x4efcc4(_0x1482ab,_0x4ae532,_0x1a0161[_0x3b17('0x36')][_0x498342][_0x3b17('0x5d')],_0x3b17('0x36'));}catch(_0x17dffb){return _0x83fe43(_0x17dffb);}}}for(let _0x19d085=0x0;_0x19d085<_0x1a0161[_0x3b17('0x14')]['length'];_0x19d085++){let _0x466d4f=![];for(let _0x368a80=0x0;_0x368a80<_0x3d9ed6[_0x3b17('0x14')][_0x3b17('0x4')];_0x368a80++){if(_0x3d9ed6[_0x3b17('0x14')][_0x368a80][_0x3b17('0x85')]==_0x1a0161[_0x3b17('0x14')][_0x19d085]['filename']){logger['debug'](_0x3b17('0x7')+Math['floor'](_0x3d9ed6['Blockly'][_0x368a80][_0x3b17('0x26')]/0x3e8));logger[_0x3b17('0x72')]('Remote\x20mtime:\x20'+_0x1a0161[_0x3b17('0x14')][_0x19d085][_0x3b17('0x4b')][_0x3b17('0x15')]);if(Math['floor'](_0x3d9ed6[_0x3b17('0x14')][_0x368a80][_0x3b17('0x26')]/0x3e8)>_0x1a0161[_0x3b17('0x14')][_0x19d085]['attrs'][_0x3b17('0x15')]){_0x466d4f=!![];logger['debug']('Local\x20\x22'+_0x3d9ed6['Blockly'][_0x368a80][_0x3b17('0x85')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x16510c(_0x1482ab,_0x4ae532,_0x1a0161[_0x3b17('0x14')][_0x19d085]['filename'],_0x3b17('0x14'));}catch(_0x40fdb1){return _0x83fe43(_0x40fdb1);}break;}else{_0x466d4f=!![];logger[_0x3b17('0x72')](_0x3b17('0x24')+_0x3d9ed6[_0x3b17('0x14')][_0x368a80]['name']+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x4efcc4(_0x1482ab,_0x4ae532,_0x1a0161['Blockly'][_0x19d085][_0x3b17('0x5d')],_0x3b17('0x14'));}catch(_0x28fdd7){logger[_0x3b17('0x45')](_0x3b17('0x13')+_0x28fdd7);return _0x83fe43(_0x28fdd7);}break;}}}if(!_0x466d4f){logger[_0x3b17('0x72')](_0x1a0161[_0x3b17('0x14')][_0x19d085][_0x3b17('0x5d')]+_0x3b17('0x86'));try{await _0x4efcc4(_0x1482ab,_0x4ae532,_0x1a0161['Blockly'][_0x19d085]['filename'],'Blockly');}catch(_0x27ea5e){return _0x83fe43(_0x27ea5e);}}}return _0x22de1d();}catch(_0x5a7e35){return _0x83fe43(_0x5a7e35);}});};function _0x16510c(_0x275d97,_0x40761d,_0x8ff9ee,_0x1bc627){return new Promise((_0xd2c642,_0x1e31c1)=>{try{let _0x428e0d='/home/c3/FusionFilesystem/'+_0x40761d['username']+'/'+_0x1bc627+'/'+_0x8ff9ee;let _0x41403b=_0x40761d[_0x3b17('0x35')]+'/'+_0x1bc627+'/'+_0x8ff9ee;logger[_0x3b17('0x72')](_0x3b17('0x30')+_0x428e0d);logger[_0x3b17('0x72')](_0x3b17('0xf')+_0x41403b);_0x275d97[_0x3b17('0x42')](_0x41403b,_0x428e0d,{},function(_0x2fbe41){if(_0x2fbe41){logger[_0x3b17('0x45')](_0x3b17('0x18')+_0x8ff9ee);return _0x1e31c1(_0x2fbe41);}logger['debug'](_0x3b17('0x28')+_0x8ff9ee);return _0xd2c642();});}catch(_0x387a4e){return _0x1e31c1(_0x387a4e);}});};function _0x4efcc4(_0x45f6bb,_0x5b3d57,_0x2e65dc,_0x5987fe){return new Promise((_0xbe54e6,_0x53930b)=>{try{let _0x223aad=_0x3b17('0x65')+_0x5b3d57[_0x3b17('0x6c')]+'/'+_0x5987fe+'/'+_0x2e65dc;let _0x4b9c25=_0x5b3d57[_0x3b17('0x35')]+'/'+_0x5987fe+'/'+_0x2e65dc;logger[_0x3b17('0x72')](_0x3b17('0x30')+_0x223aad);logger[_0x3b17('0x72')]('Local\x20Path:\x20'+_0x4b9c25);_0x45f6bb[_0x3b17('0x37')](_0x223aad,_0x4b9c25,{},function(_0x2f1a7a){if(_0x2f1a7a){logger[_0x3b17('0x45')]('Error\x20downloading\x20file:\x20'+_0x2e65dc);return _0x53930b(_0x2f1a7a);}logger['debug'](_0x3b17('0x11')+_0x2e65dc);return _0xbe54e6();});}catch(_0x4369bb){return _0x53930b(_0x4369bb);}});};function _0x42aea2(_0xfb4472,_0x2bbcbb,_0x34d217,_0x518892){_0xfb4472['readdir'](_0x3b17('0x65')+_0x2bbcbb['username'],function(_0x34596f){if(_0x34596f){logger[_0x3b17('0x80')](_0x3b17('0x33')+_0x34596f);_0xfb4472['mkdir'](_0x3b17('0x65')+_0x2bbcbb['username'],function(_0x103957){if(_0x103957){logger[_0x3b17('0x80')]('Error\x20creating\x20user\x20file\x20system:\x20'+_0x103957);throw _0x103957;}logger['info'](_0x3b17('0x7a'));_0xfb4472[_0x3b17('0x52')]('/home/c3/FusionFilesystem/'+_0x2bbcbb[_0x3b17('0x6c')]+_0x3b17('0x6a'),function(_0x3665b2){if(_0x3665b2){logger['info']('Error\x20creating\x20editor\x20directory:\x20'+_0x3665b2);throw _0x3665b2;}logger[_0x3b17('0x80')](_0x3b17('0x81'));_0xfb4472[_0x3b17('0x52')](_0x3b17('0x65')+_0x2bbcbb[_0x3b17('0x6c')]+'/Blockly/',function(_0x3448d5){if(_0x3448d5){logger[_0x3b17('0x80')](_0x3b17('0x68')+_0x3448d5);throw _0x3448d5;}logger[_0x3b17('0x80')]('Blockly\x20directory\x20created');_0x518892(_0xfb4472,_0x2bbcbb,_0x34d217);});});});}_0x518892(_0xfb4472,_0x2bbcbb,_0x34d217);});};function _0xf5bf4f(_0x589c31,_0x147544,_0x1ba8d5){_0x589c31[_0x3b17('0x1a')](_0x3b17('0x65')+_0x147544[_0x3b17('0x6c')]+_0x3b17('0x6a'),function(_0x32a553,_0x3a87a0){if(_0x32a553){logger[_0x3b17('0x80')]('Error\x20reading\x20classroom\x20editor\x20files:\x20'+_0x32a553);throw _0x32a553;}_0xe24df3(_0x147544,_0x3b17('0x36'),_0x3a87a0,_0x1ba8d5);});_0x589c31['readdir']('/home/c3/FusionFilesystem/'+_0x147544[_0x3b17('0x6c')]+'/Blockly/',function(_0x12639e,_0x450e4e){if(_0x12639e){logger[_0x3b17('0x80')](_0x3b17('0x3d')+_0x12639e);throw _0x12639e;}_0xe24df3(_0x147544,_0x3b17('0x14'),_0x450e4e,_0x1ba8d5);});};function _0xe24df3(_0x411c5e,_0x56052a,_0x1b9384,_0x591608){logger[_0x3b17('0x80')](_0x3b17('0x88'));if(_0x56052a==_0x3b17('0x14')&&_0x1b9384[_0x3b17('0x4')]==0x0){_0x591608[_0x3b17('0x51')]();}for(var _0x3e84fe=0x0;_0x3e84fe<_0x1b9384[_0x3b17('0x4')];_0x3e84fe++){let _0x4b1c26=_0x3b17('0x65')+_0x411c5e[_0x3b17('0x6c')]+'/'+_0x56052a+'/'+_0x1b9384[_0x3e84fe][_0x3b17('0x5d')];let _0x14adc7=_0x3b17('0x64')+_0x411c5e[_0x3b17('0x6c')]+'/'+_0x56052a+'/';logger['info']('Moving:\x20'+_0x4b1c26+'\x20to\x20'+_0x14adc7);SCP[_0x3b17('0x83')](_0x3b17('0x6b')+_0x4b1c26,_0x14adc7,function(_0x3e237c){if(_0x3e237c){logger['info']('Error\x20downloading:\x20'+_0x4b1c26+_0x3b17('0x22')+_0x3e237c);}if(_0x56052a==_0x3b17('0x14')&&(_0x3e84fe=_0x1b9384[_0x3b17('0x4')]-0x1)){_0x591608['end']();}});}};}();