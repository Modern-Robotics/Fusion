const _0x288e=['lastname','RequestError','mtime','Error\x20downloading\x20file:\x20','mriguest','/api/allowedUserGroups','connect','logIn','filepath','../../global/fusionSettings','\x20to\x20','mkdir','User\x27s\x20classroom\x20file\x20system\x20found','root','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','\x20not\x20a\x20common\x20file!','json','User\x27s\x20blockly\x20directory\x20created','find','/Editor/','StatusCodeError','exec','defaultprogramminglanguage','send','passport','push','request-promise','Blockly','path','usergroup','email','Local\x20mtime:\x20','Admin','1578029bnQKOg','1328977sBgMVp','Error\x20uploading\x20file:\x20','socketId','Error\x20downloading:\x20','User\x20updated!','LOGIN.INVALID','verbose','/home/c3/FusionFilesystem/','Classroom\x20file\x20system\x20created','KillProgram','language','stat','7VnBOvl','LOGIN.MULTIUSER_DENIED','Editor\x20directory\x20created','floor','Guest\x20login\x20unavailable\x20in\x20classroom\x20mode','Attempting\x20standard\x20login','Error\x20reaching\x20classroom\x20server','put','1602915cfhMzV','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','body','post','/api/users/logout','error','exports','633941ZbyTGw','Guest','status','logout','User\x27s\x20blockly\x20directory\x20found','Error\x20creating\x20classroom\x20file\x20system:\x20','Moving:\x20','/api/users','../../fusionProgram','Error\x20creating\x20editor\x20directory:\x20','securityquestion','length','local-recovery','attrs','../../express','Remote\x20mtime:\x20','/Blockly','Classroom\x20file\x20system\x20found','Error\x20creating\x20blockly\x20directory:\x20','fastGet','Local\x20Path:\x20','mtimeMs','local-signup','User\x27s\x20editor\x20directory\x20created','debug','/api/recovery','scp','172.16.0.1','Retrieving\x20files','isAuthenticated','Error\x20reading\x20classroom\x20editor\x20files:\x20','end','Logged\x20out\x20successfully','sftp','Remote\x20\x22','remove','/api/users/:User_Id','Attempting\x20classroom\x20login','securityanswer','Error','stringify','firstname','Getting\x20data\x20for\x20','fusion_program_running','connectedClients','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','User','scp2','905505QLgTJD','LOGIN.SUCCESS','get',',\x20error:\x20','fs-extra','Client','User_Id','fastPut','/Blockly/','REGISTER.CREATED','MultiUserAccess','User\x20Unauthenticated','Login\x20Successful','../../classroom/connection','trim','params','password','Uploaded\x20','Local\x20\x22','user','\x22\x20newer,\x20updating\x20classroom\x20version','3ayzKtd','Error\x20communicating\x20with\x20c3:\x20','https://172.16.0.1/backend/auth/ldap','readdir','Error:\x20','connected','unshift','username','Error\x20reading\x20user\x20file\x20system:\x20','filename','\x22\x20newer,\x20updating\x20local\x20version','info','Editor','c3:root@172.16.0.1:','message','Retrieved\x20','../../models/user','139297jUbXDB','/Editor','toLowerCase','Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?','SocketVariables','name','authenticate','Remote\x20path:\x20','findOne','1479811GBVUXf'];const _0x1b1b01=_0x2c9b;(function(_0x491003,_0x326b85){const _0x5b4ffd=_0x2c9b;while(!![]){try{const _0x392241=parseInt(_0x5b4ffd(0x209))+-parseInt(_0x5b4ffd(0x200))*-parseInt(_0x5b4ffd(0x19b))+-parseInt(_0x5b4ffd(0x1a3))+parseInt(_0x5b4ffd(0x18e))+-parseInt(_0x5b4ffd(0x1da))+parseInt(_0x5b4ffd(0x1aa))*-parseInt(_0x5b4ffd(0x1ef))+parseInt(_0x5b4ffd(0x18f));if(_0x392241===_0x326b85)break;else _0x491003['push'](_0x491003['shift']());}catch(_0x7da13){_0x491003['push'](_0x491003['shift']());}}}(_0x288e,0xe8565));function _0x2c9b(_0x5792d7,_0x1ab96e){return _0x2c9b=function(_0x288e04,_0x2c9b02){_0x288e04=_0x288e04-0x175;let _0xd7d1d8=_0x288e[_0x288e04];return _0xd7d1d8;},_0x2c9b(_0x5792d7,_0x1ab96e);}var SCP=require(_0x1b1b01(0x1d9)),SSH=require('ssh2')[_0x1b1b01(0x1df)],fs=require(_0x1b1b01(0x1de)),path=require(_0x1b1b01(0x189)),rp=require(_0x1b1b01(0x187));const classroomConnection=require(_0x1b1b01(0x1e7)),logger=require('../../utils/logger'),app=require(_0x1b1b01(0x1b8)),User=require(_0x1b1b01(0x1ff)),passport=require(_0x1b1b01(0x185)),FusionSettings=require(_0x1b1b01(0x176)),fusionProgram=require(_0x1b1b01(0x1b2));module[_0x1b1b01(0x1a9)]=function(){const _0x583784=_0x1b1b01;app['get'](_0x583784(0x1b1),_0x459330(),function(_0x46d170,_0x34a436){const _0x32fab2=_0x583784;User[_0x32fab2(0x17f)]({'usergroup':{'$ne':_0x32fab2(0x1ab)}},function(_0x224f4b,_0x3a11b3){const _0x421a79=_0x32fab2;if(_0x224f4b)_0x34a436['send'](_0x224f4b);_0x34a436[_0x421a79(0x17d)](_0x3a11b3);});}),app[_0x583784(0x1a6)](_0x583784(0x1b1),async function(_0x48c09d,_0xc5860a,_0xa32cbe){await _0x36b33f(_0x48c09d,_0xc5860a,_0xa32cbe);});async function _0x36b33f(_0x508bc2,_0x23ef39,_0x3a15df){const _0x2ae9ca=_0x583784;passport[_0x2ae9ca(0x206)](_0x2ae9ca(0x1c0),async function(_0x240fc4,_0x319a6e,_0x1dff86){const _0x4d9fc4=_0x2ae9ca;if(_0x240fc4)return _0x23ef39[_0x4d9fc4(0x1ac)](0x1f4)[_0x4d9fc4(0x184)](_0x240fc4);if(_0x1dff86&&_0x1dff86[_0x4d9fc4(0x1fd)])return _0x23ef39[_0x4d9fc4(0x1ac)](0x1f4)[_0x4d9fc4(0x184)](_0x508bc2['__'](_0x1dff86[_0x4d9fc4(0x1fd)]));if(FusionSettings[_0x4d9fc4(0x1e4)]){if(classroomConnection[_0x4d9fc4(0x1f4)])try{await _0xdd672f(_0x319a6e);}catch(_0x1f68f5){logger['error'](_0x1f68f5);}_0x508bc2[_0x4d9fc4(0x211)](_0x319a6e,function(_0x55fae0){const _0x472a9a=_0x4d9fc4;if(_0x55fae0)return _0x3a15df(_0x55fae0);return _0x3766f1(_0x508bc2['body']['socketId'],_0x319a6e),_0x23ef39[_0x472a9a(0x1ac)](0xc8)['json']({'serverMessage':_0x508bc2['__'](_0x472a9a(0x1e3)),'user':_0x319a6e});});}else{if(_0x2e2ea8()==0x0){if(classroomConnection[_0x4d9fc4(0x1f4)])try{await _0xdd672f(_0x319a6e);}catch(_0x4f322f){logger[_0x4d9fc4(0x1a8)](_0x4f322f);}_0x508bc2[_0x4d9fc4(0x211)](_0x319a6e,function(_0x4d52a1){const _0x50cb4a=_0x4d9fc4;if(_0x4d52a1)return _0x3a15df(_0x4d52a1);return _0x3766f1(_0x508bc2['body'][_0x50cb4a(0x191)],_0x319a6e),_0x23ef39['status'](0xc8)['json']({'serverMessage':_0x508bc2['__'](_0x50cb4a(0x1e3)),'user':_0x319a6e});});}else return _0x23ef39[_0x4d9fc4(0x1ac)](0x1f4)['send'](_0x508bc2['__'](_0x4d9fc4(0x1a4)));}})(_0x508bc2,_0x23ef39,_0x3a15df);};app['post'](_0x583784(0x1b1),passport[_0x583784(0x206)]('local-signup',{'session':!![]}),function(_0x1bedbe,_0x1de1cb){const _0x20bdd9=_0x583784;if(_0x1bedbe[_0x20bdd9(0x1ed)][_0x20bdd9(0x1d1)])return _0x1de1cb['status'](0x1f4)[_0x20bdd9(0x184)](_0x1bedbe['user']['Error']);else{}}),app['get']('/api/users/:User_Id',_0x459330(),function(_0x1b8a91,_0x339ae9){const _0x2b972c=_0x583784;User[_0x2b972c(0x208)]({'username':_0x1b8a91[_0x2b972c(0x1e9)][_0x2b972c(0x1e0)]['toLowerCase']()['trim']()},function(_0x5c3cb5,_0x159021){const _0x1d8847=_0x2b972c;if(_0x5c3cb5)_0x339ae9[_0x1d8847(0x184)](_0x5c3cb5);_0x339ae9[_0x1d8847(0x17d)](_0x159021);});}),app[_0x583784(0x1a2)](_0x583784(0x1ce),_0x459330(),function(_0x43ea6c,_0x219e4d){const _0x1a4412=_0x583784;User[_0x1a4412(0x208)]({'username':_0x43ea6c['params']['User_Id'][_0x1a4412(0x202)]()[_0x1a4412(0x1e8)]()},function(_0x400a20,_0x5c7c40){const _0x52b135=_0x1a4412;if(_0x400a20)_0x219e4d[_0x52b135(0x184)](_0x400a20);_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x1ea)]&&(_0x5c7c40[_0x52b135(0x1ea)]=_0x5c7c40['generateHash'](_0x43ea6c['body'][_0x52b135(0x1ea)])),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x1d3)]&&(_0x5c7c40['firstname']=_0x43ea6c['body'][_0x52b135(0x1d3)]),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x20a)]&&(_0x5c7c40[_0x52b135(0x20a)]=_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x20a)]),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x199)]&&(_0x5c7c40[_0x52b135(0x199)]=_0x43ea6c[_0x52b135(0x1a5)]['language']),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x18b)]&&(_0x5c7c40['email']=_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x18b)]),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x183)]&&(_0x5c7c40[_0x52b135(0x183)]=_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x183)]),_0x43ea6c[_0x52b135(0x1a5)]['securityquestion']&&(_0x5c7c40['securityquestion']=_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x1b4)]),_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x1d0)]&&(_0x5c7c40[_0x52b135(0x1d0)]=_0x43ea6c[_0x52b135(0x1a5)]['securityanswer']),_0x43ea6c['body'][_0x52b135(0x18a)]&&(_0x5c7c40['usergroup']=_0x43ea6c[_0x52b135(0x1a5)][_0x52b135(0x18a)]),_0x5c7c40['save'](function(_0x4504b6){const _0x56ad03=_0x52b135;if(_0x4504b6)_0x219e4d['status'](0x1f4)[_0x56ad03(0x184)](_0x4504b6);_0x219e4d[_0x56ad03(0x1ac)](0xc8)[_0x56ad03(0x17d)]({'serverMessage':_0x56ad03(0x193)});});});}),app['delete']('/api/users/:User_Id',_0x459330(),function(_0x5e91ad,_0x226dae){const _0x4d1584=_0x583784;if(_0x5e91ad[_0x4d1584(0x1e9)][_0x4d1584(0x1e0)][_0x4d1584(0x202)]()['trim']()==_0x5e91ad['user'][_0x4d1584(0x1f6)]){if(FusionSettings[_0x4d1584(0x204)][_0x4d1584(0x1d5)]){if(FusionSettings[_0x4d1584(0x204)][_0x4d1584(0x1d5)]['User']==_0x5e91ad[_0x4d1584(0x1ed)][_0x4d1584(0x1f6)])fusionProgram[_0x4d1584(0x198)]();}_0x22f6ae(_0x5e91ad[_0x4d1584(0x1ed)][_0x4d1584(0x1f6)]),_0x5e91ad['logout']();}User[_0x4d1584(0x1cd)]({'username':_0x5e91ad[_0x4d1584(0x1e9)][_0x4d1584(0x1e0)][_0x4d1584(0x202)]()['trim']()},function(_0x174dd9,_0x2edead){const _0x1ce842=_0x4d1584;if(_0x174dd9)return _0x226dae['send'](_0x174dd9);return User['removeFileSystem'](_0x5e91ad[_0x1ce842(0x1e9)]['User_Id'][_0x1ce842(0x202)]()[_0x1ce842(0x1e8)]()),_0x226dae['status'](0xc8)[_0x1ce842(0x17d)]({'serverMessage':'Successfully\x20deleted'});});}),app[_0x583784(0x1a6)]('/api/users/login',async(_0x3174b5,_0x5d0f37,_0x41defb)=>{const _0x11b883=_0x583784;if(!FusionSettings[_0x11b883(0x1e4)]&&_0x2e2ea8()>0x0)return _0x5d0f37[_0x11b883(0x1ac)](0x1f4)[_0x11b883(0x184)](_0x3174b5['__'](_0x11b883(0x19c)));if(!classroomConnection[_0x11b883(0x1f4)])logger['debug'](_0x11b883(0x1a0)),await _0x2b841d(_0x3174b5,_0x5d0f37,_0x41defb);else{logger[_0x11b883(0x1c2)](_0x11b883(0x1cf));if(_0x3174b5[_0x11b883(0x1a5)][_0x11b883(0x1f6)]=='mriguest'&&_0x3174b5['body'][_0x11b883(0x1ea)]==_0x11b883(0x20e))return _0x5d0f37['status'](0x1f4)[_0x11b883(0x184)](_0x11b883(0x19f));let _0x2c4b4a={'method':'POST','uri':_0x11b883(0x1f1),'body':{'username':_0x3174b5[_0x11b883(0x1a5)][_0x11b883(0x1f6)],'password':_0x3174b5[_0x11b883(0x1a5)][_0x11b883(0x1ea)]},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x2c4b4a);let _0x27be6c=await User['findOne']({'username':_0x3174b5['body']['username']})[_0x11b883(0x182)]();_0x27be6c?await _0x2b841d(_0x3174b5,_0x5d0f37,_0x41defb):(_0x3174b5['body'][_0x11b883(0x1b4)]=_0x11b883(0x203),_0x3174b5['body'][_0x11b883(0x1d0)]=_0x3174b5[_0x11b883(0x1a5)][_0x11b883(0x1f6)],_0x3174b5[_0x11b883(0x1a5)]['usergroup']='User',await _0x36b33f(_0x3174b5,_0x5d0f37,_0x41defb));}catch(_0x3b8bfc){logger[_0x11b883(0x1fa)]('Error\x20with\x20request\x20promise.\x20'+_0x3b8bfc);if(_0x3b8bfc['name']==_0x11b883(0x181))return _0x5d0f37[_0x11b883(0x1ac)](0x191)[_0x11b883(0x184)](_0x3174b5['__'](_0x11b883(0x194)));else return _0x3b8bfc['name']==_0x11b883(0x20b)?_0x5d0f37[_0x11b883(0x1ac)](0x1f4)[_0x11b883(0x184)](_0x11b883(0x1a1)):_0x5d0f37[_0x11b883(0x1ac)](0x1f4)[_0x11b883(0x184)](_0x3b8bfc[_0x11b883(0x1fd)]);}}});async function _0x2b841d(_0x45f8be,_0x3fc437,_0x189cf5){passport['authenticate']('local-login',async function(_0x306806,_0x473f11,_0x4a5699){const _0xe4e22d=_0x2c9b;if(_0x306806)return _0x3fc437[_0xe4e22d(0x1ac)](0x1f4)['send'](_0x45f8be['__'](_0x306806[_0xe4e22d(0x1fd)]));if(!_0x473f11)return _0x3fc437[_0xe4e22d(0x1ac)](0x191)['send'](_0x45f8be['__'](_0x4a5699[_0xe4e22d(0x1fd)]));_0x45f8be[_0xe4e22d(0x211)](_0x473f11,async function(_0x72461f){const _0x1286db=_0xe4e22d;if(_0x72461f)return _0x189cf5(_0x72461f);_0x3766f1(_0x45f8be[_0x1286db(0x1a5)]['socketId'],_0x473f11);try{if(classroomConnection[_0x1286db(0x1f4)])await _0xdd672f(_0x473f11);}catch(_0x3e9007){logger['error'](_0x3e9007);}return _0x3fc437[_0x1286db(0x1ac)](0xc8)[_0x1286db(0x17d)]({'serverMessage':_0x45f8be['__'](_0x1286db(0x1db)),'user':_0x473f11});});})(_0x45f8be,_0x3fc437,_0x189cf5);};app['post'](_0x583784(0x1a7),_0x459330(),function(_0xbfa983,_0x55d933){const _0x5909b3=_0x583784;if(FusionSettings[_0x5909b3(0x204)]['fusion_program_running']){if(FusionSettings[_0x5909b3(0x204)][_0x5909b3(0x1d5)][_0x5909b3(0x1d8)]==_0xbfa983[_0x5909b3(0x1ed)]['username'])fusionProgram[_0x5909b3(0x198)]();}_0x3cc0df(_0xbfa983[_0x5909b3(0x1a5)][_0x5909b3(0x191)]),_0xbfa983[_0x5909b3(0x1ad)](),_0x55d933['status'](0xc8)[_0x5909b3(0x17d)]({'serverMessage':_0x5909b3(0x1ca)});}),app[_0x583784(0x1dc)]('/api/recovery/:User_Id',function(_0x692089,_0x1a92d8){const _0x167152=_0x583784;User[_0x167152(0x208)]({'username':_0x692089[_0x167152(0x1e9)][_0x167152(0x1e0)][_0x167152(0x202)]()['trim']()},function(_0x3a1315,_0x445054){const _0x50f19b=_0x167152;if(_0x3a1315)return _0x1a92d8['status'](0x1f4)[_0x50f19b(0x184)](_0x3a1315);if(!_0x445054)return _0x1a92d8[_0x50f19b(0x1ac)](0x1f4)[_0x50f19b(0x184)]('User\x20does\x20not\x20exist');else return _0x1a92d8[_0x50f19b(0x1ac)](0xc8)[_0x50f19b(0x17d)](_0x445054['securityquestion']);});}),app[_0x583784(0x1a6)](_0x583784(0x1c3),passport[_0x583784(0x206)](_0x583784(0x1b6),{'session':!![]}),async function(_0x82958e,_0x1d2028){const _0x1ae9e8=_0x583784;if(FusionSettings[_0x1ae9e8(0x1e4)]){if(classroomConnection[_0x1ae9e8(0x1f4)])try{await _0xdd672f(user);}catch(_0x4d2ab0){logger[_0x1ae9e8(0x1a8)](_0x4d2ab0);}return _0x3766f1(_0x82958e[_0x1ae9e8(0x1a5)]['socketId'],_0x82958e[_0x1ae9e8(0x1ed)]),_0x1d2028['status'](0xc8)[_0x1ae9e8(0x17d)]({'serverMessage':_0x1ae9e8(0x1e6),'user':_0x82958e[_0x1ae9e8(0x1ed)]});}else{if(_0x2e2ea8()==0x0){_0x3766f1(_0x82958e[_0x1ae9e8(0x1a5)][_0x1ae9e8(0x191)],_0x82958e[_0x1ae9e8(0x1ed)]);if(classroomConnection['connected'])try{await _0xdd672f(user);}catch(_0xb0ca86){logger[_0x1ae9e8(0x1a8)](_0xb0ca86);}return _0x1d2028['status'](0xc8)[_0x1ae9e8(0x17d)]({'serverMessage':_0x1ae9e8(0x1e6),'user':_0x82958e[_0x1ae9e8(0x1ed)]});}else return _0x82958e[_0x1ae9e8(0x1ad)](),_0x1d2028[_0x1ae9e8(0x1ac)](0x1f4)[_0x1ae9e8(0x184)]('Another\x20user\x20is\x20already\x20logged\x20in.');}}),app[_0x583784(0x1dc)](_0x583784(0x20f),function(_0x2f2860,_0x45d30e){const _0x27944b=_0x583784;var _0x4dea18=[_0x27944b(0x1d8)];User['findOne']({'usergroup':_0x27944b(0x18d)},function(_0x1a8a19,_0x29b38f){const _0x25c0d8=_0x27944b;if(_0x1a8a19)return _0x45d30e[_0x25c0d8(0x1ac)](0xc8)[_0x25c0d8(0x184)](_0x4dea18);if(!_0x29b38f)_0x4dea18[_0x25c0d8(0x1f5)](_0x25c0d8(0x18d));return _0x45d30e['status'](0xc8)['send'](_0x4dea18);});}),app[_0x583784(0x1dc)]('/User/Login',async(_0x33ff35,_0xb388c9,_0x5a3594)=>{_0x5a3594();});function _0x2e2ea8(){const _0x4f6354=_0x583784;var _0x20de84=0x0;for(var _0x2c1712=0x0;_0x2c1712<FusionSettings[_0x4f6354(0x1d6)][_0x4f6354(0x1b5)];_0x2c1712++){FusionSettings[_0x4f6354(0x1d6)][_0x2c1712][_0x4f6354(0x1d8)]&&_0x20de84++;}return _0x20de84;}function _0x3766f1(_0x1be440,_0x2dbc04){const _0x81b374=_0x583784;for(var _0xc37be7=0x0;_0xc37be7<FusionSettings[_0x81b374(0x1d6)][_0x81b374(0x1b5)];_0xc37be7++){if(FusionSettings[_0x81b374(0x1d6)][_0xc37be7]['id']==_0x1be440){FusionSettings[_0x81b374(0x1d6)][_0xc37be7]['User']=_0x2dbc04;break;}}}function _0x3cc0df(_0x3cee28){const _0x388aaf=_0x583784;for(var _0x18a3a5=0x0;_0x18a3a5<FusionSettings['connectedClients'][_0x388aaf(0x1b5)];_0x18a3a5++){if(FusionSettings[_0x388aaf(0x1d6)][_0x18a3a5]['id']==_0x3cee28){FusionSettings[_0x388aaf(0x1d6)][_0x18a3a5]['User']=undefined;break;}}}function _0x22f6ae(_0x4a6100){const _0xe23b5a=_0x583784;for(var _0x36234a=0x0;_0x36234a<FusionSettings[_0xe23b5a(0x1d6)][_0xe23b5a(0x1b5)];_0x36234a++){if(FusionSettings[_0xe23b5a(0x1d6)][_0x36234a][_0xe23b5a(0x1d8)]['username']==_0x4a6100){FusionSettings['connectedClients'][_0x36234a]['User']=undefined;break;}}}function _0x459330(){return function(_0x579cc9,_0x30c3c1,_0x25b1bf){const _0x4c3768=_0x2c9b;return _0x579cc9[_0x4c3768(0x1c7)]()?_0x25b1bf():_0x30c3c1[_0x4c3768(0x1ac)](0x191)[_0x4c3768(0x184)](_0x4c3768(0x1e5));};}async function _0xdd672f(_0x2d5ae8){const _0x261355=_0x583784;try{await _0x35aa25(_0x2d5ae8);}catch(_0x53017e){logger[_0x261355(0x1a8)]('Error\x20downloading\x20classroom\x20files\x20for\x20'+_0x2d5ae8[_0x261355(0x1f6)]);}};function _0x35aa25(_0x36da39){return new Promise(function(_0x1f3a10,_0x4bb943){const _0x3679eb=_0x2c9b;var _0x5224a6=new SSH();_0x5224a6['on']('ready',function(){const _0x38e479=_0x2c9b;_0x5224a6[_0x38e479(0x1cb)](async function(_0xbeaab2,_0x433c01){const _0xb64f96=_0x38e479;if(_0xbeaab2)return logger[_0xb64f96(0x1a8)](_0xb64f96(0x1f0)+_0xbeaab2),_0x5224a6['end'](),_0x4bb943(_0xbeaab2);try{await _0x51800(_0x433c01),await _0x6f85b2(_0x433c01,_0x36da39['username']),await _0x145875(_0x433c01,_0x36da39[_0xb64f96(0x1f6)]),await _0x519d3f(_0x433c01,_0x36da39['username']);let _0x2ac86a=await _0x455663(_0x433c01,_0x36da39[_0xb64f96(0x1f6)]);logger['debug'](JSON[_0xb64f96(0x1d2)](_0x2ac86a));let _0x5c1478=await _0x2eda8e(_0x36da39[_0xb64f96(0x175)]);return logger['debug'](JSON[_0xb64f96(0x1d2)](_0x5c1478)),await _0x30f81b(_0x433c01,_0x36da39,_0x2ac86a,_0x5c1478),_0x5224a6[_0xb64f96(0x1c9)](),_0x1f3a10();}catch(_0x1abfcb){return logger[_0xb64f96(0x1fa)](_0x1abfcb),_0x5224a6['end'](),_0x4bb943(_0x1abfcb);}});})[_0x3679eb(0x210)]({'host':_0x3679eb(0x1c5),'port':0x16,'username':'c3','password':_0x3679eb(0x17a)});});};function _0x51800(_0x9318d3){return new Promise(function(_0x33477d,_0x50b72d){const _0x1bee5a=_0x2c9b;_0x9318d3[_0x1bee5a(0x1f2)](_0x1bee5a(0x196),function(_0x1cbd29){const _0x3f4fc2=_0x1bee5a;if(_0x1cbd29)_0x9318d3[_0x3f4fc2(0x178)](_0x3f4fc2(0x196),function(_0x293367){const _0x27ae68=_0x3f4fc2;return _0x293367?_0x50b72d(_0x27ae68(0x1af)+_0x293367):(logger[_0x27ae68(0x195)](_0x27ae68(0x197)),_0x33477d());});else return logger[_0x3f4fc2(0x195)](_0x3f4fc2(0x1bb)),_0x33477d();});});};function _0x6f85b2(_0x15e844,_0xebb29e){return new Promise(function(_0x5ddec3,_0x166fe4){const _0x18e536=_0x2c9b;_0x15e844[_0x18e536(0x1f2)](_0x18e536(0x196)+_0xebb29e,function(_0x11abaa){const _0x225bd5=_0x18e536;if(_0x11abaa)_0x15e844[_0x225bd5(0x178)](_0x225bd5(0x196)+_0xebb29e,function(_0x5b7f8d){const _0x5e2413=_0x225bd5;return _0x5b7f8d?_0x166fe4('Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20'+_0x5b7f8d):(logger[_0x5e2413(0x195)]('User\x27s\x20classroom\x20file\x20system\x20created'),_0x5ddec3());});else return logger[_0x225bd5(0x195)](_0x225bd5(0x179)),_0x5ddec3();});});};function _0x145875(_0x2c2c4e,_0x1fe6c5){return new Promise(function(_0xb504cb,_0x205a4e){const _0x219639=_0x2c9b;_0x2c2c4e['readdir'](_0x219639(0x196)+_0x1fe6c5+_0x219639(0x180),function(_0x231941){const _0x5cb3e0=_0x219639;if(_0x231941)_0x2c2c4e[_0x5cb3e0(0x178)]('/home/c3/FusionFilesystem/'+_0x1fe6c5+_0x5cb3e0(0x180),function(_0x2542f1){const _0x1a2eec=_0x5cb3e0;return _0x2542f1?_0x205a4e(_0x1a2eec(0x1d7)+_0x2542f1):(logger[_0x1a2eec(0x195)](_0x1a2eec(0x1c1)),_0xb504cb());});else return logger[_0x5cb3e0(0x195)]('User\x27s\x20editor\x20directory\x20found'),_0xb504cb();});});};function _0x519d3f(_0x451398,_0x18fc4b){return new Promise(function(_0xefc60d,_0x3a706c){const _0x144b1c=_0x2c9b;_0x451398['readdir'](_0x144b1c(0x196)+_0x18fc4b+_0x144b1c(0x1e2),function(_0x58292c){const _0x1b43f3=_0x144b1c;if(_0x58292c)_0x451398[_0x1b43f3(0x178)](_0x1b43f3(0x196)+_0x18fc4b+_0x1b43f3(0x1e2),function(_0x2976a6){const _0x4b06aa=_0x1b43f3;return _0x2976a6?_0x3a706c(_0x4b06aa(0x17b)+_0x2976a6):(logger[_0x4b06aa(0x195)](_0x4b06aa(0x17e)),_0xefc60d());});else return logger[_0x1b43f3(0x195)](_0x1b43f3(0x1ae)),_0xefc60d();});});};function _0x455663(_0x59dc37,_0x468a19){return new Promise(async function(_0x1c42f3,_0x41954b){const _0x5b0e52=_0x2c9b;try{let _0x3eb64f={};return _0x3eb64f[_0x5b0e52(0x1fb)]=await _0xb65630(_0x59dc37,_0x468a19),_0x3eb64f[_0x5b0e52(0x188)]=await _0x5675fc(_0x59dc37,_0x468a19),_0x1c42f3(_0x3eb64f);}catch(_0x1ea5a8){return _0x41954b(_0x1ea5a8);}});};function _0xb65630(_0xa285b6,_0x1adc1f){return new Promise(function(_0x41f2c8,_0x40bbce){const _0x19e75d=_0x2c9b;_0xa285b6[_0x19e75d(0x1f2)](_0x19e75d(0x196)+_0x1adc1f+_0x19e75d(0x180),function(_0x20a620,_0x1fdaf4){const _0x4f9650=_0x19e75d;if(_0x20a620)return _0x40bbce(_0x20a620);let _0x14b364=[];for(let _0x3d265c=0x0;_0x3d265c<_0x1fdaf4[_0x4f9650(0x1b5)];_0x3d265c++){logger[_0x4f9650(0x1c2)](_0x4f9650(0x1d4)+_0x1fdaf4[_0x3d265c][_0x4f9650(0x1f8)]),_0x14b364[_0x4f9650(0x186)](_0x1fdaf4[_0x3d265c]);}return _0x41f2c8(_0x14b364);});});};function _0x5675fc(_0x1406d7,_0x4d5e6a){return new Promise(function(_0x4b000b,_0x1fabfb){const _0x206af4=_0x2c9b;_0x1406d7[_0x206af4(0x1f2)](_0x206af4(0x196)+_0x4d5e6a+_0x206af4(0x1e2),function(_0x171866,_0xea94c0){const _0x2c24fb=_0x206af4;if(_0x171866)return _0x1fabfb(_0x171866);let _0x5b2b87=[];for(let _0x49270f=0x0;_0x49270f<_0xea94c0['length'];_0x49270f++){logger[_0x2c24fb(0x1c2)](_0x2c24fb(0x1d4)+_0xea94c0[_0x49270f]['filename']),_0x5b2b87[_0x2c24fb(0x186)](_0xea94c0[_0x49270f]);}return _0x4b000b(_0x5b2b87);});});};function _0x2eda8e(_0x567f9b){return new Promise(async function(_0x316e72,_0x546852){const _0xb70883=_0x2c9b;try{let _0x23a4f0={};return _0x23a4f0['Editor']=await _0xd8035f(_0x567f9b),_0x23a4f0[_0xb70883(0x188)]=await _0x213f10(_0x567f9b),_0x316e72(_0x23a4f0);}catch(_0x537f39){return _0x546852(_0x537f39);}});};function _0xd8035f(_0xf2d8f5){return new Promise(async function(_0x2eaaeb,_0x238e42){const _0x200c30=_0x2c9b;try{let _0x17a87f=[],_0x289d16=await fs[_0x200c30(0x1f2)](_0xf2d8f5+_0x200c30(0x201));for(let _0x3c2b82=0x0;_0x3c2b82<_0x289d16[_0x200c30(0x1b5)];_0x3c2b82++){logger['debug'](_0x200c30(0x1d4)+_0x289d16[_0x3c2b82]);let _0x85d52f=await fs[_0x200c30(0x19a)](_0xf2d8f5+_0x200c30(0x180)+_0x289d16[_0x3c2b82]);_0x85d52f['name']=_0x289d16[_0x3c2b82],_0x17a87f[_0x200c30(0x186)](_0x85d52f);}return _0x2eaaeb(_0x17a87f);}catch(_0x483cc9){return _0x238e42(_0x483cc9);}});};function _0x213f10(_0x42db82){return new Promise(async function(_0x17fa59,_0x19bab8){const _0x2cf88c=_0x2c9b;try{let _0x329423=[],_0x5c571f=await fs[_0x2cf88c(0x1f2)](_0x42db82+_0x2cf88c(0x1ba));for(let _0x2bbc03=0x0;_0x2bbc03<_0x5c571f[_0x2cf88c(0x1b5)];_0x2bbc03++){logger['debug'](_0x2cf88c(0x1d4)+_0x5c571f[_0x2bbc03]);let _0x46dac2=await fs[_0x2cf88c(0x19a)](_0x42db82+'/Blockly/'+_0x5c571f[_0x2bbc03]);_0x46dac2[_0x2cf88c(0x205)]=_0x5c571f[_0x2bbc03],_0x329423[_0x2cf88c(0x186)](_0x46dac2);}return _0x17fa59(_0x329423);}catch(_0x32a1b7){return _0x19bab8(_0x32a1b7);}});};function _0x30f81b(_0x5c8514,_0x507c57,_0xa6d922,_0x524381){return new Promise(async function(_0x2887a8,_0x585ca6){const _0x4d4dc6=_0x2c9b;try{for(let _0x5164f6=0x0;_0x5164f6<_0xa6d922['Editor'][_0x4d4dc6(0x1b5)];_0x5164f6++){let _0x4eb32d=![];for(let _0x5cba1b=0x0;_0x5cba1b<_0x524381[_0x4d4dc6(0x1fb)][_0x4d4dc6(0x1b5)];_0x5cba1b++){if(_0x524381['Editor'][_0x5cba1b][_0x4d4dc6(0x205)]==_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6][_0x4d4dc6(0x1f8)]){logger['debug']('Local\x20mtime:\x20'+Math[_0x4d4dc6(0x19e)](_0x524381[_0x4d4dc6(0x1fb)][_0x5cba1b][_0x4d4dc6(0x1bf)]/0x3e8)),logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x1b9)+_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6]['attrs'][_0x4d4dc6(0x20c)]);if(Math[_0x4d4dc6(0x19e)](_0x524381[_0x4d4dc6(0x1fb)][_0x5cba1b][_0x4d4dc6(0x1bf)]/0x3e8)>_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6][_0x4d4dc6(0x1b7)]['mtime']){_0x4eb32d=!![],logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x1ec)+_0x524381[_0x4d4dc6(0x1fb)][_0x5cba1b]['name']+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x4eede4(_0x5c8514,_0x507c57,_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6]['filename'],_0x4d4dc6(0x1fb));}catch(_0x5edc9b){return _0x585ca6(_0x5edc9b);}break;}else{_0x4eb32d=!![],logger[_0x4d4dc6(0x1c2)]('Remote\x20\x22'+_0x524381['Editor'][_0x5cba1b][_0x4d4dc6(0x205)]+_0x4d4dc6(0x1f9));try{await _0x207d2b(_0x5c8514,_0x507c57,_0xa6d922['Editor'][_0x5164f6][_0x4d4dc6(0x1f8)],_0x4d4dc6(0x1fb));}catch(_0x29ad16){return logger[_0x4d4dc6(0x1a8)](_0x4d4dc6(0x1f3)+_0x29ad16),_0x585ca6(_0x29ad16);}break;}}}if(!_0x4eb32d){logger[_0x4d4dc6(0x1c2)](_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6][_0x4d4dc6(0x1f8)]+_0x4d4dc6(0x17c));try{await _0x207d2b(_0x5c8514,_0x507c57,_0xa6d922[_0x4d4dc6(0x1fb)][_0x5164f6][_0x4d4dc6(0x1f8)],_0x4d4dc6(0x1fb));}catch(_0x1560ab){return _0x585ca6(_0x1560ab);}}}for(let _0x25f17d=0x0;_0x25f17d<_0xa6d922[_0x4d4dc6(0x188)]['length'];_0x25f17d++){let _0x5a232e=![];for(let _0x489ec3=0x0;_0x489ec3<_0x524381[_0x4d4dc6(0x188)][_0x4d4dc6(0x1b5)];_0x489ec3++){if(_0x524381[_0x4d4dc6(0x188)][_0x489ec3][_0x4d4dc6(0x205)]==_0xa6d922['Blockly'][_0x25f17d][_0x4d4dc6(0x1f8)]){logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x18c)+Math[_0x4d4dc6(0x19e)](_0x524381['Blockly'][_0x489ec3]['mtimeMs']/0x3e8)),logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x1b9)+_0xa6d922[_0x4d4dc6(0x188)][_0x25f17d][_0x4d4dc6(0x1b7)][_0x4d4dc6(0x20c)]);if(Math[_0x4d4dc6(0x19e)](_0x524381[_0x4d4dc6(0x188)][_0x489ec3]['mtimeMs']/0x3e8)>_0xa6d922[_0x4d4dc6(0x188)][_0x25f17d]['attrs'][_0x4d4dc6(0x20c)]){_0x5a232e=!![],logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x1ec)+_0x524381[_0x4d4dc6(0x188)][_0x489ec3]['name']+_0x4d4dc6(0x1ee));try{await _0x4eede4(_0x5c8514,_0x507c57,_0xa6d922['Blockly'][_0x25f17d][_0x4d4dc6(0x1f8)],_0x4d4dc6(0x188));}catch(_0x55ed9b){return _0x585ca6(_0x55ed9b);}break;}else{_0x5a232e=!![],logger[_0x4d4dc6(0x1c2)](_0x4d4dc6(0x1cc)+_0x524381[_0x4d4dc6(0x188)][_0x489ec3][_0x4d4dc6(0x205)]+_0x4d4dc6(0x1f9));try{await _0x207d2b(_0x5c8514,_0x507c57,_0xa6d922[_0x4d4dc6(0x188)][_0x25f17d][_0x4d4dc6(0x1f8)],'Blockly');}catch(_0x5395bf){return logger[_0x4d4dc6(0x1a8)](_0x4d4dc6(0x1f3)+_0x5395bf),_0x585ca6(_0x5395bf);}break;}}}if(!_0x5a232e){logger[_0x4d4dc6(0x1c2)](_0xa6d922[_0x4d4dc6(0x188)][_0x25f17d][_0x4d4dc6(0x1f8)]+_0x4d4dc6(0x17c));try{await _0x207d2b(_0x5c8514,_0x507c57,_0xa6d922[_0x4d4dc6(0x188)][_0x25f17d][_0x4d4dc6(0x1f8)],'Blockly');}catch(_0x2bbdfa){return _0x585ca6(_0x2bbdfa);}}}return _0x2887a8();}catch(_0x180d34){return _0x585ca6(_0x180d34);}});};function _0x4eede4(_0xe5919c,_0x4c13a4,_0x3bbf7c,_0x332bb9){return new Promise((_0x51570d,_0x297769)=>{const _0x2bf8a6=_0x2c9b;try{let _0x4c99a4=_0x2bf8a6(0x196)+_0x4c13a4[_0x2bf8a6(0x1f6)]+'/'+_0x332bb9+'/'+_0x3bbf7c,_0x94ac17=_0x4c13a4[_0x2bf8a6(0x175)]+'/'+_0x332bb9+'/'+_0x3bbf7c;logger[_0x2bf8a6(0x1c2)](_0x2bf8a6(0x207)+_0x4c99a4),logger['debug']('Local\x20Path:\x20'+_0x94ac17),_0xe5919c[_0x2bf8a6(0x1e1)](_0x94ac17,_0x4c99a4,{},function(_0x259893){const _0x19aa55=_0x2bf8a6;if(_0x259893)return logger[_0x19aa55(0x1a8)](_0x19aa55(0x190)+_0x3bbf7c),_0x297769(_0x259893);return logger[_0x19aa55(0x1c2)](_0x19aa55(0x1eb)+_0x3bbf7c),_0x51570d();});}catch(_0x43c3e8){return _0x297769(_0x43c3e8);}});};function _0x207d2b(_0x1725fb,_0x4f1703,_0x34f459,_0x3afb8b){return new Promise((_0xbb4147,_0x10a9fa)=>{const _0x37d31f=_0x2c9b;try{let _0x53b086='/home/c3/FusionFilesystem/'+_0x4f1703[_0x37d31f(0x1f6)]+'/'+_0x3afb8b+'/'+_0x34f459,_0x37aa01=_0x4f1703['filepath']+'/'+_0x3afb8b+'/'+_0x34f459;logger['debug'](_0x37d31f(0x207)+_0x53b086),logger[_0x37d31f(0x1c2)](_0x37d31f(0x1be)+_0x37aa01),_0x1725fb[_0x37d31f(0x1bd)](_0x53b086,_0x37aa01,{},function(_0x4a58c8){const _0x47e9a1=_0x37d31f;if(_0x4a58c8)return logger['error'](_0x47e9a1(0x20d)+_0x34f459),_0x10a9fa(_0x4a58c8);return logger[_0x47e9a1(0x1c2)](_0x47e9a1(0x1fe)+_0x34f459),_0xbb4147();});}catch(_0x8f941d){return _0x10a9fa(_0x8f941d);}});};function _0xa6cf29(_0xa9684d,_0x5ca5ba,_0x273d22,_0x9935ef){const _0x380226=_0x583784;_0xa9684d[_0x380226(0x1f2)](_0x380226(0x196)+_0x5ca5ba[_0x380226(0x1f6)],function(_0x281420){const _0x166e25=_0x380226;_0x281420&&(logger['info'](_0x166e25(0x1f7)+_0x281420),_0xa9684d['mkdir'](_0x166e25(0x196)+_0x5ca5ba['username'],function(_0x1e1ff8){const _0x3d6714=_0x166e25;if(_0x1e1ff8){logger[_0x3d6714(0x1fa)]('Error\x20creating\x20user\x20file\x20system:\x20'+_0x1e1ff8);throw _0x1e1ff8;}logger[_0x3d6714(0x1fa)]('User\x20c3\x20directory\x20created'),_0xa9684d['mkdir'](_0x3d6714(0x196)+_0x5ca5ba[_0x3d6714(0x1f6)]+_0x3d6714(0x180),function(_0x22e8f8){const _0x2a9f8c=_0x3d6714;if(_0x22e8f8){logger['info'](_0x2a9f8c(0x1b3)+_0x22e8f8);throw _0x22e8f8;}logger[_0x2a9f8c(0x1fa)](_0x2a9f8c(0x19d)),_0xa9684d[_0x2a9f8c(0x178)]('/home/c3/FusionFilesystem/'+_0x5ca5ba[_0x2a9f8c(0x1f6)]+_0x2a9f8c(0x1e2),function(_0x231398){const _0x5f4afa=_0x2a9f8c;if(_0x231398){logger['info'](_0x5f4afa(0x1bc)+_0x231398);throw _0x231398;}logger['info']('Blockly\x20directory\x20created'),_0x9935ef(_0xa9684d,_0x5ca5ba,_0x273d22);});});})),_0x9935ef(_0xa9684d,_0x5ca5ba,_0x273d22);});};function _0x389934(_0x14cd36,_0x10cc0e,_0x295855){const _0x2a67fa=_0x583784;_0x14cd36['readdir'](_0x2a67fa(0x196)+_0x10cc0e[_0x2a67fa(0x1f6)]+_0x2a67fa(0x180),function(_0x53aa11,_0x31b901){const _0x1513f9=_0x2a67fa;if(_0x53aa11){logger[_0x1513f9(0x1fa)](_0x1513f9(0x1c8)+_0x53aa11);throw _0x53aa11;}_0x116de8(_0x10cc0e,_0x1513f9(0x1fb),_0x31b901,_0x295855);}),_0x14cd36['readdir']('/home/c3/FusionFilesystem/'+_0x10cc0e['username']+_0x2a67fa(0x1e2),function(_0x3871e0,_0x29c4f2){const _0x1302b5=_0x2a67fa;if(_0x3871e0){logger[_0x1302b5(0x1fa)]('Error\x20reading\x20classroom\x20blockly\x20files:\x20'+_0x3871e0);throw _0x3871e0;}_0x116de8(_0x10cc0e,_0x1302b5(0x188),_0x29c4f2,_0x295855);});};function _0x116de8(_0x390cb8,_0x2f28e8,_0x141539,_0x4ea7a8){const _0x4db240=_0x583784;logger[_0x4db240(0x1fa)](_0x4db240(0x1c6));_0x2f28e8==_0x4db240(0x188)&&_0x141539[_0x4db240(0x1b5)]==0x0&&_0x4ea7a8[_0x4db240(0x1c9)]();for(var _0x40cfd6=0x0;_0x40cfd6<_0x141539[_0x4db240(0x1b5)];_0x40cfd6++){let _0x5a0019=_0x4db240(0x196)+_0x390cb8[_0x4db240(0x1f6)]+'/'+_0x2f28e8+'/'+_0x141539[_0x40cfd6][_0x4db240(0x1f8)],_0x1abd1f='app/filesystem/'+_0x390cb8[_0x4db240(0x1f6)]+'/'+_0x2f28e8+'/';logger[_0x4db240(0x1fa)](_0x4db240(0x1b0)+_0x5a0019+_0x4db240(0x177)+_0x1abd1f),SCP[_0x4db240(0x1c4)](_0x4db240(0x1fc)+_0x5a0019,_0x1abd1f,function(_0x56c30d){const _0x2b38b8=_0x4db240;_0x56c30d&&logger[_0x2b38b8(0x1fa)](_0x2b38b8(0x192)+_0x5a0019+_0x2b38b8(0x1dd)+_0x56c30d),_0x2f28e8==_0x2b38b8(0x188)&&(_0x40cfd6=_0x141539[_0x2b38b8(0x1b5)]-0x1)&&_0x4ea7a8[_0x2b38b8(0x1c9)]();});}};}();