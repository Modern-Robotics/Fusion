const _0x2d46=['Error:\x20','mtime','logout','logIn','Error\x20with\x20request\x20promise.\x20','Admin','MultiUserAccess','app/filesystem/','trim','\x20to\x20','Retrieved\x20','../../global/fusionSettings','User\x27s\x20editor\x20directory\x20created','Classroom\x20file\x20system\x20created','removeFileSystem','../../utils/logger','Error\x20reading\x20classroom\x20blockly\x20files:\x20','user','/api/users','local-recovery','fastGet','fs-extra','/Blockly/','login','LOGIN.SUCCESS','SocketVariables','defaultprogramminglanguage','password','/api/users/login','Guest','info','in\x20cloud\x20login','authenticate','/Blockly','Error\x20creating\x20classroom\x20file\x20system:\x20','Local\x20Path:\x20','Getting\x20data\x20for\x20','attrs','../../fusionProgram','Error\x20uploading\x20file:\x20','Local\x20mtime:\x20','/api/users/cloudLogin','Remote\x20path:\x20','Successfully\x20deleted','isAuthenticated','User','exec','User\x20Unauthenticated','language','User\x20c3\x20directory\x20created','mkdir','User\x20does\x20not\x20exist','get','connect','Retrieving\x20files','User\x27s\x20classroom\x20file\x20system\x20found','fastPut','body','local-login','/api/recovery/:User_Id','create','User_Id','post','\x20not\x20a\x20common\x20file!','passport','connectedClients','Error','User\x20updated!','Error\x20communicating\x20with\x20c3:\x20','Remote\x20mtime:\x20','email','scp','Uploaded\x20','/Editor/','connected','unshift','username','send','securityquestion','lastname','Editor','Moving:\x20','Remote\x20\x22','push','User\x27s\x20blockly\x20directory\x20found','toLowerCase','KillProgram','10.200.200.1','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','filename','delete','save','ready','json','Blockly\x20directory\x20created','stat','/home/c3/FusionFilesystem/','readdir','stringify','local-signup','name','/Editor','remove','User\x27s\x20blockly\x20directory\x20created','findOne','put','Error\x20reading\x20user\x20file\x20system:\x20','sftp','\x22\x20newer,\x20updating\x20local\x20version','LOGIN.MULTIUSER_DENIED','floor','Error\x20downloading\x20file:\x20','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','mtimeMs','User\x27s\x20editor\x20directory\x20found','Blockly','length','Local\x20\x22','Error\x20downloading:\x20','params','Client','message','usergroup','fusion_program_running','securityanswer','filepath','/api/users/:User_Id','Error\x20reading\x20classroom\x20editor\x20files:\x20','status','scp2','/api/users/logout','end','exports','socketId'];(function(_0x2b064e,_0x2d46e2){const _0x16d21b=function(_0x16fa6e){while(--_0x16fa6e){_0x2b064e['push'](_0x2b064e['shift']());}};_0x16d21b(++_0x2d46e2);}(_0x2d46,0x118));const _0x16d2=function(_0x2b064e,_0x2d46e2){_0x2b064e=_0x2b064e-0x0;let _0x16d21b=_0x2d46[_0x2b064e];return _0x16d21b;};var SCP=require(_0x16d2('0x75'));var SSH=require('ssh2')[_0x16d2('0x6c')];var fs=require(_0x16d2('0x9'));var path=require('path');var rp=require('request-promise');const classroomConnection=require('../../classroom/connection');const logger=require(_0x16d2('0x3'));const app=require('../../express');const User=require('../../models/user');const passport=require(_0x16d2('0x34'));const FusionSettings=require(_0x16d2('0x85'));const fusionProgram=require(_0x16d2('0x1a'));module[_0x16d2('0x78')]=function(){app[_0x16d2('0x28')](_0x16d2('0x6'),_0x71e6(),function(_0x275a54,_0x38c915){User['find']({'usergroup':{'$ne':_0x16d2('0x11')}},function(_0x57c1a5,_0x3bf9d1){if(_0x57c1a5)_0x38c915[_0x16d2('0x41')](_0x57c1a5);_0x38c915[_0x16d2('0x51')](_0x3bf9d1);});});app[_0x16d2('0x32')](_0x16d2('0x6'),function(_0x5b1ed2,_0x1a492a,_0x46f38d){passport['authenticate'](_0x16d2('0x57'),async function(_0x4501d7,_0x377f87,_0x31f10c){if(_0x4501d7)return _0x1a492a[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x4501d7);if(_0x31f10c&&_0x31f10c['message'])return _0x1a492a['status'](0x1f4)['send'](_0x5b1ed2['__'](_0x31f10c[_0x16d2('0x6d')]));if(FusionSettings[_0x16d2('0x80')]){if(classroomConnection[_0x16d2('0x3e')]){await _0x12354a(_0x377f87);}_0x5b1ed2['logIn'](_0x377f87,function(_0xd620e4){if(_0xd620e4){return _0x46f38d(_0xd620e4);}_0x49e26a(_0x5b1ed2[_0x16d2('0x2d')]['socketId'],_0x377f87);return _0x1a492a[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x5b1ed2['__']('REGISTER.CREATED'),'user':_0x377f87});});}else{if(_0x30fb07()==0x0){_0x49e26a(_0x5b1ed2['body']['socketId'],_0x377f87);if(classroomConnection[_0x16d2('0x3e')]){await _0x12354a(_0x377f87);}_0x5b1ed2[_0x16d2('0x7d')](_0x377f87,function(_0x5636a2){if(_0x5636a2){return _0x46f38d(_0x5636a2);}_0x49e26a(_0x5b1ed2[_0x16d2('0x2d')][_0x16d2('0x79')],_0x377f87);return _0x1a492a[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x5b1ed2['__']('REGISTER.CREATED'),'user':_0x377f87});});}else{return _0x1a492a[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x5b1ed2['__']('REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED'));}}})(_0x5b1ed2,_0x1a492a,_0x46f38d);});app['post'](_0x16d2('0x6'),passport[_0x16d2('0x14')]('local-signup',{'session':!![]}),function(_0x1315fa,_0x54d937){if(_0x1315fa[_0x16d2('0x5')]['Error']){return _0x54d937[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x1315fa['user'][_0x16d2('0x36')]);}else{}});app[_0x16d2('0x28')](_0x16d2('0x72'),_0x71e6(),function(_0x54cdce,_0x4d548d){User['findOne']({'username':_0x54cdce[_0x16d2('0x6b')][_0x16d2('0x31')]['toLowerCase']()['trim']()},function(_0x273fee,_0x491f45){if(_0x273fee)_0x4d548d[_0x16d2('0x41')](_0x273fee);_0x4d548d[_0x16d2('0x51')](_0x491f45);});});app[_0x16d2('0x5d')](_0x16d2('0x72'),_0x71e6(),function(_0x341058,_0x201d0b){User[_0x16d2('0x5c')]({'username':_0x341058[_0x16d2('0x6b')][_0x16d2('0x31')][_0x16d2('0x49')]()[_0x16d2('0x82')]()},function(_0x5cf86d,_0x229193){if(_0x5cf86d)_0x201d0b[_0x16d2('0x41')](_0x5cf86d);if(_0x341058['body'][_0x16d2('0xf')]){_0x229193[_0x16d2('0xf')]=_0x229193['generateHash'](_0x341058['body']['password']);}if(_0x341058[_0x16d2('0x2d')]['firstname']){_0x229193['firstname']=_0x341058[_0x16d2('0x2d')]['firstname'];}if(_0x341058[_0x16d2('0x2d')][_0x16d2('0x43')]){_0x229193['lastname']=_0x341058['body'][_0x16d2('0x43')];}if(_0x341058[_0x16d2('0x2d')][_0x16d2('0x24')]){_0x229193[_0x16d2('0x24')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0x24')];}if(_0x341058[_0x16d2('0x2d')]['email']){_0x229193[_0x16d2('0x3a')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0x3a')];}if(_0x341058['body'][_0x16d2('0xe')]){_0x229193[_0x16d2('0xe')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0xe')];}if(_0x341058[_0x16d2('0x2d')][_0x16d2('0x42')]){_0x229193[_0x16d2('0x42')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0x42')];}if(_0x341058[_0x16d2('0x2d')][_0x16d2('0x70')]){_0x229193[_0x16d2('0x70')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0x70')];}if(_0x341058['body'][_0x16d2('0x6e')]){_0x229193[_0x16d2('0x6e')]=_0x341058[_0x16d2('0x2d')][_0x16d2('0x6e')];}_0x229193[_0x16d2('0x4f')](function(_0xf9d97a){if(_0xf9d97a)_0x201d0b[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0xf9d97a);_0x201d0b['status'](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x16d2('0x37')});});});});app[_0x16d2('0x4e')]('/api/users/:User_Id',_0x71e6(),function(_0x5a3196,_0x42b404){if(_0x5a3196[_0x16d2('0x6b')][_0x16d2('0x31')][_0x16d2('0x49')]()[_0x16d2('0x82')]()==_0x5a3196[_0x16d2('0x5')]['username']){if(FusionSettings[_0x16d2('0xd')]['fusion_program_running'])if(FusionSettings[_0x16d2('0xd')][_0x16d2('0x6f')]['User']==_0x5a3196['user'][_0x16d2('0x40')])fusionProgram[_0x16d2('0x4a')]();_0x2973df(_0x5a3196[_0x16d2('0x5')][_0x16d2('0x40')]);_0x5a3196['logout']();}User[_0x16d2('0x5a')]({'username':_0x5a3196[_0x16d2('0x6b')][_0x16d2('0x31')][_0x16d2('0x49')]()[_0x16d2('0x82')]()},function(_0x30d784,_0x4b7f63){if(_0x30d784)return _0x42b404[_0x16d2('0x41')](_0x30d784);User[_0x16d2('0x2')](_0x5a3196['params'][_0x16d2('0x31')]['toLowerCase']()[_0x16d2('0x82')]());return _0x42b404[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x16d2('0x1f')});});});app['post'](_0x16d2('0x10'),function(_0x1a1178,_0x2b66d1,_0x857435){passport['authenticate'](_0x16d2('0x2e'),async function(_0x2668aa,_0x45667b,_0x5e4f24){if(_0x2668aa)return _0x2b66d1[_0x16d2('0x74')](0x1f4)['send'](_0x1a1178['__'](_0x2668aa['message']));if(!_0x45667b)return _0x2b66d1[_0x16d2('0x74')](0x191)['send'](_0x1a1178['__'](_0x5e4f24[_0x16d2('0x6d')]));if(FusionSettings[_0x16d2('0x80')]){if(classroomConnection[_0x16d2('0x3e')]){await _0x12354a(_0x45667b);}_0x1a1178[_0x16d2('0x7d')](_0x45667b,function(_0x1a083c){if(_0x1a083c){return _0x857435(_0x1a083c);}_0x49e26a(_0x1a1178[_0x16d2('0x2d')][_0x16d2('0x79')],_0x45667b);return _0x2b66d1['status'](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x1a1178['__'](_0x16d2('0xc')),'user':_0x45667b});});}else{if(_0x30fb07()==0x0){_0x49e26a(_0x1a1178[_0x16d2('0x2d')][_0x16d2('0x79')],_0x45667b);if(classroomConnection[_0x16d2('0x3e')]){await _0x12354a(_0x45667b);}_0x1a1178[_0x16d2('0x7d')](_0x45667b,function(_0x5d275f){if(_0x5d275f){return _0x857435(_0x5d275f);}_0x49e26a(_0x1a1178[_0x16d2('0x2d')][_0x16d2('0x79')],_0x45667b);return _0x2b66d1[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':_0x1a1178['__']('LOGIN.SUCCESS'),'user':_0x45667b});});}else{return _0x2b66d1[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x1a1178['__'](_0x16d2('0x61')));}}})(_0x1a1178,_0x2b66d1,_0x857435);});app[_0x16d2('0x32')](_0x16d2('0x1d'),async function(_0x187444,_0x3d1197){logger['info'](_0x16d2('0x13'));var _0x3b23ea={'method':'POST','uri':'https://172.16.0.1/backend/auth/ldap','body':{'username':_0x187444[_0x16d2('0x2d')]['username'],'password':_0x187444[_0x16d2('0x2d')]['password']},'json':!![],'rejectUnauthorized':![]};try{let _0x8985bb=await rp(_0x3b23ea);let _0x29737b=await User[_0x16d2('0x5c')]({'username':_0x187444[_0x16d2('0x2d')][_0x16d2('0x40')]})[_0x16d2('0x22')]();if(_0x29737b){return _0x3d1197[_0x16d2('0x74')](0xc8)[_0x16d2('0x41')](_0x16d2('0xb'));}else{return _0x3d1197[_0x16d2('0x74')](0xc8)[_0x16d2('0x41')](_0x16d2('0x30'));}}catch(_0x3bdf3b){logger[_0x16d2('0x12')](_0x16d2('0x7e')+_0x3bdf3b);return _0x3d1197[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x3bdf3b);}});app[_0x16d2('0x32')](_0x16d2('0x76'),_0x71e6(),function(_0xf42907,_0x10e7b2){if(FusionSettings[_0x16d2('0xd')][_0x16d2('0x6f')])if(FusionSettings[_0x16d2('0xd')][_0x16d2('0x6f')][_0x16d2('0x21')]==_0xf42907['user']['username'])fusionProgram[_0x16d2('0x4a')]();_0x382572(_0xf42907[_0x16d2('0x2d')][_0x16d2('0x79')]);_0xf42907[_0x16d2('0x7c')]();_0x10e7b2[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':'Logged\x20out\x20successfully'});});app[_0x16d2('0x28')](_0x16d2('0x2f'),function(_0x3b979d,_0x3c87a7){User[_0x16d2('0x5c')]({'username':_0x3b979d[_0x16d2('0x6b')][_0x16d2('0x31')][_0x16d2('0x49')]()[_0x16d2('0x82')]()},function(_0x35e682,_0xd0bf3a){if(_0x35e682)return _0x3c87a7[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')](_0x35e682);if(!_0xd0bf3a)return _0x3c87a7[_0x16d2('0x74')](0x1f4)['send'](_0x16d2('0x27'));else return _0x3c87a7[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')](_0xd0bf3a[_0x16d2('0x42')]);});});app['post']('/api/recovery',passport['authenticate'](_0x16d2('0x7'),{'session':!![]}),function(_0x135397,_0x2e1d1a){if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x16d2('0x3e')]){_0x12354a(_0x135397[_0x16d2('0x5')]);}_0x49e26a(_0x135397[_0x16d2('0x2d')][_0x16d2('0x79')],_0x135397['user']);return _0x2e1d1a[_0x16d2('0x74')](0xc8)[_0x16d2('0x51')]({'serverMessage':'Login\x20Successful','user':_0x135397[_0x16d2('0x5')]});}else{if(_0x30fb07()==0x0){_0x49e26a(_0x135397[_0x16d2('0x2d')][_0x16d2('0x79')],_0x135397[_0x16d2('0x5')]);if(classroomConnection[_0x16d2('0x3e')]){_0x12354a(_0x135397['user']);}return _0x2e1d1a['status'](0xc8)[_0x16d2('0x51')]({'serverMessage':'Login\x20Successful','user':_0x135397[_0x16d2('0x5')]});}else{_0x135397[_0x16d2('0x7c')]();return _0x2e1d1a[_0x16d2('0x74')](0x1f4)[_0x16d2('0x41')]('Another\x20user\x20is\x20already\x20logged\x20in.');}}});app[_0x16d2('0x28')]('/api/allowedUserGroups',function(_0x3cf6fc,_0x2be475){var _0x526114=['User'];User[_0x16d2('0x5c')]({'usergroup':_0x16d2('0x7f')},function(_0x4c536c,_0x25a272){if(_0x4c536c)return _0x2be475['status'](0xc8)['send'](_0x526114);if(!_0x25a272)_0x526114[_0x16d2('0x3f')](_0x16d2('0x7f'));return _0x2be475[_0x16d2('0x74')](0xc8)['send'](_0x526114);});});function _0x30fb07(){var _0x2dd606=0x0;for(var _0x3581ef=0x0;_0x3581ef<FusionSettings[_0x16d2('0x35')][_0x16d2('0x68')];_0x3581ef++){if(FusionSettings['connectedClients'][_0x3581ef][_0x16d2('0x21')]){_0x2dd606++;}}return _0x2dd606;}function _0x49e26a(_0x814faa,_0x33a869){for(var _0x2ec0a6=0x0;_0x2ec0a6<FusionSettings[_0x16d2('0x35')][_0x16d2('0x68')];_0x2ec0a6++){if(FusionSettings[_0x16d2('0x35')][_0x2ec0a6]['id']==_0x814faa){FusionSettings['connectedClients'][_0x2ec0a6]['User']=_0x33a869;break;}}}function _0x382572(_0x473414){for(var _0x3c3e96=0x0;_0x3c3e96<FusionSettings['connectedClients'][_0x16d2('0x68')];_0x3c3e96++){if(FusionSettings[_0x16d2('0x35')][_0x3c3e96]['id']==_0x473414){FusionSettings[_0x16d2('0x35')][_0x3c3e96][_0x16d2('0x21')]=undefined;break;}}}function _0x2973df(_0x1d6c24){for(var _0x45034f=0x0;_0x45034f<FusionSettings[_0x16d2('0x35')][_0x16d2('0x68')];_0x45034f++){if(FusionSettings[_0x16d2('0x35')][_0x45034f]['User'][_0x16d2('0x40')]==_0x1d6c24){FusionSettings[_0x16d2('0x35')][_0x45034f][_0x16d2('0x21')]=undefined;break;}}}function _0x71e6(){return function(_0x14d095,_0x53cefb,_0x104caf){if(_0x14d095[_0x16d2('0x20')]()){return _0x104caf();}else{return _0x53cefb[_0x16d2('0x74')](0x191)['send'](_0x16d2('0x23'));}};}async function _0x12354a(_0x52176d){try{await _0x43eb6d(_0x52176d);}catch(_0x16d52a){logger[_0x16d2('0x12')](_0x16d52a);logger[_0x16d2('0x12')]('Error\x20downloading\x20classroom\x20files\x20for\x20'+_0x52176d['username']);}};function _0x43eb6d(_0x1e12cf){return new Promise(function(_0x2d5517,_0xf96fab){var _0x6f6b55=new SSH();_0x6f6b55['on'](_0x16d2('0x50'),function(){_0x6f6b55[_0x16d2('0x5f')](async function(_0x5aaecb,_0xd435a9){if(_0x5aaecb){logger[_0x16d2('0x12')](_0x16d2('0x38')+_0x5aaecb);_0x6f6b55['end']();return _0xf96fab(_0x5aaecb);}try{await _0x5ef802(_0xd435a9);await _0x10a860(_0xd435a9,_0x1e12cf[_0x16d2('0x40')]);await _0x2eaaee(_0xd435a9,_0x1e12cf['username']);await _0x6841a3(_0xd435a9,_0x1e12cf[_0x16d2('0x40')]);let _0x4bf884=await _0x2d0e04(_0xd435a9,_0x1e12cf[_0x16d2('0x40')]);logger['info'](JSON[_0x16d2('0x56')](_0x4bf884));let _0x5886f9=await _0x411288(_0x1e12cf[_0x16d2('0x71')]);logger['info'](JSON[_0x16d2('0x56')](_0x5886f9));await _0x21b388(_0xd435a9,_0x1e12cf,_0x4bf884,_0x5886f9);_0x6f6b55[_0x16d2('0x77')]();return _0x2d5517();}catch(_0x3423af){logger[_0x16d2('0x12')](_0x3423af);_0x6f6b55[_0x16d2('0x77')]();return _0xf96fab(_0x3423af);}});})[_0x16d2('0x29')]({'host':_0x16d2('0x4b'),'port':0x16,'username':'c3','password':'root'});});};function _0x5ef802(_0xb1cce2){return new Promise(function(_0x1a2635,_0x8c01f5){_0xb1cce2[_0x16d2('0x55')](_0x16d2('0x54'),function(_0x2d931d){if(_0x2d931d){_0xb1cce2[_0x16d2('0x26')]('/home/c3/FusionFilesystem/',function(_0x137927){if(_0x137927){return _0x8c01f5(_0x16d2('0x16')+_0x137927);}else{logger[_0x16d2('0x12')](_0x16d2('0x1'));return _0x1a2635();}});}else{logger['info']('Classroom\x20file\x20system\x20found');return _0x1a2635();}});});};function _0x10a860(_0x13aa04,_0x49851a){return new Promise(function(_0x111a58,_0x6ec3e4){_0x13aa04[_0x16d2('0x55')](_0x16d2('0x54')+_0x49851a,function(_0x1972df){if(_0x1972df){_0x13aa04[_0x16d2('0x26')](_0x16d2('0x54')+_0x49851a,function(_0x3278e9){if(_0x3278e9){return _0x6ec3e4('Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20'+_0x3278e9);}else{logger[_0x16d2('0x12')]('User\x27s\x20classroom\x20file\x20system\x20created');return _0x111a58();}});}else{logger['info'](_0x16d2('0x2b'));return _0x111a58();}});});};function _0x2eaaee(_0xfa4c53,_0x5a20c0){return new Promise(function(_0x52566c,_0x5b27e9){_0xfa4c53['readdir']('/home/c3/FusionFilesystem/'+_0x5a20c0+'/Editor/',function(_0x3b8108){if(_0x3b8108){_0xfa4c53[_0x16d2('0x26')](_0x16d2('0x54')+_0x5a20c0+_0x16d2('0x3d'),function(_0x53104a){if(_0x53104a){return _0x5b27e9(_0x16d2('0x64')+_0x53104a);}else{logger[_0x16d2('0x12')](_0x16d2('0x0'));return _0x52566c();}});}else{logger[_0x16d2('0x12')](_0x16d2('0x66'));return _0x52566c();}});});};function _0x6841a3(_0x2cdccd,_0x5f3dbc){return new Promise(function(_0x39734f,_0x2053cd){_0x2cdccd[_0x16d2('0x55')](_0x16d2('0x54')+_0x5f3dbc+_0x16d2('0xa'),function(_0x28ee4c){if(_0x28ee4c){_0x2cdccd[_0x16d2('0x26')](_0x16d2('0x54')+_0x5f3dbc+_0x16d2('0xa'),function(_0x45de97){if(_0x45de97){return _0x2053cd(_0x16d2('0x4c')+_0x45de97);}else{logger[_0x16d2('0x12')](_0x16d2('0x5b'));return _0x39734f();}});}else{logger['info'](_0x16d2('0x48'));return _0x39734f();}});});};function _0x2d0e04(_0x3a502a,_0x25208b){return new Promise(async function(_0x1ff683,_0x26702e){try{let _0x15d823={};_0x15d823[_0x16d2('0x44')]=await _0x4b9fb1(_0x3a502a,_0x25208b);_0x15d823[_0x16d2('0x67')]=await _0x2f3fba(_0x3a502a,_0x25208b);return _0x1ff683(_0x15d823);}catch(_0x1a54ca){return _0x26702e(_0x1a54ca);}});};function _0x4b9fb1(_0x460957,_0x188891){return new Promise(function(_0x279f70,_0x3ff07f){_0x460957[_0x16d2('0x55')](_0x16d2('0x54')+_0x188891+_0x16d2('0x3d'),function(_0x12dadc,_0x4ea5c2){if(_0x12dadc)return _0x3ff07f(_0x12dadc);let _0x47df5b=[];for(let _0x59f5bc=0x0;_0x59f5bc<_0x4ea5c2[_0x16d2('0x68')];_0x59f5bc++){logger['info'](_0x16d2('0x18')+_0x4ea5c2[_0x59f5bc][_0x16d2('0x4d')]);_0x47df5b[_0x16d2('0x47')](_0x4ea5c2[_0x59f5bc]);}return _0x279f70(_0x47df5b);});});};function _0x2f3fba(_0x1b323c,_0x3992bf){return new Promise(function(_0x2422b3,_0x5d3c5b){_0x1b323c[_0x16d2('0x55')](_0x16d2('0x54')+_0x3992bf+_0x16d2('0xa'),function(_0x4b1371,_0x176e74){if(_0x4b1371)return _0x5d3c5b(_0x4b1371);let _0x53f022=[];for(let _0x5ef8dc=0x0;_0x5ef8dc<_0x176e74[_0x16d2('0x68')];_0x5ef8dc++){logger[_0x16d2('0x12')]('Getting\x20data\x20for\x20'+_0x176e74[_0x5ef8dc][_0x16d2('0x4d')]);_0x53f022[_0x16d2('0x47')](_0x176e74[_0x5ef8dc]);}return _0x2422b3(_0x53f022);});});};function _0x411288(_0x11f085){return new Promise(async function(_0x105c4a,_0xa8f268){try{let _0x362d98={};_0x362d98['Editor']=await _0x34f775(_0x11f085);_0x362d98[_0x16d2('0x67')]=await _0x9a466a(_0x11f085);return _0x105c4a(_0x362d98);}catch(_0x600a56){return _0xa8f268(_0x600a56);}});};function _0x34f775(_0x579259){return new Promise(async function(_0x111a5c,_0xb7cea9){try{let _0x46bdb3=[];let _0x287d14=await fs['readdir'](_0x579259+_0x16d2('0x59'));for(let _0x3f5e49=0x0;_0x3f5e49<_0x287d14[_0x16d2('0x68')];_0x3f5e49++){logger['info'](_0x16d2('0x18')+_0x287d14[_0x3f5e49]);let _0x30f773=await fs[_0x16d2('0x53')](_0x579259+_0x16d2('0x3d')+_0x287d14[_0x3f5e49]);_0x30f773[_0x16d2('0x58')]=_0x287d14[_0x3f5e49];_0x46bdb3[_0x16d2('0x47')](_0x30f773);}return _0x111a5c(_0x46bdb3);}catch(_0x2cd84a){return _0xb7cea9(_0x2cd84a);}});};function _0x9a466a(_0x361b80){return new Promise(async function(_0x341376,_0x52f42a){try{let _0x3275fb=[];let _0x30bb47=await fs['readdir'](_0x361b80+_0x16d2('0x15'));for(let _0x4ba77f=0x0;_0x4ba77f<_0x30bb47[_0x16d2('0x68')];_0x4ba77f++){logger[_0x16d2('0x12')](_0x16d2('0x18')+_0x30bb47[_0x4ba77f]);let _0x2ddabe=await fs[_0x16d2('0x53')](_0x361b80+_0x16d2('0xa')+_0x30bb47[_0x4ba77f]);_0x2ddabe[_0x16d2('0x58')]=_0x30bb47[_0x4ba77f];_0x3275fb['push'](_0x2ddabe);}return _0x341376(_0x3275fb);}catch(_0x590a89){return _0x52f42a(_0x590a89);}});};function _0x21b388(_0x10640f,_0x425917,_0x198ca1,_0x2645ce){return new Promise(async function(_0xb48d3a,_0x5e8c36){try{for(let _0x28e013=0x0;_0x28e013<_0x198ca1[_0x16d2('0x44')][_0x16d2('0x68')];_0x28e013++){let _0x3149a8=![];for(let _0x2b2874=0x0;_0x2b2874<_0x2645ce[_0x16d2('0x44')][_0x16d2('0x68')];_0x2b2874++){if(_0x2645ce[_0x16d2('0x44')][_0x2b2874][_0x16d2('0x58')]==_0x198ca1[_0x16d2('0x44')][_0x28e013]['filename']){logger[_0x16d2('0x12')](_0x16d2('0x1c')+Math['floor'](_0x2645ce[_0x16d2('0x44')][_0x2b2874][_0x16d2('0x65')]/0x3e8));logger['info'](_0x16d2('0x39')+_0x198ca1[_0x16d2('0x44')][_0x28e013][_0x16d2('0x19')][_0x16d2('0x7b')]);if(Math[_0x16d2('0x62')](_0x2645ce[_0x16d2('0x44')][_0x2b2874][_0x16d2('0x65')]/0x3e8)>_0x198ca1[_0x16d2('0x44')][_0x28e013]['attrs']['mtime']){_0x3149a8=!![];logger[_0x16d2('0x12')](_0x16d2('0x69')+_0x2645ce[_0x16d2('0x44')][_0x2b2874]['name']+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x1432c(_0x10640f,_0x425917,_0x198ca1['Editor'][_0x28e013][_0x16d2('0x4d')],_0x16d2('0x44'));}catch(_0xd57090){return _0x5e8c36(_0xd57090);}break;}else{_0x3149a8=!![];logger[_0x16d2('0x12')](_0x16d2('0x46')+_0x2645ce[_0x16d2('0x44')][_0x2b2874]['name']+_0x16d2('0x60'));try{await _0x1fee2e(_0x10640f,_0x425917,_0x198ca1[_0x16d2('0x44')][_0x28e013][_0x16d2('0x4d')],_0x16d2('0x44'));}catch(_0x34103a){logger[_0x16d2('0x12')](_0x16d2('0x7a')+_0x34103a);return _0x5e8c36(_0x34103a);}break;}}}if(!_0x3149a8){logger[_0x16d2('0x12')](_0x198ca1[_0x16d2('0x44')][_0x28e013][_0x16d2('0x4d')]+_0x16d2('0x33'));try{await _0x1fee2e(_0x10640f,_0x425917,_0x198ca1[_0x16d2('0x44')][_0x28e013][_0x16d2('0x4d')],_0x16d2('0x44'));}catch(_0x35c14d){return _0x5e8c36(_0x35c14d);}}}for(let _0x45a3af=0x0;_0x45a3af<_0x198ca1[_0x16d2('0x67')][_0x16d2('0x68')];_0x45a3af++){let _0x5d6ae3=![];for(let _0x45df18=0x0;_0x45df18<_0x2645ce['Blockly'][_0x16d2('0x68')];_0x45df18++){if(_0x2645ce[_0x16d2('0x67')][_0x45df18]['name']==_0x198ca1[_0x16d2('0x67')][_0x45a3af][_0x16d2('0x4d')]){logger[_0x16d2('0x12')]('Local\x20mtime:\x20'+Math[_0x16d2('0x62')](_0x2645ce[_0x16d2('0x67')][_0x45df18][_0x16d2('0x65')]/0x3e8));logger[_0x16d2('0x12')](_0x16d2('0x39')+_0x198ca1[_0x16d2('0x67')][_0x45a3af][_0x16d2('0x19')][_0x16d2('0x7b')]);if(Math[_0x16d2('0x62')](_0x2645ce[_0x16d2('0x67')][_0x45df18][_0x16d2('0x65')]/0x3e8)>_0x198ca1['Blockly'][_0x45a3af][_0x16d2('0x19')][_0x16d2('0x7b')]){_0x5d6ae3=!![];logger['info'](_0x16d2('0x69')+_0x2645ce['Blockly'][_0x45df18][_0x16d2('0x58')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x1432c(_0x10640f,_0x425917,_0x198ca1[_0x16d2('0x67')][_0x45a3af]['filename'],_0x16d2('0x67'));}catch(_0x23c0a1){return _0x5e8c36(_0x23c0a1);}break;}else{_0x5d6ae3=!![];logger['info'](_0x16d2('0x46')+_0x2645ce[_0x16d2('0x67')][_0x45df18]['name']+_0x16d2('0x60'));try{await _0x1fee2e(_0x10640f,_0x425917,_0x198ca1[_0x16d2('0x67')][_0x45a3af][_0x16d2('0x4d')],_0x16d2('0x67'));}catch(_0x1e9cc6){logger[_0x16d2('0x12')](_0x16d2('0x7a')+_0x1e9cc6);return _0x5e8c36(_0x1e9cc6);}break;}}}if(!_0x5d6ae3){logger['info'](_0x198ca1[_0x16d2('0x67')][_0x45a3af][_0x16d2('0x4d')]+_0x16d2('0x33'));try{await _0x1fee2e(_0x10640f,_0x425917,_0x198ca1[_0x16d2('0x67')][_0x45a3af][_0x16d2('0x4d')],_0x16d2('0x67'));}catch(_0x4c812f){return _0x5e8c36(_0x4c812f);}}}return _0xb48d3a();}catch(_0x1b0fcc){return _0x5e8c36(_0x1b0fcc);}});};function _0x1432c(_0x4960ce,_0x33b802,_0x5bd9d5,_0x199e14){return new Promise((_0x3c25e5,_0x45067d)=>{try{let _0x37a13c=_0x16d2('0x54')+_0x33b802['username']+'/'+_0x199e14+'/'+_0x5bd9d5;let _0x46c412=_0x33b802[_0x16d2('0x71')]+'/'+_0x199e14+'/'+_0x5bd9d5;logger[_0x16d2('0x12')](_0x16d2('0x1e')+_0x37a13c);logger[_0x16d2('0x12')](_0x16d2('0x17')+_0x46c412);_0x4960ce[_0x16d2('0x2c')](_0x46c412,_0x37a13c,{},function(_0x23f40a){if(_0x23f40a){logger['info'](_0x16d2('0x1b')+_0x5bd9d5);return _0x45067d(_0x23f40a);}logger[_0x16d2('0x12')](_0x16d2('0x3c')+_0x5bd9d5);return _0x3c25e5();});}catch(_0x474b2f){return _0x45067d(_0x474b2f);}});};function _0x1fee2e(_0x8c2841,_0x521e14,_0x17a991,_0x2def03){return new Promise((_0x476505,_0x2aceab)=>{try{let _0x1a7f88='/home/c3/FusionFilesystem/'+_0x521e14[_0x16d2('0x40')]+'/'+_0x2def03+'/'+_0x17a991;let _0x698374=_0x521e14[_0x16d2('0x71')]+'/'+_0x2def03+'/'+_0x17a991;logger[_0x16d2('0x12')](_0x16d2('0x1e')+_0x1a7f88);logger['info'](_0x16d2('0x17')+_0x698374);_0x8c2841[_0x16d2('0x8')](_0x1a7f88,_0x698374,{},function(_0x129e15){if(_0x129e15){logger[_0x16d2('0x12')](_0x16d2('0x63')+_0x17a991);return _0x2aceab(_0x129e15);}logger[_0x16d2('0x12')](_0x16d2('0x84')+_0x17a991);return _0x476505();});}catch(_0x3868c1){return _0x2aceab(_0x3868c1);}});};function _0x215ac5(_0x4256fe,_0x2d5143,_0x1f7939,_0x3eea76){_0x4256fe[_0x16d2('0x55')]('/home/c3/FusionFilesystem/'+_0x2d5143[_0x16d2('0x40')],function(_0x9a7ab2){if(_0x9a7ab2){logger[_0x16d2('0x12')](_0x16d2('0x5e')+_0x9a7ab2);_0x4256fe[_0x16d2('0x26')](_0x16d2('0x54')+_0x2d5143[_0x16d2('0x40')],function(_0x355347){if(_0x355347){logger[_0x16d2('0x12')]('Error\x20creating\x20user\x20file\x20system:\x20'+_0x355347);throw _0x355347;}logger[_0x16d2('0x12')](_0x16d2('0x25'));_0x4256fe[_0x16d2('0x26')](_0x16d2('0x54')+_0x2d5143['username']+_0x16d2('0x3d'),function(_0x1f5b4d){if(_0x1f5b4d){logger[_0x16d2('0x12')]('Error\x20creating\x20editor\x20directory:\x20'+_0x1f5b4d);throw _0x1f5b4d;}logger[_0x16d2('0x12')]('Editor\x20directory\x20created');_0x4256fe[_0x16d2('0x26')](_0x16d2('0x54')+_0x2d5143[_0x16d2('0x40')]+_0x16d2('0xa'),function(_0x5e1542){if(_0x5e1542){logger[_0x16d2('0x12')]('Error\x20creating\x20blockly\x20directory:\x20'+_0x5e1542);throw _0x5e1542;}logger[_0x16d2('0x12')](_0x16d2('0x52'));_0x3eea76(_0x4256fe,_0x2d5143,_0x1f7939);});});});}_0x3eea76(_0x4256fe,_0x2d5143,_0x1f7939);});};function _0xd6a318(_0x5f1355,_0x594031,_0x3158c5){_0x5f1355['readdir'](_0x16d2('0x54')+_0x594031['username']+'/Editor/',function(_0x3046cb,_0x446a97){if(_0x3046cb){logger[_0x16d2('0x12')](_0x16d2('0x73')+_0x3046cb);throw _0x3046cb;}_0x175586(_0x594031,_0x16d2('0x44'),_0x446a97,_0x3158c5);});_0x5f1355[_0x16d2('0x55')]('/home/c3/FusionFilesystem/'+_0x594031[_0x16d2('0x40')]+_0x16d2('0xa'),function(_0x61d033,_0x6b8662){if(_0x61d033){logger[_0x16d2('0x12')](_0x16d2('0x4')+_0x61d033);throw _0x61d033;}_0x175586(_0x594031,_0x16d2('0x67'),_0x6b8662,_0x3158c5);});};function _0x175586(_0x442f41,_0xc5342b,_0x1658fb,_0x1a41c3){logger[_0x16d2('0x12')](_0x16d2('0x2a'));if(_0xc5342b==_0x16d2('0x67')&&_0x1658fb['length']==0x0){_0x1a41c3[_0x16d2('0x77')]();}for(var _0x22b28c=0x0;_0x22b28c<_0x1658fb[_0x16d2('0x68')];_0x22b28c++){let _0x42e746=_0x16d2('0x54')+_0x442f41[_0x16d2('0x40')]+'/'+_0xc5342b+'/'+_0x1658fb[_0x22b28c][_0x16d2('0x4d')];let _0x51baad=_0x16d2('0x81')+_0x442f41['username']+'/'+_0xc5342b+'/';logger['info'](_0x16d2('0x45')+_0x42e746+_0x16d2('0x83')+_0x51baad);SCP[_0x16d2('0x3b')]('c3:root@172.16.0.1:'+_0x42e746,_0x51baad,function(_0xfa0670){if(_0xfa0670){logger['info'](_0x16d2('0x6a')+_0x42e746+',\x20error:\x20'+_0xfa0670);}if(_0xc5342b=='Blockly'&&(_0x22b28c=_0x1658fb[_0x16d2('0x68')]-0x1)){_0x1a41c3[_0x16d2('0x77')]();}});}};}();