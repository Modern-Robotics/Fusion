var _0x2c45=['connected','logIn','body','socketId','REGISTER.CREATED','error','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','authenticate','local-signup','user','Error','params','User_Id','toLowerCase','json','put','findOne','password','generateHash','firstname','lastname','language','email','defaultprogramminglanguage','securityquestion','securityanswer','usergroup','save','User\x20updated!','delete','trim','username','SocketVariables','fusion_program_running','User','logout','remove','removeFileSystem','Successfully\x20deleted','/api/users/login','LOGIN.MULTIUSER_DENIED','debug','Attempting\x20classroom\x20login','mriguest','Guest\x20login\x20unavailable\x20in\x20classroom\x20mode','https://172.16.0.1/backend/auth/ldap','Error\x20with\x20request\x20promise.\x20','name','StatusCodeError','LOGIN.INVALID','RequestError','local-login','LOGIN.SUCCESS','/api/users/logout','KillProgram','Logged\x20out\x20successfully','/api/recovery','local-recovery','Login\x20Successful','Another\x20user\x20is\x20already\x20logged\x20in.','Admin','unshift','/User/Login','connectedClients','length','isAuthenticated','User\x20Unauthenticated','Error\x20downloading\x20classroom\x20files\x20for\x20','ready','sftp','Error\x20communicating\x20with\x20c3:\x20','end','stringify','filepath','info','connect','/home/c3/FusionFilesystem/','mkdir','Error\x20creating\x20classroom\x20file\x20system:\x20','verbose','Classroom\x20file\x20system\x20created','Classroom\x20file\x20system\x20found','readdir','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','User\x27s\x20classroom\x20file\x20system\x20created','User\x27s\x20classroom\x20file\x20system\x20found','/Editor/','User\x27s\x20editor\x20directory\x20created','/Blockly/','User\x27s\x20blockly\x20directory\x20created','User\x27s\x20blockly\x20directory\x20found','Editor','Blockly','push','Getting\x20data\x20for\x20','filename','/Editor','stat','/Blockly','floor','mtimeMs','Remote\x20mtime:\x20','attrs','mtime','Local\x20\x22','\x22\x20newer,\x20updating\x20classroom\x20version','\x22\x20newer,\x20updating\x20local\x20version','\x20not\x20a\x20common\x20file!','Local\x20mtime:\x20','Remote\x20\x22','Remote\x20path:\x20','Local\x20Path:\x20','Error\x20uploading\x20file:\x20','Uploaded\x20','fastGet','Retrieved\x20','Error\x20reading\x20user\x20file\x20system:\x20','Error\x20creating\x20user\x20file\x20system:\x20','User\x20c3\x20directory\x20created','Error\x20creating\x20editor\x20directory:\x20','Editor\x20directory\x20created','Error\x20creating\x20blockly\x20directory:\x20','Error\x20reading\x20classroom\x20editor\x20files:\x20','Error\x20reading\x20classroom\x20blockly\x20files:\x20','Retrieving\x20files','app/filesystem/','Moving:\x20','\x20to\x20','scp','c3:root@172.16.0.1:','Error\x20downloading:\x20',',\x20error:\x20','scp2','ssh2','Client','../../utils/logger','../../express','passport','../../global/fusionSettings','../../fusionProgram','exports','get','/api/users','find','Guest','post','status','send','message','MultiUserAccess'];(function(_0x642233,_0x2820c7){var _0x54c59f=function(_0x96e4a){while(--_0x96e4a){_0x642233['push'](_0x642233['shift']());}};_0x54c59f(++_0x2820c7);}(_0x2c45,0x11a));var _0x1014=function(_0x2d8f05,_0x4b81bb){_0x2d8f05=_0x2d8f05-0x0;var _0x4d74cb=_0x2c45[_0x2d8f05];return _0x4d74cb;};var SCP=require(_0x1014('0x0'));var SSH=require(_0x1014('0x1'))[_0x1014('0x2')];var fs=require('fs-extra');var path=require('path');var rp=require('request-promise');const classroomConnection=require('../../classroom/connection');const logger=require(_0x1014('0x3'));const app=require(_0x1014('0x4'));const User=require('../../models/user');const passport=require(_0x1014('0x5'));const FusionSettings=require(_0x1014('0x6'));const fusionProgram=require(_0x1014('0x7'));module[_0x1014('0x8')]=function(){app[_0x1014('0x9')](_0x1014('0xa'),_0x2d9925(),function(_0xacdc6d,_0x8c987e){User[_0x1014('0xb')]({'usergroup':{'$ne':_0x1014('0xc')}},function(_0x370cac,_0x1c5ff4){if(_0x370cac)_0x8c987e['send'](_0x370cac);_0x8c987e['json'](_0x1c5ff4);});});app[_0x1014('0xd')](_0x1014('0xa'),async function(_0x455132,_0x1e801e,_0x31b2d1){await _0x2d46c3(_0x455132,_0x1e801e,_0x31b2d1);});async function _0x2d46c3(_0x4fdf74,_0x5f4444,_0x5add00){passport['authenticate']('local-signup',async function(_0x2d67bd,_0x105f7d,_0x3f1924){if(_0x2d67bd)return _0x5f4444[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x2d67bd);if(_0x3f1924&&_0x3f1924[_0x1014('0x10')])return _0x5f4444['status'](0x1f4)['send'](_0x4fdf74['__'](_0x3f1924[_0x1014('0x10')]));if(FusionSettings[_0x1014('0x11')]){if(classroomConnection[_0x1014('0x12')]){try{await _0x3566f0(_0x105f7d);}catch(_0x14c121){logger['error'](_0x14c121);}}_0x4fdf74[_0x1014('0x13')](_0x105f7d,function(_0x2d67bd){if(_0x2d67bd){return _0x5add00(_0x2d67bd);}_0x5bd6ba(_0x4fdf74[_0x1014('0x14')][_0x1014('0x15')],_0x105f7d);return _0x5f4444['status'](0xc8)['json']({'serverMessage':_0x4fdf74['__'](_0x1014('0x16')),'user':_0x105f7d});});}else{if(_0x4bbaca()==0x0){if(classroomConnection[_0x1014('0x12')]){try{await _0x3566f0(_0x105f7d);}catch(_0x100774){logger[_0x1014('0x17')](_0x100774);}}_0x4fdf74['logIn'](_0x105f7d,function(_0x2d67bd){if(_0x2d67bd){return _0x5add00(_0x2d67bd);}_0x5bd6ba(_0x4fdf74[_0x1014('0x14')][_0x1014('0x15')],_0x105f7d);return _0x5f4444[_0x1014('0xe')](0xc8)['json']({'serverMessage':_0x4fdf74['__'](_0x1014('0x16')),'user':_0x105f7d});});}else{return _0x5f4444[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x4fdf74['__'](_0x1014('0x18')));}}})(_0x4fdf74,_0x5f4444,_0x5add00);};app[_0x1014('0xd')](_0x1014('0xa'),passport[_0x1014('0x19')](_0x1014('0x1a'),{'session':!![]}),function(_0x67c100,_0xdfd3fa){if(_0x67c100[_0x1014('0x1b')]['Error']){return _0xdfd3fa['status'](0x1f4)[_0x1014('0xf')](_0x67c100['user'][_0x1014('0x1c')]);}else{}});app[_0x1014('0x9')]('/api/users/:User_Id',_0x2d9925(),function(_0x3637fc,_0x1be757){User['findOne']({'username':_0x3637fc[_0x1014('0x1d')][_0x1014('0x1e')][_0x1014('0x1f')]()['trim']()},function(_0x114a70,_0x200b2d){if(_0x114a70)_0x1be757[_0x1014('0xf')](_0x114a70);_0x1be757[_0x1014('0x20')](_0x200b2d);});});app[_0x1014('0x21')]('/api/users/:User_Id',_0x2d9925(),function(_0x373af3,_0x8ee974){User[_0x1014('0x22')]({'username':_0x373af3[_0x1014('0x1d')][_0x1014('0x1e')][_0x1014('0x1f')]()['trim']()},function(_0x2a3903,_0xea014e){if(_0x2a3903)_0x8ee974['send'](_0x2a3903);if(_0x373af3[_0x1014('0x14')][_0x1014('0x23')]){_0xea014e[_0x1014('0x23')]=_0xea014e[_0x1014('0x24')](_0x373af3['body'][_0x1014('0x23')]);}if(_0x373af3['body'][_0x1014('0x25')]){_0xea014e[_0x1014('0x25')]=_0x373af3[_0x1014('0x14')][_0x1014('0x25')];}if(_0x373af3[_0x1014('0x14')][_0x1014('0x26')]){_0xea014e[_0x1014('0x26')]=_0x373af3[_0x1014('0x14')]['lastname'];}if(_0x373af3[_0x1014('0x14')]['language']){_0xea014e[_0x1014('0x27')]=_0x373af3[_0x1014('0x14')][_0x1014('0x27')];}if(_0x373af3['body'][_0x1014('0x28')]){_0xea014e['email']=_0x373af3[_0x1014('0x14')]['email'];}if(_0x373af3[_0x1014('0x14')]['defaultprogramminglanguage']){_0xea014e[_0x1014('0x29')]=_0x373af3['body'][_0x1014('0x29')];}if(_0x373af3[_0x1014('0x14')][_0x1014('0x2a')]){_0xea014e[_0x1014('0x2a')]=_0x373af3[_0x1014('0x14')]['securityquestion'];}if(_0x373af3[_0x1014('0x14')][_0x1014('0x2b')]){_0xea014e[_0x1014('0x2b')]=_0x373af3[_0x1014('0x14')][_0x1014('0x2b')];}if(_0x373af3[_0x1014('0x14')][_0x1014('0x2c')]){_0xea014e['usergroup']=_0x373af3[_0x1014('0x14')][_0x1014('0x2c')];}_0xea014e[_0x1014('0x2d')](function(_0x2a3903){if(_0x2a3903)_0x8ee974[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x2a3903);_0x8ee974['status'](0xc8)[_0x1014('0x20')]({'serverMessage':_0x1014('0x2e')});});});});app[_0x1014('0x2f')]('/api/users/:User_Id',_0x2d9925(),function(_0x1eac3b,_0x3b1b25){if(_0x1eac3b['params']['User_Id'][_0x1014('0x1f')]()[_0x1014('0x30')]()==_0x1eac3b[_0x1014('0x1b')][_0x1014('0x31')]){if(FusionSettings[_0x1014('0x32')][_0x1014('0x33')])if(FusionSettings[_0x1014('0x32')][_0x1014('0x33')][_0x1014('0x34')]==_0x1eac3b['user'][_0x1014('0x31')])fusionProgram['KillProgram']();_0x473108(_0x1eac3b['user']['username']);_0x1eac3b[_0x1014('0x35')]();}User[_0x1014('0x36')]({'username':_0x1eac3b[_0x1014('0x1d')][_0x1014('0x1e')][_0x1014('0x1f')]()['trim']()},function(_0x2d8f35,_0x3f32a8){if(_0x2d8f35)return _0x3b1b25[_0x1014('0xf')](_0x2d8f35);User[_0x1014('0x37')](_0x1eac3b[_0x1014('0x1d')][_0x1014('0x1e')][_0x1014('0x1f')]()[_0x1014('0x30')]());return _0x3b1b25[_0x1014('0xe')](0xc8)['json']({'serverMessage':_0x1014('0x38')});});});app[_0x1014('0xd')](_0x1014('0x39'),async(_0x143505,_0xf5020c,_0x457a19)=>{if(!FusionSettings[_0x1014('0x11')]&&_0x4bbaca()>0x0)return _0xf5020c[_0x1014('0xe')](0x1f4)['send'](_0x143505['__'](_0x1014('0x3a')));if(!classroomConnection[_0x1014('0x12')]){logger[_0x1014('0x3b')]('Attempting\x20standard\x20login');await _0x37deb1(_0x143505,_0xf5020c,_0x457a19);}else{logger[_0x1014('0x3b')](_0x1014('0x3c'));if(_0x143505[_0x1014('0x14')][_0x1014('0x31')]==_0x1014('0x3d')&&_0x143505[_0x1014('0x14')][_0x1014('0x23')]==_0x1014('0x3d')){return _0xf5020c[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x1014('0x3e'));}let _0x4235e7={'method':'POST','uri':_0x1014('0x3f'),'body':{'username':_0x143505['body'][_0x1014('0x31')],'password':_0x143505[_0x1014('0x14')]['password']},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x4235e7);let _0x3ad83d=await User[_0x1014('0x22')]({'username':_0x143505['body'][_0x1014('0x31')]})['exec']();if(_0x3ad83d){await _0x37deb1(_0x143505,_0xf5020c,_0x457a19);}else{_0x143505['body'][_0x1014('0x2a')]='Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?';_0x143505[_0x1014('0x14')][_0x1014('0x2b')]=_0x143505[_0x1014('0x14')][_0x1014('0x31')];_0x143505['body'][_0x1014('0x2c')]=_0x1014('0x34');await _0x2d46c3(_0x143505,_0xf5020c,_0x457a19);}}catch(_0x2e0e4d){logger['info'](_0x1014('0x40')+_0x2e0e4d);if(_0x2e0e4d[_0x1014('0x41')]==_0x1014('0x42')){return _0xf5020c[_0x1014('0xe')](0x191)[_0x1014('0xf')](_0x143505['__'](_0x1014('0x43')));}else if(_0x2e0e4d[_0x1014('0x41')]==_0x1014('0x44')){return _0xf5020c[_0x1014('0xe')](0x1f4)['send']('Error\x20reaching\x20classroom\x20server');}else{return _0xf5020c[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x2e0e4d[_0x1014('0x10')]);}}}});async function _0x37deb1(_0x912b04,_0x15c0da,_0x478def){passport[_0x1014('0x19')](_0x1014('0x45'),async function(_0x6d41eb,_0x357163,_0x4eb541){if(_0x6d41eb)return _0x15c0da[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x912b04['__'](_0x6d41eb['message']));if(!_0x357163)return _0x15c0da['status'](0x191)['send'](_0x912b04['__'](_0x4eb541[_0x1014('0x10')]));_0x912b04['logIn'](_0x357163,async function(_0x6d41eb){if(_0x6d41eb){return _0x478def(_0x6d41eb);}_0x5bd6ba(_0x912b04['body']['socketId'],_0x357163);try{if(classroomConnection[_0x1014('0x12')])await _0x3566f0(_0x357163);}catch(_0x42314f){logger[_0x1014('0x17')](_0x42314f);}return _0x15c0da[_0x1014('0xe')](0xc8)['json']({'serverMessage':_0x912b04['__'](_0x1014('0x46')),'user':_0x357163});});})(_0x912b04,_0x15c0da,_0x478def);};app[_0x1014('0xd')](_0x1014('0x47'),_0x2d9925(),function(_0x2d2aa2,_0x52e8ee){if(FusionSettings['SocketVariables'][_0x1014('0x33')])if(FusionSettings['SocketVariables'][_0x1014('0x33')][_0x1014('0x34')]==_0x2d2aa2[_0x1014('0x1b')][_0x1014('0x31')])fusionProgram[_0x1014('0x48')]();_0x231410(_0x2d2aa2[_0x1014('0x14')][_0x1014('0x15')]);_0x2d2aa2[_0x1014('0x35')]();_0x52e8ee[_0x1014('0xe')](0xc8)[_0x1014('0x20')]({'serverMessage':_0x1014('0x49')});});app[_0x1014('0x9')]('/api/recovery/:User_Id',function(_0x5ee2b3,_0x455139){User['findOne']({'username':_0x5ee2b3[_0x1014('0x1d')][_0x1014('0x1e')][_0x1014('0x1f')]()[_0x1014('0x30')]()},function(_0x25a8ca,_0x3eb88e){if(_0x25a8ca)return _0x455139[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x25a8ca);if(!_0x3eb88e)return _0x455139['status'](0x1f4)[_0x1014('0xf')]('User\x20does\x20not\x20exist');else return _0x455139['status'](0xc8)[_0x1014('0x20')](_0x3eb88e[_0x1014('0x2a')]);});});app[_0x1014('0xd')](_0x1014('0x4a'),passport['authenticate'](_0x1014('0x4b'),{'session':!![]}),async function(_0x514aa1,_0x339ac9){if(FusionSettings['MultiUserAccess']){if(classroomConnection['connected']){try{await _0x3566f0(user);}catch(_0x3037ee){logger[_0x1014('0x17')](_0x3037ee);}}_0x5bd6ba(_0x514aa1[_0x1014('0x14')][_0x1014('0x15')],_0x514aa1[_0x1014('0x1b')]);return _0x339ac9[_0x1014('0xe')](0xc8)[_0x1014('0x20')]({'serverMessage':_0x1014('0x4c'),'user':_0x514aa1[_0x1014('0x1b')]});}else{if(_0x4bbaca()==0x0){_0x5bd6ba(_0x514aa1['body'][_0x1014('0x15')],_0x514aa1['user']);if(classroomConnection['connected']){try{await _0x3566f0(user);}catch(_0x145bf0){logger[_0x1014('0x17')](_0x145bf0);}}return _0x339ac9['status'](0xc8)[_0x1014('0x20')]({'serverMessage':'Login\x20Successful','user':_0x514aa1['user']});}else{_0x514aa1[_0x1014('0x35')]();return _0x339ac9[_0x1014('0xe')](0x1f4)[_0x1014('0xf')](_0x1014('0x4d'));}}});app[_0x1014('0x9')]('/api/allowedUserGroups',function(_0x4892bc,_0x20ca74){var _0x289299=[_0x1014('0x34')];User[_0x1014('0x22')]({'usergroup':_0x1014('0x4e')},function(_0x32f04d,_0x250f08){if(_0x32f04d)return _0x20ca74['status'](0xc8)['send'](_0x289299);if(!_0x250f08)_0x289299[_0x1014('0x4f')](_0x1014('0x4e'));return _0x20ca74[_0x1014('0xe')](0xc8)[_0x1014('0xf')](_0x289299);});});app[_0x1014('0x9')](_0x1014('0x50'),async(_0x2c1346,_0x310fde,_0x3bd050)=>{_0x3bd050();});function _0x4bbaca(){var _0x566167=0x0;for(var _0x2108c8=0x0;_0x2108c8<FusionSettings[_0x1014('0x51')][_0x1014('0x52')];_0x2108c8++){if(FusionSettings['connectedClients'][_0x2108c8]['User']){_0x566167++;}}return _0x566167;}function _0x5bd6ba(_0x4b4c44,_0x1c103f){for(var _0x139187=0x0;_0x139187<FusionSettings[_0x1014('0x51')]['length'];_0x139187++){if(FusionSettings['connectedClients'][_0x139187]['id']==_0x4b4c44){FusionSettings[_0x1014('0x51')][_0x139187][_0x1014('0x34')]=_0x1c103f;break;}}}function _0x231410(_0x2279a5){for(var _0x4ea53e=0x0;_0x4ea53e<FusionSettings[_0x1014('0x51')][_0x1014('0x52')];_0x4ea53e++){if(FusionSettings[_0x1014('0x51')][_0x4ea53e]['id']==_0x2279a5){FusionSettings['connectedClients'][_0x4ea53e][_0x1014('0x34')]=undefined;break;}}}function _0x473108(_0x4a6c14){for(var _0x4a77fb=0x0;_0x4a77fb<FusionSettings[_0x1014('0x51')]['length'];_0x4a77fb++){if(FusionSettings['connectedClients'][_0x4a77fb][_0x1014('0x34')][_0x1014('0x31')]==_0x4a6c14){FusionSettings[_0x1014('0x51')][_0x4a77fb][_0x1014('0x34')]=undefined;break;}}}function _0x2d9925(){return function(_0x290379,_0x56794b,_0x2f7fc6){if(_0x290379[_0x1014('0x53')]()){return _0x2f7fc6();}else{return _0x56794b[_0x1014('0xe')](0x191)[_0x1014('0xf')](_0x1014('0x54'));}};}async function _0x3566f0(_0x1e98c9){try{await _0x1e3468(_0x1e98c9);}catch(_0x3408a2){logger['error'](_0x1014('0x55')+_0x1e98c9['username']);}};function _0x1e3468(_0x5a8370){return new Promise(function(_0x3b5178,_0x433414){var _0x325c4f=new SSH();_0x325c4f['on'](_0x1014('0x56'),function(){_0x325c4f[_0x1014('0x57')](async function(_0x342e5e,_0xd6b0c7){if(_0x342e5e){logger[_0x1014('0x17')](_0x1014('0x58')+_0x342e5e);_0x325c4f[_0x1014('0x59')]();return _0x433414(_0x342e5e);}try{await _0x111d88(_0xd6b0c7);await _0x46a3cc(_0xd6b0c7,_0x5a8370[_0x1014('0x31')]);await _0x471705(_0xd6b0c7,_0x5a8370[_0x1014('0x31')]);await _0x5adc25(_0xd6b0c7,_0x5a8370[_0x1014('0x31')]);let _0x213cdc=await _0x38f23a(_0xd6b0c7,_0x5a8370[_0x1014('0x31')]);logger['debug'](JSON[_0x1014('0x5a')](_0x213cdc));let _0x24db0c=await _0x3b1889(_0x5a8370[_0x1014('0x5b')]);logger[_0x1014('0x3b')](JSON[_0x1014('0x5a')](_0x24db0c));await _0x50d749(_0xd6b0c7,_0x5a8370,_0x213cdc,_0x24db0c);_0x325c4f[_0x1014('0x59')]();return _0x3b5178();}catch(_0x49f471){logger[_0x1014('0x5c')](_0x49f471);_0x325c4f['end']();return _0x433414(_0x49f471);}});})[_0x1014('0x5d')]({'host':'172.16.0.1','port':0x16,'username':'c3','password':'root'});});};function _0x111d88(_0x1d18e8){return new Promise(function(_0x467aa2,_0x45ea0a){_0x1d18e8['readdir'](_0x1014('0x5e'),function(_0x418cfc){if(_0x418cfc){_0x1d18e8[_0x1014('0x5f')](_0x1014('0x5e'),function(_0x2dfce5){if(_0x2dfce5){return _0x45ea0a(_0x1014('0x60')+_0x2dfce5);}else{logger[_0x1014('0x61')](_0x1014('0x62'));return _0x467aa2();}});}else{logger[_0x1014('0x61')](_0x1014('0x63'));return _0x467aa2();}});});};function _0x46a3cc(_0x20dedd,_0xd41160){return new Promise(function(_0x59f94e,_0x14ed00){_0x20dedd[_0x1014('0x64')](_0x1014('0x5e')+_0xd41160,function(_0xdcf6b6){if(_0xdcf6b6){_0x20dedd[_0x1014('0x5f')](_0x1014('0x5e')+_0xd41160,function(_0x428194){if(_0x428194){return _0x14ed00(_0x1014('0x65')+_0x428194);}else{logger[_0x1014('0x61')](_0x1014('0x66'));return _0x59f94e();}});}else{logger[_0x1014('0x61')](_0x1014('0x67'));return _0x59f94e();}});});};function _0x471705(_0xc52d39,_0x201ef9){return new Promise(function(_0x2760b7,_0x401015){_0xc52d39['readdir'](_0x1014('0x5e')+_0x201ef9+_0x1014('0x68'),function(_0x563d4d){if(_0x563d4d){_0xc52d39[_0x1014('0x5f')](_0x1014('0x5e')+_0x201ef9+_0x1014('0x68'),function(_0x598c15){if(_0x598c15){return _0x401015('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x598c15);}else{logger[_0x1014('0x61')](_0x1014('0x69'));return _0x2760b7();}});}else{logger[_0x1014('0x61')]('User\x27s\x20editor\x20directory\x20found');return _0x2760b7();}});});};function _0x5adc25(_0x4a83da,_0x11b7c0){return new Promise(function(_0xc3d83a,_0x25d3dd){_0x4a83da[_0x1014('0x64')]('/home/c3/FusionFilesystem/'+_0x11b7c0+'/Blockly/',function(_0x803534){if(_0x803534){_0x4a83da[_0x1014('0x5f')](_0x1014('0x5e')+_0x11b7c0+_0x1014('0x6a'),function(_0x248dd4){if(_0x248dd4){return _0x25d3dd('Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20'+_0x248dd4);}else{logger['verbose'](_0x1014('0x6b'));return _0xc3d83a();}});}else{logger[_0x1014('0x61')](_0x1014('0x6c'));return _0xc3d83a();}});});};function _0x38f23a(_0xb39497,_0x189a08){return new Promise(async function(_0x4d178b,_0x3622bb){try{let _0x3549db={};_0x3549db[_0x1014('0x6d')]=await _0x1a11f0(_0xb39497,_0x189a08);_0x3549db[_0x1014('0x6e')]=await _0x5c14dc(_0xb39497,_0x189a08);return _0x4d178b(_0x3549db);}catch(_0x109bd3){return _0x3622bb(_0x109bd3);}});};function _0x1a11f0(_0x1337b1,_0x188003){return new Promise(function(_0x5a0ecf,_0x5bc799){_0x1337b1[_0x1014('0x64')](_0x1014('0x5e')+_0x188003+'/Editor/',function(_0x3913bb,_0x216a1a){if(_0x3913bb)return _0x5bc799(_0x3913bb);let _0x4eb348=[];for(let _0x21df36=0x0;_0x21df36<_0x216a1a[_0x1014('0x52')];_0x21df36++){logger['debug']('Getting\x20data\x20for\x20'+_0x216a1a[_0x21df36]['filename']);_0x4eb348[_0x1014('0x6f')](_0x216a1a[_0x21df36]);}return _0x5a0ecf(_0x4eb348);});});};function _0x5c14dc(_0x29605e,_0x26f964){return new Promise(function(_0x504ecc,_0x3d606b){_0x29605e[_0x1014('0x64')](_0x1014('0x5e')+_0x26f964+_0x1014('0x6a'),function(_0x511a8d,_0x5034a1){if(_0x511a8d)return _0x3d606b(_0x511a8d);let _0x4ff06b=[];for(let _0x712c7b=0x0;_0x712c7b<_0x5034a1[_0x1014('0x52')];_0x712c7b++){logger['debug'](_0x1014('0x70')+_0x5034a1[_0x712c7b][_0x1014('0x71')]);_0x4ff06b[_0x1014('0x6f')](_0x5034a1[_0x712c7b]);}return _0x504ecc(_0x4ff06b);});});};function _0x3b1889(_0x62c26e){return new Promise(async function(_0x40aa56,_0x58adc0){try{let _0x2ab272={};_0x2ab272[_0x1014('0x6d')]=await _0x5a6d82(_0x62c26e);_0x2ab272['Blockly']=await _0x2631da(_0x62c26e);return _0x40aa56(_0x2ab272);}catch(_0x5d1286){return _0x58adc0(_0x5d1286);}});};function _0x5a6d82(_0x294a47){return new Promise(async function(_0xb81e,_0x424d5d){try{let _0x37d46c=[];let _0x56a0af=await fs[_0x1014('0x64')](_0x294a47+_0x1014('0x72'));for(let _0x4b5f68=0x0;_0x4b5f68<_0x56a0af[_0x1014('0x52')];_0x4b5f68++){logger['debug']('Getting\x20data\x20for\x20'+_0x56a0af[_0x4b5f68]);let _0x632f8d=await fs[_0x1014('0x73')](_0x294a47+_0x1014('0x68')+_0x56a0af[_0x4b5f68]);_0x632f8d[_0x1014('0x41')]=_0x56a0af[_0x4b5f68];_0x37d46c['push'](_0x632f8d);}return _0xb81e(_0x37d46c);}catch(_0x5b3e7c){return _0x424d5d(_0x5b3e7c);}});};function _0x2631da(_0x17c83f){return new Promise(async function(_0x38e70b,_0x55138c){try{let _0x546364=[];let _0x5469dd=await fs['readdir'](_0x17c83f+_0x1014('0x74'));for(let _0x53bb86=0x0;_0x53bb86<_0x5469dd[_0x1014('0x52')];_0x53bb86++){logger[_0x1014('0x3b')](_0x1014('0x70')+_0x5469dd[_0x53bb86]);let _0x3242ba=await fs[_0x1014('0x73')](_0x17c83f+_0x1014('0x6a')+_0x5469dd[_0x53bb86]);_0x3242ba[_0x1014('0x41')]=_0x5469dd[_0x53bb86];_0x546364['push'](_0x3242ba);}return _0x38e70b(_0x546364);}catch(_0x1c924c){return _0x55138c(_0x1c924c);}});};function _0x50d749(_0x278837,_0x322ef1,_0x322c15,_0x468e6f){return new Promise(async function(_0x3ec7d3,_0x58eecd){try{for(let _0x3315d3=0x0;_0x3315d3<_0x322c15[_0x1014('0x6d')]['length'];_0x3315d3++){let _0x2a790b=![];for(let _0x29ac42=0x0;_0x29ac42<_0x468e6f['Editor'][_0x1014('0x52')];_0x29ac42++){if(_0x468e6f['Editor'][_0x29ac42][_0x1014('0x41')]==_0x322c15[_0x1014('0x6d')][_0x3315d3][_0x1014('0x71')]){logger['debug']('Local\x20mtime:\x20'+Math[_0x1014('0x75')](_0x468e6f[_0x1014('0x6d')][_0x29ac42][_0x1014('0x76')]/0x3e8));logger[_0x1014('0x3b')](_0x1014('0x77')+_0x322c15[_0x1014('0x6d')][_0x3315d3][_0x1014('0x78')][_0x1014('0x79')]);if(Math[_0x1014('0x75')](_0x468e6f[_0x1014('0x6d')][_0x29ac42][_0x1014('0x76')]/0x3e8)>_0x322c15[_0x1014('0x6d')][_0x3315d3]['attrs'][_0x1014('0x79')]){_0x2a790b=!![];logger[_0x1014('0x3b')](_0x1014('0x7a')+_0x468e6f[_0x1014('0x6d')][_0x29ac42][_0x1014('0x41')]+_0x1014('0x7b'));try{await _0x12d50f(_0x278837,_0x322ef1,_0x322c15[_0x1014('0x6d')][_0x3315d3][_0x1014('0x71')],_0x1014('0x6d'));}catch(_0xbc0854){return _0x58eecd(_0xbc0854);}break;}else{_0x2a790b=!![];logger[_0x1014('0x3b')]('Remote\x20\x22'+_0x468e6f[_0x1014('0x6d')][_0x29ac42][_0x1014('0x41')]+_0x1014('0x7c'));try{await _0x317f1e(_0x278837,_0x322ef1,_0x322c15[_0x1014('0x6d')][_0x3315d3][_0x1014('0x71')],_0x1014('0x6d'));}catch(_0x50aebe){logger['error']('Error:\x20'+_0x50aebe);return _0x58eecd(_0x50aebe);}break;}}}if(!_0x2a790b){logger[_0x1014('0x3b')](_0x322c15[_0x1014('0x6d')][_0x3315d3][_0x1014('0x71')]+_0x1014('0x7d'));try{await _0x317f1e(_0x278837,_0x322ef1,_0x322c15['Editor'][_0x3315d3][_0x1014('0x71')],_0x1014('0x6d'));}catch(_0x4df2fe){return _0x58eecd(_0x4df2fe);}}}for(let _0x55a444=0x0;_0x55a444<_0x322c15[_0x1014('0x6e')][_0x1014('0x52')];_0x55a444++){let _0x2a790b=![];for(let _0x29ac42=0x0;_0x29ac42<_0x468e6f[_0x1014('0x6e')][_0x1014('0x52')];_0x29ac42++){if(_0x468e6f[_0x1014('0x6e')][_0x29ac42][_0x1014('0x41')]==_0x322c15[_0x1014('0x6e')][_0x55a444][_0x1014('0x71')]){logger['debug'](_0x1014('0x7e')+Math[_0x1014('0x75')](_0x468e6f[_0x1014('0x6e')][_0x29ac42][_0x1014('0x76')]/0x3e8));logger[_0x1014('0x3b')](_0x1014('0x77')+_0x322c15[_0x1014('0x6e')][_0x55a444]['attrs'][_0x1014('0x79')]);if(Math[_0x1014('0x75')](_0x468e6f[_0x1014('0x6e')][_0x29ac42][_0x1014('0x76')]/0x3e8)>_0x322c15['Blockly'][_0x55a444][_0x1014('0x78')][_0x1014('0x79')]){_0x2a790b=!![];logger[_0x1014('0x3b')](_0x1014('0x7a')+_0x468e6f[_0x1014('0x6e')][_0x29ac42][_0x1014('0x41')]+_0x1014('0x7b'));try{await _0x12d50f(_0x278837,_0x322ef1,_0x322c15['Blockly'][_0x55a444]['filename'],'Blockly');}catch(_0x743e40){return _0x58eecd(_0x743e40);}break;}else{_0x2a790b=!![];logger[_0x1014('0x3b')](_0x1014('0x7f')+_0x468e6f[_0x1014('0x6e')][_0x29ac42]['name']+_0x1014('0x7c'));try{await _0x317f1e(_0x278837,_0x322ef1,_0x322c15[_0x1014('0x6e')][_0x55a444][_0x1014('0x71')],_0x1014('0x6e'));}catch(_0xcedd43){logger[_0x1014('0x17')]('Error:\x20'+_0xcedd43);return _0x58eecd(_0xcedd43);}break;}}}if(!_0x2a790b){logger['debug'](_0x322c15[_0x1014('0x6e')][_0x55a444][_0x1014('0x71')]+_0x1014('0x7d'));try{await _0x317f1e(_0x278837,_0x322ef1,_0x322c15['Blockly'][_0x55a444][_0x1014('0x71')],'Blockly');}catch(_0x3cf58c){return _0x58eecd(_0x3cf58c);}}}return _0x3ec7d3();}catch(_0xd2233){return _0x58eecd(_0xd2233);}});};function _0x12d50f(_0x5410ac,_0x26b8cb,_0x3f7db7,_0x457318){return new Promise((_0x4c023c,_0x5c35b5)=>{try{let _0x5481be=_0x1014('0x5e')+_0x26b8cb[_0x1014('0x31')]+'/'+_0x457318+'/'+_0x3f7db7;let _0x3fa26a=_0x26b8cb[_0x1014('0x5b')]+'/'+_0x457318+'/'+_0x3f7db7;logger[_0x1014('0x3b')](_0x1014('0x80')+_0x5481be);logger['debug'](_0x1014('0x81')+_0x3fa26a);_0x5410ac['fastPut'](_0x3fa26a,_0x5481be,{},function(_0x5c8c30){if(_0x5c8c30){logger['error'](_0x1014('0x82')+_0x3f7db7);return _0x5c35b5(_0x5c8c30);}logger[_0x1014('0x3b')](_0x1014('0x83')+_0x3f7db7);return _0x4c023c();});}catch(_0x540322){return _0x5c35b5(_0x540322);}});};function _0x317f1e(_0x38436f,_0x3da875,_0x4b4890,_0x44bd72){return new Promise((_0x1fd28b,_0x1bb849)=>{try{let _0x5e9b47=_0x1014('0x5e')+_0x3da875['username']+'/'+_0x44bd72+'/'+_0x4b4890;let _0x150b20=_0x3da875[_0x1014('0x5b')]+'/'+_0x44bd72+'/'+_0x4b4890;logger[_0x1014('0x3b')]('Remote\x20path:\x20'+_0x5e9b47);logger[_0x1014('0x3b')](_0x1014('0x81')+_0x150b20);_0x38436f[_0x1014('0x84')](_0x5e9b47,_0x150b20,{},function(_0x50d536){if(_0x50d536){logger[_0x1014('0x17')]('Error\x20downloading\x20file:\x20'+_0x4b4890);return _0x1bb849(_0x50d536);}logger[_0x1014('0x3b')](_0x1014('0x85')+_0x4b4890);return _0x1fd28b();});}catch(_0xac381a){return _0x1bb849(_0xac381a);}});};function _0x4e6015(_0x4753a9,_0x33cbf0,_0x324f6a,_0x3c03da){_0x4753a9[_0x1014('0x64')](_0x1014('0x5e')+_0x33cbf0['username'],function(_0x280f87){if(_0x280f87){logger['info'](_0x1014('0x86')+_0x280f87);_0x4753a9[_0x1014('0x5f')](_0x1014('0x5e')+_0x33cbf0[_0x1014('0x31')],function(_0x1ba2da){if(_0x1ba2da){logger[_0x1014('0x5c')](_0x1014('0x87')+_0x1ba2da);throw _0x1ba2da;}logger['info'](_0x1014('0x88'));_0x4753a9[_0x1014('0x5f')](_0x1014('0x5e')+_0x33cbf0[_0x1014('0x31')]+_0x1014('0x68'),function(_0x282078){if(_0x282078){logger[_0x1014('0x5c')](_0x1014('0x89')+_0x282078);throw _0x282078;}logger['info'](_0x1014('0x8a'));_0x4753a9['mkdir'](_0x1014('0x5e')+_0x33cbf0[_0x1014('0x31')]+_0x1014('0x6a'),function(_0x1181c2){if(_0x1181c2){logger[_0x1014('0x5c')](_0x1014('0x8b')+_0x1181c2);throw _0x1181c2;}logger[_0x1014('0x5c')]('Blockly\x20directory\x20created');_0x3c03da(_0x4753a9,_0x33cbf0,_0x324f6a);});});});}_0x3c03da(_0x4753a9,_0x33cbf0,_0x324f6a);});};function _0x2e7314(_0x5ee539,_0x368ed5,_0x39672f){_0x5ee539['readdir'](_0x1014('0x5e')+_0x368ed5[_0x1014('0x31')]+_0x1014('0x68'),function(_0x283385,_0x416579){if(_0x283385){logger[_0x1014('0x5c')](_0x1014('0x8c')+_0x283385);throw _0x283385;}_0x2bce48(_0x368ed5,_0x1014('0x6d'),_0x416579,_0x39672f);});_0x5ee539[_0x1014('0x64')]('/home/c3/FusionFilesystem/'+_0x368ed5[_0x1014('0x31')]+_0x1014('0x6a'),function(_0x39956d,_0x515a98){if(_0x39956d){logger[_0x1014('0x5c')](_0x1014('0x8d')+_0x39956d);throw _0x39956d;}_0x2bce48(_0x368ed5,'Blockly',_0x515a98,_0x39672f);});};function _0x2bce48(_0x3ae786,_0x5d89b7,_0x56c7bb,_0x1a03d2){logger[_0x1014('0x5c')](_0x1014('0x8e'));if(_0x5d89b7==_0x1014('0x6e')&&_0x56c7bb[_0x1014('0x52')]==0x0){_0x1a03d2['end']();}for(var _0xc83b1d=0x0;_0xc83b1d<_0x56c7bb[_0x1014('0x52')];_0xc83b1d++){let _0x233f75=_0x1014('0x5e')+_0x3ae786[_0x1014('0x31')]+'/'+_0x5d89b7+'/'+_0x56c7bb[_0xc83b1d]['filename'];let _0x3caea2=_0x1014('0x8f')+_0x3ae786[_0x1014('0x31')]+'/'+_0x5d89b7+'/';logger[_0x1014('0x5c')](_0x1014('0x90')+_0x233f75+_0x1014('0x91')+_0x3caea2);SCP[_0x1014('0x92')](_0x1014('0x93')+_0x233f75,_0x3caea2,function(_0x32354b){if(_0x32354b){logger[_0x1014('0x5c')](_0x1014('0x94')+_0x233f75+_0x1014('0x95')+_0x32354b);}if(_0x5d89b7=='Blockly'&&(_0xc83b1d=_0x56c7bb['length']-0x1)){_0x1a03d2['end']();}});}};}();