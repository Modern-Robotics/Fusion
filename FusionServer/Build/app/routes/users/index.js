const _0x5f15=['stat','floor','LOGIN.SUCCESS','/home/c3/FusionFilesystem/','/Blockly/','/Blockly','Remote\x20mtime:\x20','Local\x20mtime:\x20','Editor','remove','ready','/api/users/:User_Id','readdir','fastPut','../../classroom/connection','get','error','Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?','Retrieving\x20files','RequestError','firstname','verbose','attrs','Error\x20reaching\x20classroom\x20server','Login\x20Successful','User\x20does\x20not\x20exist','/User/Login','Error\x20reading\x20classroom\x20blockly\x20files:\x20','send','user','connected','params','Classroom\x20file\x20system\x20created','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','filename','socketId','mkdir','User_Id','Error:\x20','securityanswer','name','username','Local\x20\x22','securityquestion','Error\x20creating\x20user\x20file\x20system:\x20','Editor\x20directory\x20created','User\x27s\x20blockly\x20directory\x20found','../../models/user','push','User\x20Unauthenticated','/Editor/','find','User\x27s\x20blockly\x20directory\x20created','passport','toLowerCase','172.16.0.1','language','Remote\x20path:\x20','/api/recovery',',\x20error:\x20','exports','password','Error\x20creating\x20editor\x20directory:\x20','post','ssh2','User\x27s\x20classroom\x20file\x20system\x20created','/Editor','status','REGISTER.CREATED','Error\x20communicating\x20with\x20c3:\x20','/api/allowedUserGroups','MultiUserAccess','/api/recovery/:User_Id','../../utils/logger','Remote\x20\x22','email','length','authenticate','local-login','generateHash','Error','message','SocketVariables','info','logIn','filepath','Logged\x20out\x20successfully','lastname','mtimeMs','Blockly','defaultprogramminglanguage','isAuthenticated','stringify','\x22\x20newer,\x20updating\x20classroom\x20version','Classroom\x20file\x20system\x20found','/api/users/login','body','\x20not\x20a\x20common\x20file!','Error\x20reading\x20user\x20file\x20system:\x20','Error\x20creating\x20blockly\x20directory:\x20','User\x27s\x20editor\x20directory\x20created','../../fusionProgram','/api/users','Moving:\x20','User\x27s\x20classroom\x20file\x20system\x20found','trim','mtime','exec','Blockly\x20directory\x20created','Admin','StatusCodeError','Another\x20user\x20is\x20already\x20logged\x20in.','Getting\x20data\x20for\x20','local-signup','app/filesystem/','put','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','json','debug','Attempting\x20classroom\x20login','logout','\x22\x20newer,\x20updating\x20local\x20version','KillProgram','LOGIN.MULTIUSER_DENIED','Retrieved\x20','Attempting\x20standard\x20login','User','connectedClients','findOne','usergroup','removeFileSystem','/api/users/logout','LOGIN.INVALID','fusion_program_running','Client','scp','Local\x20Path:\x20','../../global/fusionSettings','end','Error\x20creating\x20classroom\x20file\x20system:\x20','sftp','Error\x20downloading:\x20','Guest','request-promise','delete'];(function(_0x32db45,_0x5f156c){const _0x340e67=function(_0x5a5852){while(--_0x5a5852){_0x32db45['push'](_0x32db45['shift']());}};_0x340e67(++_0x5f156c);}(_0x5f15,0x139));const _0x340e=function(_0x32db45,_0x5f156c){_0x32db45=_0x32db45-0x0;let _0x340e67=_0x5f15[_0x32db45];return _0x340e67;};var SCP=require('scp2');var SSH=require(_0x340e('0x29'))[_0x340e('0x6f')];var fs=require('fs-extra');var path=require('path');var rp=require(_0x340e('0x78'));const classroomConnection=require(_0x340e('0x88'));const logger=require(_0x340e('0x32'));const app=require('../../express');const User=require(_0x340e('0x18'));const passport=require(_0x340e('0x1e'));const FusionSettings=require(_0x340e('0x72'));const fusionProgram=require(_0x340e('0x4e'));module[_0x340e('0x25')]=function(){app['get']('/api/users',_0x376b1e(),function(_0xbc458e,_0x559595){User[_0x340e('0x1c')]({'usergroup':{'$ne':_0x340e('0x77')}},function(_0x103320,_0x3d6b05){if(_0x103320)_0x559595[_0x340e('0x5')](_0x103320);_0x559595[_0x340e('0x5e')](_0x3d6b05);});});app[_0x340e('0x28')](_0x340e('0x4f'),async function(_0x5578bb,_0x3179ce,_0x3b6173){await _0x2eb4a6(_0x5578bb,_0x3179ce,_0x3b6173);});async function _0x2eb4a6(_0x351a18,_0x332f91,_0x1e0d4e){passport[_0x340e('0x36')](_0x340e('0x5a'),async function(_0x284d93,_0x497193,_0x5c0b95){if(_0x284d93)return _0x332f91[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x284d93);if(_0x5c0b95&&_0x5c0b95[_0x340e('0x3a')])return _0x332f91[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x351a18['__'](_0x5c0b95[_0x340e('0x3a')]));if(FusionSettings[_0x340e('0x30')]){if(classroomConnection[_0x340e('0x7')]){try{await _0x483c55(_0x497193);}catch(_0x97882c){logger[_0x340e('0x8a')](_0x97882c);}}_0x351a18[_0x340e('0x3d')](_0x497193,function(_0x2dd9d2){if(_0x2dd9d2){return _0x1e0d4e(_0x2dd9d2);}_0x273bad(_0x351a18['body']['socketId'],_0x497193);return _0x332f91[_0x340e('0x2c')](0xc8)['json']({'serverMessage':_0x351a18['__'](_0x340e('0x2d')),'user':_0x497193});});}else{if(_0x3221c1()==0x0){if(classroomConnection['connected']){try{await _0x483c55(_0x497193);}catch(_0x466725){logger['error'](_0x466725);}}_0x351a18[_0x340e('0x3d')](_0x497193,function(_0x2754e9){if(_0x2754e9){return _0x1e0d4e(_0x2754e9);}_0x273bad(_0x351a18['body']['socketId'],_0x497193);return _0x332f91['status'](0xc8)[_0x340e('0x5e')]({'serverMessage':_0x351a18['__'](_0x340e('0x2d')),'user':_0x497193});});}else{return _0x332f91['status'](0x1f4)[_0x340e('0x5')](_0x351a18['__']('REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED'));}}})(_0x351a18,_0x332f91,_0x1e0d4e);};app[_0x340e('0x28')](_0x340e('0x4f'),passport['authenticate'](_0x340e('0x5a'),{'session':!![]}),function(_0x2ec723,_0x2a5cdb){if(_0x2ec723[_0x340e('0x6')][_0x340e('0x39')]){return _0x2a5cdb['status'](0x1f4)[_0x340e('0x5')](_0x2ec723[_0x340e('0x6')][_0x340e('0x39')]);}else{}});app[_0x340e('0x89')](_0x340e('0x85'),_0x376b1e(),function(_0x3bbc04,_0x2994cb){User[_0x340e('0x69')]({'username':_0x3bbc04[_0x340e('0x8')][_0x340e('0xe')][_0x340e('0x1f')]()[_0x340e('0x52')]()},function(_0x37f265,_0x197bde){if(_0x37f265)_0x2994cb['send'](_0x37f265);_0x2994cb[_0x340e('0x5e')](_0x197bde);});});app[_0x340e('0x5c')](_0x340e('0x85'),_0x376b1e(),function(_0x33148e,_0x5dab18){User[_0x340e('0x69')]({'username':_0x33148e[_0x340e('0x8')]['User_Id']['toLowerCase']()['trim']()},function(_0x5d82bd,_0x3e6141){if(_0x5d82bd)_0x5dab18[_0x340e('0x5')](_0x5d82bd);if(_0x33148e[_0x340e('0x49')][_0x340e('0x26')]){_0x3e6141['password']=_0x3e6141[_0x340e('0x38')](_0x33148e['body']['password']);}if(_0x33148e['body']['firstname']){_0x3e6141[_0x340e('0x8e')]=_0x33148e['body'][_0x340e('0x8e')];}if(_0x33148e[_0x340e('0x49')]['lastname']){_0x3e6141['lastname']=_0x33148e['body'][_0x340e('0x40')];}if(_0x33148e[_0x340e('0x49')]['language']){_0x3e6141[_0x340e('0x21')]=_0x33148e[_0x340e('0x49')][_0x340e('0x21')];}if(_0x33148e[_0x340e('0x49')][_0x340e('0x34')]){_0x3e6141[_0x340e('0x34')]=_0x33148e['body'][_0x340e('0x34')];}if(_0x33148e[_0x340e('0x49')]['defaultprogramminglanguage']){_0x3e6141[_0x340e('0x43')]=_0x33148e[_0x340e('0x49')][_0x340e('0x43')];}if(_0x33148e[_0x340e('0x49')][_0x340e('0x14')]){_0x3e6141[_0x340e('0x14')]=_0x33148e[_0x340e('0x49')][_0x340e('0x14')];}if(_0x33148e[_0x340e('0x49')][_0x340e('0x10')]){_0x3e6141[_0x340e('0x10')]=_0x33148e[_0x340e('0x49')][_0x340e('0x10')];}if(_0x33148e[_0x340e('0x49')][_0x340e('0x6a')]){_0x3e6141['usergroup']=_0x33148e[_0x340e('0x49')][_0x340e('0x6a')];}_0x3e6141['save'](function(_0x1528a2){if(_0x1528a2)_0x5dab18[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x1528a2);_0x5dab18[_0x340e('0x2c')](0xc8)[_0x340e('0x5e')]({'serverMessage':'User\x20updated!'});});});});app[_0x340e('0x79')](_0x340e('0x85'),_0x376b1e(),function(_0x437561,_0x3c5ed6){if(_0x437561['params']['User_Id'][_0x340e('0x1f')]()[_0x340e('0x52')]()==_0x437561[_0x340e('0x6')][_0x340e('0x12')]){if(FusionSettings[_0x340e('0x3b')][_0x340e('0x6e')])if(FusionSettings[_0x340e('0x3b')][_0x340e('0x6e')]['User']==_0x437561[_0x340e('0x6')]['username'])fusionProgram[_0x340e('0x63')]();_0x77e03a(_0x437561['user'][_0x340e('0x12')]);_0x437561[_0x340e('0x61')]();}User[_0x340e('0x83')]({'username':_0x437561[_0x340e('0x8')][_0x340e('0xe')][_0x340e('0x1f')]()[_0x340e('0x52')]()},function(_0x376fb2,_0xf289f3){if(_0x376fb2)return _0x3c5ed6[_0x340e('0x5')](_0x376fb2);User[_0x340e('0x6b')](_0x437561[_0x340e('0x8')]['User_Id'][_0x340e('0x1f')]()[_0x340e('0x52')]());return _0x3c5ed6[_0x340e('0x2c')](0xc8)[_0x340e('0x5e')]({'serverMessage':'Successfully\x20deleted'});});});app[_0x340e('0x28')](_0x340e('0x48'),async(_0x2879af,_0x1aa38b,_0x446525)=>{if(!FusionSettings['MultiUserAccess']&&_0x3221c1()>0x0)return _0x1aa38b[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x2879af['__'](_0x340e('0x64')));if(!classroomConnection[_0x340e('0x7')]){logger[_0x340e('0x5f')](_0x340e('0x66'));await _0x234dba(_0x2879af,_0x1aa38b,_0x446525);}else{logger['debug'](_0x340e('0x60'));let _0x4fcb45={'method':'POST','uri':'https://172.16.0.1/backend/auth/ldap','body':{'username':_0x2879af[_0x340e('0x49')][_0x340e('0x12')],'password':_0x2879af[_0x340e('0x49')][_0x340e('0x26')]},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x4fcb45);let _0x1ed281=await User[_0x340e('0x69')]({'username':_0x2879af[_0x340e('0x49')][_0x340e('0x12')]})[_0x340e('0x54')]();if(_0x1ed281){await _0x234dba(_0x2879af,_0x1aa38b,_0x446525);}else{_0x2879af['body'][_0x340e('0x14')]=_0x340e('0x8b');_0x2879af[_0x340e('0x49')][_0x340e('0x10')]=_0x2879af[_0x340e('0x49')][_0x340e('0x12')];_0x2879af[_0x340e('0x49')][_0x340e('0x6a')]=_0x340e('0x67');await _0x2eb4a6(_0x2879af,_0x1aa38b,_0x446525);}}catch(_0x5878bf){logger[_0x340e('0x3c')]('Error\x20with\x20request\x20promise.\x20'+_0x5878bf);if(_0x5878bf[_0x340e('0x11')]==_0x340e('0x57')){return _0x1aa38b[_0x340e('0x2c')](0x191)[_0x340e('0x5')](_0x2879af['__'](_0x340e('0x6d')));}else if(_0x5878bf[_0x340e('0x11')]==_0x340e('0x8d')){return _0x1aa38b[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x340e('0x0'));}else{return _0x1aa38b['status'](0x1f4)['send'](_0x5878bf[_0x340e('0x3a')]);}}}});async function _0x234dba(_0x438caa,_0x50f876,_0x3700ed){passport['authenticate'](_0x340e('0x37'),async function(_0x4ba2f9,_0x5873e1,_0x1ebb9a){if(_0x4ba2f9)return _0x50f876[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x438caa['__'](_0x4ba2f9[_0x340e('0x3a')]));if(!_0x5873e1)return _0x50f876[_0x340e('0x2c')](0x191)['send'](_0x438caa['__'](_0x1ebb9a[_0x340e('0x3a')]));_0x438caa[_0x340e('0x3d')](_0x5873e1,async function(_0x40aa81){if(_0x40aa81){return _0x3700ed(_0x40aa81);}_0x273bad(_0x438caa[_0x340e('0x49')]['socketId'],_0x5873e1);try{await _0x483c55(_0x5873e1);}catch(_0x37e60c){logger[_0x340e('0x8a')](_0x37e60c);}return _0x50f876[_0x340e('0x2c')](0xc8)[_0x340e('0x5e')]({'serverMessage':_0x438caa['__'](_0x340e('0x7c')),'user':_0x5873e1});});})(_0x438caa,_0x50f876,_0x3700ed);};app[_0x340e('0x28')](_0x340e('0x6c'),_0x376b1e(),function(_0x81eaa0,_0x55b2f4){if(FusionSettings[_0x340e('0x3b')][_0x340e('0x6e')])if(FusionSettings[_0x340e('0x3b')][_0x340e('0x6e')][_0x340e('0x67')]==_0x81eaa0[_0x340e('0x6')][_0x340e('0x12')])fusionProgram['KillProgram']();_0x5e3597(_0x81eaa0[_0x340e('0x49')][_0x340e('0xc')]);_0x81eaa0[_0x340e('0x61')]();_0x55b2f4[_0x340e('0x2c')](0xc8)[_0x340e('0x5e')]({'serverMessage':_0x340e('0x3f')});});app[_0x340e('0x89')](_0x340e('0x31'),function(_0x400bf5,_0x1164e1){User[_0x340e('0x69')]({'username':_0x400bf5['params'][_0x340e('0xe')][_0x340e('0x1f')]()[_0x340e('0x52')]()},function(_0x3c6269,_0x53e1a6){if(_0x3c6269)return _0x1164e1['status'](0x1f4)[_0x340e('0x5')](_0x3c6269);if(!_0x53e1a6)return _0x1164e1[_0x340e('0x2c')](0x1f4)[_0x340e('0x5')](_0x340e('0x2'));else return _0x1164e1[_0x340e('0x2c')](0xc8)['json'](_0x53e1a6[_0x340e('0x14')]);});});app[_0x340e('0x28')](_0x340e('0x23'),passport[_0x340e('0x36')]('local-recovery',{'session':!![]}),async function(_0x5102cb,_0xa11ef){if(FusionSettings[_0x340e('0x30')]){if(classroomConnection[_0x340e('0x7')]){try{await _0x483c55(user);}catch(_0x2459e5){logger[_0x340e('0x8a')](_0x2459e5);}}_0x273bad(_0x5102cb[_0x340e('0x49')]['socketId'],_0x5102cb['user']);return _0xa11ef['status'](0xc8)[_0x340e('0x5e')]({'serverMessage':'Login\x20Successful','user':_0x5102cb[_0x340e('0x6')]});}else{if(_0x3221c1()==0x0){_0x273bad(_0x5102cb['body'][_0x340e('0xc')],_0x5102cb['user']);if(classroomConnection[_0x340e('0x7')]){try{await _0x483c55(user);}catch(_0x5d940d){logger[_0x340e('0x8a')](_0x5d940d);}}return _0xa11ef[_0x340e('0x2c')](0xc8)[_0x340e('0x5e')]({'serverMessage':_0x340e('0x1'),'user':_0x5102cb[_0x340e('0x6')]});}else{_0x5102cb[_0x340e('0x61')]();return _0xa11ef['status'](0x1f4)['send'](_0x340e('0x58'));}}});app[_0x340e('0x89')](_0x340e('0x2f'),function(_0xdd18b3,_0x5ea897){var _0xf8f1=[_0x340e('0x67')];User['findOne']({'usergroup':_0x340e('0x56')},function(_0x54c216,_0x59b780){if(_0x54c216)return _0x5ea897[_0x340e('0x2c')](0xc8)[_0x340e('0x5')](_0xf8f1);if(!_0x59b780)_0xf8f1['unshift']('Admin');return _0x5ea897[_0x340e('0x2c')](0xc8)[_0x340e('0x5')](_0xf8f1);});});app[_0x340e('0x89')](_0x340e('0x3'),async(_0x34ca1d,_0x4a8c5e,_0x35d489)=>{_0x35d489();});function _0x3221c1(){var _0x1710f0=0x0;for(var _0x2486da=0x0;_0x2486da<FusionSettings[_0x340e('0x68')][_0x340e('0x35')];_0x2486da++){if(FusionSettings[_0x340e('0x68')][_0x2486da][_0x340e('0x67')]){_0x1710f0++;}}return _0x1710f0;}function _0x273bad(_0x473d4b,_0x1dc410){for(var _0xc3fc9d=0x0;_0xc3fc9d<FusionSettings[_0x340e('0x68')][_0x340e('0x35')];_0xc3fc9d++){if(FusionSettings['connectedClients'][_0xc3fc9d]['id']==_0x473d4b){FusionSettings['connectedClients'][_0xc3fc9d][_0x340e('0x67')]=_0x1dc410;break;}}}function _0x5e3597(_0x455e8e){for(var _0x32e89d=0x0;_0x32e89d<FusionSettings['connectedClients'][_0x340e('0x35')];_0x32e89d++){if(FusionSettings['connectedClients'][_0x32e89d]['id']==_0x455e8e){FusionSettings[_0x340e('0x68')][_0x32e89d]['User']=undefined;break;}}}function _0x77e03a(_0x59faa6){for(var _0x3b6184=0x0;_0x3b6184<FusionSettings['connectedClients']['length'];_0x3b6184++){if(FusionSettings[_0x340e('0x68')][_0x3b6184][_0x340e('0x67')][_0x340e('0x12')]==_0x59faa6){FusionSettings[_0x340e('0x68')][_0x3b6184][_0x340e('0x67')]=undefined;break;}}}function _0x376b1e(){return function(_0x501c24,_0xe63cd4,_0x182573){if(_0x501c24[_0x340e('0x44')]()){return _0x182573();}else{return _0xe63cd4['status'](0x191)['send'](_0x340e('0x1a'));}};}async function _0x483c55(_0x1d6e1d){try{await _0xb03a3d(_0x1d6e1d);}catch(_0x800e7){logger['error']('Error\x20downloading\x20classroom\x20files\x20for\x20'+_0x1d6e1d[_0x340e('0x12')]);}};function _0xb03a3d(_0x469f96){return new Promise(function(_0xa4a968,_0x52ad8b){var _0x344f58=new SSH();_0x344f58['on'](_0x340e('0x84'),function(){_0x344f58[_0x340e('0x75')](async function(_0x3e3ddb,_0x5d7375){if(_0x3e3ddb){logger[_0x340e('0x8a')](_0x340e('0x2e')+_0x3e3ddb);_0x344f58[_0x340e('0x73')]();return _0x52ad8b(_0x3e3ddb);}try{await _0x1cd43d(_0x5d7375);await _0x1d09db(_0x5d7375,_0x469f96[_0x340e('0x12')]);await _0x3e3136(_0x5d7375,_0x469f96[_0x340e('0x12')]);await _0x26225c(_0x5d7375,_0x469f96[_0x340e('0x12')]);let _0x20a35a=await _0x240a07(_0x5d7375,_0x469f96['username']);logger[_0x340e('0x5f')](JSON['stringify'](_0x20a35a));let _0x383786=await _0x16deda(_0x469f96['filepath']);logger[_0x340e('0x5f')](JSON[_0x340e('0x45')](_0x383786));await _0x124aa5(_0x5d7375,_0x469f96,_0x20a35a,_0x383786);_0x344f58[_0x340e('0x73')]();return _0xa4a968();}catch(_0x395838){logger[_0x340e('0x3c')](_0x395838);_0x344f58[_0x340e('0x73')]();return _0x52ad8b(_0x395838);}});})['connect']({'host':_0x340e('0x20'),'port':0x16,'username':'c3','password':'root'});});};function _0x1cd43d(_0x3adc4f){return new Promise(function(_0x23a5de,_0x17c064){_0x3adc4f[_0x340e('0x86')]('/home/c3/FusionFilesystem/',function(_0x204599){if(_0x204599){_0x3adc4f[_0x340e('0xd')](_0x340e('0x7d'),function(_0x507910){if(_0x507910){return _0x17c064(_0x340e('0x74')+_0x507910);}else{logger[_0x340e('0x8f')](_0x340e('0x9'));return _0x23a5de();}});}else{logger[_0x340e('0x8f')](_0x340e('0x47'));return _0x23a5de();}});});};function _0x1d09db(_0x23f17c,_0x528588){return new Promise(function(_0x3f39af,_0x17976a){_0x23f17c['readdir']('/home/c3/FusionFilesystem/'+_0x528588,function(_0x36ef20){if(_0x36ef20){_0x23f17c[_0x340e('0xd')](_0x340e('0x7d')+_0x528588,function(_0x996dbe){if(_0x996dbe){return _0x17976a(_0x340e('0x5d')+_0x996dbe);}else{logger[_0x340e('0x8f')](_0x340e('0x2a'));return _0x3f39af();}});}else{logger[_0x340e('0x8f')](_0x340e('0x51'));return _0x3f39af();}});});};function _0x3e3136(_0xbedd8a,_0x661d9b){return new Promise(function(_0x530d6f,_0x1bd1d5){_0xbedd8a[_0x340e('0x86')]('/home/c3/FusionFilesystem/'+_0x661d9b+_0x340e('0x1b'),function(_0x48241a){if(_0x48241a){_0xbedd8a[_0x340e('0xd')](_0x340e('0x7d')+_0x661d9b+'/Editor/',function(_0x265dee){if(_0x265dee){return _0x1bd1d5('Error\x20creating\x20user\x27s\x20editor\x20directory:\x20'+_0x265dee);}else{logger[_0x340e('0x8f')](_0x340e('0x4d'));return _0x530d6f();}});}else{logger[_0x340e('0x8f')]('User\x27s\x20editor\x20directory\x20found');return _0x530d6f();}});});};function _0x26225c(_0x49c58f,_0x55b919){return new Promise(function(_0x46d089,_0xd98700){_0x49c58f['readdir']('/home/c3/FusionFilesystem/'+_0x55b919+_0x340e('0x7e'),function(_0x454ee9){if(_0x454ee9){_0x49c58f['mkdir'](_0x340e('0x7d')+_0x55b919+_0x340e('0x7e'),function(_0x4da125){if(_0x4da125){return _0xd98700(_0x340e('0xa')+_0x4da125);}else{logger[_0x340e('0x8f')](_0x340e('0x1d'));return _0x46d089();}});}else{logger[_0x340e('0x8f')](_0x340e('0x17'));return _0x46d089();}});});};function _0x240a07(_0x97c40c,_0x105057){return new Promise(async function(_0x4fe0cc,_0x3645f1){try{let _0x2ef6a6={};_0x2ef6a6[_0x340e('0x82')]=await _0xb6cab8(_0x97c40c,_0x105057);_0x2ef6a6['Blockly']=await _0x4b1311(_0x97c40c,_0x105057);return _0x4fe0cc(_0x2ef6a6);}catch(_0x56915e){return _0x3645f1(_0x56915e);}});};function _0xb6cab8(_0x27dd96,_0x273dde){return new Promise(function(_0x5de7c3,_0x39f06f){_0x27dd96['readdir']('/home/c3/FusionFilesystem/'+_0x273dde+'/Editor/',function(_0x5af584,_0x1551a0){if(_0x5af584)return _0x39f06f(_0x5af584);let _0x25c19a=[];for(let _0x33e5d5=0x0;_0x33e5d5<_0x1551a0[_0x340e('0x35')];_0x33e5d5++){logger['debug'](_0x340e('0x59')+_0x1551a0[_0x33e5d5][_0x340e('0xb')]);_0x25c19a['push'](_0x1551a0[_0x33e5d5]);}return _0x5de7c3(_0x25c19a);});});};function _0x4b1311(_0x874dc8,_0x42736d){return new Promise(function(_0x188d13,_0x48d0ad){_0x874dc8[_0x340e('0x86')](_0x340e('0x7d')+_0x42736d+'/Blockly/',function(_0x5226bf,_0x3d842b){if(_0x5226bf)return _0x48d0ad(_0x5226bf);let _0x1da31b=[];for(let _0x2b9fc1=0x0;_0x2b9fc1<_0x3d842b['length'];_0x2b9fc1++){logger['debug'](_0x340e('0x59')+_0x3d842b[_0x2b9fc1][_0x340e('0xb')]);_0x1da31b[_0x340e('0x19')](_0x3d842b[_0x2b9fc1]);}return _0x188d13(_0x1da31b);});});};function _0x16deda(_0x383a37){return new Promise(async function(_0x47f302,_0x1426a0){try{let _0x50b122={};_0x50b122[_0x340e('0x82')]=await _0x497e00(_0x383a37);_0x50b122[_0x340e('0x42')]=await _0x4238e1(_0x383a37);return _0x47f302(_0x50b122);}catch(_0x3e3cb7){return _0x1426a0(_0x3e3cb7);}});};function _0x497e00(_0xf5e764){return new Promise(async function(_0x24c25b,_0xa8141e){try{let _0x2b641b=[];let _0x565eec=await fs[_0x340e('0x86')](_0xf5e764+_0x340e('0x2b'));for(let _0x259e24=0x0;_0x259e24<_0x565eec['length'];_0x259e24++){logger[_0x340e('0x5f')](_0x340e('0x59')+_0x565eec[_0x259e24]);let _0x2208d3=await fs[_0x340e('0x7a')](_0xf5e764+'/Editor/'+_0x565eec[_0x259e24]);_0x2208d3[_0x340e('0x11')]=_0x565eec[_0x259e24];_0x2b641b['push'](_0x2208d3);}return _0x24c25b(_0x2b641b);}catch(_0x3d83ea){return _0xa8141e(_0x3d83ea);}});};function _0x4238e1(_0x106bd2){return new Promise(async function(_0x27437f,_0x491bc5){try{let _0x4b3874=[];let _0x4c8c83=await fs[_0x340e('0x86')](_0x106bd2+_0x340e('0x7f'));for(let _0x44450a=0x0;_0x44450a<_0x4c8c83['length'];_0x44450a++){logger[_0x340e('0x5f')](_0x340e('0x59')+_0x4c8c83[_0x44450a]);let _0x476d96=await fs['stat'](_0x106bd2+_0x340e('0x7e')+_0x4c8c83[_0x44450a]);_0x476d96[_0x340e('0x11')]=_0x4c8c83[_0x44450a];_0x4b3874[_0x340e('0x19')](_0x476d96);}return _0x27437f(_0x4b3874);}catch(_0x1f1466){return _0x491bc5(_0x1f1466);}});};function _0x124aa5(_0x41429a,_0x514375,_0x4383d2,_0xc495cc){return new Promise(async function(_0x3847bb,_0x58281e){try{for(let _0x5886d5=0x0;_0x5886d5<_0x4383d2[_0x340e('0x82')][_0x340e('0x35')];_0x5886d5++){let _0x3d6760=![];for(let _0x379feb=0x0;_0x379feb<_0xc495cc[_0x340e('0x82')][_0x340e('0x35')];_0x379feb++){if(_0xc495cc[_0x340e('0x82')][_0x379feb][_0x340e('0x11')]==_0x4383d2[_0x340e('0x82')][_0x5886d5][_0x340e('0xb')]){logger['debug'](_0x340e('0x81')+Math[_0x340e('0x7b')](_0xc495cc['Editor'][_0x379feb]['mtimeMs']/0x3e8));logger[_0x340e('0x5f')](_0x340e('0x80')+_0x4383d2[_0x340e('0x82')][_0x5886d5]['attrs']['mtime']);if(Math[_0x340e('0x7b')](_0xc495cc[_0x340e('0x82')][_0x379feb][_0x340e('0x41')]/0x3e8)>_0x4383d2['Editor'][_0x5886d5][_0x340e('0x90')][_0x340e('0x53')]){_0x3d6760=!![];logger[_0x340e('0x5f')]('Local\x20\x22'+_0xc495cc[_0x340e('0x82')][_0x379feb][_0x340e('0x11')]+_0x340e('0x46'));try{await _0x53d5c8(_0x41429a,_0x514375,_0x4383d2[_0x340e('0x82')][_0x5886d5][_0x340e('0xb')],_0x340e('0x82'));}catch(_0x52ba7b){return _0x58281e(_0x52ba7b);}break;}else{_0x3d6760=!![];logger[_0x340e('0x5f')]('Remote\x20\x22'+_0xc495cc['Editor'][_0x379feb][_0x340e('0x11')]+_0x340e('0x62'));try{await _0x4aed6d(_0x41429a,_0x514375,_0x4383d2[_0x340e('0x82')][_0x5886d5][_0x340e('0xb')],_0x340e('0x82'));}catch(_0x76f451){logger[_0x340e('0x8a')](_0x340e('0xf')+_0x76f451);return _0x58281e(_0x76f451);}break;}}}if(!_0x3d6760){logger[_0x340e('0x5f')](_0x4383d2[_0x340e('0x82')][_0x5886d5]['filename']+_0x340e('0x4a'));try{await _0x4aed6d(_0x41429a,_0x514375,_0x4383d2[_0x340e('0x82')][_0x5886d5]['filename'],_0x340e('0x82'));}catch(_0x54af0b){return _0x58281e(_0x54af0b);}}}for(let _0x1e16cb=0x0;_0x1e16cb<_0x4383d2[_0x340e('0x42')][_0x340e('0x35')];_0x1e16cb++){let _0x40f3d7=![];for(let _0x583c73=0x0;_0x583c73<_0xc495cc['Blockly'][_0x340e('0x35')];_0x583c73++){if(_0xc495cc[_0x340e('0x42')][_0x583c73]['name']==_0x4383d2[_0x340e('0x42')][_0x1e16cb][_0x340e('0xb')]){logger['debug'](_0x340e('0x81')+Math[_0x340e('0x7b')](_0xc495cc['Blockly'][_0x583c73][_0x340e('0x41')]/0x3e8));logger[_0x340e('0x5f')](_0x340e('0x80')+_0x4383d2[_0x340e('0x42')][_0x1e16cb]['attrs']['mtime']);if(Math[_0x340e('0x7b')](_0xc495cc[_0x340e('0x42')][_0x583c73][_0x340e('0x41')]/0x3e8)>_0x4383d2[_0x340e('0x42')][_0x1e16cb][_0x340e('0x90')][_0x340e('0x53')]){_0x40f3d7=!![];logger[_0x340e('0x5f')](_0x340e('0x13')+_0xc495cc[_0x340e('0x42')][_0x583c73][_0x340e('0x11')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x53d5c8(_0x41429a,_0x514375,_0x4383d2[_0x340e('0x42')][_0x1e16cb]['filename'],_0x340e('0x42'));}catch(_0x5493a3){return _0x58281e(_0x5493a3);}break;}else{_0x40f3d7=!![];logger[_0x340e('0x5f')](_0x340e('0x33')+_0xc495cc[_0x340e('0x42')][_0x583c73][_0x340e('0x11')]+_0x340e('0x62'));try{await _0x4aed6d(_0x41429a,_0x514375,_0x4383d2['Blockly'][_0x1e16cb][_0x340e('0xb')],_0x340e('0x42'));}catch(_0x47689b){logger[_0x340e('0x8a')]('Error:\x20'+_0x47689b);return _0x58281e(_0x47689b);}break;}}}if(!_0x40f3d7){logger[_0x340e('0x5f')](_0x4383d2[_0x340e('0x42')][_0x1e16cb][_0x340e('0xb')]+'\x20not\x20a\x20common\x20file!');try{await _0x4aed6d(_0x41429a,_0x514375,_0x4383d2[_0x340e('0x42')][_0x1e16cb]['filename'],_0x340e('0x42'));}catch(_0x4f1b36){return _0x58281e(_0x4f1b36);}}}return _0x3847bb();}catch(_0x2764bf){return _0x58281e(_0x2764bf);}});};function _0x53d5c8(_0x11b03e,_0x1a56ab,_0x4a788f,_0x194336){return new Promise((_0x4f9f88,_0x2cea49)=>{try{let _0x33d113=_0x340e('0x7d')+_0x1a56ab[_0x340e('0x12')]+'/'+_0x194336+'/'+_0x4a788f;let _0x2c5b58=_0x1a56ab[_0x340e('0x3e')]+'/'+_0x194336+'/'+_0x4a788f;logger[_0x340e('0x5f')](_0x340e('0x22')+_0x33d113);logger[_0x340e('0x5f')](_0x340e('0x71')+_0x2c5b58);_0x11b03e[_0x340e('0x87')](_0x2c5b58,_0x33d113,{},function(_0x10c837){if(_0x10c837){logger[_0x340e('0x8a')]('Error\x20uploading\x20file:\x20'+_0x4a788f);return _0x2cea49(_0x10c837);}logger['debug']('Uploaded\x20'+_0x4a788f);return _0x4f9f88();});}catch(_0x4c7f20){return _0x2cea49(_0x4c7f20);}});};function _0x4aed6d(_0x418e34,_0x40d547,_0xa885dd,_0x3148a9){return new Promise((_0x100095,_0x364cf6)=>{try{let _0x4e5225=_0x340e('0x7d')+_0x40d547[_0x340e('0x12')]+'/'+_0x3148a9+'/'+_0xa885dd;let _0x34a5a2=_0x40d547[_0x340e('0x3e')]+'/'+_0x3148a9+'/'+_0xa885dd;logger[_0x340e('0x5f')](_0x340e('0x22')+_0x4e5225);logger[_0x340e('0x5f')]('Local\x20Path:\x20'+_0x34a5a2);_0x418e34['fastGet'](_0x4e5225,_0x34a5a2,{},function(_0xa48647){if(_0xa48647){logger[_0x340e('0x8a')]('Error\x20downloading\x20file:\x20'+_0xa885dd);return _0x364cf6(_0xa48647);}logger[_0x340e('0x5f')](_0x340e('0x65')+_0xa885dd);return _0x100095();});}catch(_0x323d6d){return _0x364cf6(_0x323d6d);}});};function _0x4a26b6(_0x32be7f,_0x831206,_0x424597,_0x1d1b92){_0x32be7f[_0x340e('0x86')]('/home/c3/FusionFilesystem/'+_0x831206[_0x340e('0x12')],function(_0x129874){if(_0x129874){logger[_0x340e('0x3c')](_0x340e('0x4b')+_0x129874);_0x32be7f[_0x340e('0xd')](_0x340e('0x7d')+_0x831206[_0x340e('0x12')],function(_0x5386ee){if(_0x5386ee){logger['info'](_0x340e('0x15')+_0x5386ee);throw _0x5386ee;}logger[_0x340e('0x3c')]('User\x20c3\x20directory\x20created');_0x32be7f[_0x340e('0xd')](_0x340e('0x7d')+_0x831206[_0x340e('0x12')]+'/Editor/',function(_0xfd0a0c){if(_0xfd0a0c){logger[_0x340e('0x3c')](_0x340e('0x27')+_0xfd0a0c);throw _0xfd0a0c;}logger[_0x340e('0x3c')](_0x340e('0x16'));_0x32be7f[_0x340e('0xd')](_0x340e('0x7d')+_0x831206[_0x340e('0x12')]+_0x340e('0x7e'),function(_0x237535){if(_0x237535){logger[_0x340e('0x3c')](_0x340e('0x4c')+_0x237535);throw _0x237535;}logger[_0x340e('0x3c')](_0x340e('0x55'));_0x1d1b92(_0x32be7f,_0x831206,_0x424597);});});});}_0x1d1b92(_0x32be7f,_0x831206,_0x424597);});};function _0x32bc96(_0x742d98,_0x4334fe,_0x4e4e67){_0x742d98[_0x340e('0x86')](_0x340e('0x7d')+_0x4334fe[_0x340e('0x12')]+_0x340e('0x1b'),function(_0x37834c,_0x2fac73){if(_0x37834c){logger['info']('Error\x20reading\x20classroom\x20editor\x20files:\x20'+_0x37834c);throw _0x37834c;}_0x14452c(_0x4334fe,_0x340e('0x82'),_0x2fac73,_0x4e4e67);});_0x742d98[_0x340e('0x86')](_0x340e('0x7d')+_0x4334fe['username']+_0x340e('0x7e'),function(_0x1b9d49,_0x240314){if(_0x1b9d49){logger[_0x340e('0x3c')](_0x340e('0x4')+_0x1b9d49);throw _0x1b9d49;}_0x14452c(_0x4334fe,_0x340e('0x42'),_0x240314,_0x4e4e67);});};function _0x14452c(_0xf1722d,_0x3d170b,_0x2f6076,_0x2e51b0){logger[_0x340e('0x3c')](_0x340e('0x8c'));if(_0x3d170b==_0x340e('0x42')&&_0x2f6076[_0x340e('0x35')]==0x0){_0x2e51b0[_0x340e('0x73')]();}for(var _0x36cffa=0x0;_0x36cffa<_0x2f6076[_0x340e('0x35')];_0x36cffa++){let _0x3b11e1='/home/c3/FusionFilesystem/'+_0xf1722d[_0x340e('0x12')]+'/'+_0x3d170b+'/'+_0x2f6076[_0x36cffa][_0x340e('0xb')];let _0x5519a1=_0x340e('0x5b')+_0xf1722d[_0x340e('0x12')]+'/'+_0x3d170b+'/';logger[_0x340e('0x3c')](_0x340e('0x50')+_0x3b11e1+'\x20to\x20'+_0x5519a1);SCP[_0x340e('0x70')]('c3:root@172.16.0.1:'+_0x3b11e1,_0x5519a1,function(_0x1ed9ff){if(_0x1ed9ff){logger[_0x340e('0x3c')](_0x340e('0x76')+_0x3b11e1+_0x340e('0x24')+_0x1ed9ff);}if(_0x3d170b==_0x340e('0x42')&&(_0x36cffa=_0x2f6076[_0x340e('0x35')]-0x1)){_0x2e51b0[_0x340e('0x73')]();}});}};}();