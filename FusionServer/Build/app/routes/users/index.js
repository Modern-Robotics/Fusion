const _0x11f0=['send','Admin','request-promise','User\x20Unauthenticated','lastname','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','User\x27s\x20classroom\x20file\x20system\x20found','Error\x20with\x20request\x20promise.\x20','attrs','end','MultiUserAccess','\x20not\x20a\x20common\x20file!','put','User\x27s\x20blockly\x20directory\x20created','Editor','readdir','Error\x20downloading\x20classroom\x20files\x20for\x20','c3:root@172.16.0.1:','securityquestion','Remote\x20path:\x20','Error\x20reading\x20classroom\x20editor\x20files:\x20','floor','Error\x20creating\x20classroom\x20file\x20system:\x20','length','Another\x20user\x20is\x20already\x20logged\x20in.','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','10.200.200.1','fusion_program_running','../../global/fusionSettings','/home/c3/FusionFilesystem/','/Editor','Remote\x20mtime:\x20','Client','filepath','Retrieved\x20','mtime','User\x20updated!','User\x27s\x20editor\x20directory\x20created','logIn','language','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','LOGIN.SUCCESS','mtimeMs','name','/Blockly/','get','../../utils/logger','stat','Login\x20Successful','User','username','user','/Blockly','KillProgram','post','securityanswer','scp2','passport','delete','Error:\x20','trim','exec','Error\x20downloading\x20file:\x20','Local\x20\x22','fs-extra','ready','sftp','/api/users/login','path','authenticate','../../models/user','Error\x20uploading\x20file:\x20','create','/api/users/cloudLogin','User\x27s\x20blockly\x20directory\x20found','params','Editor\x20directory\x20created','password','message','Error\x20creating\x20user\x20file\x20system:\x20','connected','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','firstname','REGISTER.CREATED','push','login','body','https://172.16.0.1/backend/auth/ldap','../../fusionProgram','/api/recovery/:User_Id','info','User\x20c3\x20directory\x20created','User\x20does\x20not\x20exist','Moving:\x20','/api/recovery','Error','/Editor/','connect','status','/api/users','Blockly','User\x27s\x20editor\x20directory\x20found','toLowerCase','Classroom\x20file\x20system\x20created','Uploaded\x20','json','User_Id','../../express','logout','/api/users/:User_Id','fastGet','email','SocketVariables','filename','/api/allowedUserGroups','usergroup','/api/users/logout','Error\x20creating\x20blockly\x20directory:\x20','\x22\x20newer,\x20updating\x20local\x20version','defaultprogramminglanguage','removeFileSystem','connectedClients','local-recovery','\x20to\x20','Getting\x20data\x20for\x20','mkdir','app/filesystem/','findOne','scp','Error\x20reading\x20user\x20file\x20system:\x20','socketId','save','Local\x20Path:\x20','Remote\x20\x22','Local\x20mtime:\x20','POST','LOGIN.MULTIUSER_DENIED','generateHash'];(function(_0x5501da,_0x11f00a){const _0x26e9ab=function(_0x8fe171){while(--_0x8fe171){_0x5501da['push'](_0x5501da['shift']());}};_0x26e9ab(++_0x11f00a);}(_0x11f0,0x1c9));const _0x26e9=function(_0x5501da,_0x11f00a){_0x5501da=_0x5501da-0x0;let _0x26e9ab=_0x11f0[_0x5501da];return _0x26e9ab;};var SCP=require(_0x26e9('0xd'));var SSH=require('ssh2')[_0x26e9('0x7f')];var fs=require(_0x26e9('0x15'));var path=require(_0x26e9('0x19'));var rp=require(_0x26e9('0x61'));const classroomConnection=require('../../classroom/connection');const logger=require(_0x26e9('0x3'));const app=require(_0x26e9('0x40'));const User=require(_0x26e9('0x1b'));const passport=require(_0x26e9('0xe'));const FusionSettings=require(_0x26e9('0x7b'));const fusionProgram=require(_0x26e9('0x2d'));module['exports']=function(){app[_0x26e9('0x2')]('/api/users',_0x4055a0(),function(_0x41cfed,_0x223c06){User['find']({'usergroup':{'$ne':'Guest'}},function(_0x5d8011,_0xb2155){if(_0x5d8011)_0x223c06['send'](_0x5d8011);_0x223c06[_0x26e9('0x3e')](_0xb2155);});});app[_0x26e9('0xb')]('/api/users',function(_0x4a7e88,_0x5bebbf,_0x2a487b){passport['authenticate']('local-signup',async function(_0x4f321a,_0x3a26b5,_0x1cdab7){if(_0x4f321a)return _0x5bebbf[_0x26e9('0x37')](0x1f4)['send'](_0x4f321a);if(_0x1cdab7&&_0x1cdab7[_0x26e9('0x23')])return _0x5bebbf[_0x26e9('0x37')](0x1f4)[_0x26e9('0x5f')](_0x4a7e88['__'](_0x1cdab7[_0x26e9('0x23')]));if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x26e9('0x25')]){await _0x3fe4e2(_0x3a26b5);}_0x4a7e88[_0x26e9('0x85')](_0x3a26b5,function(_0x204f7b){if(_0x204f7b){return _0x2a487b(_0x204f7b);}_0x26e0b7(_0x4a7e88[_0x26e9('0x2b')]['socketId'],_0x3a26b5);return _0x5bebbf[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x4a7e88['__'](_0x26e9('0x28')),'user':_0x3a26b5});});}else{if(_0x2e1432()==0x0){_0x26e0b7(_0x4a7e88['body'][_0x26e9('0x57')],_0x3a26b5);if(classroomConnection[_0x26e9('0x25')]){await _0x3fe4e2(_0x3a26b5);}_0x4a7e88[_0x26e9('0x85')](_0x3a26b5,function(_0x3a714d){if(_0x3a714d){return _0x2a487b(_0x3a714d);}_0x26e0b7(_0x4a7e88['body'][_0x26e9('0x57')],_0x3a26b5);return _0x5bebbf[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x4a7e88['__'](_0x26e9('0x28')),'user':_0x3a26b5});});}else{return _0x5bebbf['status'](0x1f4)[_0x26e9('0x5f')](_0x4a7e88['__'](_0x26e9('0x78')));}}})(_0x4a7e88,_0x5bebbf,_0x2a487b);});app['post'](_0x26e9('0x38'),passport[_0x26e9('0x1a')]('local-signup',{'session':!![]}),function(_0x5e11ca,_0x4fe877){if(_0x5e11ca[_0x26e9('0x8')][_0x26e9('0x34')]){return _0x4fe877[_0x26e9('0x37')](0x1f4)['send'](_0x5e11ca['user'][_0x26e9('0x34')]);}else{}});app[_0x26e9('0x2')](_0x26e9('0x42'),_0x4055a0(),function(_0x1b2fd5,_0x246105){User[_0x26e9('0x54')]({'username':_0x1b2fd5[_0x26e9('0x20')]['User_Id'][_0x26e9('0x3b')]()[_0x26e9('0x11')]()},function(_0x20454d,_0x320d00){if(_0x20454d)_0x246105[_0x26e9('0x5f')](_0x20454d);_0x246105[_0x26e9('0x3e')](_0x320d00);});});app[_0x26e9('0x6b')]('/api/users/:User_Id',_0x4055a0(),function(_0x1e9861,_0x11e479){User[_0x26e9('0x54')]({'username':_0x1e9861['params'][_0x26e9('0x3f')]['toLowerCase']()[_0x26e9('0x11')]()},function(_0x5b8cf7,_0x1ebf22){if(_0x5b8cf7)_0x11e479[_0x26e9('0x5f')](_0x5b8cf7);if(_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x22')]){_0x1ebf22[_0x26e9('0x22')]=_0x1ebf22[_0x26e9('0x5e')](_0x1e9861['body']['password']);}if(_0x1e9861[_0x26e9('0x2b')]['firstname']){_0x1ebf22['firstname']=_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x27')];}if(_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x63')]){_0x1ebf22[_0x26e9('0x63')]=_0x1e9861[_0x26e9('0x2b')]['lastname'];}if(_0x1e9861['body'][_0x26e9('0x86')]){_0x1ebf22[_0x26e9('0x86')]=_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x86')];}if(_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x44')]){_0x1ebf22[_0x26e9('0x44')]=_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x44')];}if(_0x1e9861['body'][_0x26e9('0x4c')]){_0x1ebf22[_0x26e9('0x4c')]=_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x4c')];}if(_0x1e9861[_0x26e9('0x2b')]['securityquestion']){_0x1ebf22[_0x26e9('0x71')]=_0x1e9861[_0x26e9('0x2b')]['securityquestion'];}if(_0x1e9861[_0x26e9('0x2b')][_0x26e9('0xc')]){_0x1ebf22[_0x26e9('0xc')]=_0x1e9861['body']['securityanswer'];}if(_0x1e9861['body']['usergroup']){_0x1ebf22['usergroup']=_0x1e9861[_0x26e9('0x2b')][_0x26e9('0x48')];}_0x1ebf22[_0x26e9('0x58')](function(_0x3c02ec){if(_0x3c02ec)_0x11e479[_0x26e9('0x37')](0x1f4)[_0x26e9('0x5f')](_0x3c02ec);_0x11e479[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x26e9('0x83')});});});});app[_0x26e9('0xf')]('/api/users/:User_Id',_0x4055a0(),function(_0x4da662,_0x4c3cc2){if(_0x4da662[_0x26e9('0x20')]['User_Id']['toLowerCase']()[_0x26e9('0x11')]()==_0x4da662[_0x26e9('0x8')][_0x26e9('0x7')]){if(FusionSettings[_0x26e9('0x45')][_0x26e9('0x7a')])if(FusionSettings[_0x26e9('0x45')][_0x26e9('0x7a')]['User']==_0x4da662[_0x26e9('0x8')][_0x26e9('0x7')])fusionProgram[_0x26e9('0xa')]();_0x2da13d(_0x4da662['user']['username']);_0x4da662['logout']();}User['remove']({'username':_0x4da662[_0x26e9('0x20')]['User_Id'][_0x26e9('0x3b')]()['trim']()},function(_0xb2dc7e,_0x3d1f95){if(_0xb2dc7e)return _0x4c3cc2[_0x26e9('0x5f')](_0xb2dc7e);User[_0x26e9('0x4d')](_0x4da662['params'][_0x26e9('0x3f')][_0x26e9('0x3b')]()['trim']());return _0x4c3cc2[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':'Successfully\x20deleted'});});});app[_0x26e9('0xb')](_0x26e9('0x18'),function(_0x3c6413,_0x77d3aa,_0x1d2327){passport['authenticate']('local-login',async function(_0x1d17e7,_0x23d6e6,_0x15ae9e){if(_0x1d17e7)return _0x77d3aa[_0x26e9('0x37')](0x1f4)[_0x26e9('0x5f')](_0x3c6413['__'](_0x1d17e7['message']));if(!_0x23d6e6)return _0x77d3aa['status'](0x191)['send'](_0x3c6413['__'](_0x15ae9e[_0x26e9('0x23')]));if(FusionSettings[_0x26e9('0x69')]){if(classroomConnection[_0x26e9('0x25')]){await _0x3fe4e2(_0x23d6e6);}_0x3c6413['logIn'](_0x23d6e6,function(_0x675de7){if(_0x675de7){return _0x1d2327(_0x675de7);}_0x26e0b7(_0x3c6413[_0x26e9('0x2b')][_0x26e9('0x57')],_0x23d6e6);return _0x77d3aa['status'](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x3c6413['__'](_0x26e9('0x88')),'user':_0x23d6e6});});}else{if(_0x2e1432()==0x0){_0x26e0b7(_0x3c6413[_0x26e9('0x2b')][_0x26e9('0x57')],_0x23d6e6);if(classroomConnection['connected']){await _0x3fe4e2(_0x23d6e6);}_0x3c6413[_0x26e9('0x85')](_0x23d6e6,function(_0xb56ff7){if(_0xb56ff7){return _0x1d2327(_0xb56ff7);}_0x26e0b7(_0x3c6413[_0x26e9('0x2b')][_0x26e9('0x57')],_0x23d6e6);return _0x77d3aa[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x3c6413['__'](_0x26e9('0x88')),'user':_0x23d6e6});});}else{return _0x77d3aa[_0x26e9('0x37')](0x1f4)[_0x26e9('0x5f')](_0x3c6413['__'](_0x26e9('0x5d')));}}})(_0x3c6413,_0x77d3aa,_0x1d2327);});app[_0x26e9('0xb')](_0x26e9('0x1e'),async function(_0x4a617c,_0x6e4ce1){logger[_0x26e9('0x2f')]('in\x20cloud\x20login');var _0x1e442f={'method':_0x26e9('0x5c'),'uri':_0x26e9('0x2c'),'body':{'username':_0x4a617c['body']['username'],'password':_0x4a617c[_0x26e9('0x2b')][_0x26e9('0x22')]},'json':!![],'rejectUnauthorized':![]};try{let _0x2353fe=await rp(_0x1e442f);let _0x2c2a97=await User[_0x26e9('0x54')]({'username':_0x4a617c[_0x26e9('0x2b')][_0x26e9('0x7')]})[_0x26e9('0x12')]();if(_0x2c2a97){return _0x6e4ce1[_0x26e9('0x37')](0xc8)[_0x26e9('0x5f')](_0x26e9('0x2a'));}else{return _0x6e4ce1[_0x26e9('0x37')](0xc8)[_0x26e9('0x5f')](_0x26e9('0x1d'));}}catch(_0x3e748c){logger[_0x26e9('0x2f')](_0x26e9('0x66')+_0x3e748c);return _0x6e4ce1[_0x26e9('0x37')](0x1f4)[_0x26e9('0x5f')](_0x3e748c);}});app['post'](_0x26e9('0x49'),_0x4055a0(),function(_0x3178de,_0x51d0b2){if(FusionSettings[_0x26e9('0x45')]['fusion_program_running'])if(FusionSettings[_0x26e9('0x45')][_0x26e9('0x7a')]['User']==_0x3178de[_0x26e9('0x8')][_0x26e9('0x7')])fusionProgram[_0x26e9('0xa')]();_0x3c5c5f(_0x3178de[_0x26e9('0x2b')][_0x26e9('0x57')]);_0x3178de[_0x26e9('0x41')]();_0x51d0b2[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':'Logged\x20out\x20successfully'});});app[_0x26e9('0x2')](_0x26e9('0x2e'),function(_0x2f88d2,_0x5d889f){User[_0x26e9('0x54')]({'username':_0x2f88d2['params'][_0x26e9('0x3f')]['toLowerCase']()[_0x26e9('0x11')]()},function(_0x513f16,_0x213dde){if(_0x513f16)return _0x5d889f[_0x26e9('0x37')](0x1f4)['send'](_0x513f16);if(!_0x213dde)return _0x5d889f['status'](0x1f4)[_0x26e9('0x5f')](_0x26e9('0x31'));else return _0x5d889f[_0x26e9('0x37')](0xc8)['json'](_0x213dde['securityquestion']);});});app[_0x26e9('0xb')](_0x26e9('0x33'),passport['authenticate'](_0x26e9('0x4f'),{'session':!![]}),function(_0x100592,_0x3762e1){if(FusionSettings[_0x26e9('0x69')]){if(classroomConnection[_0x26e9('0x25')]){_0x3fe4e2(_0x100592[_0x26e9('0x8')]);}_0x26e0b7(_0x100592[_0x26e9('0x2b')][_0x26e9('0x57')],_0x100592['user']);return _0x3762e1[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x26e9('0x5'),'user':_0x100592[_0x26e9('0x8')]});}else{if(_0x2e1432()==0x0){_0x26e0b7(_0x100592[_0x26e9('0x2b')][_0x26e9('0x57')],_0x100592[_0x26e9('0x8')]);if(classroomConnection[_0x26e9('0x25')]){_0x3fe4e2(_0x100592[_0x26e9('0x8')]);}return _0x3762e1[_0x26e9('0x37')](0xc8)[_0x26e9('0x3e')]({'serverMessage':_0x26e9('0x5'),'user':_0x100592['user']});}else{_0x100592[_0x26e9('0x41')]();return _0x3762e1[_0x26e9('0x37')](0x1f4)['send'](_0x26e9('0x77'));}}});app[_0x26e9('0x2')](_0x26e9('0x47'),function(_0xaec695,_0x39de8f){var _0xe9d462=[_0x26e9('0x6')];User[_0x26e9('0x54')]({'usergroup':_0x26e9('0x60')},function(_0x4fed47,_0x26811e){if(_0x4fed47)return _0x39de8f[_0x26e9('0x37')](0xc8)['send'](_0xe9d462);if(!_0x26811e)_0xe9d462['unshift'](_0x26e9('0x60'));return _0x39de8f['status'](0xc8)[_0x26e9('0x5f')](_0xe9d462);});});function _0x2e1432(){var _0xa1f830=0x0;for(var _0xcf04a5=0x0;_0xcf04a5<FusionSettings[_0x26e9('0x4e')][_0x26e9('0x76')];_0xcf04a5++){if(FusionSettings['connectedClients'][_0xcf04a5]['User']){_0xa1f830++;}}return _0xa1f830;}function _0x26e0b7(_0x395b6d,_0x4ed18e){for(var _0x4f2955=0x0;_0x4f2955<FusionSettings[_0x26e9('0x4e')][_0x26e9('0x76')];_0x4f2955++){if(FusionSettings['connectedClients'][_0x4f2955]['id']==_0x395b6d){FusionSettings[_0x26e9('0x4e')][_0x4f2955][_0x26e9('0x6')]=_0x4ed18e;break;}}}function _0x3c5c5f(_0x9bab24){for(var _0x13fa54=0x0;_0x13fa54<FusionSettings['connectedClients']['length'];_0x13fa54++){if(FusionSettings[_0x26e9('0x4e')][_0x13fa54]['id']==_0x9bab24){FusionSettings[_0x26e9('0x4e')][_0x13fa54][_0x26e9('0x6')]=undefined;break;}}}function _0x2da13d(_0x3298dc){for(var _0x41fc30=0x0;_0x41fc30<FusionSettings[_0x26e9('0x4e')][_0x26e9('0x76')];_0x41fc30++){if(FusionSettings[_0x26e9('0x4e')][_0x41fc30][_0x26e9('0x6')][_0x26e9('0x7')]==_0x3298dc){FusionSettings[_0x26e9('0x4e')][_0x41fc30][_0x26e9('0x6')]=undefined;break;}}}function _0x4055a0(){return function(_0x555ff8,_0x2c98d7,_0x1bb41c){if(_0x555ff8['isAuthenticated']()){return _0x1bb41c();}else{return _0x2c98d7['status'](0x191)[_0x26e9('0x5f')](_0x26e9('0x62'));}};}async function _0x3fe4e2(_0x18366b){try{await _0x98339a(_0x18366b);}catch(_0x1f70a1){logger[_0x26e9('0x2f')](_0x1f70a1);logger[_0x26e9('0x2f')](_0x26e9('0x6f')+_0x18366b[_0x26e9('0x7')]);}};function _0x98339a(_0x4e34d5){return new Promise(function(_0x43a4f5,_0x18e279){var _0x1f6cab=new SSH();_0x1f6cab['on'](_0x26e9('0x16'),function(){_0x1f6cab[_0x26e9('0x17')](async function(_0x2cce2d,_0x277c65){if(_0x2cce2d){logger['info']('Error\x20communicating\x20with\x20c3:\x20'+_0x2cce2d);_0x1f6cab[_0x26e9('0x68')]();return _0x18e279(_0x2cce2d);}try{await _0x1ce1c0(_0x277c65);await _0x140fc7(_0x277c65,_0x4e34d5[_0x26e9('0x7')]);await _0x58f3b8(_0x277c65,_0x4e34d5[_0x26e9('0x7')]);await _0x39cb64(_0x277c65,_0x4e34d5[_0x26e9('0x7')]);let _0x21d331=await _0x2c601b(_0x277c65,_0x4e34d5[_0x26e9('0x7')]);logger[_0x26e9('0x2f')](JSON['stringify'](_0x21d331));let _0x147bae=await _0x45e23c(_0x4e34d5[_0x26e9('0x80')]);logger['info'](JSON['stringify'](_0x147bae));await _0x7467a(_0x277c65,_0x4e34d5,_0x21d331,_0x147bae);_0x1f6cab[_0x26e9('0x68')]();return _0x43a4f5();}catch(_0x3edf1c){logger[_0x26e9('0x2f')](_0x3edf1c);_0x1f6cab[_0x26e9('0x68')]();return _0x18e279(_0x3edf1c);}});})[_0x26e9('0x36')]({'host':_0x26e9('0x79'),'port':0x16,'username':'c3','password':'root'});});};function _0x1ce1c0(_0x345286){return new Promise(function(_0x13222a,_0x291120){_0x345286[_0x26e9('0x6e')](_0x26e9('0x7c'),function(_0x5ae717){if(_0x5ae717){_0x345286[_0x26e9('0x52')]('/home/c3/FusionFilesystem/',function(_0x4858bd){if(_0x4858bd){return _0x291120(_0x26e9('0x75')+_0x4858bd);}else{logger[_0x26e9('0x2f')](_0x26e9('0x3c'));return _0x13222a();}});}else{logger['info']('Classroom\x20file\x20system\x20found');return _0x13222a();}});});};function _0x140fc7(_0x4a0b15,_0x3333dc){return new Promise(function(_0x51ff76,_0x32a7d8){_0x4a0b15[_0x26e9('0x6e')]('/home/c3/FusionFilesystem/'+_0x3333dc,function(_0x111cde){if(_0x111cde){_0x4a0b15[_0x26e9('0x52')](_0x26e9('0x7c')+_0x3333dc,function(_0x57f119){if(_0x57f119){return _0x32a7d8(_0x26e9('0x26')+_0x57f119);}else{logger[_0x26e9('0x2f')]('User\x27s\x20classroom\x20file\x20system\x20created');return _0x51ff76();}});}else{logger[_0x26e9('0x2f')](_0x26e9('0x65'));return _0x51ff76();}});});};function _0x58f3b8(_0x2515f4,_0x5b9686){return new Promise(function(_0x4ac670,_0x59c9e8){_0x2515f4[_0x26e9('0x6e')](_0x26e9('0x7c')+_0x5b9686+'/Editor/',function(_0x5b1f57){if(_0x5b1f57){_0x2515f4['mkdir'](_0x26e9('0x7c')+_0x5b9686+_0x26e9('0x35'),function(_0x2c6f62){if(_0x2c6f62){return _0x59c9e8(_0x26e9('0x64')+_0x2c6f62);}else{logger[_0x26e9('0x2f')](_0x26e9('0x84'));return _0x4ac670();}});}else{logger['info'](_0x26e9('0x3a'));return _0x4ac670();}});});};function _0x39cb64(_0x351b60,_0xa81d4b){return new Promise(function(_0x5c741d,_0x4ec523){_0x351b60[_0x26e9('0x6e')](_0x26e9('0x7c')+_0xa81d4b+_0x26e9('0x1'),function(_0x213cc3){if(_0x213cc3){_0x351b60['mkdir']('/home/c3/FusionFilesystem/'+_0xa81d4b+_0x26e9('0x1'),function(_0x34d54d){if(_0x34d54d){return _0x4ec523(_0x26e9('0x87')+_0x34d54d);}else{logger[_0x26e9('0x2f')](_0x26e9('0x6c'));return _0x5c741d();}});}else{logger[_0x26e9('0x2f')](_0x26e9('0x1f'));return _0x5c741d();}});});};function _0x2c601b(_0x1f5eec,_0x25a72c){return new Promise(async function(_0x3f24d0,_0x4ecd3a){try{let _0x447fd2={};_0x447fd2[_0x26e9('0x6d')]=await _0x39add5(_0x1f5eec,_0x25a72c);_0x447fd2[_0x26e9('0x39')]=await _0x3d3189(_0x1f5eec,_0x25a72c);return _0x3f24d0(_0x447fd2);}catch(_0x30175b){return _0x4ecd3a(_0x30175b);}});};function _0x39add5(_0x622b49,_0x35fc5e){return new Promise(function(_0x38c7a8,_0x33f68c){_0x622b49[_0x26e9('0x6e')]('/home/c3/FusionFilesystem/'+_0x35fc5e+'/Editor/',function(_0x1a7bed,_0x2fafb0){if(_0x1a7bed)return _0x33f68c(_0x1a7bed);let _0x50579a=[];for(let _0x4e8f04=0x0;_0x4e8f04<_0x2fafb0['length'];_0x4e8f04++){logger[_0x26e9('0x2f')](_0x26e9('0x51')+_0x2fafb0[_0x4e8f04][_0x26e9('0x46')]);_0x50579a[_0x26e9('0x29')](_0x2fafb0[_0x4e8f04]);}return _0x38c7a8(_0x50579a);});});};function _0x3d3189(_0x26c3ad,_0x5db174){return new Promise(function(_0x7577c8,_0x6b2f6e){_0x26c3ad['readdir'](_0x26e9('0x7c')+_0x5db174+'/Blockly/',function(_0x3b90c8,_0x21b73){if(_0x3b90c8)return _0x6b2f6e(_0x3b90c8);let _0x310a1a=[];for(let _0x1ccf96=0x0;_0x1ccf96<_0x21b73[_0x26e9('0x76')];_0x1ccf96++){logger['info']('Getting\x20data\x20for\x20'+_0x21b73[_0x1ccf96][_0x26e9('0x46')]);_0x310a1a[_0x26e9('0x29')](_0x21b73[_0x1ccf96]);}return _0x7577c8(_0x310a1a);});});};function _0x45e23c(_0xc45a3a){return new Promise(async function(_0x56aaaf,_0x3f465a){try{let _0x2d4820={};_0x2d4820[_0x26e9('0x6d')]=await _0x3d077e(_0xc45a3a);_0x2d4820[_0x26e9('0x39')]=await _0x44d058(_0xc45a3a);return _0x56aaaf(_0x2d4820);}catch(_0x1b44bf){return _0x3f465a(_0x1b44bf);}});};function _0x3d077e(_0x5901fd){return new Promise(async function(_0x4a9492,_0x99d2f6){try{let _0x26d3fb=[];let _0x1dcb76=await fs['readdir'](_0x5901fd+_0x26e9('0x7d'));for(let _0x5afd60=0x0;_0x5afd60<_0x1dcb76[_0x26e9('0x76')];_0x5afd60++){logger[_0x26e9('0x2f')](_0x26e9('0x51')+_0x1dcb76[_0x5afd60]);let _0x46bafc=await fs[_0x26e9('0x4')](_0x5901fd+_0x26e9('0x35')+_0x1dcb76[_0x5afd60]);_0x46bafc[_0x26e9('0x0')]=_0x1dcb76[_0x5afd60];_0x26d3fb[_0x26e9('0x29')](_0x46bafc);}return _0x4a9492(_0x26d3fb);}catch(_0x3c4ff6){return _0x99d2f6(_0x3c4ff6);}});};function _0x44d058(_0x5b8f94){return new Promise(async function(_0x1d8b7c,_0x4f014e){try{let _0x475837=[];let _0x504147=await fs[_0x26e9('0x6e')](_0x5b8f94+_0x26e9('0x9'));for(let _0x42387c=0x0;_0x42387c<_0x504147[_0x26e9('0x76')];_0x42387c++){logger[_0x26e9('0x2f')](_0x26e9('0x51')+_0x504147[_0x42387c]);let _0xb61fe0=await fs[_0x26e9('0x4')](_0x5b8f94+_0x26e9('0x1')+_0x504147[_0x42387c]);_0xb61fe0[_0x26e9('0x0')]=_0x504147[_0x42387c];_0x475837['push'](_0xb61fe0);}return _0x1d8b7c(_0x475837);}catch(_0x1ec03b){return _0x4f014e(_0x1ec03b);}});};function _0x7467a(_0x27e46b,_0x5c1535,_0x34a8da,_0x193167){return new Promise(async function(_0x1fe553,_0x3f57c9){try{for(let _0x17a779=0x0;_0x17a779<_0x34a8da[_0x26e9('0x6d')][_0x26e9('0x76')];_0x17a779++){let _0x32406e=![];for(let _0x2a6a4b=0x0;_0x2a6a4b<_0x193167[_0x26e9('0x6d')][_0x26e9('0x76')];_0x2a6a4b++){if(_0x193167[_0x26e9('0x6d')][_0x2a6a4b][_0x26e9('0x0')]==_0x34a8da['Editor'][_0x17a779][_0x26e9('0x46')]){logger[_0x26e9('0x2f')]('Local\x20mtime:\x20'+Math[_0x26e9('0x74')](_0x193167[_0x26e9('0x6d')][_0x2a6a4b][_0x26e9('0x89')]/0x3e8));logger[_0x26e9('0x2f')](_0x26e9('0x7e')+_0x34a8da[_0x26e9('0x6d')][_0x17a779]['attrs'][_0x26e9('0x82')]);if(Math[_0x26e9('0x74')](_0x193167[_0x26e9('0x6d')][_0x2a6a4b]['mtimeMs']/0x3e8)>_0x34a8da['Editor'][_0x17a779][_0x26e9('0x67')][_0x26e9('0x82')]){_0x32406e=!![];logger['info'](_0x26e9('0x14')+_0x193167['Editor'][_0x2a6a4b][_0x26e9('0x0')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x4adeb9(_0x27e46b,_0x5c1535,_0x34a8da[_0x26e9('0x6d')][_0x17a779]['filename'],_0x26e9('0x6d'));}catch(_0x211153){return _0x3f57c9(_0x211153);}break;}else{_0x32406e=!![];logger['info'](_0x26e9('0x5a')+_0x193167['Editor'][_0x2a6a4b][_0x26e9('0x0')]+_0x26e9('0x4b'));try{await _0x4658f(_0x27e46b,_0x5c1535,_0x34a8da[_0x26e9('0x6d')][_0x17a779][_0x26e9('0x46')],_0x26e9('0x6d'));}catch(_0x4de423){logger[_0x26e9('0x2f')]('Error:\x20'+_0x4de423);return _0x3f57c9(_0x4de423);}break;}}}if(!_0x32406e){logger[_0x26e9('0x2f')](_0x34a8da[_0x26e9('0x6d')][_0x17a779]['filename']+'\x20not\x20a\x20common\x20file!');try{await _0x4658f(_0x27e46b,_0x5c1535,_0x34a8da['Editor'][_0x17a779]['filename'],_0x26e9('0x6d'));}catch(_0x133c69){return _0x3f57c9(_0x133c69);}}}for(let _0x5a00c6=0x0;_0x5a00c6<_0x34a8da[_0x26e9('0x39')][_0x26e9('0x76')];_0x5a00c6++){let _0x35991e=![];for(let _0x38da6a=0x0;_0x38da6a<_0x193167['Blockly']['length'];_0x38da6a++){if(_0x193167['Blockly'][_0x38da6a]['name']==_0x34a8da[_0x26e9('0x39')][_0x5a00c6]['filename']){logger[_0x26e9('0x2f')](_0x26e9('0x5b')+Math[_0x26e9('0x74')](_0x193167[_0x26e9('0x39')][_0x38da6a][_0x26e9('0x89')]/0x3e8));logger[_0x26e9('0x2f')](_0x26e9('0x7e')+_0x34a8da['Blockly'][_0x5a00c6][_0x26e9('0x67')][_0x26e9('0x82')]);if(Math[_0x26e9('0x74')](_0x193167['Blockly'][_0x38da6a][_0x26e9('0x89')]/0x3e8)>_0x34a8da[_0x26e9('0x39')][_0x5a00c6]['attrs'][_0x26e9('0x82')]){_0x35991e=!![];logger[_0x26e9('0x2f')]('Local\x20\x22'+_0x193167[_0x26e9('0x39')][_0x38da6a]['name']+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x4adeb9(_0x27e46b,_0x5c1535,_0x34a8da['Blockly'][_0x5a00c6][_0x26e9('0x46')],_0x26e9('0x39'));}catch(_0x114510){return _0x3f57c9(_0x114510);}break;}else{_0x35991e=!![];logger[_0x26e9('0x2f')](_0x26e9('0x5a')+_0x193167[_0x26e9('0x39')][_0x38da6a][_0x26e9('0x0')]+_0x26e9('0x4b'));try{await _0x4658f(_0x27e46b,_0x5c1535,_0x34a8da[_0x26e9('0x39')][_0x5a00c6][_0x26e9('0x46')],_0x26e9('0x39'));}catch(_0x247bdd){logger[_0x26e9('0x2f')](_0x26e9('0x10')+_0x247bdd);return _0x3f57c9(_0x247bdd);}break;}}}if(!_0x35991e){logger['info'](_0x34a8da[_0x26e9('0x39')][_0x5a00c6][_0x26e9('0x46')]+_0x26e9('0x6a'));try{await _0x4658f(_0x27e46b,_0x5c1535,_0x34a8da[_0x26e9('0x39')][_0x5a00c6][_0x26e9('0x46')],'Blockly');}catch(_0x289168){return _0x3f57c9(_0x289168);}}}return _0x1fe553();}catch(_0x159e14){return _0x3f57c9(_0x159e14);}});};function _0x4adeb9(_0x7d102f,_0x323f6e,_0x40df84,_0x22c72b){return new Promise((_0x2941f9,_0x208c33)=>{try{let _0x34e4c4=_0x26e9('0x7c')+_0x323f6e['username']+'/'+_0x22c72b+'/'+_0x40df84;let _0x3f188a=_0x323f6e[_0x26e9('0x80')]+'/'+_0x22c72b+'/'+_0x40df84;logger['info'](_0x26e9('0x72')+_0x34e4c4);logger[_0x26e9('0x2f')](_0x26e9('0x59')+_0x3f188a);_0x7d102f['fastPut'](_0x3f188a,_0x34e4c4,{},function(_0x366c8a){if(_0x366c8a){logger[_0x26e9('0x2f')](_0x26e9('0x1c')+_0x40df84);return _0x208c33(_0x366c8a);}logger[_0x26e9('0x2f')](_0x26e9('0x3d')+_0x40df84);return _0x2941f9();});}catch(_0x5221eb){return _0x208c33(_0x5221eb);}});};function _0x4658f(_0x292d20,_0x48bd67,_0x4aef63,_0x257400){return new Promise((_0x3255c0,_0x559dc3)=>{try{let _0x19449d='/home/c3/FusionFilesystem/'+_0x48bd67['username']+'/'+_0x257400+'/'+_0x4aef63;let _0x23aa16=_0x48bd67[_0x26e9('0x80')]+'/'+_0x257400+'/'+_0x4aef63;logger[_0x26e9('0x2f')](_0x26e9('0x72')+_0x19449d);logger[_0x26e9('0x2f')](_0x26e9('0x59')+_0x23aa16);_0x292d20[_0x26e9('0x43')](_0x19449d,_0x23aa16,{},function(_0x33d92a){if(_0x33d92a){logger[_0x26e9('0x2f')](_0x26e9('0x13')+_0x4aef63);return _0x559dc3(_0x33d92a);}logger[_0x26e9('0x2f')](_0x26e9('0x81')+_0x4aef63);return _0x3255c0();});}catch(_0x24201b){return _0x559dc3(_0x24201b);}});};function _0xb61828(_0x493143,_0x3eaef1,_0x18f457,_0x32e3d3){_0x493143[_0x26e9('0x6e')](_0x26e9('0x7c')+_0x3eaef1[_0x26e9('0x7')],function(_0x512d0f){if(_0x512d0f){logger['info'](_0x26e9('0x56')+_0x512d0f);_0x493143[_0x26e9('0x52')]('/home/c3/FusionFilesystem/'+_0x3eaef1['username'],function(_0x27b64c){if(_0x27b64c){logger[_0x26e9('0x2f')](_0x26e9('0x24')+_0x27b64c);throw _0x27b64c;}logger[_0x26e9('0x2f')](_0x26e9('0x30'));_0x493143[_0x26e9('0x52')](_0x26e9('0x7c')+_0x3eaef1[_0x26e9('0x7')]+'/Editor/',function(_0x48a2ab){if(_0x48a2ab){logger['info']('Error\x20creating\x20editor\x20directory:\x20'+_0x48a2ab);throw _0x48a2ab;}logger[_0x26e9('0x2f')](_0x26e9('0x21'));_0x493143[_0x26e9('0x52')](_0x26e9('0x7c')+_0x3eaef1[_0x26e9('0x7')]+_0x26e9('0x1'),function(_0x55cfbe){if(_0x55cfbe){logger['info'](_0x26e9('0x4a')+_0x55cfbe);throw _0x55cfbe;}logger[_0x26e9('0x2f')]('Blockly\x20directory\x20created');_0x32e3d3(_0x493143,_0x3eaef1,_0x18f457);});});});}_0x32e3d3(_0x493143,_0x3eaef1,_0x18f457);});};function _0x504474(_0x257551,_0x227c79,_0x3d1cd4){_0x257551[_0x26e9('0x6e')]('/home/c3/FusionFilesystem/'+_0x227c79[_0x26e9('0x7')]+_0x26e9('0x35'),function(_0x107b6d,_0x5e4b98){if(_0x107b6d){logger[_0x26e9('0x2f')](_0x26e9('0x73')+_0x107b6d);throw _0x107b6d;}_0x3960d5(_0x227c79,'Editor',_0x5e4b98,_0x3d1cd4);});_0x257551['readdir'](_0x26e9('0x7c')+_0x227c79[_0x26e9('0x7')]+_0x26e9('0x1'),function(_0xf0c621,_0x5317fa){if(_0xf0c621){logger[_0x26e9('0x2f')]('Error\x20reading\x20classroom\x20blockly\x20files:\x20'+_0xf0c621);throw _0xf0c621;}_0x3960d5(_0x227c79,_0x26e9('0x39'),_0x5317fa,_0x3d1cd4);});};function _0x3960d5(_0x4fbd5a,_0x18d90b,_0x90020a,_0x4971de){logger[_0x26e9('0x2f')]('Retrieving\x20files');if(_0x18d90b=='Blockly'&&_0x90020a[_0x26e9('0x76')]==0x0){_0x4971de[_0x26e9('0x68')]();}for(var _0x314514=0x0;_0x314514<_0x90020a[_0x26e9('0x76')];_0x314514++){let _0x542b06=_0x26e9('0x7c')+_0x4fbd5a[_0x26e9('0x7')]+'/'+_0x18d90b+'/'+_0x90020a[_0x314514][_0x26e9('0x46')];let _0x6904db=_0x26e9('0x53')+_0x4fbd5a['username']+'/'+_0x18d90b+'/';logger[_0x26e9('0x2f')](_0x26e9('0x32')+_0x542b06+_0x26e9('0x50')+_0x6904db);SCP[_0x26e9('0x55')](_0x26e9('0x70')+_0x542b06,_0x6904db,function(_0x3672ad){if(_0x3672ad){logger[_0x26e9('0x2f')]('Error\x20downloading:\x20'+_0x542b06+',\x20error:\x20'+_0x3672ad);}if(_0x18d90b==_0x26e9('0x39')&&(_0x314514=_0x90020a[_0x26e9('0x76')]-0x1)){_0x4971de['end']();}});}};}();