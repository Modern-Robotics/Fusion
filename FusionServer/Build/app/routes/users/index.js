const _0x5c09=['/User/Login','/Editor','message','stringify','filepath','push','post','find','../../express','SocketVariables','connectedClients','User\x27s\x20blockly\x20directory\x20found','mtime','email','save','User_Id','get','findOne','exec','connected','local-recovery','/api/users/:User_Id','securityquestion','/api/users/logout','path','username','securityanswer','/api/recovery','Editor','remove','fastGet','Who\x20is\x20your\x20favorite\x20actor,\x20musician,\x20or\x20artist?','Retrieving\x20files','params','/api/users','passport','Error\x20downloading\x20classroom\x20files\x20for\x20','logIn','../../fusionProgram','Error\x20creating\x20editor\x20directory:\x20','usergroup','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','scp','mkdir','toLowerCase','/Editor/','Local\x20\x22','Getting\x20data\x20for\x20','logout','password','Admin','lastname','firstname','generateHash','end','sftp','delete','filename','/home/c3/FusionFilesystem/','https://172.16.0.1/backend/auth/ldap','User','authenticate','verbose','mtimeMs','/api/users/login','attrs','app/filesystem/','User\x27s\x20editor\x20directory\x20found','Attempting\x20standard\x20login','isAuthenticated','language','/api/allowedUserGroups','stat','fusion_program_running','../../classroom/connection','User\x27s\x20blockly\x20directory\x20created','172.16.0.1','Remote\x20path:\x20','request-promise','User\x27s\x20classroom\x20file\x20system\x20found','error','StatusCodeError','send','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','Remote\x20\x22','KillProgram','Local\x20mtime:\x20','Error\x20downloading\x20file:\x20','socketId','user','\x20not\x20a\x20common\x20file!','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','/api/recovery/:User_Id','Login\x20Successful','Client','Blockly\x20directory\x20created','body','\x22\x20newer,\x20updating\x20local\x20version','unshift','Guest\x20login\x20unavailable\x20in\x20classroom\x20mode','REGISTER.CREATED','User\x27s\x20classroom\x20file\x20system\x20created','local-login','Error\x20creating\x20user\x20file\x20system:\x20','json','info','Logged\x20out\x20successfully','Error\x20reading\x20classroom\x20blockly\x20files:\x20','debug','defaultprogramminglanguage','LOGIN.MULTIUSER_DENIED','floor','put','MultiUserAccess','readdir','Remote\x20mtime:\x20','LOGIN.SUCCESS','exports','local-signup','RequestError','Successfully\x20deleted','LOGIN.INVALID','Attempting\x20classroom\x20login','\x20to\x20','Error','../../global/fusionSettings','mriguest','Editor\x20directory\x20created','Another\x20user\x20is\x20already\x20logged\x20in.',',\x20error:\x20','\x22\x20newer,\x20updating\x20classroom\x20version','/Blockly/','User\x20c3\x20directory\x20created','name','Error:\x20','length','Error\x20reading\x20user\x20file\x20system:\x20','Error\x20creating\x20classroom\x20file\x20system:\x20','Blockly','User\x20does\x20not\x20exist','trim','status','scp2'];(function(_0x2c047c,_0x5c09b6){const _0xb3453c=function(_0x2342c6){while(--_0x2342c6){_0x2c047c['push'](_0x2c047c['shift']());}};_0xb3453c(++_0x5c09b6);}(_0x5c09,0x11d));const _0xb345=function(_0x2c047c,_0x5c09b6){_0x2c047c=_0x2c047c-0x0;let _0xb3453c=_0x5c09[_0x2c047c];return _0xb3453c;};var SCP=require(_0xb345('0x0'));var SSH=require('ssh2')[_0xb345('0x5f')];var fs=require('fs-extra');var path=require(_0xb345('0x19'));var rp=require(_0xb345('0x4f'));const classroomConnection=require(_0xb345('0x4b'));const logger=require('../../utils/logger');const app=require(_0xb345('0x9'));const User=require('../../models/user');const passport=require(_0xb345('0x24'));const FusionSettings=require(_0xb345('0x7e'));const fusionProgram=require(_0xb345('0x27'));module[_0xb345('0x76')]=function(){app[_0xb345('0x11')]('/api/users',_0x21af41(),function(_0x276cf6,_0x560ec8){User[_0xb345('0x8')]({'usergroup':{'$ne':'Guest'}},function(_0x38ef1c,_0x2161a5){if(_0x38ef1c)_0x560ec8[_0xb345('0x53')](_0x38ef1c);_0x560ec8[_0xb345('0x69')](_0x2161a5);});});app[_0xb345('0x7')]('/api/users',async function(_0x6b8290,_0x3063e4,_0xbc8989){await _0x647acc(_0x6b8290,_0x3063e4,_0xbc8989);});async function _0x647acc(_0x400e42,_0x5306cf,_0x303a98){passport['authenticate'](_0xb345('0x77'),async function(_0x5f3378,_0x34e845,_0x4f4e00){if(_0x5f3378)return _0x5306cf['status'](0x1f4)['send'](_0x5f3378);if(_0x4f4e00&&_0x4f4e00[_0xb345('0x3')])return _0x5306cf[_0xb345('0x8e')](0x1f4)['send'](_0x400e42['__'](_0x4f4e00[_0xb345('0x3')]));if(FusionSettings[_0xb345('0x72')]){if(classroomConnection[_0xb345('0x14')]){try{await _0x3dd543(_0x34e845);}catch(_0x339fcf){logger[_0xb345('0x51')](_0x339fcf);}}_0x400e42[_0xb345('0x26')](_0x34e845,function(_0x227fe9){if(_0x227fe9){return _0x303a98(_0x227fe9);}_0x3c971d(_0x400e42[_0xb345('0x61')]['socketId'],_0x34e845);return _0x5306cf['status'](0xc8)[_0xb345('0x69')]({'serverMessage':_0x400e42['__'](_0xb345('0x65')),'user':_0x34e845});});}else{if(_0x3cb929()==0x0){if(classroomConnection[_0xb345('0x14')]){try{await _0x3dd543(_0x34e845);}catch(_0x2a4768){logger[_0xb345('0x51')](_0x2a4768);}}_0x400e42[_0xb345('0x26')](_0x34e845,function(_0x1da705){if(_0x1da705){return _0x303a98(_0x1da705);}_0x3c971d(_0x400e42[_0xb345('0x61')][_0xb345('0x59')],_0x34e845);return _0x5306cf[_0xb345('0x8e')](0xc8)[_0xb345('0x69')]({'serverMessage':_0x400e42['__'](_0xb345('0x65')),'user':_0x34e845});});}else{return _0x5306cf['status'](0x1f4)[_0xb345('0x53')](_0x400e42['__']('REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED'));}}})(_0x400e42,_0x5306cf,_0x303a98);};app[_0xb345('0x7')](_0xb345('0x23'),passport['authenticate'](_0xb345('0x77'),{'session':!![]}),function(_0x37643c,_0x13119e){if(_0x37643c[_0xb345('0x5a')][_0xb345('0x7d')]){return _0x13119e[_0xb345('0x8e')](0x1f4)[_0xb345('0x53')](_0x37643c['user'][_0xb345('0x7d')]);}else{}});app[_0xb345('0x11')](_0xb345('0x16'),_0x21af41(),function(_0x2e3454,_0x534815){User[_0xb345('0x12')]({'username':_0x2e3454[_0xb345('0x22')][_0xb345('0x10')][_0xb345('0x2d')]()[_0xb345('0x8d')]()},function(_0xe090c4,_0x1d160f){if(_0xe090c4)_0x534815[_0xb345('0x53')](_0xe090c4);_0x534815['json'](_0x1d160f);});});app[_0xb345('0x71')](_0xb345('0x16'),_0x21af41(),function(_0x146666,_0x1648fc){User[_0xb345('0x12')]({'username':_0x146666['params'][_0xb345('0x10')][_0xb345('0x2d')]()['trim']()},function(_0x229b39,_0x4c4fc3){if(_0x229b39)_0x1648fc[_0xb345('0x53')](_0x229b39);if(_0x146666[_0xb345('0x61')][_0xb345('0x32')]){_0x4c4fc3[_0xb345('0x32')]=_0x4c4fc3[_0xb345('0x36')](_0x146666[_0xb345('0x61')][_0xb345('0x32')]);}if(_0x146666[_0xb345('0x61')][_0xb345('0x35')]){_0x4c4fc3['firstname']=_0x146666[_0xb345('0x61')][_0xb345('0x35')];}if(_0x146666[_0xb345('0x61')][_0xb345('0x34')]){_0x4c4fc3['lastname']=_0x146666[_0xb345('0x61')][_0xb345('0x34')];}if(_0x146666[_0xb345('0x61')][_0xb345('0x47')]){_0x4c4fc3[_0xb345('0x47')]=_0x146666[_0xb345('0x61')][_0xb345('0x47')];}if(_0x146666['body'][_0xb345('0xe')]){_0x4c4fc3[_0xb345('0xe')]=_0x146666['body'][_0xb345('0xe')];}if(_0x146666['body']['defaultprogramminglanguage']){_0x4c4fc3[_0xb345('0x6e')]=_0x146666[_0xb345('0x61')]['defaultprogramminglanguage'];}if(_0x146666[_0xb345('0x61')][_0xb345('0x17')]){_0x4c4fc3[_0xb345('0x17')]=_0x146666[_0xb345('0x61')][_0xb345('0x17')];}if(_0x146666[_0xb345('0x61')]['securityanswer']){_0x4c4fc3[_0xb345('0x1b')]=_0x146666[_0xb345('0x61')][_0xb345('0x1b')];}if(_0x146666['body'][_0xb345('0x29')]){_0x4c4fc3['usergroup']=_0x146666[_0xb345('0x61')][_0xb345('0x29')];}_0x4c4fc3[_0xb345('0xf')](function(_0x3ec2ca){if(_0x3ec2ca)_0x1648fc[_0xb345('0x8e')](0x1f4)['send'](_0x3ec2ca);_0x1648fc['status'](0xc8)[_0xb345('0x69')]({'serverMessage':'User\x20updated!'});});});});app[_0xb345('0x39')]('/api/users/:User_Id',_0x21af41(),function(_0x1f899d,_0x5a4458){if(_0x1f899d[_0xb345('0x22')][_0xb345('0x10')]['toLowerCase']()[_0xb345('0x8d')]()==_0x1f899d['user'][_0xb345('0x1a')]){if(FusionSettings[_0xb345('0xa')][_0xb345('0x4a')])if(FusionSettings[_0xb345('0xa')][_0xb345('0x4a')]['User']==_0x1f899d['user']['username'])fusionProgram['KillProgram']();_0x5eb27d(_0x1f899d[_0xb345('0x5a')][_0xb345('0x1a')]);_0x1f899d['logout']();}User[_0xb345('0x1e')]({'username':_0x1f899d[_0xb345('0x22')][_0xb345('0x10')]['toLowerCase']()[_0xb345('0x8d')]()},function(_0x34938e,_0x4646da){if(_0x34938e)return _0x5a4458['send'](_0x34938e);User['removeFileSystem'](_0x1f899d[_0xb345('0x22')][_0xb345('0x10')][_0xb345('0x2d')]()[_0xb345('0x8d')]());return _0x5a4458[_0xb345('0x8e')](0xc8)['json']({'serverMessage':_0xb345('0x79')});});});app[_0xb345('0x7')](_0xb345('0x41'),async(_0x1925ca,_0x12fa3d,_0x170dca)=>{if(!FusionSettings[_0xb345('0x72')]&&_0x3cb929()>0x0)return _0x12fa3d['status'](0x1f4)[_0xb345('0x53')](_0x1925ca['__'](_0xb345('0x6f')));if(!classroomConnection[_0xb345('0x14')]){logger[_0xb345('0x6d')](_0xb345('0x45'));await _0x3b8f0f(_0x1925ca,_0x12fa3d,_0x170dca);}else{logger['debug'](_0xb345('0x7b'));if(_0x1925ca[_0xb345('0x61')][_0xb345('0x1a')]=='mriguest'&&_0x1925ca[_0xb345('0x61')]['password']==_0xb345('0x7f')){return _0x12fa3d[_0xb345('0x8e')](0x1f4)[_0xb345('0x53')](_0xb345('0x64'));}let _0x47fe0a={'method':'POST','uri':_0xb345('0x3c'),'body':{'username':_0x1925ca[_0xb345('0x61')][_0xb345('0x1a')],'password':_0x1925ca[_0xb345('0x61')][_0xb345('0x32')]},'json':!![],'rejectUnauthorized':![],'timeout':0x1388};try{await rp(_0x47fe0a);let _0x4440af=await User[_0xb345('0x12')]({'username':_0x1925ca[_0xb345('0x61')][_0xb345('0x1a')]})[_0xb345('0x13')]();if(_0x4440af){await _0x3b8f0f(_0x1925ca,_0x12fa3d,_0x170dca);}else{_0x1925ca[_0xb345('0x61')][_0xb345('0x17')]=_0xb345('0x20');_0x1925ca[_0xb345('0x61')]['securityanswer']=_0x1925ca[_0xb345('0x61')][_0xb345('0x1a')];_0x1925ca[_0xb345('0x61')]['usergroup']='User';await _0x647acc(_0x1925ca,_0x12fa3d,_0x170dca);}}catch(_0x52f4f4){logger['info']('Error\x20with\x20request\x20promise.\x20'+_0x52f4f4);if(_0x52f4f4['name']==_0xb345('0x52')){return _0x12fa3d[_0xb345('0x8e')](0x191)['send'](_0x1925ca['__'](_0xb345('0x7a')));}else if(_0x52f4f4[_0xb345('0x86')]==_0xb345('0x78')){return _0x12fa3d['status'](0x1f4)[_0xb345('0x53')]('Error\x20reaching\x20classroom\x20server');}else{return _0x12fa3d[_0xb345('0x8e')](0x1f4)[_0xb345('0x53')](_0x52f4f4[_0xb345('0x3')]);}}}});async function _0x3b8f0f(_0x324330,_0x3d72ed,_0x1fff97){passport[_0xb345('0x3e')](_0xb345('0x67'),async function(_0x83c5c6,_0x1fdd8b,_0x5172c9){if(_0x83c5c6)return _0x3d72ed['status'](0x1f4)['send'](_0x324330['__'](_0x83c5c6['message']));if(!_0x1fdd8b)return _0x3d72ed['status'](0x191)[_0xb345('0x53')](_0x324330['__'](_0x5172c9['message']));_0x324330['logIn'](_0x1fdd8b,async function(_0x5c4fbe){if(_0x5c4fbe){return _0x1fff97(_0x5c4fbe);}_0x3c971d(_0x324330[_0xb345('0x61')]['socketId'],_0x1fdd8b);try{if(classroomConnection['connected'])await _0x3dd543(_0x1fdd8b);}catch(_0x1645ef){logger[_0xb345('0x51')](_0x1645ef);}return _0x3d72ed[_0xb345('0x8e')](0xc8)[_0xb345('0x69')]({'serverMessage':_0x324330['__'](_0xb345('0x75')),'user':_0x1fdd8b});});})(_0x324330,_0x3d72ed,_0x1fff97);};app[_0xb345('0x7')](_0xb345('0x18'),_0x21af41(),function(_0x2a2e94,_0x27667d){if(FusionSettings[_0xb345('0xa')][_0xb345('0x4a')])if(FusionSettings['SocketVariables'][_0xb345('0x4a')][_0xb345('0x3d')]==_0x2a2e94['user'][_0xb345('0x1a')])fusionProgram[_0xb345('0x56')]();_0x55c4be(_0x2a2e94[_0xb345('0x61')][_0xb345('0x59')]);_0x2a2e94['logout']();_0x27667d[_0xb345('0x8e')](0xc8)[_0xb345('0x69')]({'serverMessage':_0xb345('0x6b')});});app['get'](_0xb345('0x5d'),function(_0x79a350,_0x306c3a){User[_0xb345('0x12')]({'username':_0x79a350[_0xb345('0x22')][_0xb345('0x10')][_0xb345('0x2d')]()[_0xb345('0x8d')]()},function(_0x1d9fb8,_0x2aefc7){if(_0x1d9fb8)return _0x306c3a['status'](0x1f4)[_0xb345('0x53')](_0x1d9fb8);if(!_0x2aefc7)return _0x306c3a[_0xb345('0x8e')](0x1f4)['send'](_0xb345('0x8c'));else return _0x306c3a[_0xb345('0x8e')](0xc8)[_0xb345('0x69')](_0x2aefc7['securityquestion']);});});app[_0xb345('0x7')](_0xb345('0x1c'),passport[_0xb345('0x3e')](_0xb345('0x15'),{'session':!![]}),async function(_0x4e7d1a,_0x1acba1){if(FusionSettings[_0xb345('0x72')]){if(classroomConnection[_0xb345('0x14')]){try{await _0x3dd543(user);}catch(_0x24ef9a){logger[_0xb345('0x51')](_0x24ef9a);}}_0x3c971d(_0x4e7d1a[_0xb345('0x61')]['socketId'],_0x4e7d1a['user']);return _0x1acba1[_0xb345('0x8e')](0xc8)[_0xb345('0x69')]({'serverMessage':_0xb345('0x5e'),'user':_0x4e7d1a['user']});}else{if(_0x3cb929()==0x0){_0x3c971d(_0x4e7d1a[_0xb345('0x61')][_0xb345('0x59')],_0x4e7d1a['user']);if(classroomConnection[_0xb345('0x14')]){try{await _0x3dd543(user);}catch(_0x357405){logger[_0xb345('0x51')](_0x357405);}}return _0x1acba1['status'](0xc8)[_0xb345('0x69')]({'serverMessage':_0xb345('0x5e'),'user':_0x4e7d1a[_0xb345('0x5a')]});}else{_0x4e7d1a[_0xb345('0x31')]();return _0x1acba1[_0xb345('0x8e')](0x1f4)[_0xb345('0x53')](_0xb345('0x81'));}}});app['get'](_0xb345('0x48'),function(_0x119cbd,_0x418823){var _0x404a8c=['User'];User[_0xb345('0x12')]({'usergroup':_0xb345('0x33')},function(_0x567150,_0x202dd9){if(_0x567150)return _0x418823['status'](0xc8)[_0xb345('0x53')](_0x404a8c);if(!_0x202dd9)_0x404a8c[_0xb345('0x63')](_0xb345('0x33'));return _0x418823[_0xb345('0x8e')](0xc8)[_0xb345('0x53')](_0x404a8c);});});app[_0xb345('0x11')](_0xb345('0x1'),async(_0x267a8a,_0x5a41ab,_0x1cedd1)=>{_0x1cedd1();});function _0x3cb929(){var _0x298673=0x0;for(var _0x189999=0x0;_0x189999<FusionSettings['connectedClients'][_0xb345('0x88')];_0x189999++){if(FusionSettings[_0xb345('0xb')][_0x189999][_0xb345('0x3d')]){_0x298673++;}}return _0x298673;}function _0x3c971d(_0x451558,_0x124305){for(var _0xfc4d30=0x0;_0xfc4d30<FusionSettings[_0xb345('0xb')]['length'];_0xfc4d30++){if(FusionSettings[_0xb345('0xb')][_0xfc4d30]['id']==_0x451558){FusionSettings['connectedClients'][_0xfc4d30]['User']=_0x124305;break;}}}function _0x55c4be(_0x47c94b){for(var _0x22ba8d=0x0;_0x22ba8d<FusionSettings['connectedClients'][_0xb345('0x88')];_0x22ba8d++){if(FusionSettings[_0xb345('0xb')][_0x22ba8d]['id']==_0x47c94b){FusionSettings[_0xb345('0xb')][_0x22ba8d][_0xb345('0x3d')]=undefined;break;}}}function _0x5eb27d(_0x42f1bd){for(var _0x3cdd47=0x0;_0x3cdd47<FusionSettings[_0xb345('0xb')][_0xb345('0x88')];_0x3cdd47++){if(FusionSettings['connectedClients'][_0x3cdd47][_0xb345('0x3d')][_0xb345('0x1a')]==_0x42f1bd){FusionSettings[_0xb345('0xb')][_0x3cdd47][_0xb345('0x3d')]=undefined;break;}}}function _0x21af41(){return function(_0x2fcef6,_0x34f12a,_0x41415c){if(_0x2fcef6[_0xb345('0x46')]()){return _0x41415c();}else{return _0x34f12a[_0xb345('0x8e')](0x191)[_0xb345('0x53')]('User\x20Unauthenticated');}};}async function _0x3dd543(_0x475761){try{await _0x34da03(_0x475761);}catch(_0x574e26){logger['error'](_0xb345('0x25')+_0x475761[_0xb345('0x1a')]);}};function _0x34da03(_0x2738f4){return new Promise(function(_0x4c2465,_0x19146c){var _0x4dceb3=new SSH();_0x4dceb3['on']('ready',function(){_0x4dceb3[_0xb345('0x38')](async function(_0x489c40,_0x381528){if(_0x489c40){logger[_0xb345('0x51')]('Error\x20communicating\x20with\x20c3:\x20'+_0x489c40);_0x4dceb3['end']();return _0x19146c(_0x489c40);}try{await _0x56ddc7(_0x381528);await _0x21d97e(_0x381528,_0x2738f4[_0xb345('0x1a')]);await _0x35e7db(_0x381528,_0x2738f4[_0xb345('0x1a')]);await _0x29c27b(_0x381528,_0x2738f4[_0xb345('0x1a')]);let _0x5a90d9=await _0x317d0b(_0x381528,_0x2738f4[_0xb345('0x1a')]);logger[_0xb345('0x6d')](JSON['stringify'](_0x5a90d9));let _0x5bbd7b=await _0x34100e(_0x2738f4['filepath']);logger['debug'](JSON[_0xb345('0x4')](_0x5bbd7b));await _0x1c002e(_0x381528,_0x2738f4,_0x5a90d9,_0x5bbd7b);_0x4dceb3[_0xb345('0x37')]();return _0x4c2465();}catch(_0x2186fb){logger[_0xb345('0x6a')](_0x2186fb);_0x4dceb3['end']();return _0x19146c(_0x2186fb);}});})['connect']({'host':_0xb345('0x4d'),'port':0x16,'username':'c3','password':'root'});});};function _0x56ddc7(_0x12c55a){return new Promise(function(_0x19b0df,_0x40e3fa){_0x12c55a[_0xb345('0x73')](_0xb345('0x3b'),function(_0xebc7c8){if(_0xebc7c8){_0x12c55a[_0xb345('0x2c')](_0xb345('0x3b'),function(_0x34b005){if(_0x34b005){return _0x40e3fa(_0xb345('0x8a')+_0x34b005);}else{logger[_0xb345('0x3f')]('Classroom\x20file\x20system\x20created');return _0x19b0df();}});}else{logger[_0xb345('0x3f')]('Classroom\x20file\x20system\x20found');return _0x19b0df();}});});};function _0x21d97e(_0x31277f,_0x4b2559){return new Promise(function(_0x3ce94c,_0x2783ee){_0x31277f[_0xb345('0x73')](_0xb345('0x3b')+_0x4b2559,function(_0x4dc8f6){if(_0x4dc8f6){_0x31277f['mkdir'](_0xb345('0x3b')+_0x4b2559,function(_0x29695c){if(_0x29695c){return _0x2783ee(_0xb345('0x2a')+_0x29695c);}else{logger['verbose'](_0xb345('0x66'));return _0x3ce94c();}});}else{logger[_0xb345('0x3f')](_0xb345('0x50'));return _0x3ce94c();}});});};function _0x35e7db(_0x1b7fa5,_0x15fc2b){return new Promise(function(_0x339d83,_0x353aad){_0x1b7fa5[_0xb345('0x73')](_0xb345('0x3b')+_0x15fc2b+_0xb345('0x2e'),function(_0x2f79a6){if(_0x2f79a6){_0x1b7fa5[_0xb345('0x2c')](_0xb345('0x3b')+_0x15fc2b+'/Editor/',function(_0x153a36){if(_0x153a36){return _0x353aad(_0xb345('0x54')+_0x153a36);}else{logger['verbose']('User\x27s\x20editor\x20directory\x20created');return _0x339d83();}});}else{logger[_0xb345('0x3f')](_0xb345('0x44'));return _0x339d83();}});});};function _0x29c27b(_0x3b2877,_0x139247){return new Promise(function(_0x16a0a5,_0xdf0726){_0x3b2877[_0xb345('0x73')](_0xb345('0x3b')+_0x139247+'/Blockly/',function(_0x200db7){if(_0x200db7){_0x3b2877[_0xb345('0x2c')](_0xb345('0x3b')+_0x139247+_0xb345('0x84'),function(_0x443f19){if(_0x443f19){return _0xdf0726(_0xb345('0x5c')+_0x443f19);}else{logger['verbose'](_0xb345('0x4c'));return _0x16a0a5();}});}else{logger[_0xb345('0x3f')](_0xb345('0xc'));return _0x16a0a5();}});});};function _0x317d0b(_0x425937,_0x43a377){return new Promise(async function(_0x156ea3,_0x3555f3){try{let _0x35cc03={};_0x35cc03[_0xb345('0x1d')]=await _0x3b6229(_0x425937,_0x43a377);_0x35cc03['Blockly']=await _0x4c441d(_0x425937,_0x43a377);return _0x156ea3(_0x35cc03);}catch(_0x11c32e){return _0x3555f3(_0x11c32e);}});};function _0x3b6229(_0x35ae42,_0x34a983){return new Promise(function(_0xde1a59,_0x115dce){_0x35ae42[_0xb345('0x73')](_0xb345('0x3b')+_0x34a983+'/Editor/',function(_0x1e9a2f,_0x5633e5){if(_0x1e9a2f)return _0x115dce(_0x1e9a2f);let _0x3677b1=[];for(let _0x3ac872=0x0;_0x3ac872<_0x5633e5[_0xb345('0x88')];_0x3ac872++){logger[_0xb345('0x6d')](_0xb345('0x30')+_0x5633e5[_0x3ac872][_0xb345('0x3a')]);_0x3677b1[_0xb345('0x6')](_0x5633e5[_0x3ac872]);}return _0xde1a59(_0x3677b1);});});};function _0x4c441d(_0x1275ec,_0x5a0f62){return new Promise(function(_0x14baad,_0x1be56e){_0x1275ec[_0xb345('0x73')]('/home/c3/FusionFilesystem/'+_0x5a0f62+_0xb345('0x84'),function(_0x11937a,_0x5b06e2){if(_0x11937a)return _0x1be56e(_0x11937a);let _0xd064fb=[];for(let _0x146da0=0x0;_0x146da0<_0x5b06e2[_0xb345('0x88')];_0x146da0++){logger[_0xb345('0x6d')](_0xb345('0x30')+_0x5b06e2[_0x146da0][_0xb345('0x3a')]);_0xd064fb['push'](_0x5b06e2[_0x146da0]);}return _0x14baad(_0xd064fb);});});};function _0x34100e(_0x5d94c6){return new Promise(async function(_0xf86465,_0xf6c3ee){try{let _0x5126ae={};_0x5126ae[_0xb345('0x1d')]=await _0x161502(_0x5d94c6);_0x5126ae[_0xb345('0x8b')]=await _0x1e2c57(_0x5d94c6);return _0xf86465(_0x5126ae);}catch(_0x39c717){return _0xf6c3ee(_0x39c717);}});};function _0x161502(_0x533c1d){return new Promise(async function(_0x1b6676,_0x39eb69){try{let _0x425590=[];let _0x12fa4e=await fs[_0xb345('0x73')](_0x533c1d+_0xb345('0x2'));for(let _0x114bb3=0x0;_0x114bb3<_0x12fa4e['length'];_0x114bb3++){logger['debug'](_0xb345('0x30')+_0x12fa4e[_0x114bb3]);let _0x12787b=await fs['stat'](_0x533c1d+_0xb345('0x2e')+_0x12fa4e[_0x114bb3]);_0x12787b['name']=_0x12fa4e[_0x114bb3];_0x425590['push'](_0x12787b);}return _0x1b6676(_0x425590);}catch(_0x1b08b1){return _0x39eb69(_0x1b08b1);}});};function _0x1e2c57(_0x16ff4b){return new Promise(async function(_0xe5eefc,_0x2968eb){try{let _0x14a4fb=[];let _0x18271d=await fs[_0xb345('0x73')](_0x16ff4b+'/Blockly');for(let _0x2111b4=0x0;_0x2111b4<_0x18271d[_0xb345('0x88')];_0x2111b4++){logger[_0xb345('0x6d')]('Getting\x20data\x20for\x20'+_0x18271d[_0x2111b4]);let _0x1d28c1=await fs[_0xb345('0x49')](_0x16ff4b+_0xb345('0x84')+_0x18271d[_0x2111b4]);_0x1d28c1[_0xb345('0x86')]=_0x18271d[_0x2111b4];_0x14a4fb[_0xb345('0x6')](_0x1d28c1);}return _0xe5eefc(_0x14a4fb);}catch(_0x130329){return _0x2968eb(_0x130329);}});};function _0x1c002e(_0xc045e,_0x56701b,_0x12727f,_0x5eb636){return new Promise(async function(_0x7cfeba,_0x3c1d4f){try{for(let _0x6d282f=0x0;_0x6d282f<_0x12727f[_0xb345('0x1d')]['length'];_0x6d282f++){let _0x160be8=![];for(let _0x7c0e8e=0x0;_0x7c0e8e<_0x5eb636[_0xb345('0x1d')][_0xb345('0x88')];_0x7c0e8e++){if(_0x5eb636[_0xb345('0x1d')][_0x7c0e8e][_0xb345('0x86')]==_0x12727f[_0xb345('0x1d')][_0x6d282f][_0xb345('0x3a')]){logger[_0xb345('0x6d')](_0xb345('0x57')+Math[_0xb345('0x70')](_0x5eb636[_0xb345('0x1d')][_0x7c0e8e][_0xb345('0x40')]/0x3e8));logger[_0xb345('0x6d')](_0xb345('0x74')+_0x12727f[_0xb345('0x1d')][_0x6d282f][_0xb345('0x42')][_0xb345('0xd')]);if(Math['floor'](_0x5eb636[_0xb345('0x1d')][_0x7c0e8e][_0xb345('0x40')]/0x3e8)>_0x12727f[_0xb345('0x1d')][_0x6d282f][_0xb345('0x42')][_0xb345('0xd')]){_0x160be8=!![];logger['debug'](_0xb345('0x2f')+_0x5eb636[_0xb345('0x1d')][_0x7c0e8e]['name']+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x5758d5(_0xc045e,_0x56701b,_0x12727f[_0xb345('0x1d')][_0x6d282f]['filename'],_0xb345('0x1d'));}catch(_0x4b7319){return _0x3c1d4f(_0x4b7319);}break;}else{_0x160be8=!![];logger[_0xb345('0x6d')](_0xb345('0x55')+_0x5eb636['Editor'][_0x7c0e8e]['name']+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x201747(_0xc045e,_0x56701b,_0x12727f[_0xb345('0x1d')][_0x6d282f][_0xb345('0x3a')],_0xb345('0x1d'));}catch(_0x10272a){logger['error'](_0xb345('0x87')+_0x10272a);return _0x3c1d4f(_0x10272a);}break;}}}if(!_0x160be8){logger[_0xb345('0x6d')](_0x12727f['Editor'][_0x6d282f][_0xb345('0x3a')]+_0xb345('0x5b'));try{await _0x201747(_0xc045e,_0x56701b,_0x12727f['Editor'][_0x6d282f][_0xb345('0x3a')],_0xb345('0x1d'));}catch(_0xf23020){return _0x3c1d4f(_0xf23020);}}}for(let _0x2cfcd1=0x0;_0x2cfcd1<_0x12727f['Blockly'][_0xb345('0x88')];_0x2cfcd1++){let _0x1112f3=![];for(let _0x468a25=0x0;_0x468a25<_0x5eb636[_0xb345('0x8b')][_0xb345('0x88')];_0x468a25++){if(_0x5eb636[_0xb345('0x8b')][_0x468a25]['name']==_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x3a')]){logger['debug'](_0xb345('0x57')+Math[_0xb345('0x70')](_0x5eb636['Blockly'][_0x468a25][_0xb345('0x40')]/0x3e8));logger[_0xb345('0x6d')](_0xb345('0x74')+_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x42')][_0xb345('0xd')]);if(Math[_0xb345('0x70')](_0x5eb636[_0xb345('0x8b')][_0x468a25][_0xb345('0x40')]/0x3e8)>_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x42')][_0xb345('0xd')]){_0x1112f3=!![];logger[_0xb345('0x6d')](_0xb345('0x2f')+_0x5eb636[_0xb345('0x8b')][_0x468a25][_0xb345('0x86')]+_0xb345('0x83'));try{await _0x5758d5(_0xc045e,_0x56701b,_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x3a')],_0xb345('0x8b'));}catch(_0x24fcd6){return _0x3c1d4f(_0x24fcd6);}break;}else{_0x1112f3=!![];logger[_0xb345('0x6d')](_0xb345('0x55')+_0x5eb636[_0xb345('0x8b')][_0x468a25][_0xb345('0x86')]+_0xb345('0x62'));try{await _0x201747(_0xc045e,_0x56701b,_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x3a')],_0xb345('0x8b'));}catch(_0x2047ea){logger[_0xb345('0x51')](_0xb345('0x87')+_0x2047ea);return _0x3c1d4f(_0x2047ea);}break;}}}if(!_0x1112f3){logger['debug'](_0x12727f[_0xb345('0x8b')][_0x2cfcd1]['filename']+_0xb345('0x5b'));try{await _0x201747(_0xc045e,_0x56701b,_0x12727f[_0xb345('0x8b')][_0x2cfcd1][_0xb345('0x3a')],_0xb345('0x8b'));}catch(_0x5790ba){return _0x3c1d4f(_0x5790ba);}}}return _0x7cfeba();}catch(_0x46c64a){return _0x3c1d4f(_0x46c64a);}});};function _0x5758d5(_0x143fc9,_0xd804c3,_0x216cac,_0x249304){return new Promise((_0x115a78,_0x2136e8)=>{try{let _0x49f489=_0xb345('0x3b')+_0xd804c3[_0xb345('0x1a')]+'/'+_0x249304+'/'+_0x216cac;let _0x1e5b72=_0xd804c3[_0xb345('0x5')]+'/'+_0x249304+'/'+_0x216cac;logger['debug'](_0xb345('0x4e')+_0x49f489);logger[_0xb345('0x6d')]('Local\x20Path:\x20'+_0x1e5b72);_0x143fc9['fastPut'](_0x1e5b72,_0x49f489,{},function(_0x50143a){if(_0x50143a){logger[_0xb345('0x51')]('Error\x20uploading\x20file:\x20'+_0x216cac);return _0x2136e8(_0x50143a);}logger[_0xb345('0x6d')]('Uploaded\x20'+_0x216cac);return _0x115a78();});}catch(_0x6929fe){return _0x2136e8(_0x6929fe);}});};function _0x201747(_0x53fda6,_0xc8f90b,_0x8e2059,_0x5c01c0){return new Promise((_0x477149,_0x584522)=>{try{let _0x131502=_0xb345('0x3b')+_0xc8f90b[_0xb345('0x1a')]+'/'+_0x5c01c0+'/'+_0x8e2059;let _0x4ce702=_0xc8f90b[_0xb345('0x5')]+'/'+_0x5c01c0+'/'+_0x8e2059;logger['debug'](_0xb345('0x4e')+_0x131502);logger['debug']('Local\x20Path:\x20'+_0x4ce702);_0x53fda6[_0xb345('0x1f')](_0x131502,_0x4ce702,{},function(_0x524d37){if(_0x524d37){logger[_0xb345('0x51')](_0xb345('0x58')+_0x8e2059);return _0x584522(_0x524d37);}logger[_0xb345('0x6d')]('Retrieved\x20'+_0x8e2059);return _0x477149();});}catch(_0x4a3da5){return _0x584522(_0x4a3da5);}});};function _0x43b000(_0x1bc7f9,_0x4b7839,_0x4074fb,_0x4f014f){_0x1bc7f9[_0xb345('0x73')](_0xb345('0x3b')+_0x4b7839[_0xb345('0x1a')],function(_0x2fd37b){if(_0x2fd37b){logger[_0xb345('0x6a')](_0xb345('0x89')+_0x2fd37b);_0x1bc7f9[_0xb345('0x2c')](_0xb345('0x3b')+_0x4b7839[_0xb345('0x1a')],function(_0x416f82){if(_0x416f82){logger['info'](_0xb345('0x68')+_0x416f82);throw _0x416f82;}logger[_0xb345('0x6a')](_0xb345('0x85'));_0x1bc7f9[_0xb345('0x2c')](_0xb345('0x3b')+_0x4b7839[_0xb345('0x1a')]+'/Editor/',function(_0x4c1e46){if(_0x4c1e46){logger[_0xb345('0x6a')](_0xb345('0x28')+_0x4c1e46);throw _0x4c1e46;}logger[_0xb345('0x6a')](_0xb345('0x80'));_0x1bc7f9[_0xb345('0x2c')](_0xb345('0x3b')+_0x4b7839[_0xb345('0x1a')]+_0xb345('0x84'),function(_0x4f8756){if(_0x4f8756){logger[_0xb345('0x6a')]('Error\x20creating\x20blockly\x20directory:\x20'+_0x4f8756);throw _0x4f8756;}logger['info'](_0xb345('0x60'));_0x4f014f(_0x1bc7f9,_0x4b7839,_0x4074fb);});});});}_0x4f014f(_0x1bc7f9,_0x4b7839,_0x4074fb);});};function _0x3f3ff8(_0x3a96b4,_0x5dec4b,_0x279cf9){_0x3a96b4[_0xb345('0x73')](_0xb345('0x3b')+_0x5dec4b[_0xb345('0x1a')]+_0xb345('0x2e'),function(_0x9a42cc,_0xd6d039){if(_0x9a42cc){logger[_0xb345('0x6a')]('Error\x20reading\x20classroom\x20editor\x20files:\x20'+_0x9a42cc);throw _0x9a42cc;}_0x5ba7db(_0x5dec4b,'Editor',_0xd6d039,_0x279cf9);});_0x3a96b4[_0xb345('0x73')](_0xb345('0x3b')+_0x5dec4b[_0xb345('0x1a')]+_0xb345('0x84'),function(_0x5a4915,_0x22b910){if(_0x5a4915){logger[_0xb345('0x6a')](_0xb345('0x6c')+_0x5a4915);throw _0x5a4915;}_0x5ba7db(_0x5dec4b,'Blockly',_0x22b910,_0x279cf9);});};function _0x5ba7db(_0x31ee67,_0x4bf71e,_0x2b903b,_0x2528a1){logger['info'](_0xb345('0x21'));if(_0x4bf71e=='Blockly'&&_0x2b903b[_0xb345('0x88')]==0x0){_0x2528a1['end']();}for(var _0x1a5a31=0x0;_0x1a5a31<_0x2b903b['length'];_0x1a5a31++){let _0x4daa18=_0xb345('0x3b')+_0x31ee67[_0xb345('0x1a')]+'/'+_0x4bf71e+'/'+_0x2b903b[_0x1a5a31][_0xb345('0x3a')];let _0x4efd0e=_0xb345('0x43')+_0x31ee67[_0xb345('0x1a')]+'/'+_0x4bf71e+'/';logger[_0xb345('0x6a')]('Moving:\x20'+_0x4daa18+_0xb345('0x7c')+_0x4efd0e);SCP[_0xb345('0x2b')]('c3:root@172.16.0.1:'+_0x4daa18,_0x4efd0e,function(_0x57214b){if(_0x57214b){logger[_0xb345('0x6a')]('Error\x20downloading:\x20'+_0x4daa18+_0xb345('0x82')+_0x57214b);}if(_0x4bf71e==_0xb345('0x8b')&&(_0x1a5a31=_0x2b903b[_0xb345('0x88')]-0x1)){_0x2528a1[_0xb345('0x37')]();}});}};}();