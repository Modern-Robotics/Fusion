const _0xc2bd=['Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','10.200.200.1','Error\x20creating\x20editor\x20directory:\x20','../../global/fusionSettings','Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20','User\x20updated!','/Editor','remove','/api/recovery','Guest','/api/recovery/:User_Id','Error\x20reading\x20classroom\x20blockly\x20files:\x20','Remote\x20\x22','sftp','firstname','\x22\x20newer,\x20updating\x20local\x20version','User_Id','ssh2','find','Error\x20reading\x20user\x20file\x20system:\x20','info','post','scp','fastPut','path','attrs','Local\x20Path:\x20','filepath','lastname','username','User','exports',',\x20error:\x20','Moving:\x20','Another\x20user\x20is\x20already\x20logged\x20in.','Retrieved\x20','floor','defaultprogramminglanguage','Login\x20Successful','scp2','User\x27s\x20blockly\x20directory\x20created','User\x27s\x20classroom\x20file\x20system\x20created','trim','readdir','toLowerCase','User\x27s\x20editor\x20directory\x20created','name','User\x20Unauthenticated','../../utils/logger','connected','/Editor/','LOGIN.MULTIUSER_DENIED','Editor','Blockly','local-login','authenticate','/home/c3/FusionFilesystem/','/Blockly/','Error\x20downloading\x20file:\x20','mtime','Error:\x20','/api/users/cloudLogin','/api/users','/api/users/login','User\x27s\x20blockly\x20directory\x20found','password','Error','Error\x20downloading:\x20','user','json','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','connectedClients','logout','\x20not\x20a\x20common\x20file!','../../express','securityanswer','Successfully\x20deleted','language','socketId','params','body','LOGIN.SUCCESS','c3:root@172.16.0.1:','/Blockly','local-signup','Client','SocketVariables','Error\x20creating\x20classroom\x20file\x20system:\x20','Editor\x20directory\x20created','login','request-promise','mkdir','get','https://172.16.0.1/backend/auth/ldap','fusion_program_running','filename','Error\x20reading\x20classroom\x20editor\x20files:\x20','Getting\x20data\x20for\x20','status','Admin','\x22\x20newer,\x20updating\x20classroom\x20version','MultiUserAccess','User\x20does\x20not\x20exist','push','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','length','unshift','put','generateHash','Remote\x20mtime:\x20','Logged\x20out\x20successfully','Remote\x20path:\x20','connect','fastGet','stat','Classroom\x20file\x20system\x20created','usergroup','findOne','/api/users/logout','Classroom\x20file\x20system\x20found','logIn','ready','REGISTER.CREATED','securityquestion','Error\x20communicating\x20with\x20c3:\x20','root','stringify','Error\x20creating\x20user\x20file\x20system:\x20','KillProgram','Local\x20\x22','message','Error\x20creating\x20blockly\x20directory:\x20','in\x20cloud\x20login','Uploaded\x20','/api/users/:User_Id','Local\x20mtime:\x20','send','isAuthenticated','end','mtimeMs','email'];(function(_0x3de7ad,_0xc2bd1f){const _0x3fa39d=function(_0x2192d6){while(--_0x2192d6){_0x3de7ad['push'](_0x3de7ad['shift']());}};_0x3fa39d(++_0xc2bd1f);}(_0xc2bd,0x168));const _0x3fa3=function(_0x3de7ad,_0xc2bd1f){_0x3de7ad=_0x3de7ad-0x0;let _0x3fa39d=_0xc2bd[_0x3de7ad];return _0x3fa39d;};var SCP=require(_0x3fa3('0x66'));var SSH=require(_0x3fa3('0x50'))[_0x3fa3('0x7')];var fs=require('fs-extra');var path=require(_0x3fa3('0x57'));var rp=require(_0x3fa3('0xc'));const classroomConnection=require('../../classroom/connection');const logger=require(_0x3fa3('0x6f'));const app=require(_0x3fa3('0x89'));const User=require('../../models/user');const passport=require('passport');const FusionSettings=require(_0x3fa3('0x42'));const fusionProgram=require('../../fusionProgram');module[_0x3fa3('0x5e')]=function(){app[_0x3fa3('0xe')](_0x3fa3('0x7d'),_0x2757cf(),function(_0x294686,_0x5707e8){User[_0x3fa3('0x51')]({'usergroup':{'$ne':_0x3fa3('0x48')}},function(_0x2d2b4e,_0x20a77e){if(_0x2d2b4e)_0x5707e8[_0x3fa3('0x3a')](_0x2d2b4e);_0x5707e8[_0x3fa3('0x84')](_0x20a77e);});});app['post'](_0x3fa3('0x7d'),function(_0x3875de,_0x4917ba,_0x2b2f11){passport['authenticate'](_0x3fa3('0x6'),async function(_0xa5e02,_0x41994b,_0x1dd3cd){if(_0xa5e02)return _0x4917ba[_0x3fa3('0x14')](0x1f4)['send'](_0xa5e02);if(_0x1dd3cd&&_0x1dd3cd[_0x3fa3('0x34')])return _0x4917ba[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x3875de['__'](_0x1dd3cd['message']));if(FusionSettings[_0x3fa3('0x17')]){if(classroomConnection['connected']){await _0x555966(_0x41994b);}_0x3875de[_0x3fa3('0x2a')](_0x41994b,function(_0x50c307){if(_0x50c307){return _0x2b2f11(_0x50c307);}_0x59c9d0(_0x3875de[_0x3fa3('0x2')][_0x3fa3('0x0')],_0x41994b);return _0x4917ba[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x84')]({'serverMessage':_0x3875de['__'](_0x3fa3('0x2c')),'user':_0x41994b});});}else{if(_0x1cfc55()==0x0){_0x59c9d0(_0x3875de[_0x3fa3('0x2')]['socketId'],_0x41994b);if(classroomConnection[_0x3fa3('0x70')]){await _0x555966(_0x41994b);}_0x3875de['logIn'](_0x41994b,function(_0x3099d){if(_0x3099d){return _0x2b2f11(_0x3099d);}_0x59c9d0(_0x3875de[_0x3fa3('0x2')]['socketId'],_0x41994b);return _0x4917ba[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x84')]({'serverMessage':_0x3875de['__'](_0x3fa3('0x2c')),'user':_0x41994b});});}else{return _0x4917ba[_0x3fa3('0x14')](0x1f4)['send'](_0x3875de['__'](_0x3fa3('0x1a')));}}})(_0x3875de,_0x4917ba,_0x2b2f11);});app[_0x3fa3('0x54')](_0x3fa3('0x7d'),passport[_0x3fa3('0x76')](_0x3fa3('0x6'),{'session':!![]}),function(_0x46f7a3,_0xfaa1ee){if(_0x46f7a3[_0x3fa3('0x83')][_0x3fa3('0x81')]){return _0xfaa1ee[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x46f7a3[_0x3fa3('0x83')][_0x3fa3('0x81')]);}else{}});app[_0x3fa3('0xe')](_0x3fa3('0x38'),_0x2757cf(),function(_0x3fd3e5,_0x3ab1ef){User[_0x3fa3('0x27')]({'username':_0x3fd3e5[_0x3fa3('0x1')][_0x3fa3('0x4f')]['toLowerCase']()['trim']()},function(_0x595df1,_0x590c15){if(_0x595df1)_0x3ab1ef[_0x3fa3('0x3a')](_0x595df1);_0x3ab1ef[_0x3fa3('0x84')](_0x590c15);});});app[_0x3fa3('0x1d')]('/api/users/:User_Id',_0x2757cf(),function(_0x4dadc9,_0x75dab){User[_0x3fa3('0x27')]({'username':_0x4dadc9[_0x3fa3('0x1')][_0x3fa3('0x4f')][_0x3fa3('0x6b')]()[_0x3fa3('0x69')]()},function(_0x566b2a,_0x36dd21){if(_0x566b2a)_0x75dab[_0x3fa3('0x3a')](_0x566b2a);if(_0x4dadc9[_0x3fa3('0x2')]['password']){_0x36dd21['password']=_0x36dd21[_0x3fa3('0x1e')](_0x4dadc9[_0x3fa3('0x2')]['password']);}if(_0x4dadc9[_0x3fa3('0x2')]['firstname']){_0x36dd21[_0x3fa3('0x4d')]=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x4d')];}if(_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x5b')]){_0x36dd21['lastname']=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x5b')];}if(_0x4dadc9['body'][_0x3fa3('0x8c')]){_0x36dd21[_0x3fa3('0x8c')]=_0x4dadc9[_0x3fa3('0x2')]['language'];}if(_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x3e')]){_0x36dd21[_0x3fa3('0x3e')]=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x3e')];}if(_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x64')]){_0x36dd21[_0x3fa3('0x64')]=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x64')];}if(_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x2d')]){_0x36dd21['securityquestion']=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x2d')];}if(_0x4dadc9['body'][_0x3fa3('0x8a')]){_0x36dd21[_0x3fa3('0x8a')]=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x8a')];}if(_0x4dadc9[_0x3fa3('0x2')]['usergroup']){_0x36dd21[_0x3fa3('0x26')]=_0x4dadc9[_0x3fa3('0x2')][_0x3fa3('0x26')];}_0x36dd21['save'](function(_0x11acf9){if(_0x11acf9)_0x75dab[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x11acf9);_0x75dab[_0x3fa3('0x14')](0xc8)['json']({'serverMessage':_0x3fa3('0x44')});});});});app['delete'](_0x3fa3('0x38'),_0x2757cf(),function(_0xc37892,_0x3e232d){if(_0xc37892[_0x3fa3('0x1')][_0x3fa3('0x4f')][_0x3fa3('0x6b')]()['trim']()==_0xc37892[_0x3fa3('0x83')][_0x3fa3('0x5c')]){if(FusionSettings['SocketVariables'][_0x3fa3('0x10')])if(FusionSettings['SocketVariables']['fusion_program_running']['User']==_0xc37892[_0x3fa3('0x83')][_0x3fa3('0x5c')])fusionProgram[_0x3fa3('0x32')]();_0x3bf1ef(_0xc37892[_0x3fa3('0x83')]['username']);_0xc37892[_0x3fa3('0x87')]();}User[_0x3fa3('0x46')]({'username':_0xc37892[_0x3fa3('0x1')][_0x3fa3('0x4f')][_0x3fa3('0x6b')]()[_0x3fa3('0x69')]()},function(_0x23fb48,_0x504616){if(_0x23fb48)return _0x3e232d['send'](_0x23fb48);User['removeFileSystem'](_0xc37892[_0x3fa3('0x1')][_0x3fa3('0x4f')][_0x3fa3('0x6b')]()[_0x3fa3('0x69')]());return _0x3e232d[_0x3fa3('0x14')](0xc8)['json']({'serverMessage':_0x3fa3('0x8b')});});});app['post'](_0x3fa3('0x7e'),function(_0x5ef339,_0x30b456,_0x2f11a7){passport[_0x3fa3('0x76')](_0x3fa3('0x75'),async function(_0x1322a7,_0x1413f9,_0x5a7a81){if(_0x1322a7)return _0x30b456[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x5ef339['__'](_0x1322a7[_0x3fa3('0x34')]));if(!_0x1413f9)return _0x30b456[_0x3fa3('0x14')](0x191)['send'](_0x5ef339['__'](_0x5a7a81['message']));if(FusionSettings[_0x3fa3('0x17')]){if(classroomConnection['connected']){await _0x555966(_0x1413f9);}_0x5ef339['logIn'](_0x1413f9,function(_0x46e465){if(_0x46e465){return _0x2f11a7(_0x46e465);}_0x59c9d0(_0x5ef339['body'][_0x3fa3('0x0')],_0x1413f9);return _0x30b456['status'](0xc8)[_0x3fa3('0x84')]({'serverMessage':_0x5ef339['__'](_0x3fa3('0x3')),'user':_0x1413f9});});}else{if(_0x1cfc55()==0x0){_0x59c9d0(_0x5ef339[_0x3fa3('0x2')][_0x3fa3('0x0')],_0x1413f9);if(classroomConnection[_0x3fa3('0x70')]){await _0x555966(_0x1413f9);}_0x5ef339[_0x3fa3('0x2a')](_0x1413f9,function(_0x215814){if(_0x215814){return _0x2f11a7(_0x215814);}_0x59c9d0(_0x5ef339[_0x3fa3('0x2')]['socketId'],_0x1413f9);return _0x30b456[_0x3fa3('0x14')](0xc8)['json']({'serverMessage':_0x5ef339['__'](_0x3fa3('0x3')),'user':_0x1413f9});});}else{return _0x30b456[_0x3fa3('0x14')](0x1f4)['send'](_0x5ef339['__'](_0x3fa3('0x72')));}}})(_0x5ef339,_0x30b456,_0x2f11a7);});app[_0x3fa3('0x54')](_0x3fa3('0x7c'),async function(_0x394941,_0x2b0b8){logger[_0x3fa3('0x53')](_0x3fa3('0x36'));var _0x51d93d={'method':'POST','uri':_0x3fa3('0xf'),'body':{'username':_0x394941[_0x3fa3('0x2')][_0x3fa3('0x5c')],'password':_0x394941['body'][_0x3fa3('0x80')]},'json':!![],'rejectUnauthorized':![]};try{let _0xf4bda5=await rp(_0x51d93d);let _0x14eca3=await User['findOne']({'username':_0x394941[_0x3fa3('0x2')]['username']})['exec']();if(_0x14eca3){return _0x2b0b8[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x3a')](_0x3fa3('0xb'));}else{return _0x2b0b8[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x3a')]('create');}}catch(_0x4c75a9){logger['info']('Error\x20with\x20request\x20promise.\x20'+_0x4c75a9);return _0x2b0b8[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x4c75a9);}});app['post'](_0x3fa3('0x28'),_0x2757cf(),function(_0x325608,_0x30d0e9){if(FusionSettings[_0x3fa3('0x8')][_0x3fa3('0x10')])if(FusionSettings[_0x3fa3('0x8')]['fusion_program_running']['User']==_0x325608[_0x3fa3('0x83')][_0x3fa3('0x5c')])fusionProgram[_0x3fa3('0x32')]();_0x577227(_0x325608[_0x3fa3('0x2')][_0x3fa3('0x0')]);_0x325608[_0x3fa3('0x87')]();_0x30d0e9[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x84')]({'serverMessage':_0x3fa3('0x20')});});app[_0x3fa3('0xe')](_0x3fa3('0x49'),function(_0x38dc12,_0x3b7638){User['findOne']({'username':_0x38dc12[_0x3fa3('0x1')][_0x3fa3('0x4f')][_0x3fa3('0x6b')]()[_0x3fa3('0x69')]()},function(_0x3f4b5c,_0x31d863){if(_0x3f4b5c)return _0x3b7638['status'](0x1f4)[_0x3fa3('0x3a')](_0x3f4b5c);if(!_0x31d863)return _0x3b7638[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x3fa3('0x18'));else return _0x3b7638[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x84')](_0x31d863[_0x3fa3('0x2d')]);});});app[_0x3fa3('0x54')](_0x3fa3('0x47'),passport['authenticate']('local-recovery',{'session':!![]}),function(_0x1741a3,_0xa7e6af){if(FusionSettings['MultiUserAccess']){if(classroomConnection[_0x3fa3('0x70')]){_0x555966(_0x1741a3[_0x3fa3('0x83')]);}_0x59c9d0(_0x1741a3[_0x3fa3('0x2')][_0x3fa3('0x0')],_0x1741a3[_0x3fa3('0x83')]);return _0xa7e6af[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x84')]({'serverMessage':_0x3fa3('0x65'),'user':_0x1741a3[_0x3fa3('0x83')]});}else{if(_0x1cfc55()==0x0){_0x59c9d0(_0x1741a3['body'][_0x3fa3('0x0')],_0x1741a3[_0x3fa3('0x83')]);if(classroomConnection['connected']){_0x555966(_0x1741a3[_0x3fa3('0x83')]);}return _0xa7e6af[_0x3fa3('0x14')](0xc8)['json']({'serverMessage':'Login\x20Successful','user':_0x1741a3[_0x3fa3('0x83')]});}else{_0x1741a3[_0x3fa3('0x87')]();return _0xa7e6af[_0x3fa3('0x14')](0x1f4)[_0x3fa3('0x3a')](_0x3fa3('0x61'));}}});app[_0x3fa3('0xe')]('/api/allowedUserGroups',function(_0x26b549,_0x2f27b1){var _0x1eceef=[_0x3fa3('0x5d')];User[_0x3fa3('0x27')]({'usergroup':_0x3fa3('0x15')},function(_0x10609e,_0x2c3396){if(_0x10609e)return _0x2f27b1[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x3a')](_0x1eceef);if(!_0x2c3396)_0x1eceef[_0x3fa3('0x1c')](_0x3fa3('0x15'));return _0x2f27b1[_0x3fa3('0x14')](0xc8)[_0x3fa3('0x3a')](_0x1eceef);});});function _0x1cfc55(){var _0x4f66f2=0x0;for(var _0x50377c=0x0;_0x50377c<FusionSettings[_0x3fa3('0x86')][_0x3fa3('0x1b')];_0x50377c++){if(FusionSettings[_0x3fa3('0x86')][_0x50377c][_0x3fa3('0x5d')]){_0x4f66f2++;}}return _0x4f66f2;}function _0x59c9d0(_0x458a12,_0x3f4c15){for(var _0x23c038=0x0;_0x23c038<FusionSettings[_0x3fa3('0x86')][_0x3fa3('0x1b')];_0x23c038++){if(FusionSettings[_0x3fa3('0x86')][_0x23c038]['id']==_0x458a12){FusionSettings[_0x3fa3('0x86')][_0x23c038][_0x3fa3('0x5d')]=_0x3f4c15;break;}}}function _0x577227(_0x12853b){for(var _0x2d5fd9=0x0;_0x2d5fd9<FusionSettings['connectedClients'][_0x3fa3('0x1b')];_0x2d5fd9++){if(FusionSettings[_0x3fa3('0x86')][_0x2d5fd9]['id']==_0x12853b){FusionSettings[_0x3fa3('0x86')][_0x2d5fd9]['User']=undefined;break;}}}function _0x3bf1ef(_0x5a9365){for(var _0xf2d0d0=0x0;_0xf2d0d0<FusionSettings[_0x3fa3('0x86')][_0x3fa3('0x1b')];_0xf2d0d0++){if(FusionSettings[_0x3fa3('0x86')][_0xf2d0d0][_0x3fa3('0x5d')]['username']==_0x5a9365){FusionSettings[_0x3fa3('0x86')][_0xf2d0d0][_0x3fa3('0x5d')]=undefined;break;}}}function _0x2757cf(){return function(_0x119a03,_0x3c0c6e,_0x55bdf5){if(_0x119a03[_0x3fa3('0x3b')]()){return _0x55bdf5();}else{return _0x3c0c6e[_0x3fa3('0x14')](0x191)[_0x3fa3('0x3a')](_0x3fa3('0x6e'));}};}async function _0x555966(_0x4fe783){try{await _0x2a8e75(_0x4fe783);}catch(_0x5e1e1e){logger['info'](_0x5e1e1e);logger[_0x3fa3('0x53')]('Error\x20downloading\x20classroom\x20files\x20for\x20'+_0x4fe783[_0x3fa3('0x5c')]);}};function _0x2a8e75(_0x5619a0){return new Promise(function(_0x39305c,_0x1d55f5){var _0x8c9e8d=new SSH();_0x8c9e8d['on'](_0x3fa3('0x2b'),function(){_0x8c9e8d[_0x3fa3('0x4c')](async function(_0x2e6a31,_0x2d1f43){if(_0x2e6a31){logger[_0x3fa3('0x53')](_0x3fa3('0x2e')+_0x2e6a31);_0x8c9e8d[_0x3fa3('0x3c')]();return _0x1d55f5(_0x2e6a31);}try{await _0x22125f(_0x2d1f43);await _0x4302c5(_0x2d1f43,_0x5619a0[_0x3fa3('0x5c')]);await _0xe5e19d(_0x2d1f43,_0x5619a0[_0x3fa3('0x5c')]);await _0x24f9e9(_0x2d1f43,_0x5619a0[_0x3fa3('0x5c')]);let _0x384e1c=await _0xff3dbf(_0x2d1f43,_0x5619a0[_0x3fa3('0x5c')]);logger[_0x3fa3('0x53')](JSON[_0x3fa3('0x30')](_0x384e1c));let _0x7e448=await _0x1c6d71(_0x5619a0['filepath']);logger['info'](JSON[_0x3fa3('0x30')](_0x7e448));await _0x424e46(_0x2d1f43,_0x5619a0,_0x384e1c,_0x7e448);_0x8c9e8d[_0x3fa3('0x3c')]();return _0x39305c();}catch(_0x5096ff){logger[_0x3fa3('0x53')](_0x5096ff);_0x8c9e8d[_0x3fa3('0x3c')]();return _0x1d55f5(_0x5096ff);}});})[_0x3fa3('0x22')]({'host':_0x3fa3('0x40'),'port':0x16,'username':'c3','password':_0x3fa3('0x2f')});});};function _0x22125f(_0x372f26){return new Promise(function(_0x13abd8,_0x11a7f3){_0x372f26[_0x3fa3('0x6a')](_0x3fa3('0x77'),function(_0xfd147f){if(_0xfd147f){_0x372f26[_0x3fa3('0xd')](_0x3fa3('0x77'),function(_0x4c6b12){if(_0x4c6b12){return _0x11a7f3(_0x3fa3('0x9')+_0x4c6b12);}else{logger['info'](_0x3fa3('0x25'));return _0x13abd8();}});}else{logger[_0x3fa3('0x53')](_0x3fa3('0x29'));return _0x13abd8();}});});};function _0x4302c5(_0x51b7a7,_0x5d6865){return new Promise(function(_0xf6ad38,_0x150518){_0x51b7a7[_0x3fa3('0x6a')]('/home/c3/FusionFilesystem/'+_0x5d6865,function(_0xa400fb){if(_0xa400fb){_0x51b7a7[_0x3fa3('0xd')](_0x3fa3('0x77')+_0x5d6865,function(_0x2e960c){if(_0x2e960c){return _0x150518(_0x3fa3('0x43')+_0x2e960c);}else{logger['info'](_0x3fa3('0x68'));return _0xf6ad38();}});}else{logger[_0x3fa3('0x53')]('User\x27s\x20classroom\x20file\x20system\x20found');return _0xf6ad38();}});});};function _0xe5e19d(_0x2719c3,_0x5b2ff4){return new Promise(function(_0x777b1,_0x1b1371){_0x2719c3[_0x3fa3('0x6a')](_0x3fa3('0x77')+_0x5b2ff4+_0x3fa3('0x71'),function(_0x2a13e3){if(_0x2a13e3){_0x2719c3[_0x3fa3('0xd')](_0x3fa3('0x77')+_0x5b2ff4+'/Editor/',function(_0x17e43a){if(_0x17e43a){return _0x1b1371(_0x3fa3('0x85')+_0x17e43a);}else{logger[_0x3fa3('0x53')](_0x3fa3('0x6c'));return _0x777b1();}});}else{logger[_0x3fa3('0x53')]('User\x27s\x20editor\x20directory\x20found');return _0x777b1();}});});};function _0x24f9e9(_0x9e436c,_0x16d355){return new Promise(function(_0x544022,_0x8426e6){_0x9e436c['readdir'](_0x3fa3('0x77')+_0x16d355+_0x3fa3('0x78'),function(_0x407fdf){if(_0x407fdf){_0x9e436c['mkdir'](_0x3fa3('0x77')+_0x16d355+_0x3fa3('0x78'),function(_0x35e511){if(_0x35e511){return _0x8426e6(_0x3fa3('0x3f')+_0x35e511);}else{logger[_0x3fa3('0x53')](_0x3fa3('0x67'));return _0x544022();}});}else{logger[_0x3fa3('0x53')](_0x3fa3('0x7f'));return _0x544022();}});});};function _0xff3dbf(_0x34ba73,_0x16e53e){return new Promise(async function(_0x446c75,_0x202a89){try{let _0x21b781={};_0x21b781['Editor']=await _0xa7097b(_0x34ba73,_0x16e53e);_0x21b781[_0x3fa3('0x74')]=await _0x32539a(_0x34ba73,_0x16e53e);return _0x446c75(_0x21b781);}catch(_0x4bf1a5){return _0x202a89(_0x4bf1a5);}});};function _0xa7097b(_0xf72cf4,_0x12b0bb){return new Promise(function(_0xabf1ef,_0x9c57a2){_0xf72cf4['readdir'](_0x3fa3('0x77')+_0x12b0bb+_0x3fa3('0x71'),function(_0x2c79dd,_0x20cc29){if(_0x2c79dd)return _0x9c57a2(_0x2c79dd);let _0x58c20d=[];for(let _0x1c8ea9=0x0;_0x1c8ea9<_0x20cc29[_0x3fa3('0x1b')];_0x1c8ea9++){logger[_0x3fa3('0x53')]('Getting\x20data\x20for\x20'+_0x20cc29[_0x1c8ea9][_0x3fa3('0x11')]);_0x58c20d[_0x3fa3('0x19')](_0x20cc29[_0x1c8ea9]);}return _0xabf1ef(_0x58c20d);});});};function _0x32539a(_0x53e039,_0x2beee4){return new Promise(function(_0x7e0fee,_0x49e5db){_0x53e039[_0x3fa3('0x6a')]('/home/c3/FusionFilesystem/'+_0x2beee4+_0x3fa3('0x78'),function(_0x50a89b,_0x9393a0){if(_0x50a89b)return _0x49e5db(_0x50a89b);let _0x364360=[];for(let _0x2eb509=0x0;_0x2eb509<_0x9393a0['length'];_0x2eb509++){logger[_0x3fa3('0x53')]('Getting\x20data\x20for\x20'+_0x9393a0[_0x2eb509]['filename']);_0x364360[_0x3fa3('0x19')](_0x9393a0[_0x2eb509]);}return _0x7e0fee(_0x364360);});});};function _0x1c6d71(_0x41e054){return new Promise(async function(_0x5e192c,_0x6335a7){try{let _0x4b40be={};_0x4b40be[_0x3fa3('0x73')]=await _0x473c77(_0x41e054);_0x4b40be[_0x3fa3('0x74')]=await _0x3d9e05(_0x41e054);return _0x5e192c(_0x4b40be);}catch(_0xb37af2){return _0x6335a7(_0xb37af2);}});};function _0x473c77(_0x19ff09){return new Promise(async function(_0x512853,_0x2131e5){try{let _0x5b56b7=[];let _0x15cb29=await fs['readdir'](_0x19ff09+_0x3fa3('0x45'));for(let _0x31c777=0x0;_0x31c777<_0x15cb29[_0x3fa3('0x1b')];_0x31c777++){logger[_0x3fa3('0x53')](_0x3fa3('0x13')+_0x15cb29[_0x31c777]);let _0x40cf17=await fs[_0x3fa3('0x24')](_0x19ff09+_0x3fa3('0x71')+_0x15cb29[_0x31c777]);_0x40cf17[_0x3fa3('0x6d')]=_0x15cb29[_0x31c777];_0x5b56b7['push'](_0x40cf17);}return _0x512853(_0x5b56b7);}catch(_0x3d92f3){return _0x2131e5(_0x3d92f3);}});};function _0x3d9e05(_0x163126){return new Promise(async function(_0x3f6942,_0x3b67ca){try{let _0x314ad6=[];let _0x481a5e=await fs[_0x3fa3('0x6a')](_0x163126+_0x3fa3('0x5'));for(let _0x5aa7e0=0x0;_0x5aa7e0<_0x481a5e[_0x3fa3('0x1b')];_0x5aa7e0++){logger['info'](_0x3fa3('0x13')+_0x481a5e[_0x5aa7e0]);let _0x275108=await fs['stat'](_0x163126+'/Blockly/'+_0x481a5e[_0x5aa7e0]);_0x275108[_0x3fa3('0x6d')]=_0x481a5e[_0x5aa7e0];_0x314ad6['push'](_0x275108);}return _0x3f6942(_0x314ad6);}catch(_0x23a7e1){return _0x3b67ca(_0x23a7e1);}});};function _0x424e46(_0x5c6f4b,_0x29d620,_0x4c6768,_0xdb45a7){return new Promise(async function(_0x569795,_0x16aa07){try{for(let _0x411e61=0x0;_0x411e61<_0x4c6768[_0x3fa3('0x73')][_0x3fa3('0x1b')];_0x411e61++){let _0x1c4575=![];for(let _0x972e26=0x0;_0x972e26<_0xdb45a7[_0x3fa3('0x73')]['length'];_0x972e26++){if(_0xdb45a7['Editor'][_0x972e26][_0x3fa3('0x6d')]==_0x4c6768[_0x3fa3('0x73')][_0x411e61][_0x3fa3('0x11')]){logger['info'](_0x3fa3('0x39')+Math[_0x3fa3('0x63')](_0xdb45a7['Editor'][_0x972e26][_0x3fa3('0x3d')]/0x3e8));logger['info'](_0x3fa3('0x1f')+_0x4c6768['Editor'][_0x411e61][_0x3fa3('0x58')][_0x3fa3('0x7a')]);if(Math[_0x3fa3('0x63')](_0xdb45a7[_0x3fa3('0x73')][_0x972e26][_0x3fa3('0x3d')]/0x3e8)>_0x4c6768[_0x3fa3('0x73')][_0x411e61][_0x3fa3('0x58')][_0x3fa3('0x7a')]){_0x1c4575=!![];logger[_0x3fa3('0x53')](_0x3fa3('0x33')+_0xdb45a7['Editor'][_0x972e26]['name']+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x1c2389(_0x5c6f4b,_0x29d620,_0x4c6768[_0x3fa3('0x73')][_0x411e61][_0x3fa3('0x11')],_0x3fa3('0x73'));}catch(_0x5c5f8c){return _0x16aa07(_0x5c5f8c);}break;}else{_0x1c4575=!![];logger[_0x3fa3('0x53')](_0x3fa3('0x4b')+_0xdb45a7[_0x3fa3('0x73')][_0x972e26]['name']+_0x3fa3('0x4e'));try{await _0x4a884e(_0x5c6f4b,_0x29d620,_0x4c6768['Editor'][_0x411e61][_0x3fa3('0x11')],_0x3fa3('0x73'));}catch(_0x19e451){logger[_0x3fa3('0x53')](_0x3fa3('0x7b')+_0x19e451);return _0x16aa07(_0x19e451);}break;}}}if(!_0x1c4575){logger[_0x3fa3('0x53')](_0x4c6768[_0x3fa3('0x73')][_0x411e61][_0x3fa3('0x11')]+'\x20not\x20a\x20common\x20file!');try{await _0x4a884e(_0x5c6f4b,_0x29d620,_0x4c6768[_0x3fa3('0x73')][_0x411e61][_0x3fa3('0x11')],_0x3fa3('0x73'));}catch(_0x570763){return _0x16aa07(_0x570763);}}}for(let _0x4bf8e9=0x0;_0x4bf8e9<_0x4c6768[_0x3fa3('0x74')]['length'];_0x4bf8e9++){let _0x1ef6e3=![];for(let _0x51f033=0x0;_0x51f033<_0xdb45a7['Blockly'][_0x3fa3('0x1b')];_0x51f033++){if(_0xdb45a7[_0x3fa3('0x74')][_0x51f033][_0x3fa3('0x6d')]==_0x4c6768[_0x3fa3('0x74')][_0x4bf8e9][_0x3fa3('0x11')]){logger[_0x3fa3('0x53')](_0x3fa3('0x39')+Math['floor'](_0xdb45a7[_0x3fa3('0x74')][_0x51f033]['mtimeMs']/0x3e8));logger['info']('Remote\x20mtime:\x20'+_0x4c6768['Blockly'][_0x4bf8e9]['attrs'][_0x3fa3('0x7a')]);if(Math[_0x3fa3('0x63')](_0xdb45a7[_0x3fa3('0x74')][_0x51f033][_0x3fa3('0x3d')]/0x3e8)>_0x4c6768['Blockly'][_0x4bf8e9][_0x3fa3('0x58')][_0x3fa3('0x7a')]){_0x1ef6e3=!![];logger[_0x3fa3('0x53')](_0x3fa3('0x33')+_0xdb45a7[_0x3fa3('0x74')][_0x51f033][_0x3fa3('0x6d')]+_0x3fa3('0x16'));try{await _0x1c2389(_0x5c6f4b,_0x29d620,_0x4c6768[_0x3fa3('0x74')][_0x4bf8e9][_0x3fa3('0x11')],_0x3fa3('0x74'));}catch(_0x3b0d22){return _0x16aa07(_0x3b0d22);}break;}else{_0x1ef6e3=!![];logger[_0x3fa3('0x53')]('Remote\x20\x22'+_0xdb45a7[_0x3fa3('0x74')][_0x51f033][_0x3fa3('0x6d')]+_0x3fa3('0x4e'));try{await _0x4a884e(_0x5c6f4b,_0x29d620,_0x4c6768[_0x3fa3('0x74')][_0x4bf8e9]['filename'],_0x3fa3('0x74'));}catch(_0x254e83){logger[_0x3fa3('0x53')](_0x3fa3('0x7b')+_0x254e83);return _0x16aa07(_0x254e83);}break;}}}if(!_0x1ef6e3){logger[_0x3fa3('0x53')](_0x4c6768[_0x3fa3('0x74')][_0x4bf8e9][_0x3fa3('0x11')]+_0x3fa3('0x88'));try{await _0x4a884e(_0x5c6f4b,_0x29d620,_0x4c6768['Blockly'][_0x4bf8e9][_0x3fa3('0x11')],'Blockly');}catch(_0x2795a4){return _0x16aa07(_0x2795a4);}}}return _0x569795();}catch(_0x45b7b7){return _0x16aa07(_0x45b7b7);}});};function _0x1c2389(_0x21f735,_0x23f3c7,_0x169b81,_0x23f571){return new Promise((_0x4f05c5,_0x1b260d)=>{try{let _0x1f91e2=_0x3fa3('0x77')+_0x23f3c7[_0x3fa3('0x5c')]+'/'+_0x23f571+'/'+_0x169b81;let _0x5569b8=_0x23f3c7[_0x3fa3('0x5a')]+'/'+_0x23f571+'/'+_0x169b81;logger['info'](_0x3fa3('0x21')+_0x1f91e2);logger[_0x3fa3('0x53')](_0x3fa3('0x59')+_0x5569b8);_0x21f735[_0x3fa3('0x56')](_0x5569b8,_0x1f91e2,{},function(_0x3a5c37){if(_0x3a5c37){logger[_0x3fa3('0x53')]('Error\x20uploading\x20file:\x20'+_0x169b81);return _0x1b260d(_0x3a5c37);}logger[_0x3fa3('0x53')](_0x3fa3('0x37')+_0x169b81);return _0x4f05c5();});}catch(_0x4b048b){return _0x1b260d(_0x4b048b);}});};function _0x4a884e(_0x59255f,_0x6799bd,_0x4c65b1,_0x525bdf){return new Promise((_0x13a6f7,_0x24ca5f)=>{try{let _0xeede2f=_0x3fa3('0x77')+_0x6799bd[_0x3fa3('0x5c')]+'/'+_0x525bdf+'/'+_0x4c65b1;let _0x46da03=_0x6799bd[_0x3fa3('0x5a')]+'/'+_0x525bdf+'/'+_0x4c65b1;logger[_0x3fa3('0x53')](_0x3fa3('0x21')+_0xeede2f);logger['info'](_0x3fa3('0x59')+_0x46da03);_0x59255f[_0x3fa3('0x23')](_0xeede2f,_0x46da03,{},function(_0x174e5f){if(_0x174e5f){logger[_0x3fa3('0x53')](_0x3fa3('0x79')+_0x4c65b1);return _0x24ca5f(_0x174e5f);}logger[_0x3fa3('0x53')](_0x3fa3('0x62')+_0x4c65b1);return _0x13a6f7();});}catch(_0x38d8d4){return _0x24ca5f(_0x38d8d4);}});};function _0x2376ff(_0x13d098,_0x447169,_0x4cc461,_0x26da7b){_0x13d098['readdir'](_0x3fa3('0x77')+_0x447169[_0x3fa3('0x5c')],function(_0x536ff5){if(_0x536ff5){logger[_0x3fa3('0x53')](_0x3fa3('0x52')+_0x536ff5);_0x13d098[_0x3fa3('0xd')](_0x3fa3('0x77')+_0x447169[_0x3fa3('0x5c')],function(_0x40f725){if(_0x40f725){logger[_0x3fa3('0x53')](_0x3fa3('0x31')+_0x40f725);throw _0x40f725;}logger[_0x3fa3('0x53')]('User\x20c3\x20directory\x20created');_0x13d098[_0x3fa3('0xd')](_0x3fa3('0x77')+_0x447169[_0x3fa3('0x5c')]+_0x3fa3('0x71'),function(_0xb7098){if(_0xb7098){logger[_0x3fa3('0x53')](_0x3fa3('0x41')+_0xb7098);throw _0xb7098;}logger[_0x3fa3('0x53')](_0x3fa3('0xa'));_0x13d098[_0x3fa3('0xd')](_0x3fa3('0x77')+_0x447169['username']+_0x3fa3('0x78'),function(_0x627bc5){if(_0x627bc5){logger['info'](_0x3fa3('0x35')+_0x627bc5);throw _0x627bc5;}logger[_0x3fa3('0x53')]('Blockly\x20directory\x20created');_0x26da7b(_0x13d098,_0x447169,_0x4cc461);});});});}_0x26da7b(_0x13d098,_0x447169,_0x4cc461);});};function _0x585e0d(_0x40deb7,_0x563f08,_0x573d30){_0x40deb7[_0x3fa3('0x6a')]('/home/c3/FusionFilesystem/'+_0x563f08[_0x3fa3('0x5c')]+_0x3fa3('0x71'),function(_0x5326e5,_0xeb7eb3){if(_0x5326e5){logger[_0x3fa3('0x53')](_0x3fa3('0x12')+_0x5326e5);throw _0x5326e5;}_0x49fc39(_0x563f08,_0x3fa3('0x73'),_0xeb7eb3,_0x573d30);});_0x40deb7[_0x3fa3('0x6a')]('/home/c3/FusionFilesystem/'+_0x563f08[_0x3fa3('0x5c')]+_0x3fa3('0x78'),function(_0x421b20,_0x548f99){if(_0x421b20){logger[_0x3fa3('0x53')](_0x3fa3('0x4a')+_0x421b20);throw _0x421b20;}_0x49fc39(_0x563f08,_0x3fa3('0x74'),_0x548f99,_0x573d30);});};function _0x49fc39(_0x371058,_0x3ed14b,_0x59174d,_0x4d0e58){logger[_0x3fa3('0x53')]('Retrieving\x20files');if(_0x3ed14b=='Blockly'&&_0x59174d[_0x3fa3('0x1b')]==0x0){_0x4d0e58['end']();}for(var _0x2b5ff6=0x0;_0x2b5ff6<_0x59174d[_0x3fa3('0x1b')];_0x2b5ff6++){let _0x406936=_0x3fa3('0x77')+_0x371058['username']+'/'+_0x3ed14b+'/'+_0x59174d[_0x2b5ff6][_0x3fa3('0x11')];let _0x1c94c7='app/filesystem/'+_0x371058[_0x3fa3('0x5c')]+'/'+_0x3ed14b+'/';logger['info'](_0x3fa3('0x60')+_0x406936+'\x20to\x20'+_0x1c94c7);SCP[_0x3fa3('0x55')](_0x3fa3('0x4')+_0x406936,_0x1c94c7,function(_0x4fd188){if(_0x4fd188){logger['info'](_0x3fa3('0x82')+_0x406936+_0x3fa3('0x5f')+_0x4fd188);}if(_0x3ed14b==_0x3fa3('0x74')&&(_0x2b5ff6=_0x59174d[_0x3fa3('0x1b')]-0x1)){_0x4d0e58[_0x3fa3('0x3c')]();}});}};}();