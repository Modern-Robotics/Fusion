const _0x8749=['securityanswer','/Editor/','connectedClients','delete','Local\x20mtime:\x20','Error:\x20','\x20to\x20','Client','authenticate','filename','../../fusionProgram','name','Blockly\x20directory\x20created','floor','ready','KillProgram','/api/recovery/:User_Id','get','length','../../express','logout','stat','removeFileSystem','/api/users/:User_Id','trim','generateHash','securityquestion','body','username','json','usergroup','User\x27s\x20blockly\x20directory\x20created','info','/home/c3/FusionFilesystem/','scp2','Error\x20downloading\x20file:\x20','post','Login\x20Successful','scp','Error\x20reading\x20classroom\x20blockly\x20files:\x20','/api/users','local-signup','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','User\x27s\x20editor\x20directory\x20found','isAuthenticated','Classroom\x20file\x20system\x20created','root','local-recovery','Error\x20downloading:\x20','Error\x20creating\x20blockly\x20directory:\x20','connected','User\x20updated!','Moving:\x20','User\x27s\x20classroom\x20file\x20system\x20found','User','Uploaded\x20','toLowerCase','message','request-promise','Error\x20with\x20request\x20promise.\x20','LOGIN.SUCCESS','Classroom\x20file\x20system\x20found','sftp','Remote\x20mtime:\x20','../../global/fusionSettings','POST','MultiUserAccess','local-login','\x20not\x20a\x20common\x20file!','\x22\x20newer,\x20updating\x20classroom\x20version','/api/users/login','fastGet','Admin','Error\x20downloading\x20classroom\x20files\x20for\x20','login','mtimeMs','socketId','User_Id','Error\x20communicating\x20with\x20c3:\x20','unshift',',\x20error:\x20','language','filepath','readdir','fastPut','exports','path','put','params','create','../../classroom/connection','Guest','Remote\x20path:\x20','password','passport','Local\x20\x22','push','remove','email','Remote\x20\x22','https://172.16.0.1/backend/auth/ldap','save','firstname','Local\x20Path:\x20','Blockly','Error','send','lastname','ssh2','mkdir','Getting\x20data\x20for\x20','findOne','Editor\x20directory\x20created','defaultprogramminglanguage','attrs','status','Another\x20user\x20is\x20already\x20logged\x20in.','stringify','end','logIn','Editor','Error\x20uploading\x20file:\x20','mtime','REGISTER.CREATED','user','Error\x20reading\x20classroom\x20editor\x20files:\x20','app/filesystem/','connect','Error\x20creating\x20classroom\x20file\x20system:\x20','User\x27s\x20blockly\x20directory\x20found','fusion_program_running','Retrieving\x20files','User\x20does\x20not\x20exist','LOGIN.MULTIUSER_DENIED','/Blockly/','Retrieved\x20','SocketVariables','User\x27s\x20editor\x20directory\x20created'];(function(_0x39f362,_0x874984){const _0x2473d8=function(_0x1d288a){while(--_0x1d288a){_0x39f362['push'](_0x39f362['shift']());}};_0x2473d8(++_0x874984);}(_0x8749,0x157));const _0x2473=function(_0x39f362,_0x874984){_0x39f362=_0x39f362-0x0;let _0x2473d8=_0x8749[_0x39f362];return _0x2473d8;};var SCP=require(_0x2473('0x6c'));var SSH=require(_0x2473('0x2c'))[_0x2473('0x51')];var fs=require('fs-extra');var path=require(_0x2473('0x16'));var rp=require(_0x2473('0x85'));const classroomConnection=require(_0x2473('0x1a'));const logger=require('../../utils/logger');const app=require(_0x2473('0x5d'));const User=require('../../models/user');const passport=require(_0x2473('0x1e'));const FusionSettings=require(_0x2473('0x0'));const fusionProgram=require(_0x2473('0x54'));module[_0x2473('0x15')]=function(){app[_0x2473('0x5b')](_0x2473('0x72'),_0x50dfed(),function(_0xcc730a,_0x2c5353){User['find']({'usergroup':{'$ne':_0x2473('0x1b')}},function(_0x31ec7b,_0x452034){if(_0x31ec7b)_0x2c5353[_0x2473('0x2a')](_0x31ec7b);_0x2c5353['json'](_0x452034);});});app[_0x2473('0x6e')](_0x2473('0x72'),function(_0x25ce1d,_0x143705,_0x5b9da2){passport[_0x2473('0x52')]('local-signup',async function(_0x390cb8,_0x893d4d,_0x3f3dce){if(_0x390cb8)return _0x143705[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x390cb8);if(_0x3f3dce&&_0x3f3dce[_0x2473('0x84')])return _0x143705[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x25ce1d['__'](_0x3f3dce[_0x2473('0x84')]));if(FusionSettings[_0x2473('0x2')]){if(classroomConnection[_0x2473('0x7d')]){await _0xc4d39e(_0x893d4d);}_0x25ce1d[_0x2473('0x37')](_0x893d4d,function(_0x2a6786){if(_0x2a6786){return _0x5b9da2(_0x2a6786);}_0x4e7962(_0x25ce1d[_0x2473('0x65')][_0x2473('0xc')],_0x893d4d);return _0x143705[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0x25ce1d['__'](_0x2473('0x3b')),'user':_0x893d4d});});}else{if(_0x2470ce()==0x0){_0x4e7962(_0x25ce1d[_0x2473('0x65')][_0x2473('0xc')],_0x893d4d);if(classroomConnection[_0x2473('0x7d')]){await _0xc4d39e(_0x893d4d);}_0x25ce1d[_0x2473('0x37')](_0x893d4d,function(_0x1f82ef){if(_0x1f82ef){return _0x5b9da2(_0x1f82ef);}_0x4e7962(_0x25ce1d[_0x2473('0x65')][_0x2473('0xc')],_0x893d4d);return _0x143705[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0x25ce1d['__']('REGISTER.CREATED'),'user':_0x893d4d});});}else{return _0x143705[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x25ce1d['__'](_0x2473('0x74')));}}})(_0x25ce1d,_0x143705,_0x5b9da2);});app[_0x2473('0x6e')](_0x2473('0x72'),passport[_0x2473('0x52')](_0x2473('0x73'),{'session':!![]}),function(_0x5f497d,_0x10c18a){if(_0x5f497d['user'][_0x2473('0x29')]){return _0x10c18a[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x5f497d[_0x2473('0x3c')][_0x2473('0x29')]);}else{}});app[_0x2473('0x5b')]('/api/users/:User_Id',_0x50dfed(),function(_0x183143,_0x2f6031){User[_0x2473('0x2f')]({'username':_0x183143[_0x2473('0x18')][_0x2473('0xd')][_0x2473('0x83')]()[_0x2473('0x62')]()},function(_0x3e05b4,_0x1103db){if(_0x3e05b4)_0x2f6031[_0x2473('0x2a')](_0x3e05b4);_0x2f6031[_0x2473('0x67')](_0x1103db);});});app[_0x2473('0x17')](_0x2473('0x61'),_0x50dfed(),function(_0x175c47,_0x19d20a){User[_0x2473('0x2f')]({'username':_0x175c47[_0x2473('0x18')][_0x2473('0xd')]['toLowerCase']()[_0x2473('0x62')]()},function(_0x46eda7,_0x2aaaca){if(_0x46eda7)_0x19d20a['send'](_0x46eda7);if(_0x175c47[_0x2473('0x65')][_0x2473('0x1d')]){_0x2aaaca['password']=_0x2aaaca[_0x2473('0x63')](_0x175c47[_0x2473('0x65')][_0x2473('0x1d')]);}if(_0x175c47['body'][_0x2473('0x26')]){_0x2aaaca['firstname']=_0x175c47[_0x2473('0x65')]['firstname'];}if(_0x175c47[_0x2473('0x65')]['lastname']){_0x2aaaca[_0x2473('0x2b')]=_0x175c47[_0x2473('0x65')][_0x2473('0x2b')];}if(_0x175c47['body'][_0x2473('0x11')]){_0x2aaaca['language']=_0x175c47[_0x2473('0x65')][_0x2473('0x11')];}if(_0x175c47[_0x2473('0x65')][_0x2473('0x22')]){_0x2aaaca[_0x2473('0x22')]=_0x175c47[_0x2473('0x65')]['email'];}if(_0x175c47[_0x2473('0x65')][_0x2473('0x31')]){_0x2aaaca[_0x2473('0x31')]=_0x175c47[_0x2473('0x65')][_0x2473('0x31')];}if(_0x175c47[_0x2473('0x65')][_0x2473('0x64')]){_0x2aaaca[_0x2473('0x64')]=_0x175c47[_0x2473('0x65')][_0x2473('0x64')];}if(_0x175c47[_0x2473('0x65')]['securityanswer']){_0x2aaaca[_0x2473('0x4a')]=_0x175c47[_0x2473('0x65')]['securityanswer'];}if(_0x175c47['body'][_0x2473('0x68')]){_0x2aaaca[_0x2473('0x68')]=_0x175c47[_0x2473('0x65')][_0x2473('0x68')];}_0x2aaaca[_0x2473('0x25')](function(_0x4239f5){if(_0x4239f5)_0x19d20a['status'](0x1f4)[_0x2473('0x2a')](_0x4239f5);_0x19d20a[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0x2473('0x7e')});});});});app[_0x2473('0x4d')](_0x2473('0x61'),_0x50dfed(),function(_0xe459ba,_0x3aa076){if(_0xe459ba[_0x2473('0x18')][_0x2473('0xd')][_0x2473('0x83')]()[_0x2473('0x62')]()==_0xe459ba[_0x2473('0x3c')][_0x2473('0x66')]){if(FusionSettings[_0x2473('0x48')][_0x2473('0x42')])if(FusionSettings[_0x2473('0x48')][_0x2473('0x42')]['User']==_0xe459ba[_0x2473('0x3c')][_0x2473('0x66')])fusionProgram[_0x2473('0x59')]();_0x2c3af3(_0xe459ba['user'][_0x2473('0x66')]);_0xe459ba[_0x2473('0x5e')]();}User[_0x2473('0x21')]({'username':_0xe459ba['params'][_0x2473('0xd')][_0x2473('0x83')]()[_0x2473('0x62')]()},function(_0x4abb9d,_0x3c412f){if(_0x4abb9d)return _0x3aa076['send'](_0x4abb9d);User[_0x2473('0x60')](_0xe459ba['params'][_0x2473('0xd')][_0x2473('0x83')]()[_0x2473('0x62')]());return _0x3aa076[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':'Successfully\x20deleted'});});});app[_0x2473('0x6e')](_0x2473('0x6'),function(_0xa4ab5f,_0x51ee2c,_0x1dd626){passport[_0x2473('0x52')](_0x2473('0x3'),async function(_0xb4b356,_0x4b9aaf,_0x581546){if(_0xb4b356)return _0x51ee2c[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0xa4ab5f['__'](_0xb4b356['message']));if(!_0x4b9aaf)return _0x51ee2c[_0x2473('0x33')](0x191)[_0x2473('0x2a')](_0xa4ab5f['__'](_0x581546[_0x2473('0x84')]));if(FusionSettings[_0x2473('0x2')]){if(classroomConnection[_0x2473('0x7d')]){await _0xc4d39e(_0x4b9aaf);}_0xa4ab5f['logIn'](_0x4b9aaf,function(_0x10fb06){if(_0x10fb06){return _0x1dd626(_0x10fb06);}_0x4e7962(_0xa4ab5f[_0x2473('0x65')][_0x2473('0xc')],_0x4b9aaf);return _0x51ee2c[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0xa4ab5f['__'](_0x2473('0x87')),'user':_0x4b9aaf});});}else{if(_0x2470ce()==0x0){_0x4e7962(_0xa4ab5f[_0x2473('0x65')][_0x2473('0xc')],_0x4b9aaf);if(classroomConnection['connected']){await _0xc4d39e(_0x4b9aaf);}_0xa4ab5f[_0x2473('0x37')](_0x4b9aaf,function(_0x51a833){if(_0x51a833){return _0x1dd626(_0x51a833);}_0x4e7962(_0xa4ab5f[_0x2473('0x65')][_0x2473('0xc')],_0x4b9aaf);return _0x51ee2c['status'](0xc8)[_0x2473('0x67')]({'serverMessage':_0xa4ab5f['__'](_0x2473('0x87')),'user':_0x4b9aaf});});}else{return _0x51ee2c['status'](0x1f4)[_0x2473('0x2a')](_0xa4ab5f['__'](_0x2473('0x45')));}}})(_0xa4ab5f,_0x51ee2c,_0x1dd626);});app[_0x2473('0x6e')]('/api/users/cloudLogin',async function(_0x43cbc4,_0x31c74f){logger[_0x2473('0x6a')]('in\x20cloud\x20login');var _0x4f83d5={'method':_0x2473('0x1'),'uri':_0x2473('0x24'),'body':{'username':_0x43cbc4['body'][_0x2473('0x66')],'password':_0x43cbc4[_0x2473('0x65')][_0x2473('0x1d')]},'json':!![],'rejectUnauthorized':![]};try{let _0x425a35=await rp(_0x4f83d5);let _0x26ed2f=await User[_0x2473('0x2f')]({'username':_0x43cbc4['body']['username']})['exec']();if(_0x26ed2f){return _0x31c74f['status'](0xc8)[_0x2473('0x2a')](_0x2473('0xa'));}else{return _0x31c74f[_0x2473('0x33')](0xc8)[_0x2473('0x2a')](_0x2473('0x19'));}}catch(_0x2f4376){logger[_0x2473('0x6a')](_0x2473('0x86')+_0x2f4376);return _0x31c74f[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x2f4376);}});app[_0x2473('0x6e')]('/api/users/logout',_0x50dfed(),function(_0x597976,_0x101371){if(FusionSettings[_0x2473('0x48')][_0x2473('0x42')])if(FusionSettings[_0x2473('0x48')][_0x2473('0x42')][_0x2473('0x81')]==_0x597976[_0x2473('0x3c')][_0x2473('0x66')])fusionProgram[_0x2473('0x59')]();_0x14a633(_0x597976[_0x2473('0x65')][_0x2473('0xc')]);_0x597976[_0x2473('0x5e')]();_0x101371[_0x2473('0x33')](0xc8)['json']({'serverMessage':'Logged\x20out\x20successfully'});});app['get'](_0x2473('0x5a'),function(_0x584fa1,_0x5776b1){User['findOne']({'username':_0x584fa1['params']['User_Id'][_0x2473('0x83')]()[_0x2473('0x62')]()},function(_0x4ba988,_0x785706){if(_0x4ba988)return _0x5776b1[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x4ba988);if(!_0x785706)return _0x5776b1['status'](0x1f4)[_0x2473('0x2a')](_0x2473('0x44'));else return _0x5776b1[_0x2473('0x33')](0xc8)[_0x2473('0x67')](_0x785706[_0x2473('0x64')]);});});app[_0x2473('0x6e')]('/api/recovery',passport['authenticate'](_0x2473('0x7a'),{'session':!![]}),function(_0x28270c,_0xec77fb){if(FusionSettings[_0x2473('0x2')]){if(classroomConnection['connected']){_0xc4d39e(_0x28270c[_0x2473('0x3c')]);}_0x4e7962(_0x28270c[_0x2473('0x65')][_0x2473('0xc')],_0x28270c[_0x2473('0x3c')]);return _0xec77fb[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0x2473('0x6f'),'user':_0x28270c[_0x2473('0x3c')]});}else{if(_0x2470ce()==0x0){_0x4e7962(_0x28270c[_0x2473('0x65')][_0x2473('0xc')],_0x28270c[_0x2473('0x3c')]);if(classroomConnection[_0x2473('0x7d')]){_0xc4d39e(_0x28270c[_0x2473('0x3c')]);}return _0xec77fb[_0x2473('0x33')](0xc8)[_0x2473('0x67')]({'serverMessage':_0x2473('0x6f'),'user':_0x28270c[_0x2473('0x3c')]});}else{_0x28270c['logout']();return _0xec77fb[_0x2473('0x33')](0x1f4)[_0x2473('0x2a')](_0x2473('0x34'));}}});app[_0x2473('0x5b')]('/api/allowedUserGroups',function(_0x4785c5,_0x559841){var _0x484cb3=['User'];User[_0x2473('0x2f')]({'usergroup':_0x2473('0x8')},function(_0x14c30b,_0x126388){if(_0x14c30b)return _0x559841['status'](0xc8)[_0x2473('0x2a')](_0x484cb3);if(!_0x126388)_0x484cb3[_0x2473('0xf')](_0x2473('0x8'));return _0x559841['status'](0xc8)[_0x2473('0x2a')](_0x484cb3);});});function _0x2470ce(){var _0x580d98=0x0;for(var _0x268a6c=0x0;_0x268a6c<FusionSettings['connectedClients'][_0x2473('0x5c')];_0x268a6c++){if(FusionSettings[_0x2473('0x4c')][_0x268a6c][_0x2473('0x81')]){_0x580d98++;}}return _0x580d98;}function _0x4e7962(_0x2ec930,_0x247de9){for(var _0x5e97f2=0x0;_0x5e97f2<FusionSettings['connectedClients']['length'];_0x5e97f2++){if(FusionSettings['connectedClients'][_0x5e97f2]['id']==_0x2ec930){FusionSettings['connectedClients'][_0x5e97f2][_0x2473('0x81')]=_0x247de9;break;}}}function _0x14a633(_0x305ef5){for(var _0x568885=0x0;_0x568885<FusionSettings[_0x2473('0x4c')]['length'];_0x568885++){if(FusionSettings['connectedClients'][_0x568885]['id']==_0x305ef5){FusionSettings[_0x2473('0x4c')][_0x568885]['User']=undefined;break;}}}function _0x2c3af3(_0x65cf46){for(var _0x44a567=0x0;_0x44a567<FusionSettings['connectedClients'][_0x2473('0x5c')];_0x44a567++){if(FusionSettings[_0x2473('0x4c')][_0x44a567][_0x2473('0x81')]['username']==_0x65cf46){FusionSettings[_0x2473('0x4c')][_0x44a567][_0x2473('0x81')]=undefined;break;}}}function _0x50dfed(){return function(_0x38cbac,_0x293db2,_0x124f53){if(_0x38cbac[_0x2473('0x77')]()){return _0x124f53();}else{return _0x293db2[_0x2473('0x33')](0x191)[_0x2473('0x2a')]('User\x20Unauthenticated');}};}async function _0xc4d39e(_0x24115a){try{await _0x118893(_0x24115a);}catch(_0x29d7f3){logger[_0x2473('0x6a')](_0x29d7f3);logger['info'](_0x2473('0x9')+_0x24115a[_0x2473('0x66')]);}};function _0x118893(_0x364bce){return new Promise(function(_0x307cbd,_0x44bb4a){var _0x3b99d2=new SSH();_0x3b99d2['on'](_0x2473('0x58'),function(){_0x3b99d2[_0x2473('0x89')](async function(_0x172290,_0x2babf3){if(_0x172290){logger[_0x2473('0x6a')](_0x2473('0xe')+_0x172290);_0x3b99d2[_0x2473('0x36')]();return _0x44bb4a(_0x172290);}try{await _0xeacc80(_0x2babf3);await _0x5176e3(_0x2babf3,_0x364bce[_0x2473('0x66')]);await _0x19a793(_0x2babf3,_0x364bce[_0x2473('0x66')]);await _0x2039e8(_0x2babf3,_0x364bce[_0x2473('0x66')]);let _0xad579a=await _0x5f2918(_0x2babf3,_0x364bce[_0x2473('0x66')]);logger[_0x2473('0x6a')](JSON[_0x2473('0x35')](_0xad579a));let _0xfe0e04=await _0x5b4993(_0x364bce['filepath']);logger['info'](JSON['stringify'](_0xfe0e04));await _0x412867(_0x2babf3,_0x364bce,_0xad579a,_0xfe0e04);_0x3b99d2[_0x2473('0x36')]();return _0x307cbd();}catch(_0x3542db){logger[_0x2473('0x6a')](_0x3542db);_0x3b99d2[_0x2473('0x36')]();return _0x44bb4a(_0x3542db);}});})[_0x2473('0x3f')]({'host':'10.200.200.1','port':0x16,'username':'c3','password':_0x2473('0x79')});});};function _0xeacc80(_0x2268b9){return new Promise(function(_0x19e2b2,_0x348854){_0x2268b9[_0x2473('0x13')]('/home/c3/FusionFilesystem/',function(_0x591a0a){if(_0x591a0a){_0x2268b9[_0x2473('0x2d')](_0x2473('0x6b'),function(_0x5cede1){if(_0x5cede1){return _0x348854(_0x2473('0x40')+_0x5cede1);}else{logger[_0x2473('0x6a')](_0x2473('0x78'));return _0x19e2b2();}});}else{logger[_0x2473('0x6a')](_0x2473('0x88'));return _0x19e2b2();}});});};function _0x5176e3(_0x3d4b68,_0x2fdc8d){return new Promise(function(_0x10b294,_0x3f805d){_0x3d4b68[_0x2473('0x13')]('/home/c3/FusionFilesystem/'+_0x2fdc8d,function(_0x212901){if(_0x212901){_0x3d4b68[_0x2473('0x2d')](_0x2473('0x6b')+_0x2fdc8d,function(_0x356aa5){if(_0x356aa5){return _0x3f805d('Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20'+_0x356aa5);}else{logger[_0x2473('0x6a')]('User\x27s\x20classroom\x20file\x20system\x20created');return _0x10b294();}});}else{logger[_0x2473('0x6a')](_0x2473('0x80'));return _0x10b294();}});});};function _0x19a793(_0x576d2e,_0x3cb51b){return new Promise(function(_0x56b93e,_0x58edd2){_0x576d2e['readdir'](_0x2473('0x6b')+_0x3cb51b+_0x2473('0x4b'),function(_0x5e2490){if(_0x5e2490){_0x576d2e[_0x2473('0x2d')](_0x2473('0x6b')+_0x3cb51b+'/Editor/',function(_0x4a0e10){if(_0x4a0e10){return _0x58edd2(_0x2473('0x75')+_0x4a0e10);}else{logger[_0x2473('0x6a')](_0x2473('0x49'));return _0x56b93e();}});}else{logger['info'](_0x2473('0x76'));return _0x56b93e();}});});};function _0x2039e8(_0x1f2e5b,_0x2a225c){return new Promise(function(_0x408871,_0x2e4203){_0x1f2e5b[_0x2473('0x13')](_0x2473('0x6b')+_0x2a225c+_0x2473('0x46'),function(_0x4d3cf0){if(_0x4d3cf0){_0x1f2e5b[_0x2473('0x2d')](_0x2473('0x6b')+_0x2a225c+_0x2473('0x46'),function(_0xc9e672){if(_0xc9e672){return _0x2e4203('Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20'+_0xc9e672);}else{logger[_0x2473('0x6a')](_0x2473('0x69'));return _0x408871();}});}else{logger[_0x2473('0x6a')](_0x2473('0x41'));return _0x408871();}});});};function _0x5f2918(_0x20a3fb,_0x4e3f1d){return new Promise(async function(_0x5374f7,_0x203717){try{let _0x45c0e5={};_0x45c0e5['Editor']=await _0x3a1540(_0x20a3fb,_0x4e3f1d);_0x45c0e5['Blockly']=await _0x3f4408(_0x20a3fb,_0x4e3f1d);return _0x5374f7(_0x45c0e5);}catch(_0xe77531){return _0x203717(_0xe77531);}});};function _0x3a1540(_0x2985e9,_0x6275ee){return new Promise(function(_0x56b034,_0x3c84b1){_0x2985e9[_0x2473('0x13')](_0x2473('0x6b')+_0x6275ee+_0x2473('0x4b'),function(_0x331f78,_0x599494){if(_0x331f78)return _0x3c84b1(_0x331f78);let _0x1bac1e=[];for(let _0x59e8eb=0x0;_0x59e8eb<_0x599494[_0x2473('0x5c')];_0x59e8eb++){logger[_0x2473('0x6a')](_0x2473('0x2e')+_0x599494[_0x59e8eb]['filename']);_0x1bac1e[_0x2473('0x20')](_0x599494[_0x59e8eb]);}return _0x56b034(_0x1bac1e);});});};function _0x3f4408(_0x480fcf,_0x19e8ba){return new Promise(function(_0x314e50,_0xdb394){_0x480fcf['readdir'](_0x2473('0x6b')+_0x19e8ba+_0x2473('0x46'),function(_0x5566c3,_0x160297){if(_0x5566c3)return _0xdb394(_0x5566c3);let _0x1911bf=[];for(let _0x463b8b=0x0;_0x463b8b<_0x160297[_0x2473('0x5c')];_0x463b8b++){logger[_0x2473('0x6a')](_0x2473('0x2e')+_0x160297[_0x463b8b]['filename']);_0x1911bf[_0x2473('0x20')](_0x160297[_0x463b8b]);}return _0x314e50(_0x1911bf);});});};function _0x5b4993(_0x30b827){return new Promise(async function(_0x236792,_0xa0bf69){try{let _0xe37fa9={};_0xe37fa9[_0x2473('0x38')]=await _0xad6c95(_0x30b827);_0xe37fa9[_0x2473('0x28')]=await _0x8a3bbd(_0x30b827);return _0x236792(_0xe37fa9);}catch(_0x4c97ee){return _0xa0bf69(_0x4c97ee);}});};function _0xad6c95(_0x4228d1){return new Promise(async function(_0xfeb1ad,_0x1e3a1c){try{let _0x94f711=[];let _0xfdae1a=await fs['readdir'](_0x4228d1+'/Editor');for(let _0x56a9c7=0x0;_0x56a9c7<_0xfdae1a[_0x2473('0x5c')];_0x56a9c7++){logger[_0x2473('0x6a')](_0x2473('0x2e')+_0xfdae1a[_0x56a9c7]);let _0x5b6277=await fs[_0x2473('0x5f')](_0x4228d1+'/Editor/'+_0xfdae1a[_0x56a9c7]);_0x5b6277['name']=_0xfdae1a[_0x56a9c7];_0x94f711['push'](_0x5b6277);}return _0xfeb1ad(_0x94f711);}catch(_0x48b472){return _0x1e3a1c(_0x48b472);}});};function _0x8a3bbd(_0x342448){return new Promise(async function(_0x3a2975,_0x1800bb){try{let _0x2d47c8=[];let _0x437884=await fs[_0x2473('0x13')](_0x342448+'/Blockly');for(let _0x3fdaee=0x0;_0x3fdaee<_0x437884[_0x2473('0x5c')];_0x3fdaee++){logger[_0x2473('0x6a')](_0x2473('0x2e')+_0x437884[_0x3fdaee]);let _0xf699c1=await fs[_0x2473('0x5f')](_0x342448+'/Blockly/'+_0x437884[_0x3fdaee]);_0xf699c1[_0x2473('0x55')]=_0x437884[_0x3fdaee];_0x2d47c8['push'](_0xf699c1);}return _0x3a2975(_0x2d47c8);}catch(_0x2d110c){return _0x1800bb(_0x2d110c);}});};function _0x412867(_0x357714,_0x547c5f,_0x58a85c,_0x48f28c){return new Promise(async function(_0xf50b06,_0x2911a4){try{for(let _0x576d4a=0x0;_0x576d4a<_0x58a85c[_0x2473('0x38')][_0x2473('0x5c')];_0x576d4a++){let _0x1e64de=![];for(let _0x1b8a9f=0x0;_0x1b8a9f<_0x48f28c['Editor'][_0x2473('0x5c')];_0x1b8a9f++){if(_0x48f28c[_0x2473('0x38')][_0x1b8a9f]['name']==_0x58a85c['Editor'][_0x576d4a][_0x2473('0x53')]){logger['info'](_0x2473('0x4e')+Math['floor'](_0x48f28c['Editor'][_0x1b8a9f][_0x2473('0xb')]/0x3e8));logger[_0x2473('0x6a')](_0x2473('0x8a')+_0x58a85c[_0x2473('0x38')][_0x576d4a][_0x2473('0x32')]['mtime']);if(Math['floor'](_0x48f28c[_0x2473('0x38')][_0x1b8a9f]['mtimeMs']/0x3e8)>_0x58a85c[_0x2473('0x38')][_0x576d4a][_0x2473('0x32')][_0x2473('0x3a')]){_0x1e64de=!![];logger['info']('Local\x20\x22'+_0x48f28c[_0x2473('0x38')][_0x1b8a9f][_0x2473('0x55')]+_0x2473('0x5'));try{await _0x18d383(_0x357714,_0x547c5f,_0x58a85c[_0x2473('0x38')][_0x576d4a][_0x2473('0x53')],_0x2473('0x38'));}catch(_0x4a84d6){return _0x2911a4(_0x4a84d6);}break;}else{_0x1e64de=!![];logger[_0x2473('0x6a')](_0x2473('0x23')+_0x48f28c[_0x2473('0x38')][_0x1b8a9f][_0x2473('0x55')]+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x84e6ff(_0x357714,_0x547c5f,_0x58a85c['Editor'][_0x576d4a][_0x2473('0x53')],_0x2473('0x38'));}catch(_0x562c61){logger[_0x2473('0x6a')](_0x2473('0x4f')+_0x562c61);return _0x2911a4(_0x562c61);}break;}}}if(!_0x1e64de){logger[_0x2473('0x6a')](_0x58a85c[_0x2473('0x38')][_0x576d4a][_0x2473('0x53')]+_0x2473('0x4'));try{await _0x84e6ff(_0x357714,_0x547c5f,_0x58a85c[_0x2473('0x38')][_0x576d4a][_0x2473('0x53')],_0x2473('0x38'));}catch(_0x53fbb5){return _0x2911a4(_0x53fbb5);}}}for(let _0x4b0b1f=0x0;_0x4b0b1f<_0x58a85c[_0x2473('0x28')]['length'];_0x4b0b1f++){let _0x2f8ff5=![];for(let _0x2c9b2c=0x0;_0x2c9b2c<_0x48f28c[_0x2473('0x28')][_0x2473('0x5c')];_0x2c9b2c++){if(_0x48f28c[_0x2473('0x28')][_0x2c9b2c][_0x2473('0x55')]==_0x58a85c[_0x2473('0x28')][_0x4b0b1f]['filename']){logger['info'](_0x2473('0x4e')+Math[_0x2473('0x57')](_0x48f28c['Blockly'][_0x2c9b2c][_0x2473('0xb')]/0x3e8));logger[_0x2473('0x6a')](_0x2473('0x8a')+_0x58a85c[_0x2473('0x28')][_0x4b0b1f][_0x2473('0x32')][_0x2473('0x3a')]);if(Math[_0x2473('0x57')](_0x48f28c[_0x2473('0x28')][_0x2c9b2c]['mtimeMs']/0x3e8)>_0x58a85c[_0x2473('0x28')][_0x4b0b1f]['attrs'][_0x2473('0x3a')]){_0x2f8ff5=!![];logger[_0x2473('0x6a')](_0x2473('0x1f')+_0x48f28c['Blockly'][_0x2c9b2c][_0x2473('0x55')]+'\x22\x20newer,\x20updating\x20classroom\x20version');try{await _0x18d383(_0x357714,_0x547c5f,_0x58a85c[_0x2473('0x28')][_0x4b0b1f][_0x2473('0x53')],_0x2473('0x28'));}catch(_0x1152d3){return _0x2911a4(_0x1152d3);}break;}else{_0x2f8ff5=!![];logger[_0x2473('0x6a')](_0x2473('0x23')+_0x48f28c[_0x2473('0x28')][_0x2c9b2c][_0x2473('0x55')]+'\x22\x20newer,\x20updating\x20local\x20version');try{await _0x84e6ff(_0x357714,_0x547c5f,_0x58a85c['Blockly'][_0x4b0b1f]['filename'],_0x2473('0x28'));}catch(_0x5afd2d){logger[_0x2473('0x6a')]('Error:\x20'+_0x5afd2d);return _0x2911a4(_0x5afd2d);}break;}}}if(!_0x2f8ff5){logger[_0x2473('0x6a')](_0x58a85c[_0x2473('0x28')][_0x4b0b1f][_0x2473('0x53')]+_0x2473('0x4'));try{await _0x84e6ff(_0x357714,_0x547c5f,_0x58a85c[_0x2473('0x28')][_0x4b0b1f][_0x2473('0x53')],'Blockly');}catch(_0x1b1ec2){return _0x2911a4(_0x1b1ec2);}}}return _0xf50b06();}catch(_0x552ea2){return _0x2911a4(_0x552ea2);}});};function _0x18d383(_0x1a036c,_0x361def,_0x3532fa,_0x1fb472){return new Promise((_0x2cd291,_0xe45501)=>{try{let _0x62dbe3='/home/c3/FusionFilesystem/'+_0x361def[_0x2473('0x66')]+'/'+_0x1fb472+'/'+_0x3532fa;let _0x58323b=_0x361def['filepath']+'/'+_0x1fb472+'/'+_0x3532fa;logger[_0x2473('0x6a')](_0x2473('0x1c')+_0x62dbe3);logger[_0x2473('0x6a')](_0x2473('0x27')+_0x58323b);_0x1a036c[_0x2473('0x14')](_0x58323b,_0x62dbe3,{},function(_0x2b342f){if(_0x2b342f){logger[_0x2473('0x6a')](_0x2473('0x39')+_0x3532fa);return _0xe45501(_0x2b342f);}logger[_0x2473('0x6a')](_0x2473('0x82')+_0x3532fa);return _0x2cd291();});}catch(_0x252b1e){return _0xe45501(_0x252b1e);}});};function _0x84e6ff(_0xf10c6c,_0x3a6b2b,_0x2e6ee2,_0x2bdf9a){return new Promise((_0x4cb598,_0x2bbc8a)=>{try{let _0x1fd386=_0x2473('0x6b')+_0x3a6b2b[_0x2473('0x66')]+'/'+_0x2bdf9a+'/'+_0x2e6ee2;let _0x4114f0=_0x3a6b2b[_0x2473('0x12')]+'/'+_0x2bdf9a+'/'+_0x2e6ee2;logger['info'](_0x2473('0x1c')+_0x1fd386);logger[_0x2473('0x6a')]('Local\x20Path:\x20'+_0x4114f0);_0xf10c6c[_0x2473('0x7')](_0x1fd386,_0x4114f0,{},function(_0x1b1dbc){if(_0x1b1dbc){logger[_0x2473('0x6a')](_0x2473('0x6d')+_0x2e6ee2);return _0x2bbc8a(_0x1b1dbc);}logger[_0x2473('0x6a')](_0x2473('0x47')+_0x2e6ee2);return _0x4cb598();});}catch(_0x3bdcfc){return _0x2bbc8a(_0x3bdcfc);}});};function _0x36fcca(_0x66c930,_0x39ff38,_0x387d85,_0x3804f5){_0x66c930[_0x2473('0x13')](_0x2473('0x6b')+_0x39ff38['username'],function(_0x57a6fe){if(_0x57a6fe){logger[_0x2473('0x6a')]('Error\x20reading\x20user\x20file\x20system:\x20'+_0x57a6fe);_0x66c930[_0x2473('0x2d')](_0x2473('0x6b')+_0x39ff38[_0x2473('0x66')],function(_0x2ea507){if(_0x2ea507){logger[_0x2473('0x6a')]('Error\x20creating\x20user\x20file\x20system:\x20'+_0x2ea507);throw _0x2ea507;}logger['info']('User\x20c3\x20directory\x20created');_0x66c930[_0x2473('0x2d')](_0x2473('0x6b')+_0x39ff38[_0x2473('0x66')]+_0x2473('0x4b'),function(_0x395e3d){if(_0x395e3d){logger[_0x2473('0x6a')]('Error\x20creating\x20editor\x20directory:\x20'+_0x395e3d);throw _0x395e3d;}logger[_0x2473('0x6a')](_0x2473('0x30'));_0x66c930['mkdir'](_0x2473('0x6b')+_0x39ff38[_0x2473('0x66')]+'/Blockly/',function(_0x204d40){if(_0x204d40){logger[_0x2473('0x6a')](_0x2473('0x7c')+_0x204d40);throw _0x204d40;}logger[_0x2473('0x6a')](_0x2473('0x56'));_0x3804f5(_0x66c930,_0x39ff38,_0x387d85);});});});}_0x3804f5(_0x66c930,_0x39ff38,_0x387d85);});};function _0x115c25(_0x3566f5,_0x314e0b,_0x3a461b){_0x3566f5[_0x2473('0x13')](_0x2473('0x6b')+_0x314e0b[_0x2473('0x66')]+_0x2473('0x4b'),function(_0x3bd01a,_0x48e31f){if(_0x3bd01a){logger[_0x2473('0x6a')](_0x2473('0x3d')+_0x3bd01a);throw _0x3bd01a;}_0x5498da(_0x314e0b,_0x2473('0x38'),_0x48e31f,_0x3a461b);});_0x3566f5[_0x2473('0x13')](_0x2473('0x6b')+_0x314e0b[_0x2473('0x66')]+_0x2473('0x46'),function(_0x1ea5ad,_0x40c898){if(_0x1ea5ad){logger[_0x2473('0x6a')](_0x2473('0x71')+_0x1ea5ad);throw _0x1ea5ad;}_0x5498da(_0x314e0b,'Blockly',_0x40c898,_0x3a461b);});};function _0x5498da(_0x389847,_0x19cd74,_0x56eecf,_0x10354d){logger['info'](_0x2473('0x43'));if(_0x19cd74==_0x2473('0x28')&&_0x56eecf[_0x2473('0x5c')]==0x0){_0x10354d[_0x2473('0x36')]();}for(var _0x32c34a=0x0;_0x32c34a<_0x56eecf['length'];_0x32c34a++){let _0x285687=_0x2473('0x6b')+_0x389847[_0x2473('0x66')]+'/'+_0x19cd74+'/'+_0x56eecf[_0x32c34a]['filename'];let _0x4812ed=_0x2473('0x3e')+_0x389847[_0x2473('0x66')]+'/'+_0x19cd74+'/';logger['info'](_0x2473('0x7f')+_0x285687+_0x2473('0x50')+_0x4812ed);SCP[_0x2473('0x70')]('c3:root@172.16.0.1:'+_0x285687,_0x4812ed,function(_0x542825){if(_0x542825){logger[_0x2473('0x6a')](_0x2473('0x7b')+_0x285687+_0x2473('0x10')+_0x542825);}if(_0x19cd74==_0x2473('0x28')&&(_0x32c34a=_0x56eecf['length']-0x1)){_0x10354d['end']();}});}};}();