const _0xf8b8=['lastname','securityquestion','ready','length','Error\x20creating\x20user\x27s\x20blockly\x20directory:\x20','Retrieving\x20files','authenticate','connected','SocketVariables','create','json','info','mtimeMs','connect','REGISTER.CREATED','end','Login\x20Successful','findOne','/api/users/login','User\x27s\x20blockly\x20directory\x20found','Admin','Local\x20mtime:\x20','Error','../../fusionProgram','\x20to\x20','message','local-login','Error\x20creating\x20user\x27s\x20editor\x20directory:\x20','Client','/Blockly/','path','app/filesystem/','local-recovery','delete','sftp','User','Error\x20reading\x20classroom\x20blockly\x20files:\x20','connectedClients','/home/c3/FusionFilesystem/','email','User_Id','logout','socketId','/api/recovery','MultiUserAccess','User\x20Unauthenticated','Error\x20creating\x20blockly\x20directory:\x20','Error\x20uploading\x20file:\x20','body','\x20not\x20a\x20common\x20file!','toLowerCase','Remote\x20mtime:\x20','find','readdir','\x22\x20newer,\x20updating\x20classroom\x20version','local-signup','LOGIN.MULTIUSER_DENIED','params','removeFileSystem','User\x20updated!','status','attrs','scp','user','passport','get','Remote\x20path:\x20','language','fusion_program_running','Error\x20downloading\x20classroom\x20files\x20for\x20','usergroup','Error\x20creating\x20classroom\x20file\x20system:\x20','Editor\x20directory\x20created','Another\x20user\x20is\x20already\x20logged\x20in.','name','User\x20c3\x20directory\x20created','isAuthenticated','stringify','Retrieved\x20','defaultprogramminglanguage','https://172.16.0.1/backend/auth/ldap','Error\x20creating\x20user\x20file\x20system:\x20','User\x20does\x20not\x20exist','password','User\x27s\x20classroom\x20file\x20system\x20found','Editor','unshift','\x22\x20newer,\x20updating\x20local\x20version','mtime','in\x20cloud\x20login','exec','User\x27s\x20classroom\x20file\x20system\x20created','ssh2','/Editor/','Getting\x20data\x20for\x20','Moving:\x20','logIn','filepath','Blockly\x20directory\x20created','Error\x20downloading:\x20','floor','filename','stat','REGISTER.CREATED_BUT_MAX_LOGIN_EXCEEDED','/api/users/cloudLogin','User\x27s\x20editor\x20directory\x20found','/Editor','Logged\x20out\x20successfully','securityanswer','Remote\x20\x22','User\x27s\x20blockly\x20directory\x20created','username','post','/api/users/:User_Id','KillProgram','trim','Classroom\x20file\x20system\x20found','fs-extra','fastPut','push','/api/allowedUserGroups','firstname','../../global/fusionSettings','mkdir','../../models/user','Local\x20\x22','Local\x20Path:\x20','Blockly','send','Error\x20with\x20request\x20promise.\x20','/api/users','Uploaded\x20','Error:\x20','../../express','/api/recovery/:User_Id','Error\x20creating\x20editor\x20directory:\x20','10.200.200.1','generateHash','fastGet'];(function(_0x280325,_0xf8b824){const _0x2e0af5=function(_0x48f77e){while(--_0x48f77e){_0x280325['push'](_0x280325['shift']());}};_0x2e0af5(++_0xf8b824);}(_0xf8b8,0x10c));const _0x2e0a=function(_0x280325,_0xf8b824){_0x280325=_0x280325-0x0;let _0x2e0af5=_0xf8b8[_0x280325];return _0x2e0af5;};var SCP=require('scp2');var SSH=require(_0x2e0a('0x66'))[_0x2e0a('0x26')];var fs=require(_0x2e0a('0x7f'));var path=require(_0x2e0a('0x28'));var rp=require('request-promise');const classroomConnection=require('../../classroom/connection');const logger=require('../../utils/logger');const app=require(_0x2e0a('0x4'));const User=require(_0x2e0a('0x86'));const passport=require(_0x2e0a('0x4a'));const FusionSettings=require(_0x2e0a('0x84'));const fusionProgram=require(_0x2e0a('0x21'));module['exports']=function(){app[_0x2e0a('0x4b')](_0x2e0a('0x1'),_0x511196(),function(_0x5dd82c,_0x4e729){User[_0x2e0a('0x3e')]({'usergroup':{'$ne':'Guest'}},function(_0x4bdefa,_0x2d58e4){if(_0x4bdefa)_0x4e729[_0x2e0a('0x8a')](_0x4bdefa);_0x4e729['json'](_0x2d58e4);});});app['post'](_0x2e0a('0x1'),function(_0x137db2,_0x22e5a4,_0x4504a1){passport['authenticate'](_0x2e0a('0x41'),async function(_0x1ce5f9,_0x35d797,_0xdefdbd){if(_0x1ce5f9)return _0x22e5a4[_0x2e0a('0x46')](0x1f4)['send'](_0x1ce5f9);if(_0xdefdbd&&_0xdefdbd[_0x2e0a('0x23')])return _0x22e5a4[_0x2e0a('0x46')](0x1f4)[_0x2e0a('0x8a')](_0x137db2['__'](_0xdefdbd[_0x2e0a('0x23')]));if(FusionSettings[_0x2e0a('0x36')]){if(classroomConnection['connected']){await _0x4d89bb(_0x35d797);}_0x137db2[_0x2e0a('0x6a')](_0x35d797,function(_0x4d9e4f){if(_0x4d9e4f){return _0x4504a1(_0x4d9e4f);}_0x200ef3(_0x137db2['body'][_0x2e0a('0x34')],_0x35d797);return _0x22e5a4[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x137db2['__'](_0x2e0a('0x18')),'user':_0x35d797});});}else{if(_0x3a024f()==0x0){_0x200ef3(_0x137db2[_0x2e0a('0x3a')][_0x2e0a('0x34')],_0x35d797);if(classroomConnection[_0x2e0a('0x11')]){await _0x4d89bb(_0x35d797);}_0x137db2[_0x2e0a('0x6a')](_0x35d797,function(_0x24b452){if(_0x24b452){return _0x4504a1(_0x24b452);}_0x200ef3(_0x137db2['body'][_0x2e0a('0x34')],_0x35d797);return _0x22e5a4['status'](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x137db2['__'](_0x2e0a('0x18')),'user':_0x35d797});});}else{return _0x22e5a4[_0x2e0a('0x46')](0x1f4)[_0x2e0a('0x8a')](_0x137db2['__'](_0x2e0a('0x71')));}}})(_0x137db2,_0x22e5a4,_0x4504a1);});app['post'](_0x2e0a('0x1'),passport[_0x2e0a('0x10')](_0x2e0a('0x41'),{'session':!![]}),function(_0x54b732,_0x5e22cb){if(_0x54b732[_0x2e0a('0x49')][_0x2e0a('0x20')]){return _0x5e22cb[_0x2e0a('0x46')](0x1f4)['send'](_0x54b732[_0x2e0a('0x49')][_0x2e0a('0x20')]);}else{}});app['get']('/api/users/:User_Id',_0x511196(),function(_0x448677,_0x17d13f){User[_0x2e0a('0x1b')]({'username':_0x448677[_0x2e0a('0x43')]['User_Id'][_0x2e0a('0x3c')]()[_0x2e0a('0x7d')]()},function(_0x1bd228,_0x456eba){if(_0x1bd228)_0x17d13f[_0x2e0a('0x8a')](_0x1bd228);_0x17d13f[_0x2e0a('0x14')](_0x456eba);});});app['put'](_0x2e0a('0x7b'),_0x511196(),function(_0x47e749,_0x1280b1){User[_0x2e0a('0x1b')]({'username':_0x47e749[_0x2e0a('0x43')][_0x2e0a('0x32')]['toLowerCase']()[_0x2e0a('0x7d')]()},function(_0x120bbc,_0x2de903){if(_0x120bbc)_0x1280b1[_0x2e0a('0x8a')](_0x120bbc);if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x5d')]){_0x2de903[_0x2e0a('0x5d')]=_0x2de903[_0x2e0a('0x8')](_0x47e749[_0x2e0a('0x3a')]['password']);}if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x83')]){_0x2de903[_0x2e0a('0x83')]=_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x83')];}if(_0x47e749['body']['lastname']){_0x2de903[_0x2e0a('0xa')]=_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0xa')];}if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x4d')]){_0x2de903[_0x2e0a('0x4d')]=_0x47e749[_0x2e0a('0x3a')]['language'];}if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x31')]){_0x2de903['email']=_0x47e749[_0x2e0a('0x3a')]['email'];}if(_0x47e749['body'][_0x2e0a('0x59')]){_0x2de903[_0x2e0a('0x59')]=_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x59')];}if(_0x47e749['body'][_0x2e0a('0xb')]){_0x2de903[_0x2e0a('0xb')]=_0x47e749[_0x2e0a('0x3a')]['securityquestion'];}if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x76')]){_0x2de903[_0x2e0a('0x76')]=_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x76')];}if(_0x47e749[_0x2e0a('0x3a')][_0x2e0a('0x50')]){_0x2de903[_0x2e0a('0x50')]=_0x47e749[_0x2e0a('0x3a')]['usergroup'];}_0x2de903['save'](function(_0x22bc09){if(_0x22bc09)_0x1280b1[_0x2e0a('0x46')](0x1f4)[_0x2e0a('0x8a')](_0x22bc09);_0x1280b1[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2e0a('0x45')});});});});app[_0x2e0a('0x2b')](_0x2e0a('0x7b'),_0x511196(),function(_0x40aea7,_0x3f323b){if(_0x40aea7['params'][_0x2e0a('0x32')][_0x2e0a('0x3c')]()[_0x2e0a('0x7d')]()==_0x40aea7[_0x2e0a('0x49')]['username']){if(FusionSettings[_0x2e0a('0x12')][_0x2e0a('0x4e')])if(FusionSettings['SocketVariables']['fusion_program_running']['User']==_0x40aea7[_0x2e0a('0x49')][_0x2e0a('0x79')])fusionProgram[_0x2e0a('0x7c')]();_0x33694a(_0x40aea7[_0x2e0a('0x49')][_0x2e0a('0x79')]);_0x40aea7['logout']();}User['remove']({'username':_0x40aea7[_0x2e0a('0x43')][_0x2e0a('0x32')]['toLowerCase']()[_0x2e0a('0x7d')]()},function(_0x5d14e9,_0x553c05){if(_0x5d14e9)return _0x3f323b[_0x2e0a('0x8a')](_0x5d14e9);User[_0x2e0a('0x44')](_0x40aea7[_0x2e0a('0x43')][_0x2e0a('0x32')]['toLowerCase']()[_0x2e0a('0x7d')]());return _0x3f323b[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':'Successfully\x20deleted'});});});app[_0x2e0a('0x7a')](_0x2e0a('0x1c'),function(_0x2eb83f,_0x1dbf96,_0x291ebb){passport[_0x2e0a('0x10')](_0x2e0a('0x24'),async function(_0x2c585e,_0x33fcd4,_0x4e872e){if(_0x2c585e)return _0x1dbf96['status'](0x1f4)['send'](_0x2eb83f['__'](_0x2c585e[_0x2e0a('0x23')]));if(!_0x33fcd4)return _0x1dbf96['status'](0x191)[_0x2e0a('0x8a')](_0x2eb83f['__'](_0x4e872e['message']));if(FusionSettings[_0x2e0a('0x36')]){if(classroomConnection[_0x2e0a('0x11')]){await _0x4d89bb(_0x33fcd4);}_0x2eb83f[_0x2e0a('0x6a')](_0x33fcd4,function(_0xaec303){if(_0xaec303){return _0x291ebb(_0xaec303);}_0x200ef3(_0x2eb83f['body'][_0x2e0a('0x34')],_0x33fcd4);return _0x1dbf96[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2eb83f['__']('LOGIN.SUCCESS'),'user':_0x33fcd4});});}else{if(_0x3a024f()==0x0){_0x200ef3(_0x2eb83f[_0x2e0a('0x3a')][_0x2e0a('0x34')],_0x33fcd4);if(classroomConnection[_0x2e0a('0x11')]){await _0x4d89bb(_0x33fcd4);}_0x2eb83f['logIn'](_0x33fcd4,function(_0x120bda){if(_0x120bda){return _0x291ebb(_0x120bda);}_0x200ef3(_0x2eb83f['body'][_0x2e0a('0x34')],_0x33fcd4);return _0x1dbf96[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2eb83f['__']('LOGIN.SUCCESS'),'user':_0x33fcd4});});}else{return _0x1dbf96['status'](0x1f4)['send'](_0x2eb83f['__'](_0x2e0a('0x42')));}}})(_0x2eb83f,_0x1dbf96,_0x291ebb);});app[_0x2e0a('0x7a')](_0x2e0a('0x72'),async function(_0x2e5087,_0x5a09bc){logger['info'](_0x2e0a('0x63'));var _0x3b2e85={'method':'POST','uri':_0x2e0a('0x5a'),'body':{'username':_0x2e5087[_0x2e0a('0x3a')][_0x2e0a('0x79')],'password':_0x2e5087[_0x2e0a('0x3a')][_0x2e0a('0x5d')]},'json':!![],'rejectUnauthorized':![]};try{let _0x33bd97=await rp(_0x3b2e85);let _0x541e64=await User[_0x2e0a('0x1b')]({'username':_0x2e5087['body'][_0x2e0a('0x79')]})[_0x2e0a('0x64')]();if(_0x541e64){return _0x5a09bc[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x8a')]('login');}else{return _0x5a09bc['status'](0xc8)[_0x2e0a('0x8a')](_0x2e0a('0x13'));}}catch(_0x136713){logger[_0x2e0a('0x15')](_0x2e0a('0x0')+_0x136713);return _0x5a09bc[_0x2e0a('0x46')](0x1f4)[_0x2e0a('0x8a')](_0x136713);}});app['post']('/api/users/logout',_0x511196(),function(_0x4f12e5,_0x568ffd){if(FusionSettings[_0x2e0a('0x12')][_0x2e0a('0x4e')])if(FusionSettings[_0x2e0a('0x12')]['fusion_program_running']['User']==_0x4f12e5[_0x2e0a('0x49')]['username'])fusionProgram[_0x2e0a('0x7c')]();_0x496bbe(_0x4f12e5['body'][_0x2e0a('0x34')]);_0x4f12e5['logout']();_0x568ffd[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2e0a('0x75')});});app['get'](_0x2e0a('0x5'),function(_0x2f8c89,_0x3c9b4b){User[_0x2e0a('0x1b')]({'username':_0x2f8c89[_0x2e0a('0x43')]['User_Id'][_0x2e0a('0x3c')]()[_0x2e0a('0x7d')]()},function(_0x571ba5,_0x5059fc){if(_0x571ba5)return _0x3c9b4b['status'](0x1f4)['send'](_0x571ba5);if(!_0x5059fc)return _0x3c9b4b['status'](0x1f4)[_0x2e0a('0x8a')](_0x2e0a('0x5c'));else return _0x3c9b4b['status'](0xc8)[_0x2e0a('0x14')](_0x5059fc[_0x2e0a('0xb')]);});});app['post'](_0x2e0a('0x35'),passport[_0x2e0a('0x10')](_0x2e0a('0x2a'),{'session':!![]}),function(_0x20746c,_0x245811){if(FusionSettings[_0x2e0a('0x36')]){if(classroomConnection['connected']){_0x4d89bb(_0x20746c['user']);}_0x200ef3(_0x20746c[_0x2e0a('0x3a')][_0x2e0a('0x34')],_0x20746c[_0x2e0a('0x49')]);return _0x245811[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2e0a('0x1a'),'user':_0x20746c[_0x2e0a('0x49')]});}else{if(_0x3a024f()==0x0){_0x200ef3(_0x20746c[_0x2e0a('0x3a')]['socketId'],_0x20746c['user']);if(classroomConnection[_0x2e0a('0x11')]){_0x4d89bb(_0x20746c[_0x2e0a('0x49')]);}return _0x245811[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x14')]({'serverMessage':_0x2e0a('0x1a'),'user':_0x20746c[_0x2e0a('0x49')]});}else{_0x20746c[_0x2e0a('0x33')]();return _0x245811[_0x2e0a('0x46')](0x1f4)[_0x2e0a('0x8a')](_0x2e0a('0x53'));}}});app['get'](_0x2e0a('0x82'),function(_0x2a055e,_0x5c85a5){var _0x57db5b=[_0x2e0a('0x2d')];User['findOne']({'usergroup':_0x2e0a('0x1e')},function(_0x4fad71,_0x234221){if(_0x4fad71)return _0x5c85a5[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x8a')](_0x57db5b);if(!_0x234221)_0x57db5b[_0x2e0a('0x60')](_0x2e0a('0x1e'));return _0x5c85a5[_0x2e0a('0x46')](0xc8)[_0x2e0a('0x8a')](_0x57db5b);});});function _0x3a024f(){var _0x31a7f2=0x0;for(var _0x11d855=0x0;_0x11d855<FusionSettings[_0x2e0a('0x2f')]['length'];_0x11d855++){if(FusionSettings['connectedClients'][_0x11d855][_0x2e0a('0x2d')]){_0x31a7f2++;}}return _0x31a7f2;}function _0x200ef3(_0x1f388d,_0x39c442){for(var _0x25527b=0x0;_0x25527b<FusionSettings[_0x2e0a('0x2f')][_0x2e0a('0xd')];_0x25527b++){if(FusionSettings[_0x2e0a('0x2f')][_0x25527b]['id']==_0x1f388d){FusionSettings[_0x2e0a('0x2f')][_0x25527b][_0x2e0a('0x2d')]=_0x39c442;break;}}}function _0x496bbe(_0x5fa238){for(var _0x389ab5=0x0;_0x389ab5<FusionSettings['connectedClients'][_0x2e0a('0xd')];_0x389ab5++){if(FusionSettings[_0x2e0a('0x2f')][_0x389ab5]['id']==_0x5fa238){FusionSettings['connectedClients'][_0x389ab5]['User']=undefined;break;}}}function _0x33694a(_0x36f872){for(var _0x45cc45=0x0;_0x45cc45<FusionSettings['connectedClients'][_0x2e0a('0xd')];_0x45cc45++){if(FusionSettings[_0x2e0a('0x2f')][_0x45cc45][_0x2e0a('0x2d')][_0x2e0a('0x79')]==_0x36f872){FusionSettings[_0x2e0a('0x2f')][_0x45cc45][_0x2e0a('0x2d')]=undefined;break;}}}function _0x511196(){return function(_0x2c6367,_0x40981f,_0x1e42ac){if(_0x2c6367[_0x2e0a('0x56')]()){return _0x1e42ac();}else{return _0x40981f['status'](0x191)[_0x2e0a('0x8a')](_0x2e0a('0x37'));}};}async function _0x4d89bb(_0x5c80e2){try{await _0x57f7ba(_0x5c80e2);}catch(_0xdbc534){logger['info'](_0xdbc534);logger[_0x2e0a('0x15')](_0x2e0a('0x4f')+_0x5c80e2[_0x2e0a('0x79')]);}};function _0x57f7ba(_0x544eff){return new Promise(function(_0x285924,_0x3170d1){var _0x350455=new SSH();_0x350455['on'](_0x2e0a('0xc'),function(){_0x350455[_0x2e0a('0x2c')](async function(_0x4c4fee,_0x3ca331){if(_0x4c4fee){logger['info']('Error\x20communicating\x20with\x20c3:\x20'+_0x4c4fee);_0x350455['end']();return _0x3170d1(_0x4c4fee);}try{await _0x34ff02(_0x3ca331);await _0x1887b3(_0x3ca331,_0x544eff[_0x2e0a('0x79')]);await _0x166243(_0x3ca331,_0x544eff['username']);await _0x34c8ee(_0x3ca331,_0x544eff['username']);let _0x5a8569=await _0x4007d7(_0x3ca331,_0x544eff['username']);logger['info'](JSON[_0x2e0a('0x57')](_0x5a8569));let _0x1a13a9=await _0x25c5cb(_0x544eff[_0x2e0a('0x6b')]);logger['info'](JSON[_0x2e0a('0x57')](_0x1a13a9));await _0xc8ce00(_0x3ca331,_0x544eff,_0x5a8569,_0x1a13a9);_0x350455[_0x2e0a('0x19')]();return _0x285924();}catch(_0x20bcab){logger[_0x2e0a('0x15')](_0x20bcab);_0x350455['end']();return _0x3170d1(_0x20bcab);}});})[_0x2e0a('0x17')]({'host':_0x2e0a('0x7'),'port':0x16,'username':'c3','password':'root'});});};function _0x34ff02(_0x74b001){return new Promise(function(_0x59c6df,_0x1d3790){_0x74b001[_0x2e0a('0x3f')](_0x2e0a('0x30'),function(_0x51c9c0){if(_0x51c9c0){_0x74b001['mkdir'](_0x2e0a('0x30'),function(_0x4fac97){if(_0x4fac97){return _0x1d3790(_0x2e0a('0x51')+_0x4fac97);}else{logger[_0x2e0a('0x15')]('Classroom\x20file\x20system\x20created');return _0x59c6df();}});}else{logger['info'](_0x2e0a('0x7e'));return _0x59c6df();}});});};function _0x1887b3(_0x2e4fe4,_0x2c0d7d){return new Promise(function(_0x5ac590,_0x3e6daa){_0x2e4fe4[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0x2c0d7d,function(_0x17edd8){if(_0x17edd8){_0x2e4fe4[_0x2e0a('0x85')](_0x2e0a('0x30')+_0x2c0d7d,function(_0x3b57a0){if(_0x3b57a0){return _0x3e6daa('Error\x20creating\x20user\x27s\x20classroom\x20file\x20system:\x20'+_0x3b57a0);}else{logger['info'](_0x2e0a('0x65'));return _0x5ac590();}});}else{logger[_0x2e0a('0x15')](_0x2e0a('0x5e'));return _0x5ac590();}});});};function _0x166243(_0x4e0d0d,_0x2a2cc8){return new Promise(function(_0x1f89b6,_0x312a34){_0x4e0d0d[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0x2a2cc8+'/Editor/',function(_0x1e86fe){if(_0x1e86fe){_0x4e0d0d[_0x2e0a('0x85')](_0x2e0a('0x30')+_0x2a2cc8+_0x2e0a('0x67'),function(_0x4a198a){if(_0x4a198a){return _0x312a34(_0x2e0a('0x25')+_0x4a198a);}else{logger['info']('User\x27s\x20editor\x20directory\x20created');return _0x1f89b6();}});}else{logger[_0x2e0a('0x15')](_0x2e0a('0x73'));return _0x1f89b6();}});});};function _0x34c8ee(_0x839ce5,_0x335abf){return new Promise(function(_0x39ff67,_0x67dc0){_0x839ce5[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0x335abf+_0x2e0a('0x27'),function(_0x5cb12e){if(_0x5cb12e){_0x839ce5[_0x2e0a('0x85')]('/home/c3/FusionFilesystem/'+_0x335abf+_0x2e0a('0x27'),function(_0x1f22cb){if(_0x1f22cb){return _0x67dc0(_0x2e0a('0xe')+_0x1f22cb);}else{logger[_0x2e0a('0x15')](_0x2e0a('0x78'));return _0x39ff67();}});}else{logger['info'](_0x2e0a('0x1d'));return _0x39ff67();}});});};function _0x4007d7(_0x1bfbb8,_0x1015ea){return new Promise(async function(_0x2d1ba3,_0x14e21){try{let _0xbb71fa={};_0xbb71fa[_0x2e0a('0x5f')]=await _0x57f269(_0x1bfbb8,_0x1015ea);_0xbb71fa[_0x2e0a('0x89')]=await _0x28da08(_0x1bfbb8,_0x1015ea);return _0x2d1ba3(_0xbb71fa);}catch(_0x236e3c){return _0x14e21(_0x236e3c);}});};function _0x57f269(_0x275093,_0xb9fbb8){return new Promise(function(_0x248234,_0x471efd){_0x275093[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0xb9fbb8+_0x2e0a('0x67'),function(_0x3dbd56,_0x1c954a){if(_0x3dbd56)return _0x471efd(_0x3dbd56);let _0x15ad8f=[];for(let _0x64e112=0x0;_0x64e112<_0x1c954a[_0x2e0a('0xd')];_0x64e112++){logger[_0x2e0a('0x15')](_0x2e0a('0x68')+_0x1c954a[_0x64e112][_0x2e0a('0x6f')]);_0x15ad8f[_0x2e0a('0x81')](_0x1c954a[_0x64e112]);}return _0x248234(_0x15ad8f);});});};function _0x28da08(_0x43e4a5,_0x360bda){return new Promise(function(_0x1a5081,_0x4c4aff){_0x43e4a5['readdir'](_0x2e0a('0x30')+_0x360bda+'/Blockly/',function(_0x3d8a84,_0x20129b){if(_0x3d8a84)return _0x4c4aff(_0x3d8a84);let _0x25d15a=[];for(let _0x1b52c8=0x0;_0x1b52c8<_0x20129b[_0x2e0a('0xd')];_0x1b52c8++){logger[_0x2e0a('0x15')](_0x2e0a('0x68')+_0x20129b[_0x1b52c8][_0x2e0a('0x6f')]);_0x25d15a[_0x2e0a('0x81')](_0x20129b[_0x1b52c8]);}return _0x1a5081(_0x25d15a);});});};function _0x25c5cb(_0x332b4f){return new Promise(async function(_0x2080d9,_0x4d5f61){try{let _0x26b0c8={};_0x26b0c8['Editor']=await _0x262927(_0x332b4f);_0x26b0c8[_0x2e0a('0x89')]=await _0x37f38a(_0x332b4f);return _0x2080d9(_0x26b0c8);}catch(_0x571fb1){return _0x4d5f61(_0x571fb1);}});};function _0x262927(_0x5b1bcc){return new Promise(async function(_0x230e60,_0x35f176){try{let _0x41d156=[];let _0x325e15=await fs[_0x2e0a('0x3f')](_0x5b1bcc+_0x2e0a('0x74'));for(let _0x4da927=0x0;_0x4da927<_0x325e15['length'];_0x4da927++){logger[_0x2e0a('0x15')](_0x2e0a('0x68')+_0x325e15[_0x4da927]);let _0x3208a5=await fs['stat'](_0x5b1bcc+'/Editor/'+_0x325e15[_0x4da927]);_0x3208a5[_0x2e0a('0x54')]=_0x325e15[_0x4da927];_0x41d156['push'](_0x3208a5);}return _0x230e60(_0x41d156);}catch(_0x92e4d9){return _0x35f176(_0x92e4d9);}});};function _0x37f38a(_0x3e9f85){return new Promise(async function(_0x5b0554,_0x47a5b6){try{let _0x450c4d=[];let _0x13a4af=await fs[_0x2e0a('0x3f')](_0x3e9f85+'/Blockly');for(let _0x5bf95e=0x0;_0x5bf95e<_0x13a4af[_0x2e0a('0xd')];_0x5bf95e++){logger[_0x2e0a('0x15')](_0x2e0a('0x68')+_0x13a4af[_0x5bf95e]);let _0x4c2563=await fs[_0x2e0a('0x70')](_0x3e9f85+_0x2e0a('0x27')+_0x13a4af[_0x5bf95e]);_0x4c2563[_0x2e0a('0x54')]=_0x13a4af[_0x5bf95e];_0x450c4d[_0x2e0a('0x81')](_0x4c2563);}return _0x5b0554(_0x450c4d);}catch(_0x1384de){return _0x47a5b6(_0x1384de);}});};function _0xc8ce00(_0x3001d7,_0x2505f9,_0x3502ea,_0x34fe51){return new Promise(async function(_0x384ea7,_0x4fc0a5){try{for(let _0x18b3f2=0x0;_0x18b3f2<_0x3502ea[_0x2e0a('0x5f')][_0x2e0a('0xd')];_0x18b3f2++){let _0x474746=![];for(let _0x40270d=0x0;_0x40270d<_0x34fe51[_0x2e0a('0x5f')]['length'];_0x40270d++){if(_0x34fe51[_0x2e0a('0x5f')][_0x40270d][_0x2e0a('0x54')]==_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x6f')]){logger[_0x2e0a('0x15')](_0x2e0a('0x1f')+Math[_0x2e0a('0x6e')](_0x34fe51[_0x2e0a('0x5f')][_0x40270d]['mtimeMs']/0x3e8));logger[_0x2e0a('0x15')](_0x2e0a('0x3d')+_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2]['attrs'][_0x2e0a('0x62')]);if(Math[_0x2e0a('0x6e')](_0x34fe51[_0x2e0a('0x5f')][_0x40270d][_0x2e0a('0x16')]/0x3e8)>_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x47')][_0x2e0a('0x62')]){_0x474746=!![];logger[_0x2e0a('0x15')]('Local\x20\x22'+_0x34fe51[_0x2e0a('0x5f')][_0x40270d][_0x2e0a('0x54')]+_0x2e0a('0x40'));try{await _0x57618a(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x6f')],_0x2e0a('0x5f'));}catch(_0x4327e1){return _0x4fc0a5(_0x4327e1);}break;}else{_0x474746=!![];logger[_0x2e0a('0x15')](_0x2e0a('0x77')+_0x34fe51[_0x2e0a('0x5f')][_0x40270d]['name']+_0x2e0a('0x61'));try{await _0x1e2938(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x6f')],'Editor');}catch(_0x5e4a89){logger[_0x2e0a('0x15')](_0x2e0a('0x3')+_0x5e4a89);return _0x4fc0a5(_0x5e4a89);}break;}}}if(!_0x474746){logger[_0x2e0a('0x15')](_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x6f')]+_0x2e0a('0x3b'));try{await _0x1e2938(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x5f')][_0x18b3f2][_0x2e0a('0x6f')],_0x2e0a('0x5f'));}catch(_0x48d0a4){return _0x4fc0a5(_0x48d0a4);}}}for(let _0x59124c=0x0;_0x59124c<_0x3502ea[_0x2e0a('0x89')][_0x2e0a('0xd')];_0x59124c++){let _0xc4174a=![];for(let _0x54d458=0x0;_0x54d458<_0x34fe51[_0x2e0a('0x89')][_0x2e0a('0xd')];_0x54d458++){if(_0x34fe51[_0x2e0a('0x89')][_0x54d458]['name']==_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x6f')]){logger[_0x2e0a('0x15')]('Local\x20mtime:\x20'+Math[_0x2e0a('0x6e')](_0x34fe51[_0x2e0a('0x89')][_0x54d458][_0x2e0a('0x16')]/0x3e8));logger[_0x2e0a('0x15')](_0x2e0a('0x3d')+_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x47')][_0x2e0a('0x62')]);if(Math[_0x2e0a('0x6e')](_0x34fe51[_0x2e0a('0x89')][_0x54d458][_0x2e0a('0x16')]/0x3e8)>_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x47')][_0x2e0a('0x62')]){_0xc4174a=!![];logger[_0x2e0a('0x15')](_0x2e0a('0x87')+_0x34fe51[_0x2e0a('0x89')][_0x54d458][_0x2e0a('0x54')]+_0x2e0a('0x40'));try{await _0x57618a(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x6f')],'Blockly');}catch(_0x1089df){return _0x4fc0a5(_0x1089df);}break;}else{_0xc4174a=!![];logger[_0x2e0a('0x15')](_0x2e0a('0x77')+_0x34fe51[_0x2e0a('0x89')][_0x54d458]['name']+_0x2e0a('0x61'));try{await _0x1e2938(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x6f')],'Blockly');}catch(_0xa5518a){logger['info']('Error:\x20'+_0xa5518a);return _0x4fc0a5(_0xa5518a);}break;}}}if(!_0xc4174a){logger[_0x2e0a('0x15')](_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x6f')]+_0x2e0a('0x3b'));try{await _0x1e2938(_0x3001d7,_0x2505f9,_0x3502ea[_0x2e0a('0x89')][_0x59124c][_0x2e0a('0x6f')],_0x2e0a('0x89'));}catch(_0x58b45b){return _0x4fc0a5(_0x58b45b);}}}return _0x384ea7();}catch(_0x10b5ce){return _0x4fc0a5(_0x10b5ce);}});};function _0x57618a(_0x2b9012,_0x18e22b,_0x1337ac,_0x1b2190){return new Promise((_0x13b64c,_0x7cf12b)=>{try{let _0x1af319=_0x2e0a('0x30')+_0x18e22b['username']+'/'+_0x1b2190+'/'+_0x1337ac;let _0x414642=_0x18e22b[_0x2e0a('0x6b')]+'/'+_0x1b2190+'/'+_0x1337ac;logger[_0x2e0a('0x15')](_0x2e0a('0x4c')+_0x1af319);logger[_0x2e0a('0x15')](_0x2e0a('0x88')+_0x414642);_0x2b9012[_0x2e0a('0x80')](_0x414642,_0x1af319,{},function(_0x589e20){if(_0x589e20){logger[_0x2e0a('0x15')](_0x2e0a('0x39')+_0x1337ac);return _0x7cf12b(_0x589e20);}logger[_0x2e0a('0x15')](_0x2e0a('0x2')+_0x1337ac);return _0x13b64c();});}catch(_0x21b553){return _0x7cf12b(_0x21b553);}});};function _0x1e2938(_0x5002a6,_0x360b75,_0x3e8112,_0x18fa4a){return new Promise((_0x2fc118,_0x234016)=>{try{let _0x12cd8d=_0x2e0a('0x30')+_0x360b75[_0x2e0a('0x79')]+'/'+_0x18fa4a+'/'+_0x3e8112;let _0x15b4e3=_0x360b75['filepath']+'/'+_0x18fa4a+'/'+_0x3e8112;logger[_0x2e0a('0x15')](_0x2e0a('0x4c')+_0x12cd8d);logger['info']('Local\x20Path:\x20'+_0x15b4e3);_0x5002a6[_0x2e0a('0x9')](_0x12cd8d,_0x15b4e3,{},function(_0xe39c3a){if(_0xe39c3a){logger['info']('Error\x20downloading\x20file:\x20'+_0x3e8112);return _0x234016(_0xe39c3a);}logger[_0x2e0a('0x15')](_0x2e0a('0x58')+_0x3e8112);return _0x2fc118();});}catch(_0x579f43){return _0x234016(_0x579f43);}});};function _0x3a2adb(_0x49ac5f,_0x5a2f98,_0x222539,_0x4f7f31){_0x49ac5f[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0x5a2f98[_0x2e0a('0x79')],function(_0x1072d9){if(_0x1072d9){logger[_0x2e0a('0x15')]('Error\x20reading\x20user\x20file\x20system:\x20'+_0x1072d9);_0x49ac5f[_0x2e0a('0x85')](_0x2e0a('0x30')+_0x5a2f98[_0x2e0a('0x79')],function(_0x21e0a9){if(_0x21e0a9){logger[_0x2e0a('0x15')](_0x2e0a('0x5b')+_0x21e0a9);throw _0x21e0a9;}logger[_0x2e0a('0x15')](_0x2e0a('0x55'));_0x49ac5f[_0x2e0a('0x85')](_0x2e0a('0x30')+_0x5a2f98[_0x2e0a('0x79')]+_0x2e0a('0x67'),function(_0x12ae2f){if(_0x12ae2f){logger[_0x2e0a('0x15')](_0x2e0a('0x6')+_0x12ae2f);throw _0x12ae2f;}logger[_0x2e0a('0x15')](_0x2e0a('0x52'));_0x49ac5f[_0x2e0a('0x85')](_0x2e0a('0x30')+_0x5a2f98[_0x2e0a('0x79')]+_0x2e0a('0x27'),function(_0x35268e){if(_0x35268e){logger[_0x2e0a('0x15')](_0x2e0a('0x38')+_0x35268e);throw _0x35268e;}logger[_0x2e0a('0x15')](_0x2e0a('0x6c'));_0x4f7f31(_0x49ac5f,_0x5a2f98,_0x222539);});});});}_0x4f7f31(_0x49ac5f,_0x5a2f98,_0x222539);});};function _0x51d3b9(_0x3d8779,_0x3e46c3,_0x2b87c5){_0x3d8779['readdir'](_0x2e0a('0x30')+_0x3e46c3[_0x2e0a('0x79')]+_0x2e0a('0x67'),function(_0x199444,_0x4af452){if(_0x199444){logger[_0x2e0a('0x15')]('Error\x20reading\x20classroom\x20editor\x20files:\x20'+_0x199444);throw _0x199444;}_0x2930d9(_0x3e46c3,'Editor',_0x4af452,_0x2b87c5);});_0x3d8779[_0x2e0a('0x3f')](_0x2e0a('0x30')+_0x3e46c3[_0x2e0a('0x79')]+_0x2e0a('0x27'),function(_0x3b0444,_0x3d26d7){if(_0x3b0444){logger[_0x2e0a('0x15')](_0x2e0a('0x2e')+_0x3b0444);throw _0x3b0444;}_0x2930d9(_0x3e46c3,_0x2e0a('0x89'),_0x3d26d7,_0x2b87c5);});};function _0x2930d9(_0x3d11cf,_0x4eab6e,_0x52690a,_0x3b00a3){logger['info'](_0x2e0a('0xf'));if(_0x4eab6e==_0x2e0a('0x89')&&_0x52690a['length']==0x0){_0x3b00a3[_0x2e0a('0x19')]();}for(var _0x4485ca=0x0;_0x4485ca<_0x52690a[_0x2e0a('0xd')];_0x4485ca++){let _0x38063b='/home/c3/FusionFilesystem/'+_0x3d11cf[_0x2e0a('0x79')]+'/'+_0x4eab6e+'/'+_0x52690a[_0x4485ca][_0x2e0a('0x6f')];let _0xefab69=_0x2e0a('0x29')+_0x3d11cf[_0x2e0a('0x79')]+'/'+_0x4eab6e+'/';logger['info'](_0x2e0a('0x69')+_0x38063b+_0x2e0a('0x22')+_0xefab69);SCP[_0x2e0a('0x48')]('c3:root@172.16.0.1:'+_0x38063b,_0xefab69,function(_0x15a69a){if(_0x15a69a){logger[_0x2e0a('0x15')](_0x2e0a('0x6d')+_0x38063b+',\x20error:\x20'+_0x15a69a);}if(_0x4eab6e=='Blockly'&&(_0x4485ca=_0x52690a[_0x2e0a('0xd')]-0x1)){_0x3b00a3[_0x2e0a('0x19')]();}});}};}();