var _0x585b=['Error\x20connecting\x20to\x20','indexOf','emit','/api/admin/wirelessConnections/disconnect','writeFile','INACTIVE','/api/admin/crashReport','readdir','readFile','Error\x20reading\x20crash\x20file','Content-disposition','attachment;\x20filename=','download','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','SocketVariables','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','fusion_diagnostics_running','Diagnostic\x20tool\x20stopped\x20successfully','isAuthenticated','shelljs','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','exports','/api/admin/users','findOne','body','username','status','send','Username\x20already\x20taken.','password','generateHash','generateFileSystem','json','User\x20created!','get','/api/admin/powerOff','Shut\x20Down\x20Commencing','poweroff','/api/admin/restart','spawn','sudo','reboot','EOL','platform','win32','utf8','length','split','ssid','SSID','wpa_passphrase','Password','Wifi\x20file\x20not\x20found','post','/api/admin/wirelessSettings','etc','ssid_set.py','python','pipe','stderr','log','stdout','close','/api/admin/wirelessConnections','wlan1','Wireless\x20interface\x20not\x20found','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20wlan1\x20reconfigure','SCANNING','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','Ip\x20address:\x20','\x20assigned','sockets','wifi-connection','Connected\x20to\x20','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.'];(function(_0x32c596,_0xa3f556){var _0x3ce4bc=function(_0x13daf8){while(--_0x13daf8){_0x32c596['push'](_0x32c596['shift']());}};_0x3ce4bc(++_0xa3f556);}(_0x585b,0x159));var _0x524d=function(_0x4dce15,_0x1c6184){_0x4dce15=_0x4dce15-0x0;var _0x1a2633=_0x585b[_0x4dce15];return _0x1a2633;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require('path');var shell=require(_0x524d('0x0'));var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require(_0x524d('0x1'));var wpa_supplicant=require(_0x524d('0x2'));var spawn=require(_0x524d('0x3'))['spawn'];module[_0x524d('0x4')]=function(_0x3be4a6,_0x12973a,_0x3b743d,_0x14e75e,_0xf1be29){_0x3be4a6['post'](_0x524d('0x5'),_0x3365ae(),function(_0x1ef282,_0x39b152){_0x12973a[_0x524d('0x6')]({'username':_0x1ef282[_0x524d('0x7')][_0x524d('0x8')]},function(_0x30277d,_0x2aa72e){if(_0x30277d)return _0x39b152[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x30277d);if(_0x2aa72e){return _0x39b152[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x524d('0xb'));}else{var _0x11747d=new _0x12973a(_0x1ef282[_0x524d('0x7')]);_0x11747d[_0x524d('0x8')]=_0x1ef282[_0x524d('0x7')][_0x524d('0x8')];_0x11747d[_0x524d('0xc')]=_0x11747d[_0x524d('0xd')](_0x1ef282[_0x524d('0x7')]['password']);_0x11747d['filepath']=_0x11747d[_0x524d('0xe')](_0x11747d[_0x524d('0x8')]);_0x11747d['save'](function(_0x1b3a9c){if(_0x1b3a9c)return _0x39b152[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x1b3a9c);return _0x39b152[_0x524d('0x9')](0xc8)[_0x524d('0xf')]({'serverMessage':_0x524d('0x10')});});}});});_0x3be4a6[_0x524d('0x11')](_0x524d('0x12'),function(_0x184c45,_0x194c83){_0x194c83['status'](0xc8)[_0x524d('0xf')]({'serverMessage':_0x524d('0x13')});var _0x140565=require(_0x524d('0x3'))['spawn'];var _0x1610c6=_0x140565('sudo',[_0x524d('0x14')]);});_0x3be4a6[_0x524d('0x11')](_0x524d('0x15'),function(_0x1150a4,_0x298a6c){_0x298a6c['status'](0xc8)[_0x524d('0xa')]('Restart\x20Commencing');var _0x6c44c=require('child_process')[_0x524d('0x16')];var _0x41be02=_0x6c44c(_0x524d('0x17'),[_0x524d('0x18')]);});_0x3be4a6[_0x524d('0x11')]('/api/admin/wirelessSettings',function(_0x17bace,_0x175a73){var _0x457bdd;var _0x292ed0=require('os')[_0x524d('0x19')];var _0x50aeaa;var _0x1fc188;var _0x1576f5={};if(os[_0x524d('0x1a')]()==_0x524d('0x1b')){_0x457bdd='../../etc/hostapd.conf';fs['readFile'](_0x457bdd,_0x524d('0x1c'),function(_0x25d070,_0x7c1746){if(_0x25d070)_0x175a73[_0x524d('0x9')](0x1f4)[_0x524d('0xa')]('Wifi\x20file\x20not\x20found');_0x50aeaa=_0x7c1746['split']('\x0a');for(var _0x889651=0x0;_0x889651<_0x50aeaa[_0x524d('0x1d')];_0x889651++){_0x1fc188=_0x50aeaa[_0x889651][_0x524d('0x1e')]('=');if(_0x1fc188[0x0]==_0x524d('0x1f'))_0x1576f5[_0x524d('0x20')]=_0x1fc188[0x1];else if(_0x1fc188[0x0]==_0x524d('0x21'))_0x1576f5[_0x524d('0x22')]=_0x1fc188[0x1];}_0x175a73[_0x524d('0x9')](0xc8)[_0x524d('0xf')]({'SSID':_0x1576f5[_0x524d('0x20')],'Password':_0x1576f5['Password']});});}else{_0x457bdd='/etc/hostapd/hostapd.conf';fs['readFile'](_0x457bdd,_0x524d('0x1c'),function(_0x3ca3dd,_0x32b077){if(_0x3ca3dd)_0x175a73['status'](0x1f4)[_0x524d('0xa')](_0x524d('0x23'));_0x50aeaa=_0x32b077[_0x524d('0x1e')](_0x292ed0);for(var _0x214d90=0x0;_0x214d90<_0x50aeaa[_0x524d('0x1d')];_0x214d90++){_0x1fc188=_0x50aeaa[_0x214d90][_0x524d('0x1e')]('=');if(_0x1fc188[0x0]==_0x524d('0x1f'))_0x1576f5['SSID']=_0x1fc188[0x1];else if(_0x1fc188[0x0]=='wpa_passphrase')_0x1576f5[_0x524d('0x22')]=_0x1fc188[0x1];}_0x175a73[_0x524d('0x9')](0xc8)['json']({'SSID':_0x1576f5[_0x524d('0x20')],'Password':_0x1576f5[_0x524d('0x22')]});});}});_0x3be4a6[_0x524d('0x24')](_0x524d('0x25'),function(_0xae7fa5,_0x1048bb){try{var _0x4df28d;var _0x4b581a;var _0x14488b=path['join']('..','..',_0x524d('0x26'),_0x524d('0x27'));if(_0xae7fa5[_0x524d('0x7')][_0x524d('0x1f')]==null&&_0xae7fa5[_0x524d('0x7')][_0x524d('0xc')]==null)_0x4b581a=[_0x524d('0x28'),_0x14488b,'-d'];else _0x4b581a=[_0x524d('0x28'),_0x14488b,'-s',_0xae7fa5[_0x524d('0x7')][_0x524d('0x1f')],'-p',_0xae7fa5[_0x524d('0x7')][_0x524d('0xc')]];var _0x2cb450=require(_0x524d('0x3'))[_0x524d('0x16')];python_process=_0x2cb450(_0x524d('0x17'),_0x4b581a,{'stdio':_0x524d('0x29')});python_process[_0x524d('0x2a')]['on']('data',function(_0x31ef48){console[_0x524d('0x2b')](String(_0x31ef48));_0x4df28d=String(_0x31ef48);});python_process[_0x524d('0x2c')]['on'](_0x524d('0x2d'),function(_0x5db35b){if(_0x4df28d)return _0x1048bb[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x4df28d);else return _0x1048bb[_0x524d('0x9')](0xc8)[_0x524d('0xf')]({'serverMessage':'Successfully\x20changed\x20wifi\x20settings'});});}catch(_0x4754af){console[_0x524d('0x2b')](_0x4754af);return _0x1048bb[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x4754af);}});_0x3be4a6['get'](_0x524d('0x2e'),function(_0x53af09,_0x2fe3c6){if(os[_0x524d('0x1a')]()==_0x524d('0x1b')){return _0x2fe3c6[_0x524d('0x9')](0xc8)[_0x524d('0xa')]();}else{iwlist['scan'](_0x524d('0x2f'),function(_0x5c6add,_0x41f77e){if(_0x5c6add)return _0x2fe3c6['status'](0x1f4)['send'](_0x524d('0x30'));else return _0x2fe3c6[_0x524d('0x9')](0xc8)[_0x524d('0xa')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x41f77e});});}});_0x3be4a6[_0x524d('0x24')]('/api/admin/wirelessConnections',function(_0x2e76bf,_0x395e08){var _0x51968c=undefined;var _0x471324='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x524d('0x31')+_0x524d('0x32');var _0x42dcb5=_0x524d('0x33')+'\x09ssid=\x22'+_0x2e76bf[_0x524d('0x7')]['ssid']+'\x22\x0a'+_0x524d('0x34')+_0x524d('0x35')+_0x2e76bf['body'][_0x524d('0xc')]+'\x22\x0a'+_0x524d('0x36')+_0x524d('0x37');if(_0x2e76bf[_0x524d('0x7')][_0x524d('0xc')]){_0x51968c=shell[_0x524d('0x38')](_0x524d('0x39')+_0x2e76bf['body']['ssid']+'\x22\x20\x22'+_0x2e76bf[_0x524d('0x7')][_0x524d('0xc')]+'\x22',{'silent':!![]})[_0x524d('0x2c')];}else{_0x51968c=_0x524d('0x33')+_0x524d('0x3a')+_0x2e76bf['body'][_0x524d('0x1f')]+'\x22\x0a'+_0x524d('0x3b')+'}\x0a';}let _0x3c297b='';if(_0x2e76bf[_0x524d('0x7')][_0x524d('0x3c')])_0x3c297b=_0x471324+_0x42dcb5;else _0x3c297b=_0x471324+_0x51968c;fs['writeFile'](_0x524d('0x3d'),_0x3c297b,function(_0x540cc9){if(_0x540cc9)return _0x395e08[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x540cc9);shell[_0x524d('0x38')](_0x524d('0x3e'),{'silent':!![]});const _0x21eb47=0x3a98;var _0x16c068=0x12c;var _0x52611f=0x0;var _0x43d545=setInterval(function(){var _0x1c7524=[_0x524d('0x3f'),'4WAY_HANDSHAKE',_0x524d('0x40'),_0x524d('0x41'),_0x524d('0x42')];wpa_cli[_0x524d('0x9')](_0x524d('0x2f'),function(_0x26fdc1,_0x80297f){if(_0x26fdc1)return _0x395e08[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x26fdc1);if(_0x80297f[_0x524d('0x43')]==_0x524d('0x44')){if(_0x80297f['ip']){console[_0x524d('0x2b')](_0x524d('0x45')+_0x80297f['ip']+_0x524d('0x46'));clearInterval(_0x43d545);_0xf1be29['SocketVariables']['fusion_wifi_access']=_0x80297f;_0x14e75e[_0x524d('0x47')]['emit'](_0x524d('0x48'),_0x80297f);return _0x395e08[_0x524d('0x9')](0xc8)[_0x524d('0xf')]({'serverMessage':_0x524d('0x49')+_0x2e76bf[_0x524d('0x7')][_0x524d('0x1f')]+'\x20successfully'});}else if(_0x52611f>_0x21eb47){console[_0x524d('0x2b')](_0x524d('0x4a'));clearInterval(_0x43d545);return _0x395e08[_0x524d('0x9')](0x1f4)['send'](_0x524d('0x4b')+_0x2e76bf[_0x524d('0x7')]['ssid']);}_0x52611f+=_0x16c068;}else if(_0x1c7524[_0x524d('0x4c')](_0x80297f[_0x524d('0x43')])==-0x1){clearInterval(_0x43d545);_0x14e75e[_0x524d('0x47')][_0x524d('0x4d')](_0x524d('0x48'),_0x80297f);return _0x395e08['status'](0x1f4)[_0x524d('0xa')](_0x524d('0x4b')+_0x2e76bf['body'][_0x524d('0x1f')]);}});},_0x16c068);});});_0x3be4a6[_0x524d('0x11')](_0x524d('0x4e'),function(_0x5ea27e,_0x58999c){if(os['platform']()==_0x524d('0x1b')){_0x58999c[_0x524d('0x9')](0x1f4)[_0x524d('0xa')]('Disconnect\x20not\x20available\x20on\x20Windows');}else{var _0xe634fa='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x524d('0x32');fs[_0x524d('0x4f')](_0x524d('0x3d'),_0xe634fa,function(_0x1786fa){if(_0x1786fa)return _0x58999c['status'](0x1f4)[_0x524d('0xa')](_0x1786fa);shell[_0x524d('0x38')](_0x524d('0x3e'),{'silent':!![]});var _0xf66c10=setInterval(function(){var _0x13f9b5=[];wpa_cli[_0x524d('0x9')](_0x524d('0x2f'),function(_0x49e5b5,_0x47584a){if(_0x49e5b5)return _0x58999c['status'](0x1f4)[_0x524d('0xa')](_0x49e5b5);_0xf1be29['SocketVariables']['fusion_wifi_access']=_0x47584a;_0x14e75e[_0x524d('0x47')][_0x524d('0x4d')](_0x524d('0x48'),_0x47584a);if(_0x47584a[_0x524d('0x43')]==_0x524d('0x41')||_0x47584a[_0x524d('0x43')]==_0x524d('0x50')){clearInterval(_0xf66c10);_0x14e75e[_0x524d('0x47')][_0x524d('0x4d')](_0x524d('0x48'),_0x47584a);return _0x58999c[_0x524d('0x9')](0xc8)[_0x524d('0xf')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses['indexOf'](_0x47584a[_0x524d('0x43')])==-0x1){clearInterval(_0xf66c10);_0x14e75e[_0x524d('0x47')][_0x524d('0x4d')]('wifi-connection',_0x47584a);return _0x58999c['status'](0x1f4)['send']('Error\x20disconnecting');}});},0x12c);});}});_0x3be4a6[_0x524d('0x11')](_0x524d('0x51'),function(_0x254ae3,_0x29a727){var _0x25ba2b='.crash';fs[_0x524d('0x52')](_0x25ba2b,function(_0x433e0c,_0x7383d7){if(_0x433e0c)return _0x29a727[_0x524d('0x9')](0x1f4)[_0x524d('0xa')](_0x433e0c);if(_0x7383d7['length']>0x0){fs[_0x524d('0x53')](_0x25ba2b+'/'+_0x7383d7[0x0],'utf8',function(_0x3bcf4b,_0x154017){if(_0x3bcf4b)return status(0x1f4)[_0x524d('0xa')](_0x524d('0x54'));_0x29a727['setHeader'](_0x524d('0x55'),_0x524d('0x56')+_0x7383d7[0x0]);return _0x29a727[_0x524d('0x9')](0xc8)[_0x524d('0x57')](_0x25ba2b+'/'+_0x7383d7[0x0]);});}else{return _0x29a727[_0x524d('0x9')](0xc8)[_0x524d('0xa')]('No\x20crash\x20files\x20found');}});});var _0x406c81=null;_0x3be4a6[_0x524d('0x24')]('/api/diagnostics/start',function(_0x1704c6,_0x18ff2f){if(os['platform']()!=_0x524d('0x1b')){_0x406c81=spawn('sudo',['sh',_0x524d('0x58'),_0x524d('0x59')]);_0x406c81[_0x524d('0x2c')]['on'](_0x524d('0x5a'),function(_0x52272f){console[_0x524d('0x2b')](String(_0x52272f));});_0x406c81[_0x524d('0x2a')]['on'](_0x524d('0x5a'),function(_0x5e5bbf){console[_0x524d('0x2b')](String(_0x5e5bbf));});var _0x1869ba=0x1;var _0x4b78f6=0x3;var _0x3af221=setInterval(function(){if(_0x1869ba<=_0x4b78f6){var _0x1d9593=shell[_0x524d('0x38')](_0x524d('0x5b'),{'silent':!![]})[_0x524d('0x2c')];if(_0x1d9593){clearInterval(_0x3af221);_0xf1be29['SocketVariables']['fusion_diagnostics_running']={'process':_0x1d9593,'socket':_0x1704c6[_0x524d('0x7')][_0x524d('0x5c')]};_0x14e75e['sockets'][_0x524d('0x4d')](_0x524d('0x5d'),_0xf1be29[_0x524d('0x5e')]['fusion_diagnostics_running']);return _0x18ff2f['status'](0xc8)['json']({'serverMessage':_0x524d('0x5f')});}else{_0x1869ba++;}}else{clearInterval(_0x3af221);return _0x18ff2f[_0x524d('0x9')](0x1f4)['send'](_0x524d('0x60'));}},0x12c);}else{return _0x18ff2f['status'](0xc8)[_0x524d('0xf')]({'serverMessage':_0x524d('0x61')});}});_0x3be4a6[_0x524d('0x11')](_0x524d('0x62'),function(_0x73c001,_0x9ec716){if(os[_0x524d('0x1a')]()!='win32'){shell['exec'](_0x524d('0x63'),{'silent':!![]});shell[_0x524d('0x38')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x315ee9,_0x2a5363,_0x5ef7a8){(function(_0x5da7f7){var _0xe71ebf=_0x5da7f7[_0x524d('0x64')]();if(_0xe71ebf){return _0x9ec716['status'](0x1f4)[_0x524d('0xa')](_0x524d('0x65'));}else{_0xf1be29[_0x524d('0x5e')][_0x524d('0x66')]=null;_0x14e75e[_0x524d('0x47')][_0x524d('0x4d')](_0x524d('0x5d'),_0xf1be29['SocketVariables'][_0x524d('0x66')]);_0x406c81=null;return _0x9ec716[_0x524d('0x9')](0xc8)['json']({'serverMessage':_0x524d('0x67')});}}(_0x2a5363[_0x524d('0x64')]()));});}else{return _0x9ec716[_0x524d('0x9')](0xc8)['json']({'serverMessage':_0x524d('0x61')});}});function _0x3365ae(){return function(_0x51e98d,_0xdf82a4,_0x5222c9){if(_0x51e98d[_0x524d('0x68')]()){return _0x5222c9();}else{_0xdf82a4[_0x524d('0x9')](0x191)[_0x524d('0xa')]('User\x20Unauthenticated');}};}};