var _0x1bb0=['Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','fusion_diagnostics_running','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','User\x20Unauthenticated','path','shelljs','wireless-tools/wpa_supplicant','child_process','spawn','config','get','Wifi_NIC','post','/api/admin/users','findOne','username','status','send','Username\x20already\x20taken.','body','password','filepath','generateFileSystem','save','/api/admin/powerOff','json','Shut\x20Down\x20Commencing','sudo','poweroff','/api/admin/restart','Restart\x20Commencing','EOL','platform','win32','../../etc/hostapd.conf','readFile','Wifi\x20file\x20not\x20found','split','ssid','SSID','wpa_passphrase','utf8','length','Password','/api/admin/wirelessSettings','join','etc','ssid_set.py','python','pipe','stderr','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','scan','Wireless\x20interface\x20not\x20found','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09scan_ssid=1\x0a','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','4WAY_HANDSHAKE','AUTHENTICATING','ASSOCIATING','wpa_state','Ip\x20address:\x20','\x20assigned','SocketVariables','fusion_wifi_access','sockets','emit','wifi-connection','Connected\x20to\x20','\x20successfully','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','\x20reconfigure','DISCONNECTED','INACTIVE','Disconnected\x20successfully','indexOf'];(function(_0x2f3e31,_0x3a89c9){var _0x2c6db2=function(_0x1fa352){while(--_0x1fa352){_0x2f3e31['push'](_0x2f3e31['shift']());}};_0x2c6db2(++_0x3a89c9);}(_0x1bb0,0x1e0));var _0x4a3f=function(_0x4b315c,_0x2d152c){_0x4b315c=_0x4b315c-0x0;var _0x35a9d1=_0x1bb0[_0x4b315c];return _0x35a9d1;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require(_0x4a3f('0x0'));var shell=require(_0x4a3f('0x1'));var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require(_0x4a3f('0x2'));var spawn=require(_0x4a3f('0x3'))[_0x4a3f('0x4')];const config=require(_0x4a3f('0x5'));let nicInterface=config[_0x4a3f('0x6')](_0x4a3f('0x7'));module['exports']=function(_0x23651c,_0x2e6f63,_0x5ecb97,_0x25c657,_0x1d87ef){_0x23651c[_0x4a3f('0x8')](_0x4a3f('0x9'),_0x5336ff(),function(_0x2b1a7a,_0x2e64eb){_0x2e6f63[_0x4a3f('0xa')]({'username':_0x2b1a7a['body'][_0x4a3f('0xb')]},function(_0x3208d7,_0x1394bd){if(_0x3208d7)return _0x2e64eb[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x3208d7);if(_0x1394bd){return _0x2e64eb['status'](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0xe'));}else{var _0x49dfe6=new _0x2e6f63(_0x2b1a7a[_0x4a3f('0xf')]);_0x49dfe6[_0x4a3f('0xb')]=_0x2b1a7a[_0x4a3f('0xf')][_0x4a3f('0xb')];_0x49dfe6[_0x4a3f('0x10')]=_0x49dfe6['generateHash'](_0x2b1a7a[_0x4a3f('0xf')][_0x4a3f('0x10')]);_0x49dfe6[_0x4a3f('0x11')]=_0x49dfe6[_0x4a3f('0x12')](_0x49dfe6[_0x4a3f('0xb')]);_0x49dfe6[_0x4a3f('0x13')](function(_0x2b1a81){if(_0x2b1a81)return _0x2e64eb['status'](0x1f4)[_0x4a3f('0xd')](_0x2b1a81);return _0x2e64eb[_0x4a3f('0xc')](0xc8)['json']({'serverMessage':'User\x20created!'});});}});});_0x23651c[_0x4a3f('0x6')](_0x4a3f('0x14'),function(_0x2b94c2,_0x1d3cd4){_0x1d3cd4['status'](0xc8)[_0x4a3f('0x15')]({'serverMessage':_0x4a3f('0x16')});var _0xa4f726=require('child_process')[_0x4a3f('0x4')];var _0x50ee08=_0xa4f726(_0x4a3f('0x17'),[_0x4a3f('0x18')]);});_0x23651c[_0x4a3f('0x6')](_0x4a3f('0x19'),function(_0x51c807,_0x2685b9){_0x2685b9['status'](0xc8)['send'](_0x4a3f('0x1a'));var _0xa2a7dd=require(_0x4a3f('0x3'))[_0x4a3f('0x4')];var _0x4d8547=_0xa2a7dd(_0x4a3f('0x17'),['reboot']);});_0x23651c[_0x4a3f('0x6')]('/api/admin/wirelessSettings',function(_0xa6e014,_0xf1c425){var _0x1e2050;var _0x38ab8c=require('os')[_0x4a3f('0x1b')];var _0x5c3870;var _0x53ade;var _0x45da11={};if(os[_0x4a3f('0x1c')]()==_0x4a3f('0x1d')){_0x1e2050=_0x4a3f('0x1e');fs[_0x4a3f('0x1f')](_0x1e2050,'utf8',function(_0x807435,_0x590f7f){if(_0x807435)_0xf1c425['status'](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x20'));_0x5c3870=_0x590f7f[_0x4a3f('0x21')]('\x0a');for(var _0x57ca5c=0x0;_0x57ca5c<_0x5c3870['length'];_0x57ca5c++){_0x53ade=_0x5c3870[_0x57ca5c][_0x4a3f('0x21')]('=');if(_0x53ade[0x0]==_0x4a3f('0x22'))_0x45da11[_0x4a3f('0x23')]=_0x53ade[0x1];else if(_0x53ade[0x0]==_0x4a3f('0x24'))_0x45da11['Password']=_0x53ade[0x1];}_0xf1c425[_0x4a3f('0xc')](0xc8)['json']({'SSID':_0x45da11[_0x4a3f('0x23')],'Password':_0x45da11['Password']});});}else{_0x1e2050='/etc/hostapd/hostapd.conf';fs[_0x4a3f('0x1f')](_0x1e2050,_0x4a3f('0x25'),function(_0x2ee410,_0x487dff){if(_0x2ee410)_0xf1c425['status'](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x20'));_0x5c3870=_0x487dff[_0x4a3f('0x21')](_0x38ab8c);for(var _0x55bc5d=0x0;_0x55bc5d<_0x5c3870[_0x4a3f('0x26')];_0x55bc5d++){_0x53ade=_0x5c3870[_0x55bc5d][_0x4a3f('0x21')]('=');if(_0x53ade[0x0]==_0x4a3f('0x22'))_0x45da11[_0x4a3f('0x23')]=_0x53ade[0x1];else if(_0x53ade[0x0]==_0x4a3f('0x24'))_0x45da11[_0x4a3f('0x27')]=_0x53ade[0x1];}_0xf1c425['status'](0xc8)[_0x4a3f('0x15')]({'SSID':_0x45da11[_0x4a3f('0x23')],'Password':_0x45da11[_0x4a3f('0x27')]});});}});_0x23651c[_0x4a3f('0x8')](_0x4a3f('0x28'),function(_0xe4c65,_0x50d4ec){try{var _0x20d739;var _0x200ca4;var _0x268cd4=path[_0x4a3f('0x29')]('..','..',_0x4a3f('0x2a'),_0x4a3f('0x2b'));if(_0xe4c65['body'][_0x4a3f('0x22')]==null&&_0xe4c65['body'][_0x4a3f('0x10')]==null)_0x200ca4=[_0x4a3f('0x2c'),_0x268cd4,'-d'];else _0x200ca4=['python',_0x268cd4,'-s',_0xe4c65[_0x4a3f('0xf')][_0x4a3f('0x22')],'-p',_0xe4c65['body'][_0x4a3f('0x10')]];var _0x37d07a=require(_0x4a3f('0x3'))['spawn'];python_process=_0x37d07a(_0x4a3f('0x17'),_0x200ca4,{'stdio':_0x4a3f('0x2d')});python_process[_0x4a3f('0x2e')]['on']('data',function(_0xdab7a8){console[_0x4a3f('0x2f')](String(_0xdab7a8));_0x20d739=String(_0xdab7a8);});python_process[_0x4a3f('0x30')]['on'](_0x4a3f('0x31'),function(_0x559c54){if(_0x20d739)return _0x50d4ec[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x20d739);else return _0x50d4ec[_0x4a3f('0xc')](0xc8)[_0x4a3f('0x15')]({'serverMessage':_0x4a3f('0x32')});});}catch(_0x3a4c8e){console[_0x4a3f('0x2f')](_0x3a4c8e);return _0x50d4ec[_0x4a3f('0xc')](0x1f4)['send'](_0x3a4c8e);}});_0x23651c['get'](_0x4a3f('0x33'),function(_0x5321fc,_0x5dd45c){if(os['platform']()==_0x4a3f('0x1d')){return _0x5dd45c[_0x4a3f('0xc')](0xc8)['send']();}else{iwlist[_0x4a3f('0x34')](nicInterface,function(_0x20031a,_0x434e0d){if(_0x20031a)return _0x5dd45c[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x35'));else return _0x5dd45c['status'](0xc8)[_0x4a3f('0xd')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x434e0d});});}});_0x23651c[_0x4a3f('0x8')](_0x4a3f('0x33'),function(_0xf194c0,_0x347e62){var _0x1f6479=undefined;var _0x2ae4d6='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x4a3f('0x36')+_0x4a3f('0x37');var _0xd16c02=_0x4a3f('0x38')+'\x09ssid=\x22'+_0xf194c0[_0x4a3f('0xf')][_0x4a3f('0x22')]+'\x22\x0a'+_0x4a3f('0x39')+'\x09psk=\x22'+_0xf194c0[_0x4a3f('0xf')]['password']+'\x22\x0a'+_0x4a3f('0x3a')+_0x4a3f('0x3b');if(_0xf194c0[_0x4a3f('0xf')]['password']){_0x1f6479=shell[_0x4a3f('0x3c')](_0x4a3f('0x3d')+_0xf194c0[_0x4a3f('0xf')]['ssid']+_0x4a3f('0x3e')+_0xf194c0[_0x4a3f('0xf')][_0x4a3f('0x10')]+'\x22',{'silent':!![]})[_0x4a3f('0x30')];}else{_0x1f6479='network={\x0a'+_0x4a3f('0x3f')+_0xf194c0[_0x4a3f('0xf')]['ssid']+'\x22\x0a'+_0x4a3f('0x40')+'}\x0a';}let _0x4520c9='';if(_0xf194c0[_0x4a3f('0xf')][_0x4a3f('0x41')])_0x4520c9=_0x2ae4d6+_0xd16c02;else _0x4520c9=_0x2ae4d6+_0x1f6479;fs[_0x4a3f('0x42')](_0x4a3f('0x43'),_0x4520c9,function(_0x39fb47){if(_0x39fb47)return _0x347e62[_0x4a3f('0xc')](0x1f4)['send'](_0x39fb47);shell[_0x4a3f('0x3c')](_0x4a3f('0x44')+nicInterface+'\x20reconfigure',{'silent':!![]});const _0x381e46=0x3a98;var _0x598c48=0x12c;var _0x8330c3=0x0;var _0x35b69e=setInterval(function(){var _0x3b903e=['SCANNING',_0x4a3f('0x45'),_0x4a3f('0x46'),'DISCONNECTED',_0x4a3f('0x47')];wpa_cli[_0x4a3f('0xc')](nicInterface,function(_0x1df363,_0x56c60e){if(_0x1df363)return _0x347e62[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x1df363);if(_0x56c60e[_0x4a3f('0x48')]=='COMPLETED'){if(_0x56c60e['ip']){console['log'](_0x4a3f('0x49')+_0x56c60e['ip']+_0x4a3f('0x4a'));clearInterval(_0x35b69e);_0x1d87ef[_0x4a3f('0x4b')][_0x4a3f('0x4c')]=_0x56c60e;_0x25c657[_0x4a3f('0x4d')][_0x4a3f('0x4e')](_0x4a3f('0x4f'),_0x56c60e);return _0x347e62[_0x4a3f('0xc')](0xc8)[_0x4a3f('0x15')]({'serverMessage':_0x4a3f('0x50')+_0xf194c0['body'][_0x4a3f('0x22')]+_0x4a3f('0x51')});}else if(_0x8330c3>_0x381e46){console[_0x4a3f('0x2f')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x35b69e);return _0x347e62[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')]('Error\x20connecting\x20to\x20'+_0xf194c0[_0x4a3f('0xf')][_0x4a3f('0x22')]);}_0x8330c3+=_0x598c48;}else if(_0x3b903e['indexOf'](_0x56c60e[_0x4a3f('0x48')])==-0x1){clearInterval(_0x35b69e);_0x25c657[_0x4a3f('0x4d')][_0x4a3f('0x4e')](_0x4a3f('0x4f'),_0x56c60e);return _0x347e62['status'](0x1f4)[_0x4a3f('0xd')]('Error\x20connecting\x20to\x20'+_0xf194c0[_0x4a3f('0xf')][_0x4a3f('0x22')]);}});},_0x598c48);});});_0x23651c[_0x4a3f('0x6')](_0x4a3f('0x52'),function(_0x2e85bf,_0xf98e9d){if(os[_0x4a3f('0x1c')]()==_0x4a3f('0x1d')){_0xf98e9d[_0x4a3f('0xc')](0x1f4)['send'](_0x4a3f('0x53'));}else{var _0x20c923=_0x4a3f('0x54')+_0x4a3f('0x36')+_0x4a3f('0x37');fs[_0x4a3f('0x42')](_0x4a3f('0x43'),_0x20c923,function(_0x52306c){if(_0x52306c)return _0xf98e9d[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x52306c);shell['exec'](_0x4a3f('0x44')+nicInterface+_0x4a3f('0x55'),{'silent':!![]});var _0x14a47b=setInterval(function(){var _0x5c67f5=[];wpa_cli[_0x4a3f('0xc')](nicInterface,function(_0x134aae,_0x337190){if(_0x134aae)return _0xf98e9d[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x134aae);_0x1d87ef['SocketVariables'][_0x4a3f('0x4c')]=_0x337190;_0x25c657[_0x4a3f('0x4d')][_0x4a3f('0x4e')](_0x4a3f('0x4f'),_0x337190);if(_0x337190[_0x4a3f('0x48')]==_0x4a3f('0x56')||_0x337190['wpa_state']==_0x4a3f('0x57')){clearInterval(_0x14a47b);_0x25c657[_0x4a3f('0x4d')][_0x4a3f('0x4e')](_0x4a3f('0x4f'),_0x337190);return _0xf98e9d['status'](0xc8)[_0x4a3f('0x15')]({'serverMessage':_0x4a3f('0x58')});}else if(connectingStatuses[_0x4a3f('0x59')](_0x337190[_0x4a3f('0x48')])==-0x1){clearInterval(_0x14a47b);_0x25c657[_0x4a3f('0x4d')][_0x4a3f('0x4e')](_0x4a3f('0x4f'),_0x337190);return _0xf98e9d[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x5a'));}});},0x12c);});}});_0x23651c[_0x4a3f('0x6')](_0x4a3f('0x5b'),function(_0xe8d965,_0x2b68bd){var _0x33dab7=_0x4a3f('0x5c');fs[_0x4a3f('0x5d')](_0x33dab7,function(_0x582461,_0xf660c9){if(_0x582461)return _0x2b68bd[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x582461);if(_0xf660c9[_0x4a3f('0x26')]>0x0){fs[_0x4a3f('0x1f')](_0x33dab7+'/'+_0xf660c9[0x0],'utf8',function(_0x49bf0a,_0x3a3c98){if(_0x49bf0a)return status(0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x5e'));_0x2b68bd[_0x4a3f('0x5f')]('Content-disposition','attachment;\x20filename='+_0xf660c9[0x0]);return _0x2b68bd[_0x4a3f('0xc')](0xc8)[_0x4a3f('0x60')](_0x33dab7+'/'+_0xf660c9[0x0]);});}else{return _0x2b68bd[_0x4a3f('0xc')](0xc8)[_0x4a3f('0xd')](_0x4a3f('0x61'));}});});var _0x5731ac=null;_0x23651c[_0x4a3f('0x8')](_0x4a3f('0x62'),function(_0x4673fc,_0x51d153){if(os['platform']()!=_0x4a3f('0x1d')){_0x5731ac=spawn('sudo',['sh',_0x4a3f('0x63'),_0x4a3f('0x64')]);_0x5731ac[_0x4a3f('0x30')]['on']('data',function(_0x186c2b){console[_0x4a3f('0x2f')](String(_0x186c2b));});_0x5731ac['stderr']['on'](_0x4a3f('0x65'),function(_0xcb91b0){console[_0x4a3f('0x2f')](String(_0xcb91b0));});var _0x343bbd=0x1;var _0x416044=0x3;var _0x51ec06=setInterval(function(){if(_0x343bbd<=_0x416044){var _0x4aa6de=shell['exec'](_0x4a3f('0x66'),{'silent':!![]})[_0x4a3f('0x30')];if(_0x4aa6de){clearInterval(_0x51ec06);_0x1d87ef[_0x4a3f('0x4b')]['fusion_diagnostics_running']={'process':_0x4aa6de,'socket':_0x4673fc['body'][_0x4a3f('0x67')]};_0x25c657[_0x4a3f('0x4d')]['emit'](_0x4a3f('0x68'),_0x1d87ef[_0x4a3f('0x4b')][_0x4a3f('0x69')]);return _0x51d153['status'](0xc8)[_0x4a3f('0x15')]({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x343bbd++;}}else{clearInterval(_0x51ec06);return _0x51d153[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x6a'));}},0x12c);}else{return _0x51d153['status'](0xc8)[_0x4a3f('0x15')]({'serverMessage':_0x4a3f('0x6b')});}});_0x23651c[_0x4a3f('0x6')](_0x4a3f('0x6c'),function(_0x4e13df,_0xbd1cad){if(os[_0x4a3f('0x1c')]()!='win32'){shell['exec'](_0x4a3f('0x6d'),{'silent':!![]});shell[_0x4a3f('0x3c')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x2e1f80,_0x5d8197,_0x2fff56){(function(_0x22e95f){var _0x28fd31=_0x22e95f[_0x4a3f('0x6e')]();if(_0x28fd31){return _0xbd1cad[_0x4a3f('0xc')](0x1f4)[_0x4a3f('0xd')](_0x4a3f('0x6f'));}else{_0x1d87ef['SocketVariables'][_0x4a3f('0x69')]=null;_0x25c657[_0x4a3f('0x4d')]['emit'](_0x4a3f('0x68'),_0x1d87ef[_0x4a3f('0x4b')][_0x4a3f('0x69')]);_0x5731ac=null;return _0xbd1cad[_0x4a3f('0xc')](0xc8)['json']({'serverMessage':_0x4a3f('0x70')});}}(_0x5d8197[_0x4a3f('0x6e')]()));});}else{return _0xbd1cad['status'](0xc8)['json']({'serverMessage':_0x4a3f('0x6b')});}});function _0x5336ff(){return function(_0x2aba8e,_0x551f59,_0x106b89){if(_0x2aba8e['isAuthenticated']()){return _0x106b89();}else{_0x551f59['status'](0x191)[_0x4a3f('0xd')](_0x4a3f('0x71'));}};}};