var _0x4e6e=['setHeader','download','No\x20crash\x20files\x20found','/api/diagnostics/start','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','fusion_diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','diagnostics_running','isAuthenticated','User\x20Unauthenticated','path','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','spawn','config','get','Wifi_NIC','exports','post','/api/admin/users','findOne','status','send','Username\x20already\x20taken.','body','username','password','generateHash','generateFileSystem','save','json','/api/admin/powerOff','sudo','poweroff','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','platform','win32','../../etc/config-wap/hostapd.conf__npp.sh','utf8','Wifi\x20file\x20not\x20found','split','length','ssid','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','readFile','SSID','join','ssid_set.py','python','pipe','stderr','log','close','/api/admin/wirelessConnections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','stdout','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','COMPLETED','Ip\x20address:\x20','SocketVariables','fusion_wifi_access','sockets','wifi-connection','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','indexOf','wpa_state','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','emit','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','readdir','Error\x20reading\x20crash\x20file'];(function(_0x287f1a,_0x97402d){var _0x58f685=function(_0x327087){while(--_0x327087){_0x287f1a['push'](_0x287f1a['shift']());}};_0x58f685(++_0x97402d);}(_0x4e6e,0x79));var _0x58c3=function(_0x12b5b6,_0x8098af){_0x12b5b6=_0x12b5b6-0x0;var _0x822bcf=_0x4e6e[_0x12b5b6];return _0x822bcf;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require(_0x58c3('0x0'));var shell=require('shelljs');var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require(_0x58c3('0x1'));var wpa_supplicant=require(_0x58c3('0x2'));var spawn=require(_0x58c3('0x3'))[_0x58c3('0x4')];const config=require(_0x58c3('0x5'));let nicInterface=config[_0x58c3('0x6')](_0x58c3('0x7'));module[_0x58c3('0x8')]=function(_0x265e63,_0x5ecbbf,_0x574b70,_0x25eb2f,_0x4e5bc7){_0x265e63[_0x58c3('0x9')](_0x58c3('0xa'),_0x369521(),function(_0x94ef3,_0x550715){_0x5ecbbf[_0x58c3('0xb')]({'username':_0x94ef3['body']['username']},function(_0xd9737c,_0x3c5bb6){if(_0xd9737c)return _0x550715[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0xd9737c);if(_0x3c5bb6){return _0x550715[_0x58c3('0xc')](0x1f4)['send'](_0x58c3('0xe'));}else{var _0x5d3b84=new _0x5ecbbf(_0x94ef3[_0x58c3('0xf')]);_0x5d3b84['username']=_0x94ef3[_0x58c3('0xf')][_0x58c3('0x10')];_0x5d3b84[_0x58c3('0x11')]=_0x5d3b84[_0x58c3('0x12')](_0x94ef3[_0x58c3('0xf')]['password']);_0x5d3b84['filepath']=_0x5d3b84[_0x58c3('0x13')](_0x5d3b84[_0x58c3('0x10')]);_0x5d3b84[_0x58c3('0x14')](function(_0x564c64){if(_0x564c64)return _0x550715[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x564c64);return _0x550715[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':'User\x20created!'});});}});});_0x265e63[_0x58c3('0x6')](_0x58c3('0x16'),function(_0x30f579,_0x29dd7f){_0x29dd7f[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':'Shut\x20Down\x20Commencing'});var _0x58a68b=require('child_process')[_0x58c3('0x4')];var _0x4568f1=_0x58a68b(_0x58c3('0x17'),[_0x58c3('0x18')]);});_0x265e63[_0x58c3('0x6')]('/api/admin/restart',function(_0x48e7c6,_0x958370){_0x958370[_0x58c3('0xc')](0xc8)['send'](_0x58c3('0x19'));var _0x31c76b=require('child_process')[_0x58c3('0x4')];var _0x48cc7a=_0x31c76b('sudo',[_0x58c3('0x1a')]);});_0x265e63[_0x58c3('0x6')](_0x58c3('0x1b'),function(_0x5e1d26,_0x635f29){var _0x4be376;var _0x53433a=require('os')[_0x58c3('0x1c')];var _0x429c9;var _0x295c8f;var _0x257d3a={};if(os[_0x58c3('0x1d')]()==_0x58c3('0x1e')){_0x4be376=_0x58c3('0x1f');fs['readFile'](_0x4be376,_0x58c3('0x20'),function(_0x5e5e22,_0x2737b4){if(_0x5e5e22)_0x635f29[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x58c3('0x21'));_0x429c9=_0x2737b4[_0x58c3('0x22')]('\x0a');for(var _0x262dd6=0x0;_0x262dd6<_0x429c9[_0x58c3('0x23')];_0x262dd6++){_0x295c8f=_0x429c9[_0x262dd6][_0x58c3('0x22')]('=');if(_0x295c8f[0x0]==_0x58c3('0x24'))_0x257d3a['SSID']=_0x295c8f[0x1];else if(_0x295c8f[0x0]==_0x58c3('0x25'))_0x257d3a[_0x58c3('0x26')]=_0x295c8f[0x1];}_0x635f29[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'SSID':_0x257d3a['SSID'],'Password':_0x257d3a[_0x58c3('0x26')]});});}else{_0x4be376=_0x58c3('0x27');fs[_0x58c3('0x28')](_0x4be376,_0x58c3('0x20'),function(_0x391530,_0x5454aa){if(_0x391530)_0x635f29['status'](0x1f4)[_0x58c3('0xd')]('Wifi\x20file\x20not\x20found');_0x429c9=_0x5454aa[_0x58c3('0x22')](_0x53433a);for(var _0x4c24ef=0x0;_0x4c24ef<_0x429c9['length'];_0x4c24ef++){_0x295c8f=_0x429c9[_0x4c24ef]['split']('=');if(_0x295c8f[0x0]=='ssid')_0x257d3a[_0x58c3('0x29')]=_0x295c8f[0x1];else if(_0x295c8f[0x0]==_0x58c3('0x25'))_0x257d3a[_0x58c3('0x26')]=_0x295c8f[0x1];}if(!_0x257d3a[_0x58c3('0x29')]){_0x257d3a[_0x58c3('0x29')]='Not\x20configured..';_0x257d3a[_0x58c3('0x26')]='';}_0x635f29[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'SSID':_0x257d3a[_0x58c3('0x29')],'Password':_0x257d3a[_0x58c3('0x26')]});});}});_0x265e63[_0x58c3('0x9')](_0x58c3('0x1b'),function(_0xc36124,_0x570d77){try{var _0x1e516a;var _0x5b4a2a;var _0x5518a0=path[_0x58c3('0x2a')]('..','..','etc',_0x58c3('0x2b'));if(_0xc36124['body'][_0x58c3('0x24')]==null&&_0xc36124[_0x58c3('0xf')][_0x58c3('0x11')]==null)_0x5b4a2a=[_0x58c3('0x2c'),_0x5518a0,'-d'];else _0x5b4a2a=[_0x58c3('0x2c'),_0x5518a0,'-s',_0xc36124[_0x58c3('0xf')][_0x58c3('0x24')],'-p',_0xc36124[_0x58c3('0xf')][_0x58c3('0x11')]];var _0x53d276=require(_0x58c3('0x3'))[_0x58c3('0x4')];python_process=_0x53d276(_0x58c3('0x17'),_0x5b4a2a,{'stdio':_0x58c3('0x2d')});python_process[_0x58c3('0x2e')]['on']('data',function(_0x4e954e){console[_0x58c3('0x2f')](String(_0x4e954e));_0x1e516a=String(_0x4e954e);});python_process['stdout']['on'](_0x58c3('0x30'),function(_0x319338){if(_0x1e516a)return _0x570d77[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x1e516a);else return _0x570d77[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':'Successfully\x20changed\x20wifi\x20settings'});});}catch(_0x15a72e){console[_0x58c3('0x2f')](_0x15a72e);return _0x570d77['status'](0x1f4)[_0x58c3('0xd')](_0x15a72e);}});_0x265e63[_0x58c3('0x6')]('/api/admin/wirelessConnections',function(_0x564694,_0x2760a3){if(os[_0x58c3('0x1d')]()=='win32'){return _0x2760a3[_0x58c3('0xc')](0xc8)[_0x58c3('0xd')]();}else{iwlist['scan'](nicInterface,function(_0x4b6374,_0x1946c7){if(_0x4b6374)return _0x2760a3[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')]('Wireless\x20interface\x20not\x20found');else return _0x2760a3[_0x58c3('0xc')](0xc8)[_0x58c3('0xd')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x1946c7});});}});_0x265e63[_0x58c3('0x9')](_0x58c3('0x31'),function(_0x2d0fe0,_0x54a43f){var _0x12f2ad=undefined;var _0x57d294=_0x58c3('0x32')+_0x58c3('0x33')+_0x58c3('0x34');var _0x3e8c3d=_0x58c3('0x35')+_0x58c3('0x36')+_0x2d0fe0[_0x58c3('0xf')][_0x58c3('0x24')]+'\x22\x0a'+_0x58c3('0x37')+_0x58c3('0x38')+_0x2d0fe0['body'][_0x58c3('0x11')]+'\x22\x0a'+_0x58c3('0x39')+_0x58c3('0x3a');if(_0x2d0fe0['body']['password']){_0x12f2ad=shell[_0x58c3('0x3b')](_0x58c3('0x3c')+_0x2d0fe0['body'][_0x58c3('0x24')]+_0x58c3('0x3d')+_0x2d0fe0['body'][_0x58c3('0x11')]+'\x22',{'silent':!![]})[_0x58c3('0x3e')];}else{_0x12f2ad='network={\x0a'+'\x20\x20\x20\x20ssid=\x22'+_0x2d0fe0[_0x58c3('0xf')][_0x58c3('0x24')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0xf07497='';if(_0x2d0fe0['body'][_0x58c3('0x3f')])_0xf07497=_0x57d294+_0x3e8c3d;else _0xf07497=_0x57d294+_0x12f2ad;fs[_0x58c3('0x40')](_0x58c3('0x41'),_0xf07497,function(_0x240a59){if(_0x240a59)return _0x54a43f[_0x58c3('0xc')](0x1f4)['send'](_0x240a59);shell[_0x58c3('0x3b')](_0x58c3('0x42')+nicInterface+_0x58c3('0x43'),{'silent':!![]});const _0x53a3aa=0x3a98;var _0x297101=0x12c;var _0x2d649f=0x0;var _0x20a9b9=setInterval(function(){var _0x1a0fd1=[_0x58c3('0x44'),_0x58c3('0x45'),_0x58c3('0x46'),_0x58c3('0x47'),'ASSOCIATING'];wpa_cli[_0x58c3('0xc')](nicInterface,function(_0x376d57,_0x54f7ee){if(_0x376d57)return _0x54a43f['status'](0x1f4)['send'](_0x376d57);if(_0x54f7ee['wpa_state']==_0x58c3('0x48')){if(_0x54f7ee['ip']){console[_0x58c3('0x2f')](_0x58c3('0x49')+_0x54f7ee['ip']+'\x20assigned');clearInterval(_0x20a9b9);_0x4e5bc7[_0x58c3('0x4a')][_0x58c3('0x4b')]=_0x54f7ee;_0x25eb2f[_0x58c3('0x4c')]['emit'](_0x58c3('0x4d'),_0x54f7ee);return _0x54a43f['status'](0xc8)[_0x58c3('0x15')]({'serverMessage':'Connected\x20to\x20'+_0x2d0fe0[_0x58c3('0xf')]['ssid']+_0x58c3('0x4e')});}else if(_0x2d649f>_0x53a3aa){console[_0x58c3('0x2f')](_0x58c3('0x4f'));clearInterval(_0x20a9b9);return _0x54a43f[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x58c3('0x50')+_0x2d0fe0['body']['ssid']);}_0x2d649f+=_0x297101;}else if(_0x1a0fd1[_0x58c3('0x51')](_0x54f7ee[_0x58c3('0x52')])==-0x1){clearInterval(_0x20a9b9);_0x25eb2f[_0x58c3('0x4c')]['emit']('wifi-connection',_0x54f7ee);return _0x54a43f[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x58c3('0x50')+_0x2d0fe0['body'][_0x58c3('0x24')]);}});},_0x297101);});});_0x265e63[_0x58c3('0x6')](_0x58c3('0x53'),function(_0x4fa16e,_0x1e3c16){if(os['platform']()==_0x58c3('0x1e')){_0x1e3c16[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x58c3('0x54'));}else{var _0x56f525=_0x58c3('0x32')+'update_config=1\x0a'+_0x58c3('0x34');fs[_0x58c3('0x40')](_0x58c3('0x41'),_0x56f525,function(_0x1be3cd){if(_0x1be3cd)return _0x1e3c16[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x1be3cd);shell[_0x58c3('0x3b')](_0x58c3('0x42')+nicInterface+_0x58c3('0x43'),{'silent':!![]});var _0x5d395b=setInterval(function(){var _0x3c5adc=[];wpa_cli[_0x58c3('0xc')](nicInterface,function(_0x12f659,_0x5f0192){if(_0x12f659)return _0x1e3c16['status'](0x1f4)[_0x58c3('0xd')](_0x12f659);_0x4e5bc7[_0x58c3('0x4a')][_0x58c3('0x4b')]=_0x5f0192;_0x25eb2f[_0x58c3('0x4c')][_0x58c3('0x55')](_0x58c3('0x4d'),_0x5f0192);if(_0x5f0192[_0x58c3('0x52')]==_0x58c3('0x47')||_0x5f0192[_0x58c3('0x52')]==_0x58c3('0x56')){clearInterval(_0x5d395b);_0x25eb2f[_0x58c3('0x4c')][_0x58c3('0x55')](_0x58c3('0x4d'),_0x5f0192);return _0x1e3c16[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':_0x58c3('0x57')});}else if(connectingStatuses[_0x58c3('0x51')](_0x5f0192[_0x58c3('0x52')])==-0x1){clearInterval(_0x5d395b);_0x25eb2f[_0x58c3('0x4c')][_0x58c3('0x55')](_0x58c3('0x4d'),_0x5f0192);return _0x1e3c16[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')](_0x58c3('0x58'));}});},0x12c);});}});_0x265e63[_0x58c3('0x6')]('/api/admin/crashReport',function(_0x97267c,_0x17ac32){var _0x245de6='.crash';fs[_0x58c3('0x59')](_0x245de6,function(_0x2fe797,_0x9b1c5b){if(_0x2fe797)return _0x17ac32['status'](0x1f4)[_0x58c3('0xd')](_0x2fe797);if(_0x9b1c5b[_0x58c3('0x23')]>0x0){fs[_0x58c3('0x28')](_0x245de6+'/'+_0x9b1c5b[0x0],_0x58c3('0x20'),function(_0x26275f,_0x382d50){if(_0x26275f)return status(0x1f4)[_0x58c3('0xd')](_0x58c3('0x5a'));_0x17ac32[_0x58c3('0x5b')]('Content-disposition','attachment;\x20filename='+_0x9b1c5b[0x0]);return _0x17ac32['status'](0xc8)[_0x58c3('0x5c')](_0x245de6+'/'+_0x9b1c5b[0x0]);});}else{return _0x17ac32['status'](0xc8)['send'](_0x58c3('0x5d'));}});});var _0xb5dd75=null;_0x265e63[_0x58c3('0x9')](_0x58c3('0x5e'),function(_0x1a084a,_0x51740a){if(os[_0x58c3('0x1d')]()!=_0x58c3('0x1e')){_0xb5dd75=spawn(_0x58c3('0x17'),['sh','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py']);_0xb5dd75[_0x58c3('0x3e')]['on'](_0x58c3('0x5f'),function(_0x6e14fe){console['log'](String(_0x6e14fe));});_0xb5dd75['stderr']['on'](_0x58c3('0x5f'),function(_0x39b8ab){console[_0x58c3('0x2f')](String(_0x39b8ab));});var _0x252ec6=0x1;var _0x4c613d=0x3;var _0x3d0670=setInterval(function(){if(_0x252ec6<=_0x4c613d){var _0xcb764e=shell[_0x58c3('0x3b')](_0x58c3('0x60'),{'silent':!![]})['stdout'];if(_0xcb764e){clearInterval(_0x3d0670);_0x4e5bc7[_0x58c3('0x4a')][_0x58c3('0x61')]={'process':_0xcb764e,'socket':_0x1a084a[_0x58c3('0xf')]['socketId']};_0x25eb2f['sockets'][_0x58c3('0x55')]('diagnostics_running',_0x4e5bc7['SocketVariables'][_0x58c3('0x61')]);return _0x51740a[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':_0x58c3('0x62')});}else{_0x252ec6++;}}else{clearInterval(_0x3d0670);return _0x51740a['status'](0x1f4)[_0x58c3('0xd')](_0x58c3('0x63'));}},0x12c);}else{return _0x51740a['status'](0xc8)['json']({'serverMessage':_0x58c3('0x64')});}});_0x265e63[_0x58c3('0x6')]('/api/diagnostics/stop',function(_0x56ea73,_0x287262){if(os[_0x58c3('0x1d')]()!=_0x58c3('0x1e')){shell[_0x58c3('0x3b')](_0x58c3('0x65'),{'silent':!![]});shell[_0x58c3('0x3b')](_0x58c3('0x60'),{'silent':!![]},function(_0x25f051,_0x54a3d8,_0x139225){(function(_0x1cd1b3){var _0x5f3b3e=_0x1cd1b3[_0x58c3('0x66')]();if(_0x5f3b3e){return _0x287262[_0x58c3('0xc')](0x1f4)[_0x58c3('0xd')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x4e5bc7[_0x58c3('0x4a')]['fusion_diagnostics_running']=null;_0x25eb2f[_0x58c3('0x4c')]['emit'](_0x58c3('0x67'),_0x4e5bc7['SocketVariables'][_0x58c3('0x61')]);_0xb5dd75=null;return _0x287262[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x54a3d8[_0x58c3('0x66')]()));});}else{return _0x287262[_0x58c3('0xc')](0xc8)[_0x58c3('0x15')]({'serverMessage':_0x58c3('0x64')});}});function _0x369521(){return function(_0x5ca580,_0x24a4a6,_0x502be4){if(_0x5ca580[_0x58c3('0x68')]()){return _0x502be4();}else{_0x24a4a6[_0x58c3('0xc')](0x191)[_0x58c3('0xd')](_0x58c3('0x69'));}};}};