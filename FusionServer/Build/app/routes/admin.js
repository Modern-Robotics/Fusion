var _0x3bec=['sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','isAuthenticated','User\x20Unauthenticated','mkdirp','path','shelljs','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','spawn','Wifi_NIC','exports','/api/admin/users','body','status','send','password','generateHash','filepath','generateFileSystem','username','User\x20created!','Shut\x20Down\x20Commencing','child_process','poweroff','get','sudo','/api/admin/wirelessSettings','EOL','platform','win32','readFile','utf8','Wifi\x20file\x20not\x20found','split','length','ssid','Password','json','SSID','/etc/hostapd/hostapd.conf','wpa_passphrase','post','join','etc','ssid_set.py','python','pipe','stderr','data','close','Successfully\x20changed\x20wifi\x20settings','log','/api/admin/wirelessConnections','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','stdout','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','wpa_state','Ip\x20address:\x20','\x20assigned','fusion_wifi_access','sockets','emit','Connected\x20to\x20','\x20successfully','Error\x20connecting\x20to\x20','indexOf','wifi-connection','Disconnect\x20not\x20available\x20on\x20Windows','SocketVariables','INACTIVE','Error\x20disconnecting','.crash','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','diagnostics_running','fusion_diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop'];(function(_0x3153ae,_0x20b724){var _0x1c9742=function(_0x430369){while(--_0x430369){_0x3153ae['push'](_0x3153ae['shift']());}};_0x1c9742(++_0x20b724);}(_0x3bec,0x14c));var _0x506c=function(_0xd76247,_0x43b373){_0xd76247=_0xd76247-0x0;var _0x14eb67=_0x3bec[_0xd76247];return _0x14eb67;};var fs=require('fs');var mkdirp=require(_0x506c('0x0'));var os=require('os');var path=require(_0x506c('0x1'));var shell=require(_0x506c('0x2'));var wpa_cli=require(_0x506c('0x3'));var iwlist=require(_0x506c('0x4'));var wpa_supplicant=require(_0x506c('0x5'));var spawn=require('child_process')[_0x506c('0x6')];const config=require('config');let nicInterface=config['get'](_0x506c('0x7'));module[_0x506c('0x8')]=function(_0x4b1ee1,_0x3a3923,_0x3f1a7b,_0x5e708d,_0x3bd113){_0x4b1ee1['post'](_0x506c('0x9'),_0x1581cb(),function(_0x5c0905,_0x2ae655){_0x3a3923['findOne']({'username':_0x5c0905[_0x506c('0xa')]['username']},function(_0x4e6d0b,_0x470fc1){if(_0x4e6d0b)return _0x2ae655[_0x506c('0xb')](0x1f4)['send'](_0x4e6d0b);if(_0x470fc1){return _0x2ae655[_0x506c('0xb')](0x1f4)[_0x506c('0xc')]('Username\x20already\x20taken.');}else{var _0x3d8315=new _0x3a3923(_0x5c0905['body']);_0x3d8315['username']=_0x5c0905[_0x506c('0xa')]['username'];_0x3d8315[_0x506c('0xd')]=_0x3d8315[_0x506c('0xe')](_0x5c0905[_0x506c('0xa')]['password']);_0x3d8315[_0x506c('0xf')]=_0x3d8315[_0x506c('0x10')](_0x3d8315[_0x506c('0x11')]);_0x3d8315['save'](function(_0x2b6244){if(_0x2b6244)return _0x2ae655[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x2b6244);return _0x2ae655[_0x506c('0xb')](0xc8)['json']({'serverMessage':_0x506c('0x12')});});}});});_0x4b1ee1['get']('/api/admin/powerOff',function(_0x5c03b5,_0x41bbe9){_0x41bbe9[_0x506c('0xb')](0xc8)['json']({'serverMessage':_0x506c('0x13')});var _0x344637=require(_0x506c('0x14'))[_0x506c('0x6')];var _0x47d523=_0x344637('sudo',[_0x506c('0x15')]);});_0x4b1ee1[_0x506c('0x16')]('/api/admin/restart',function(_0xd2d24d,_0x57f766){_0x57f766[_0x506c('0xb')](0xc8)[_0x506c('0xc')]('Restart\x20Commencing');var _0x3a623c=require(_0x506c('0x14'))['spawn'];var _0x2c1cfa=_0x3a623c(_0x506c('0x17'),['reboot']);});_0x4b1ee1[_0x506c('0x16')](_0x506c('0x18'),function(_0x4874b4,_0x247e86){var _0x1abcb2;var _0x10b955=require('os')[_0x506c('0x19')];var _0x5f5361;var _0x3f480b;var _0x2866af={};if(os[_0x506c('0x1a')]()==_0x506c('0x1b')){_0x1abcb2='../../etc/hostapd.conf';fs[_0x506c('0x1c')](_0x1abcb2,_0x506c('0x1d'),function(_0x100699,_0x49b38a){if(_0x100699)_0x247e86[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x1e'));_0x5f5361=_0x49b38a[_0x506c('0x1f')]('\x0a');for(var _0x427d4c=0x0;_0x427d4c<_0x5f5361[_0x506c('0x20')];_0x427d4c++){_0x3f480b=_0x5f5361[_0x427d4c][_0x506c('0x1f')]('=');if(_0x3f480b[0x0]==_0x506c('0x21'))_0x2866af['SSID']=_0x3f480b[0x1];else if(_0x3f480b[0x0]=='wpa_passphrase')_0x2866af[_0x506c('0x22')]=_0x3f480b[0x1];}_0x247e86[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'SSID':_0x2866af[_0x506c('0x24')],'Password':_0x2866af[_0x506c('0x22')]});});}else{_0x1abcb2=_0x506c('0x25');fs[_0x506c('0x1c')](_0x1abcb2,_0x506c('0x1d'),function(_0x2279bf,_0x5df860){if(_0x2279bf)_0x247e86[_0x506c('0xb')](0x1f4)[_0x506c('0xc')]('Wifi\x20file\x20not\x20found');_0x5f5361=_0x5df860[_0x506c('0x1f')](_0x10b955);for(var _0x34c76a=0x0;_0x34c76a<_0x5f5361[_0x506c('0x20')];_0x34c76a++){_0x3f480b=_0x5f5361[_0x34c76a]['split']('=');if(_0x3f480b[0x0]==_0x506c('0x21'))_0x2866af[_0x506c('0x24')]=_0x3f480b[0x1];else if(_0x3f480b[0x0]==_0x506c('0x26'))_0x2866af['Password']=_0x3f480b[0x1];}_0x247e86[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'SSID':_0x2866af[_0x506c('0x24')],'Password':_0x2866af[_0x506c('0x22')]});});}});_0x4b1ee1[_0x506c('0x27')](_0x506c('0x18'),function(_0x263a5a,_0xd5c43){try{var _0x484585;var _0x2ad333;var _0xaf962f=path[_0x506c('0x28')]('..','..',_0x506c('0x29'),_0x506c('0x2a'));if(_0x263a5a['body']['ssid']==null&&_0x263a5a['body'][_0x506c('0xd')]==null)_0x2ad333=[_0x506c('0x2b'),_0xaf962f,'-d'];else _0x2ad333=[_0x506c('0x2b'),_0xaf962f,'-s',_0x263a5a['body'][_0x506c('0x21')],'-p',_0x263a5a[_0x506c('0xa')][_0x506c('0xd')]];var _0x327c38=require('child_process')[_0x506c('0x6')];python_process=_0x327c38(_0x506c('0x17'),_0x2ad333,{'stdio':_0x506c('0x2c')});python_process[_0x506c('0x2d')]['on'](_0x506c('0x2e'),function(_0x253009){console['log'](String(_0x253009));_0x484585=String(_0x253009);});python_process['stdout']['on'](_0x506c('0x2f'),function(_0x2f241e){if(_0x484585)return _0xd5c43['status'](0x1f4)['send'](_0x484585);else return _0xd5c43['status'](0xc8)[_0x506c('0x23')]({'serverMessage':_0x506c('0x30')});});}catch(_0x3e833f){console[_0x506c('0x31')](_0x3e833f);return _0xd5c43[_0x506c('0xb')](0x1f4)['send'](_0x3e833f);}});_0x4b1ee1[_0x506c('0x16')](_0x506c('0x32'),function(_0x10fae4,_0x1a958c){if(os['platform']()==_0x506c('0x1b')){return _0x1a958c['status'](0xc8)[_0x506c('0xc')]();}else{iwlist[_0x506c('0x33')](nicInterface,function(_0x48877f,_0x4b5360){if(_0x48877f)return _0x1a958c[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x34'));else return _0x1a958c[_0x506c('0xb')](0xc8)[_0x506c('0xc')]({'serverMessage':_0x506c('0x35'),'data':_0x4b5360});});}});_0x4b1ee1[_0x506c('0x27')](_0x506c('0x32'),function(_0xe0d5da,_0x1a2ad2){var _0x144005=undefined;var _0x51ab0d=_0x506c('0x36')+_0x506c('0x37')+_0x506c('0x38');var _0x4dccc7=_0x506c('0x39')+'\x09ssid=\x22'+_0xe0d5da[_0x506c('0xa')][_0x506c('0x21')]+'\x22\x0a'+'\x09scan_ssid=1\x0a'+_0x506c('0x3a')+_0xe0d5da[_0x506c('0xa')][_0x506c('0xd')]+'\x22\x0a'+_0x506c('0x3b')+_0x506c('0x3c');if(_0xe0d5da[_0x506c('0xa')][_0x506c('0xd')]){_0x144005=shell[_0x506c('0x3d')](_0x506c('0x3e')+_0xe0d5da['body']['ssid']+_0x506c('0x3f')+_0xe0d5da[_0x506c('0xa')][_0x506c('0xd')]+'\x22',{'silent':!![]})[_0x506c('0x40')];}else{_0x144005=_0x506c('0x39')+'\x20\x20\x20\x20ssid=\x22'+_0xe0d5da[_0x506c('0xa')][_0x506c('0x21')]+'\x22\x0a'+_0x506c('0x41')+'}\x0a';}let _0x27641d='';if(_0xe0d5da['body'][_0x506c('0x42')])_0x27641d=_0x51ab0d+_0x4dccc7;else _0x27641d=_0x51ab0d+_0x144005;fs[_0x506c('0x43')](_0x506c('0x44'),_0x27641d,function(_0x1e5c4c){if(_0x1e5c4c)return _0x1a2ad2[_0x506c('0xb')](0x1f4)['send'](_0x1e5c4c);shell[_0x506c('0x3d')](_0x506c('0x45')+nicInterface+_0x506c('0x46'),{'silent':!![]});const _0x477477=0x3a98;var _0x45336e=0x12c;var _0x56ec31=0x0;var _0x450db1=setInterval(function(){var _0x1c4aec=[_0x506c('0x47'),_0x506c('0x48'),_0x506c('0x49'),'DISCONNECTED','ASSOCIATING'];wpa_cli[_0x506c('0xb')](nicInterface,function(_0xdce1a7,_0x23bb7e){if(_0xdce1a7)return _0x1a2ad2[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0xdce1a7);if(_0x23bb7e[_0x506c('0x4a')]=='COMPLETED'){if(_0x23bb7e['ip']){console[_0x506c('0x31')](_0x506c('0x4b')+_0x23bb7e['ip']+_0x506c('0x4c'));clearInterval(_0x450db1);_0x3bd113['SocketVariables'][_0x506c('0x4d')]=_0x23bb7e;_0x5e708d[_0x506c('0x4e')][_0x506c('0x4f')]('wifi-connection',_0x23bb7e);return _0x1a2ad2[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'serverMessage':_0x506c('0x50')+_0xe0d5da[_0x506c('0xa')][_0x506c('0x21')]+_0x506c('0x51')});}else if(_0x56ec31>_0x477477){console[_0x506c('0x31')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x450db1);return _0x1a2ad2[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x52')+_0xe0d5da[_0x506c('0xa')][_0x506c('0x21')]);}_0x56ec31+=_0x45336e;}else if(_0x1c4aec[_0x506c('0x53')](_0x23bb7e[_0x506c('0x4a')])==-0x1){clearInterval(_0x450db1);_0x5e708d[_0x506c('0x4e')][_0x506c('0x4f')](_0x506c('0x54'),_0x23bb7e);return _0x1a2ad2[_0x506c('0xb')](0x1f4)['send'](_0x506c('0x52')+_0xe0d5da[_0x506c('0xa')][_0x506c('0x21')]);}});},_0x45336e);});});_0x4b1ee1[_0x506c('0x16')]('/api/admin/wirelessConnections/disconnect',function(_0x4a90f2,_0x5c1d5a){if(os[_0x506c('0x1a')]()==_0x506c('0x1b')){_0x5c1d5a[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x55'));}else{var _0x498cb5='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x506c('0x38');fs['writeFile']('/etc/wpa_supplicant/wpa_supplicant.conf',_0x498cb5,function(_0x1fd4ee){if(_0x1fd4ee)return _0x5c1d5a[_0x506c('0xb')](0x1f4)['send'](_0x1fd4ee);shell[_0x506c('0x3d')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x506c('0x46'),{'silent':!![]});var _0x14c5a2=setInterval(function(){var _0x3320ca=[];wpa_cli[_0x506c('0xb')](nicInterface,function(_0x194ce4,_0x458b22){if(_0x194ce4)return _0x5c1d5a['status'](0x1f4)[_0x506c('0xc')](_0x194ce4);_0x3bd113[_0x506c('0x56')][_0x506c('0x4d')]=_0x458b22;_0x5e708d[_0x506c('0x4e')]['emit']('wifi-connection',_0x458b22);if(_0x458b22[_0x506c('0x4a')]=='DISCONNECTED'||_0x458b22[_0x506c('0x4a')]==_0x506c('0x57')){clearInterval(_0x14c5a2);_0x5e708d[_0x506c('0x4e')][_0x506c('0x4f')](_0x506c('0x54'),_0x458b22);return _0x5c1d5a[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x506c('0x53')](_0x458b22['wpa_state'])==-0x1){clearInterval(_0x14c5a2);_0x5e708d[_0x506c('0x4e')][_0x506c('0x4f')](_0x506c('0x54'),_0x458b22);return _0x5c1d5a[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x58'));}});},0x12c);});}});_0x4b1ee1[_0x506c('0x16')]('/api/admin/crashReport',function(_0x324afb,_0x17d949){var _0x55c423=_0x506c('0x59');fs['readdir'](_0x55c423,function(_0x1cf352,_0x455ed8){if(_0x1cf352)return _0x17d949[_0x506c('0xb')](0x1f4)['send'](_0x1cf352);if(_0x455ed8['length']>0x0){fs['readFile'](_0x55c423+'/'+_0x455ed8[0x0],_0x506c('0x1d'),function(_0x3e71cd,_0x1433fd){if(_0x3e71cd)return status(0x1f4)[_0x506c('0xc')](_0x506c('0x5a'));_0x17d949[_0x506c('0x5b')](_0x506c('0x5c'),'attachment;\x20filename='+_0x455ed8[0x0]);return _0x17d949[_0x506c('0xb')](0xc8)['download'](_0x55c423+'/'+_0x455ed8[0x0]);});}else{return _0x17d949[_0x506c('0xb')](0xc8)['send'](_0x506c('0x5d'));}});});var _0x4cc686=null;_0x4b1ee1['post'](_0x506c('0x5e'),function(_0xcd4f7b,_0x4a8ef1){if(os[_0x506c('0x1a')]()!=_0x506c('0x1b')){_0x4cc686=spawn('sudo',['sh',_0x506c('0x5f'),_0x506c('0x60')]);_0x4cc686[_0x506c('0x40')]['on'](_0x506c('0x2e'),function(_0x465c7d){console[_0x506c('0x31')](String(_0x465c7d));});_0x4cc686[_0x506c('0x2d')]['on'](_0x506c('0x2e'),function(_0x5cc734){console[_0x506c('0x31')](String(_0x5cc734));});var _0x5c35ba=0x1;var _0x4c1e19=0x3;var _0x4142e4=setInterval(function(){if(_0x5c35ba<=_0x4c1e19){var _0x50ce58=shell[_0x506c('0x3d')](_0x506c('0x61'),{'silent':!![]})['stdout'];if(_0x50ce58){clearInterval(_0x4142e4);_0x3bd113['SocketVariables']['fusion_diagnostics_running']={'process':_0x50ce58,'socket':_0xcd4f7b[_0x506c('0xa')]['socketId']};_0x5e708d['sockets'][_0x506c('0x4f')](_0x506c('0x62'),_0x3bd113[_0x506c('0x56')][_0x506c('0x63')]);return _0x4a8ef1[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'serverMessage':_0x506c('0x64')});}else{_0x5c35ba++;}}else{clearInterval(_0x4142e4);return _0x4a8ef1['status'](0x1f4)[_0x506c('0xc')](_0x506c('0x65'));}},0x12c);}else{return _0x4a8ef1[_0x506c('0xb')](0xc8)['json']({'serverMessage':_0x506c('0x66')});}});_0x4b1ee1[_0x506c('0x16')](_0x506c('0x67'),function(_0x227e6b,_0x4466cd){if(os[_0x506c('0x1a')]()!=_0x506c('0x1b')){shell[_0x506c('0x3d')](_0x506c('0x68'),{'silent':!![]});shell[_0x506c('0x3d')](_0x506c('0x61'),{'silent':!![]},function(_0x39247a,_0x39d72a,_0x580665){(function(_0x186a06){var _0x387ea1=_0x186a06[_0x506c('0x69')]();if(_0x387ea1){return _0x4466cd[_0x506c('0xb')](0x1f4)[_0x506c('0xc')](_0x506c('0x6a'));}else{_0x3bd113[_0x506c('0x56')]['fusion_diagnostics_running']=null;_0x5e708d[_0x506c('0x4e')][_0x506c('0x4f')](_0x506c('0x62'),_0x3bd113[_0x506c('0x56')][_0x506c('0x63')]);_0x4cc686=null;return _0x4466cd[_0x506c('0xb')](0xc8)[_0x506c('0x23')]({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x39d72a[_0x506c('0x69')]()));});}else{return _0x4466cd['status'](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});function _0x1581cb(){return function(_0xc357ff,_0xbdc374,_0x3b6871){if(_0xc357ff[_0x506c('0x6b')]()){return _0x3b6871();}else{_0xbdc374[_0x506c('0xb')](0x191)[_0x506c('0xc')](_0x506c('0x6c'));}};}};