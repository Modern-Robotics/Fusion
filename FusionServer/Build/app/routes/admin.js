var _0x23d1=['data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','/api/diagnostics/stop','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','fusion_diagnostics_running','Diagnostic\x20tool\x20stopped\x20successfully','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','mkdirp','path','wireless-tools/wpa_cli','wireless-tools/iwlist','child_process','config','get','Wifi_NIC','exports','post','/api/admin/users','findOne','body','username','status','send','Username\x20already\x20taken.','password','generateHash','filepath','generateFileSystem','save','json','User\x20created!','/api/admin/powerOff','Shut\x20Down\x20Commencing','spawn','sudo','poweroff','/api/admin/restart','/api/admin/wirelessSettings','platform','win32','../../etc/hostapd.conf','utf8','Wifi\x20file\x20not\x20found','split','length','ssid','SSID','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','join','etc','python','pipe','stderr','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09scan_ssid=1\x0a','\x09key_mgmt=WPA-PSK\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','wpa_state','COMPLETED','Ip\x20address:\x20','\x20assigned','SocketVariables','fusion_wifi_access','sockets','emit','wifi-connection','Connected\x20to\x20','\x20successfully','Error\x20connecting\x20to\x20','indexOf','Disconnect\x20not\x20available\x20on\x20Windows','\x20reconfigure','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','readFile','Error\x20reading\x20crash\x20file','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py'];(function(_0x491ed9,_0x9772e3){var _0x451891=function(_0x65ff90){while(--_0x65ff90){_0x491ed9['push'](_0x491ed9['shift']());}};_0x451891(++_0x9772e3);}(_0x23d1,0x7c));var _0x4b85=function(_0x298a7d,_0x4eaba6){_0x298a7d=_0x298a7d-0x0;var _0x32b10c=_0x23d1[_0x298a7d];return _0x32b10c;};var fs=require('fs');var mkdirp=require(_0x4b85('0x0'));var os=require('os');var path=require(_0x4b85('0x1'));var shell=require('shelljs');var wpa_cli=require(_0x4b85('0x2'));var iwlist=require(_0x4b85('0x3'));var wpa_supplicant=require('wireless-tools/wpa_supplicant');var spawn=require(_0x4b85('0x4'))['spawn'];const config=require(_0x4b85('0x5'));let nicInterface=config[_0x4b85('0x6')](_0x4b85('0x7'));module[_0x4b85('0x8')]=function(_0x17cf6a,_0x5517a2,_0x59b7c7,_0x1ce6ce,_0x40d98e){_0x17cf6a[_0x4b85('0x9')](_0x4b85('0xa'),_0x407709(),function(_0x21fb5e,_0x27fa83){_0x5517a2[_0x4b85('0xb')]({'username':_0x21fb5e[_0x4b85('0xc')][_0x4b85('0xd')]},function(_0x309dea,_0x11e75f){if(_0x309dea)return _0x27fa83[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x309dea);if(_0x11e75f){return _0x27fa83['status'](0x1f4)[_0x4b85('0xf')](_0x4b85('0x10'));}else{var _0xf421d7=new _0x5517a2(_0x21fb5e[_0x4b85('0xc')]);_0xf421d7[_0x4b85('0xd')]=_0x21fb5e[_0x4b85('0xc')][_0x4b85('0xd')];_0xf421d7[_0x4b85('0x11')]=_0xf421d7[_0x4b85('0x12')](_0x21fb5e['body'][_0x4b85('0x11')]);_0xf421d7[_0x4b85('0x13')]=_0xf421d7[_0x4b85('0x14')](_0xf421d7['username']);_0xf421d7[_0x4b85('0x15')](function(_0x53340d){if(_0x53340d)return _0x27fa83[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x53340d);return _0x27fa83[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':_0x4b85('0x17')});});}});});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x18'),function(_0x22aa2f,_0x493d98){_0x493d98[_0x4b85('0xe')](0xc8)['json']({'serverMessage':_0x4b85('0x19')});var _0x1a19a5=require(_0x4b85('0x4'))[_0x4b85('0x1a')];var _0x3a0dfa=_0x1a19a5(_0x4b85('0x1b'),[_0x4b85('0x1c')]);});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x1d'),function(_0xcd5fd6,_0x57a945){_0x57a945[_0x4b85('0xe')](0xc8)[_0x4b85('0xf')]('Restart\x20Commencing');var _0x2034fd=require(_0x4b85('0x4'))[_0x4b85('0x1a')];var _0x29dfb5=_0x2034fd(_0x4b85('0x1b'),['reboot']);});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x1e'),function(_0x7c3ab4,_0x5fa8b8){var _0x41ce0d;var _0x1046aa=require('os')['EOL'];var _0x2f66ab;var _0x1e929d;var _0x24e072={};if(os[_0x4b85('0x1f')]()==_0x4b85('0x20')){_0x41ce0d=_0x4b85('0x21');fs['readFile'](_0x41ce0d,_0x4b85('0x22'),function(_0x121308,_0x55297c){if(_0x121308)_0x5fa8b8[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x4b85('0x23'));_0x2f66ab=_0x55297c[_0x4b85('0x24')]('\x0a');for(var _0x234f20=0x0;_0x234f20<_0x2f66ab[_0x4b85('0x25')];_0x234f20++){_0x1e929d=_0x2f66ab[_0x234f20][_0x4b85('0x24')]('=');if(_0x1e929d[0x0]==_0x4b85('0x26'))_0x24e072[_0x4b85('0x27')]=_0x1e929d[0x1];else if(_0x1e929d[0x0]==_0x4b85('0x28'))_0x24e072[_0x4b85('0x29')]=_0x1e929d[0x1];}_0x5fa8b8[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'SSID':_0x24e072[_0x4b85('0x27')],'Password':_0x24e072[_0x4b85('0x29')]});});}else{_0x41ce0d=_0x4b85('0x2a');fs['readFile'](_0x41ce0d,_0x4b85('0x22'),function(_0x1f7151,_0x27a094){if(_0x1f7151)_0x5fa8b8[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x4b85('0x23'));_0x2f66ab=_0x27a094[_0x4b85('0x24')](_0x1046aa);for(var _0xd30170=0x0;_0xd30170<_0x2f66ab['length'];_0xd30170++){_0x1e929d=_0x2f66ab[_0xd30170][_0x4b85('0x24')]('=');if(_0x1e929d[0x0]=='ssid')_0x24e072['SSID']=_0x1e929d[0x1];else if(_0x1e929d[0x0]=='wpa_passphrase')_0x24e072[_0x4b85('0x29')]=_0x1e929d[0x1];}_0x5fa8b8['status'](0xc8)['json']({'SSID':_0x24e072['SSID'],'Password':_0x24e072['Password']});});}});_0x17cf6a[_0x4b85('0x9')](_0x4b85('0x1e'),function(_0xfdc004,_0x119b29){try{var _0x542127;var _0x2c5be3;var _0x5a9082=path[_0x4b85('0x2b')]('..','..',_0x4b85('0x2c'),'ssid_set.py');if(_0xfdc004[_0x4b85('0xc')]['ssid']==null&&_0xfdc004[_0x4b85('0xc')][_0x4b85('0x11')]==null)_0x2c5be3=[_0x4b85('0x2d'),_0x5a9082,'-d'];else _0x2c5be3=[_0x4b85('0x2d'),_0x5a9082,'-s',_0xfdc004[_0x4b85('0xc')]['ssid'],'-p',_0xfdc004[_0x4b85('0xc')][_0x4b85('0x11')]];var _0x12d94e=require(_0x4b85('0x4'))['spawn'];python_process=_0x12d94e('sudo',_0x2c5be3,{'stdio':_0x4b85('0x2e')});python_process[_0x4b85('0x2f')]['on']('data',function(_0x40ea9f){console[_0x4b85('0x30')](String(_0x40ea9f));_0x542127=String(_0x40ea9f);});python_process[_0x4b85('0x31')]['on'](_0x4b85('0x32'),function(_0x2b7a42){if(_0x542127)return _0x119b29[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x542127);else return _0x119b29[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':_0x4b85('0x33')});});}catch(_0x5d7aad){console[_0x4b85('0x30')](_0x5d7aad);return _0x119b29[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x5d7aad);}});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x34'),function(_0x3395d4,_0x1fd580){if(os[_0x4b85('0x1f')]()==_0x4b85('0x20')){return _0x1fd580[_0x4b85('0xe')](0xc8)[_0x4b85('0xf')]();}else{iwlist[_0x4b85('0x35')](nicInterface,function(_0x59b85d,_0x3a3fc4){if(_0x59b85d)return _0x1fd580['status'](0x1f4)[_0x4b85('0xf')](_0x4b85('0x36'));else return _0x1fd580['status'](0xc8)[_0x4b85('0xf')]({'serverMessage':_0x4b85('0x37'),'data':_0x3a3fc4});});}});_0x17cf6a[_0x4b85('0x9')](_0x4b85('0x34'),function(_0x2c253d,_0xde9391){var _0x2a4983=undefined;var _0x5f035c=_0x4b85('0x38')+_0x4b85('0x39')+_0x4b85('0x3a');var _0x1e35a0=_0x4b85('0x3b')+'\x09ssid=\x22'+_0x2c253d['body'][_0x4b85('0x26')]+'\x22\x0a'+_0x4b85('0x3c')+'\x09psk=\x22'+_0x2c253d['body'][_0x4b85('0x11')]+'\x22\x0a'+_0x4b85('0x3d')+'}\x0a\x0a';if(_0x2c253d[_0x4b85('0xc')][_0x4b85('0x11')]){_0x2a4983=shell[_0x4b85('0x3e')](_0x4b85('0x3f')+_0x2c253d[_0x4b85('0xc')]['ssid']+_0x4b85('0x40')+_0x2c253d[_0x4b85('0xc')]['password']+'\x22',{'silent':!![]})[_0x4b85('0x31')];}else{_0x2a4983=_0x4b85('0x3b')+'\x20\x20\x20\x20ssid=\x22'+_0x2c253d[_0x4b85('0xc')][_0x4b85('0x26')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0x301680='';if(_0x2c253d[_0x4b85('0xc')][_0x4b85('0x41')])_0x301680=_0x5f035c+_0x1e35a0;else _0x301680=_0x5f035c+_0x2a4983;fs[_0x4b85('0x42')](_0x4b85('0x43'),_0x301680,function(_0x432f57){if(_0x432f57)return _0xde9391['status'](0x1f4)[_0x4b85('0xf')](_0x432f57);shell[_0x4b85('0x3e')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+'\x20reconfigure',{'silent':!![]});const _0x3f0e52=0x3a98;var _0x2da05b=0x12c;var _0x28d373=0x0;var _0x561326=setInterval(function(){var _0x4ccd71=[_0x4b85('0x44'),_0x4b85('0x45'),_0x4b85('0x46'),_0x4b85('0x47'),'ASSOCIATING'];wpa_cli[_0x4b85('0xe')](nicInterface,function(_0x361c00,_0x558ce5){if(_0x361c00)return _0xde9391['status'](0x1f4)[_0x4b85('0xf')](_0x361c00);if(_0x558ce5[_0x4b85('0x48')]==_0x4b85('0x49')){if(_0x558ce5['ip']){console['log'](_0x4b85('0x4a')+_0x558ce5['ip']+_0x4b85('0x4b'));clearInterval(_0x561326);_0x40d98e[_0x4b85('0x4c')][_0x4b85('0x4d')]=_0x558ce5;_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')](_0x4b85('0x50'),_0x558ce5);return _0xde9391[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':_0x4b85('0x51')+_0x2c253d['body'][_0x4b85('0x26')]+_0x4b85('0x52')});}else if(_0x28d373>_0x3f0e52){console[_0x4b85('0x30')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x561326);return _0xde9391['status'](0x1f4)[_0x4b85('0xf')](_0x4b85('0x53')+_0x2c253d[_0x4b85('0xc')]['ssid']);}_0x28d373+=_0x2da05b;}else if(_0x4ccd71[_0x4b85('0x54')](_0x558ce5[_0x4b85('0x48')])==-0x1){clearInterval(_0x561326);_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')](_0x4b85('0x50'),_0x558ce5);return _0xde9391[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')]('Error\x20connecting\x20to\x20'+_0x2c253d[_0x4b85('0xc')][_0x4b85('0x26')]);}});},_0x2da05b);});});_0x17cf6a['get']('/api/admin/wirelessConnections/disconnect',function(_0x228e65,_0x5d70bc){if(os[_0x4b85('0x1f')]()=='win32'){_0x5d70bc['status'](0x1f4)[_0x4b85('0xf')](_0x4b85('0x55'));}else{var _0x49a0e0=_0x4b85('0x38')+_0x4b85('0x39')+_0x4b85('0x3a');fs[_0x4b85('0x42')](_0x4b85('0x43'),_0x49a0e0,function(_0x1c958b){if(_0x1c958b)return _0x5d70bc['status'](0x1f4)['send'](_0x1c958b);shell[_0x4b85('0x3e')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x4b85('0x56'),{'silent':!![]});var _0x8e3ba8=setInterval(function(){var _0x529a30=[];wpa_cli['status'](nicInterface,function(_0x339549,_0x22bc62){if(_0x339549)return _0x5d70bc[_0x4b85('0xe')](0x1f4)['send'](_0x339549);_0x40d98e[_0x4b85('0x4c')][_0x4b85('0x4d')]=_0x22bc62;_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')]('wifi-connection',_0x22bc62);if(_0x22bc62[_0x4b85('0x48')]==_0x4b85('0x47')||_0x22bc62[_0x4b85('0x48')]=='INACTIVE'){clearInterval(_0x8e3ba8);_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')]('wifi-connection',_0x22bc62);return _0x5d70bc[_0x4b85('0xe')](0xc8)['json']({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x4b85('0x54')](_0x22bc62[_0x4b85('0x48')])==-0x1){clearInterval(_0x8e3ba8);_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')]('wifi-connection',_0x22bc62);return _0x5d70bc[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x4b85('0x57'));}});},0x12c);});}});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x58'),function(_0x437b5c,_0x4247c8){var _0x159379=_0x4b85('0x59');fs[_0x4b85('0x5a')](_0x159379,function(_0x145094,_0x30e1c0){if(_0x145094)return _0x4247c8[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x145094);if(_0x30e1c0[_0x4b85('0x25')]>0x0){fs[_0x4b85('0x5b')](_0x159379+'/'+_0x30e1c0[0x0],_0x4b85('0x22'),function(_0x4dc299,_0x1068ac){if(_0x4dc299)return status(0x1f4)['send'](_0x4b85('0x5c'));_0x4247c8['setHeader'](_0x4b85('0x5d'),_0x4b85('0x5e')+_0x30e1c0[0x0]);return _0x4247c8[_0x4b85('0xe')](0xc8)[_0x4b85('0x5f')](_0x159379+'/'+_0x30e1c0[0x0]);});}else{return _0x4247c8['status'](0xc8)[_0x4b85('0xf')](_0x4b85('0x60'));}});});var _0xa792b4=null;_0x17cf6a[_0x4b85('0x9')](_0x4b85('0x61'),function(_0x3be64a,_0x43b93d){if(os[_0x4b85('0x1f')]()!='win32'){_0xa792b4=spawn(_0x4b85('0x1b'),['sh',_0x4b85('0x62'),_0x4b85('0x63')]);_0xa792b4[_0x4b85('0x31')]['on'](_0x4b85('0x64'),function(_0x10a058){console[_0x4b85('0x30')](String(_0x10a058));});_0xa792b4[_0x4b85('0x2f')]['on'](_0x4b85('0x64'),function(_0xfecc77){console['log'](String(_0xfecc77));});var _0x4e2e04=0x1;var _0x456a3b=0x3;var _0x2e29ef=setInterval(function(){if(_0x4e2e04<=_0x456a3b){var _0x33c7ca=shell[_0x4b85('0x3e')](_0x4b85('0x65'),{'silent':!![]})[_0x4b85('0x31')];if(_0x33c7ca){clearInterval(_0x2e29ef);_0x40d98e[_0x4b85('0x4c')]['fusion_diagnostics_running']={'process':_0x33c7ca,'socket':_0x3be64a[_0x4b85('0xc')][_0x4b85('0x66')]};_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')](_0x4b85('0x67'),_0x40d98e['SocketVariables']['fusion_diagnostics_running']);return _0x43b93d[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':_0x4b85('0x68')});}else{_0x4e2e04++;}}else{clearInterval(_0x2e29ef);return _0x43b93d['status'](0x1f4)[_0x4b85('0xf')](_0x4b85('0x69'));}},0x12c);}else{return _0x43b93d[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});_0x17cf6a[_0x4b85('0x6')](_0x4b85('0x6a'),function(_0x499e9f,_0x306937){if(os[_0x4b85('0x1f')]()!=_0x4b85('0x20')){shell['exec']('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x4b85('0x3e')](_0x4b85('0x65'),{'silent':!![]},function(_0x1a27e2,_0x23c16b,_0x436d10){(function(_0x5e1776){var _0x431960=_0x5e1776[_0x4b85('0x6b')]();if(_0x431960){return _0x306937[_0x4b85('0xe')](0x1f4)[_0x4b85('0xf')](_0x4b85('0x6c'));}else{_0x40d98e[_0x4b85('0x4c')][_0x4b85('0x6d')]=null;_0x1ce6ce[_0x4b85('0x4e')][_0x4b85('0x4f')](_0x4b85('0x67'),_0x40d98e[_0x4b85('0x4c')][_0x4b85('0x6d')]);_0xa792b4=null;return _0x306937[_0x4b85('0xe')](0xc8)[_0x4b85('0x16')]({'serverMessage':_0x4b85('0x6e')});}}(_0x23c16b[_0x4b85('0x6b')]()));});}else{return _0x306937[_0x4b85('0xe')](0xc8)['json']({'serverMessage':_0x4b85('0x6f')});}});function _0x407709(){return function(_0xb04a32,_0xc4c0cc,_0x27fbba){if(_0xb04a32['isAuthenticated']()){return _0x27fbba();}else{_0xc4c0cc[_0x4b85('0xe')](0x191)['send']('User\x20Unauthenticated');}};}};