var _0x2943=['ASSOCIATING','wpa_state','\x20assigned','SocketVariables','fusion_wifi_access','sockets','emit','Connected\x20to\x20','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','indexOf','wifi-connection','Disconnect\x20not\x20available\x20on\x20Windows','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','\x20reconfigure','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','readFile','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','fusion_diagnostics_running','Diagnostic\x20tool\x20stopped\x20successfully','isAuthenticated','User\x20Unauthenticated','mkdirp','path','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','spawn','config','get','post','/api/admin/users','findOne','body','username','status','send','password','generateHash','filepath','generateFileSystem','save','User\x20created!','/api/admin/powerOff','Shut\x20Down\x20Commencing','sudo','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','platform','win32','../../etc/config-wap/hostapd.conf__npp.sh','utf8','Wifi\x20file\x20not\x20found','split','ssid','wpa_passphrase','Password','json','SSID','/etc/hostapd/hostapd.conf','length','Not\x20configured..','join','etc','ssid_set.py','python','pipe','data','stdout','close','Successfully\x20changed\x20wifi\x20settings','log','/api/admin/wirelessConnections','Wireless\x20interface\x20not\x20found','country=US\x0a\x0a','\x09ssid=\x22','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','wpa_passphrase\x20\x22','network={\x0a','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','exec','sudo\x20wpa_cli\x20-i\x20','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED'];(function(_0x159d23,_0x9b5bc4){var _0x4b88a3=function(_0x292241){while(--_0x292241){_0x159d23['push'](_0x159d23['shift']());}};_0x4b88a3(++_0x9b5bc4);}(_0x2943,0x110));var _0x5003=function(_0x1d1ed4,_0x569eb6){_0x1d1ed4=_0x1d1ed4-0x0;var _0x1ed8ec=_0x2943[_0x1d1ed4];return _0x1ed8ec;};var fs=require('fs');var mkdirp=require(_0x5003('0x0'));var os=require('os');var path=require(_0x5003('0x1'));var shell=require('shelljs');var wpa_cli=require(_0x5003('0x2'));var iwlist=require(_0x5003('0x3'));var wpa_supplicant=require(_0x5003('0x4'));var spawn=require(_0x5003('0x5'))[_0x5003('0x6')];const config=require(_0x5003('0x7'));let nicInterface=config[_0x5003('0x8')]('Wifi_NIC');module['exports']=function(_0x5e2e2c,_0x313be0,_0x5035b7,_0x253760,_0x5c668a){_0x5e2e2c[_0x5003('0x9')](_0x5003('0xa'),_0x2ff3bb(),function(_0x3e85e4,_0xccdcb5){_0x313be0[_0x5003('0xb')]({'username':_0x3e85e4[_0x5003('0xc')][_0x5003('0xd')]},function(_0x9d630f,_0xa35832){if(_0x9d630f)return _0xccdcb5[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x9d630f);if(_0xa35832){return _0xccdcb5[_0x5003('0xe')](0x1f4)[_0x5003('0xf')]('Username\x20already\x20taken.');}else{var _0x5af380=new _0x313be0(_0x3e85e4[_0x5003('0xc')]);_0x5af380[_0x5003('0xd')]=_0x3e85e4[_0x5003('0xc')][_0x5003('0xd')];_0x5af380[_0x5003('0x10')]=_0x5af380[_0x5003('0x11')](_0x3e85e4['body']['password']);_0x5af380[_0x5003('0x12')]=_0x5af380[_0x5003('0x13')](_0x5af380[_0x5003('0xd')]);_0x5af380[_0x5003('0x14')](function(_0x31ac88){if(_0x31ac88)return _0xccdcb5[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x31ac88);return _0xccdcb5[_0x5003('0xe')](0xc8)['json']({'serverMessage':_0x5003('0x15')});});}});});_0x5e2e2c[_0x5003('0x8')](_0x5003('0x16'),function(_0x3706e1,_0x4e4587){_0x4e4587[_0x5003('0xe')](0xc8)['json']({'serverMessage':_0x5003('0x17')});var _0x4bc059=require(_0x5003('0x5'))[_0x5003('0x6')];var _0x95c0c2=_0x4bc059(_0x5003('0x18'),['poweroff']);});_0x5e2e2c['get']('/api/admin/restart',function(_0x3fa5b1,_0x235a54){_0x235a54['status'](0xc8)[_0x5003('0xf')](_0x5003('0x19'));var _0xf1a70d=require('child_process')[_0x5003('0x6')];var _0x19b193=_0xf1a70d(_0x5003('0x18'),[_0x5003('0x1a')]);});_0x5e2e2c['get'](_0x5003('0x1b'),function(_0x1edac3,_0x373047){var _0x3cf882;var _0x78f61a=require('os')[_0x5003('0x1c')];var _0x45921e;var _0x17763d;var _0x386224={};if(os[_0x5003('0x1d')]()==_0x5003('0x1e')){_0x3cf882=_0x5003('0x1f');fs['readFile'](_0x3cf882,_0x5003('0x20'),function(_0x81138e,_0x2bcc73){if(_0x81138e)_0x373047['status'](0x1f4)[_0x5003('0xf')](_0x5003('0x21'));_0x45921e=_0x2bcc73[_0x5003('0x22')]('\x0a');for(var _0x44b465=0x0;_0x44b465<_0x45921e['length'];_0x44b465++){_0x17763d=_0x45921e[_0x44b465][_0x5003('0x22')]('=');if(_0x17763d[0x0]==_0x5003('0x23'))_0x386224['SSID']=_0x17763d[0x1];else if(_0x17763d[0x0]==_0x5003('0x24'))_0x386224[_0x5003('0x25')]=_0x17763d[0x1];}_0x373047['status'](0xc8)[_0x5003('0x26')]({'SSID':_0x386224[_0x5003('0x27')],'Password':_0x386224['Password']});});}else{_0x3cf882=_0x5003('0x28');fs['readFile'](_0x3cf882,_0x5003('0x20'),function(_0x3cd555,_0x5b6906){if(_0x3cd555)_0x373047[_0x5003('0xe')](0x1f4)['send'](_0x5003('0x21'));_0x45921e=_0x5b6906[_0x5003('0x22')](_0x78f61a);for(var _0x4ad1c3=0x0;_0x4ad1c3<_0x45921e[_0x5003('0x29')];_0x4ad1c3++){_0x17763d=_0x45921e[_0x4ad1c3]['split']('=');if(_0x17763d[0x0]==_0x5003('0x23'))_0x386224[_0x5003('0x27')]=_0x17763d[0x1];else if(_0x17763d[0x0]=='wpa_passphrase')_0x386224['Password']=_0x17763d[0x1];}if(!_0x386224[_0x5003('0x27')]){_0x386224[_0x5003('0x27')]=_0x5003('0x2a');_0x386224[_0x5003('0x25')]='';}_0x373047[_0x5003('0xe')](0xc8)[_0x5003('0x26')]({'SSID':_0x386224[_0x5003('0x27')],'Password':_0x386224[_0x5003('0x25')]});});}});_0x5e2e2c[_0x5003('0x9')]('/api/admin/wirelessSettings',function(_0x3d9501,_0x231d96){try{var _0x3cfbe6;var _0x27e929;var _0x5dc856=path[_0x5003('0x2b')]('..','..',_0x5003('0x2c'),_0x5003('0x2d'));if(_0x3d9501[_0x5003('0xc')]['ssid']==null&&_0x3d9501[_0x5003('0xc')][_0x5003('0x10')]==null)_0x27e929=['python',_0x5dc856,'-d'];else _0x27e929=[_0x5003('0x2e'),_0x5dc856,'-s',_0x3d9501[_0x5003('0xc')]['ssid'],'-p',_0x3d9501[_0x5003('0xc')][_0x5003('0x10')]];var _0x65d1b7=require(_0x5003('0x5'))[_0x5003('0x6')];python_process=_0x65d1b7(_0x5003('0x18'),_0x27e929,{'stdio':_0x5003('0x2f')});python_process['stderr']['on'](_0x5003('0x30'),function(_0x34df09){console['log'](String(_0x34df09));_0x3cfbe6=String(_0x34df09);});python_process[_0x5003('0x31')]['on'](_0x5003('0x32'),function(_0x6b5f39){if(_0x3cfbe6)return _0x231d96[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x3cfbe6);else return _0x231d96[_0x5003('0xe')](0xc8)['json']({'serverMessage':_0x5003('0x33')});});}catch(_0x557a9b){console[_0x5003('0x34')](_0x557a9b);return _0x231d96[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x557a9b);}});_0x5e2e2c['get'](_0x5003('0x35'),function(_0x300c5b,_0x2d9879){if(os[_0x5003('0x1d')]()==_0x5003('0x1e')){return _0x2d9879[_0x5003('0xe')](0xc8)[_0x5003('0xf')]();}else{iwlist['scan'](nicInterface,function(_0x3233a0,_0x197f2e){if(_0x3233a0)return _0x2d9879[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x5003('0x36'));else return _0x2d9879[_0x5003('0xe')](0xc8)[_0x5003('0xf')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x197f2e});});}});_0x5e2e2c['post'](_0x5003('0x35'),function(_0x3f0da1,_0x98a12c){var _0x42790d=undefined;var _0x4c4048='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x5003('0x37');var _0x293577='network={\x0a'+_0x5003('0x38')+_0x3f0da1[_0x5003('0xc')]['ssid']+'\x22\x0a'+'\x09scan_ssid=1\x0a'+_0x5003('0x39')+_0x3f0da1[_0x5003('0xc')][_0x5003('0x10')]+'\x22\x0a'+_0x5003('0x3a')+_0x5003('0x3b');if(_0x3f0da1['body'][_0x5003('0x10')]){_0x42790d=shell['exec'](_0x5003('0x3c')+_0x3f0da1[_0x5003('0xc')][_0x5003('0x23')]+'\x22\x20\x22'+_0x3f0da1[_0x5003('0xc')]['password']+'\x22',{'silent':!![]})['stdout'];}else{_0x42790d=_0x5003('0x3d')+_0x5003('0x3e')+_0x3f0da1[_0x5003('0xc')][_0x5003('0x23')]+'\x22\x0a'+_0x5003('0x3f')+'}\x0a';}let _0x447f24='';if(_0x3f0da1[_0x5003('0xc')][_0x5003('0x40')])_0x447f24=_0x4c4048+_0x293577;else _0x447f24=_0x4c4048+_0x42790d;fs[_0x5003('0x41')](_0x5003('0x42'),_0x447f24,function(_0x418aab){if(_0x418aab)return _0x98a12c[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x418aab);shell[_0x5003('0x43')](_0x5003('0x44')+nicInterface+'\x20reconfigure',{'silent':!![]});const _0xfbb810=0x3a98;var _0x4d841a=0x12c;var _0x5d286f=0x0;var _0x594c43=setInterval(function(){var _0x3091b8=[_0x5003('0x45'),_0x5003('0x46'),_0x5003('0x47'),_0x5003('0x48'),_0x5003('0x49')];wpa_cli[_0x5003('0xe')](nicInterface,function(_0x47e631,_0x981ae6){if(_0x47e631)return _0x98a12c[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x47e631);if(_0x981ae6[_0x5003('0x4a')]=='COMPLETED'){if(_0x981ae6['ip']){console[_0x5003('0x34')]('Ip\x20address:\x20'+_0x981ae6['ip']+_0x5003('0x4b'));clearInterval(_0x594c43);_0x5c668a[_0x5003('0x4c')][_0x5003('0x4d')]=_0x981ae6;_0x253760[_0x5003('0x4e')][_0x5003('0x4f')]('wifi-connection',_0x981ae6);return _0x98a12c[_0x5003('0xe')](0xc8)[_0x5003('0x26')]({'serverMessage':_0x5003('0x50')+_0x3f0da1[_0x5003('0xc')][_0x5003('0x23')]+'\x20successfully'});}else if(_0x5d286f>_0xfbb810){console['log'](_0x5003('0x51'));clearInterval(_0x594c43);return _0x98a12c['status'](0x1f4)['send'](_0x5003('0x52')+_0x3f0da1[_0x5003('0xc')][_0x5003('0x23')]);}_0x5d286f+=_0x4d841a;}else if(_0x3091b8[_0x5003('0x53')](_0x981ae6[_0x5003('0x4a')])==-0x1){clearInterval(_0x594c43);_0x253760[_0x5003('0x4e')][_0x5003('0x4f')](_0x5003('0x54'),_0x981ae6);return _0x98a12c[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x5003('0x52')+_0x3f0da1['body'][_0x5003('0x23')]);}});},_0x4d841a);});});_0x5e2e2c[_0x5003('0x8')]('/api/admin/wirelessConnections/disconnect',function(_0x4bec85,_0x151ec8){if(os[_0x5003('0x1d')]()==_0x5003('0x1e')){_0x151ec8[_0x5003('0xe')](0x1f4)['send'](_0x5003('0x55'));}else{var _0x492bca=_0x5003('0x56')+_0x5003('0x57')+_0x5003('0x37');fs[_0x5003('0x41')](_0x5003('0x42'),_0x492bca,function(_0x548fba){if(_0x548fba)return _0x151ec8['status'](0x1f4)[_0x5003('0xf')](_0x548fba);shell[_0x5003('0x43')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x5003('0x58'),{'silent':!![]});var _0x341ed7=setInterval(function(){var _0x4f18c6=[];wpa_cli[_0x5003('0xe')](nicInterface,function(_0x183fae,_0x2e1a7e){if(_0x183fae)return _0x151ec8[_0x5003('0xe')](0x1f4)['send'](_0x183fae);_0x5c668a['SocketVariables'][_0x5003('0x4d')]=_0x2e1a7e;_0x253760['sockets'][_0x5003('0x4f')](_0x5003('0x54'),_0x2e1a7e);if(_0x2e1a7e[_0x5003('0x4a')]=='DISCONNECTED'||_0x2e1a7e[_0x5003('0x4a')]=='INACTIVE'){clearInterval(_0x341ed7);_0x253760['sockets'][_0x5003('0x4f')]('wifi-connection',_0x2e1a7e);return _0x151ec8[_0x5003('0xe')](0xc8)['json']({'serverMessage':_0x5003('0x59')});}else if(connectingStatuses[_0x5003('0x53')](_0x2e1a7e[_0x5003('0x4a')])==-0x1){clearInterval(_0x341ed7);_0x253760[_0x5003('0x4e')]['emit'](_0x5003('0x54'),_0x2e1a7e);return _0x151ec8[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x5003('0x5a'));}});},0x12c);});}});_0x5e2e2c[_0x5003('0x8')](_0x5003('0x5b'),function(_0xecec7f,_0x52b379){var _0x13b0e0=_0x5003('0x5c');fs[_0x5003('0x5d')](_0x13b0e0,function(_0x145508,_0x3f4dae){if(_0x145508)return _0x52b379[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x145508);if(_0x3f4dae[_0x5003('0x29')]>0x0){fs[_0x5003('0x5e')](_0x13b0e0+'/'+_0x3f4dae[0x0],'utf8',function(_0x469289,_0x122080){if(_0x469289)return status(0x1f4)['send'](_0x5003('0x5f'));_0x52b379[_0x5003('0x60')](_0x5003('0x61'),_0x5003('0x62')+_0x3f4dae[0x0]);return _0x52b379[_0x5003('0xe')](0xc8)[_0x5003('0x63')](_0x13b0e0+'/'+_0x3f4dae[0x0]);});}else{return _0x52b379[_0x5003('0xe')](0xc8)[_0x5003('0xf')](_0x5003('0x64'));}});});var _0x53c088=null;_0x5e2e2c[_0x5003('0x9')](_0x5003('0x65'),function(_0x114435,_0x379020){if(os[_0x5003('0x1d')]()!=_0x5003('0x1e')){_0x53c088=spawn(_0x5003('0x18'),['sh',_0x5003('0x66'),_0x5003('0x67')]);_0x53c088[_0x5003('0x31')]['on'](_0x5003('0x30'),function(_0x53e0b9){console[_0x5003('0x34')](String(_0x53e0b9));});_0x53c088['stderr']['on']('data',function(_0x336b01){console[_0x5003('0x34')](String(_0x336b01));});var _0xeeee92=0x1;var _0x426875=0x3;var _0x29afd3=setInterval(function(){if(_0xeeee92<=_0x426875){var _0x3c27bb=shell[_0x5003('0x43')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})['stdout'];if(_0x3c27bb){clearInterval(_0x29afd3);_0x5c668a[_0x5003('0x4c')]['fusion_diagnostics_running']={'process':_0x3c27bb,'socket':_0x114435[_0x5003('0xc')]['socketId']};_0x253760[_0x5003('0x4e')][_0x5003('0x4f')]('diagnostics_running',_0x5c668a['SocketVariables']['fusion_diagnostics_running']);return _0x379020[_0x5003('0xe')](0xc8)[_0x5003('0x26')]({'serverMessage':_0x5003('0x68')});}else{_0xeeee92++;}}else{clearInterval(_0x29afd3);return _0x379020[_0x5003('0xe')](0x1f4)[_0x5003('0xf')](_0x5003('0x69'));}},0x12c);}else{return _0x379020[_0x5003('0xe')](0xc8)[_0x5003('0x26')]({'serverMessage':_0x5003('0x6a')});}});_0x5e2e2c[_0x5003('0x8')](_0x5003('0x6b'),function(_0x1bea4a,_0xde3469){if(os['platform']()!=_0x5003('0x1e')){shell[_0x5003('0x43')](_0x5003('0x6c'),{'silent':!![]});shell[_0x5003('0x43')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x5e516b,_0x18fe97,_0x5074c7){(function(_0x49a57d){var _0x359066=_0x49a57d[_0x5003('0x6d')]();if(_0x359066){return _0xde3469['status'](0x1f4)[_0x5003('0xf')](_0x5003('0x6e'));}else{_0x5c668a[_0x5003('0x4c')][_0x5003('0x6f')]=null;_0x253760[_0x5003('0x4e')]['emit']('diagnostics_running',_0x5c668a[_0x5003('0x4c')][_0x5003('0x6f')]);_0x53c088=null;return _0xde3469['status'](0xc8)[_0x5003('0x26')]({'serverMessage':_0x5003('0x70')});}}(_0x18fe97[_0x5003('0x6d')]()));});}else{return _0xde3469['status'](0xc8)[_0x5003('0x26')]({'serverMessage':_0x5003('0x6a')});}});function _0x2ff3bb(){return function(_0x23d8e5,_0x4b2b8d,_0x513377){if(_0x23d8e5[_0x5003('0x71')]()){return _0x513377();}else{_0x4b2b8d[_0x5003('0xe')](0x191)[_0x5003('0xf')](_0x5003('0x72'));}};}};