var _0x5545=['exports','body','username','send','status','Username\x20already\x20taken.','password','generateHash','filepath','save','json','User\x20created!','/api/admin/powerOff','child_process','sudo','poweroff','/api/admin/restart','reboot','platform','win32','../../etc/config-wap/hostapd.conf__npp.sh','utf8','Wifi\x20file\x20not\x20found','split','length','ssid','wpa_passphrase','Password','SSID','/etc/hostapd/hostapd.conf','readFile','/api/admin/wirelessSettings','join','etc','ssid_set.py','python','pipe','data','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','scan','Wireless\x20interface\x20not\x20found','post','country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','Ip\x20address:\x20','fusion_wifi_access','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','indexOf','emit','wifi-connection','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','\x20reconfigure','SocketVariables','sockets','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','Content-disposition','download','/api/diagnostics/start','fusion_diagnostics_running','socketId','diagnostics_running','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','isAuthenticated','User\x20Unauthenticated','shelljs','wireless-tools/wpa_supplicant','spawn','config','get','Wifi_NIC'];(function(_0x15f35e,_0xa2b336){var _0x14ac01=function(_0x3f43ff){while(--_0x3f43ff){_0x15f35e['push'](_0x15f35e['shift']());}};_0x14ac01(++_0xa2b336);}(_0x5545,0xcc));var _0x6399=function(_0x44a8f6,_0x3456e1){_0x44a8f6=_0x44a8f6-0x0;var _0x323f15=_0x5545[_0x44a8f6];return _0x323f15;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require('path');var shell=require(_0x6399('0x0'));var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require(_0x6399('0x1'));var spawn=require('child_process')[_0x6399('0x2')];const config=require(_0x6399('0x3'));let nicInterface=config[_0x6399('0x4')](_0x6399('0x5'));module[_0x6399('0x6')]=function(_0x58a740,_0x3d8e00,_0x30f214,_0x48ba3c,_0x364f65){_0x58a740['post']('/api/admin/users',_0x149503(),function(_0xd0bba,_0x497180){_0x3d8e00['findOne']({'username':_0xd0bba[_0x6399('0x7')][_0x6399('0x8')]},function(_0x257eb0,_0x331557){if(_0x257eb0)return _0x497180['status'](0x1f4)[_0x6399('0x9')](_0x257eb0);if(_0x331557){return _0x497180[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x6399('0xb'));}else{var _0x245417=new _0x3d8e00(_0xd0bba['body']);_0x245417[_0x6399('0x8')]=_0xd0bba[_0x6399('0x7')][_0x6399('0x8')];_0x245417[_0x6399('0xc')]=_0x245417[_0x6399('0xd')](_0xd0bba[_0x6399('0x7')][_0x6399('0xc')]);_0x245417[_0x6399('0xe')]=_0x245417['generateFileSystem'](_0x245417[_0x6399('0x8')]);_0x245417[_0x6399('0xf')](function(_0x2adb77){if(_0x2adb77)return _0x497180[_0x6399('0xa')](0x1f4)['send'](_0x2adb77);return _0x497180['status'](0xc8)[_0x6399('0x10')]({'serverMessage':_0x6399('0x11')});});}});});_0x58a740[_0x6399('0x4')](_0x6399('0x12'),function(_0x1e1552,_0x2df26d){_0x2df26d['status'](0xc8)[_0x6399('0x10')]({'serverMessage':'Shut\x20Down\x20Commencing'});var _0x41b8ba=require(_0x6399('0x13'))[_0x6399('0x2')];var _0x44ad97=_0x41b8ba(_0x6399('0x14'),[_0x6399('0x15')]);});_0x58a740[_0x6399('0x4')](_0x6399('0x16'),function(_0x1e98eb,_0x2ad70e){_0x2ad70e[_0x6399('0xa')](0xc8)[_0x6399('0x9')]('Restart\x20Commencing');var _0x546d6b=require('child_process')[_0x6399('0x2')];var _0x541b34=_0x546d6b(_0x6399('0x14'),[_0x6399('0x17')]);});_0x58a740[_0x6399('0x4')]('/api/admin/wirelessSettings',function(_0x25f694,_0xa29385){var _0x46cb49;var _0xf230dc=require('os')['EOL'];var _0x545084;var _0x4a5d39;var _0x5e78dc={};if(os[_0x6399('0x18')]()==_0x6399('0x19')){_0x46cb49=_0x6399('0x1a');fs['readFile'](_0x46cb49,_0x6399('0x1b'),function(_0x190611,_0x5dd318){if(_0x190611)_0xa29385['status'](0x1f4)[_0x6399('0x9')](_0x6399('0x1c'));_0x545084=_0x5dd318[_0x6399('0x1d')]('\x0a');for(var _0x2dd461=0x0;_0x2dd461<_0x545084[_0x6399('0x1e')];_0x2dd461++){_0x4a5d39=_0x545084[_0x2dd461][_0x6399('0x1d')]('=');if(_0x4a5d39[0x0]==_0x6399('0x1f'))_0x5e78dc['SSID']=_0x4a5d39[0x1];else if(_0x4a5d39[0x0]==_0x6399('0x20'))_0x5e78dc[_0x6399('0x21')]=_0x4a5d39[0x1];}_0xa29385[_0x6399('0xa')](0xc8)['json']({'SSID':_0x5e78dc[_0x6399('0x22')],'Password':_0x5e78dc['Password']});});}else{_0x46cb49=_0x6399('0x23');fs[_0x6399('0x24')](_0x46cb49,_0x6399('0x1b'),function(_0x158fef,_0x15b311){if(_0x158fef)_0xa29385['status'](0x1f4)['send'](_0x6399('0x1c'));_0x545084=_0x15b311['split'](_0xf230dc);for(var _0x5b5cbb=0x0;_0x5b5cbb<_0x545084['length'];_0x5b5cbb++){_0x4a5d39=_0x545084[_0x5b5cbb][_0x6399('0x1d')]('=');if(_0x4a5d39[0x0]=='ssid')_0x5e78dc[_0x6399('0x22')]=_0x4a5d39[0x1];else if(_0x4a5d39[0x0]==_0x6399('0x20'))_0x5e78dc['Password']=_0x4a5d39[0x1];}if(!_0x5e78dc[_0x6399('0x22')]){_0x5e78dc[_0x6399('0x22')]='Not\x20configured..';_0x5e78dc[_0x6399('0x21')]='';}_0xa29385[_0x6399('0xa')](0xc8)['json']({'SSID':_0x5e78dc['SSID'],'Password':_0x5e78dc[_0x6399('0x21')]});});}});_0x58a740['post'](_0x6399('0x25'),function(_0x38ae0b,_0x523230){try{var _0xaba47a;var _0x45d5c7;var _0x2e2c16=path[_0x6399('0x26')]('..','..',_0x6399('0x27'),_0x6399('0x28'));if(_0x38ae0b['body'][_0x6399('0x1f')]==null&&_0x38ae0b['body'][_0x6399('0xc')]==null)_0x45d5c7=[_0x6399('0x29'),_0x2e2c16,'-d'];else _0x45d5c7=['python',_0x2e2c16,'-s',_0x38ae0b[_0x6399('0x7')][_0x6399('0x1f')],'-p',_0x38ae0b[_0x6399('0x7')]['password']];var _0x30e4c0=require(_0x6399('0x13'))[_0x6399('0x2')];python_process=_0x30e4c0('sudo',_0x45d5c7,{'stdio':_0x6399('0x2a')});python_process['stderr']['on'](_0x6399('0x2b'),function(_0x1758b4){console[_0x6399('0x2c')](String(_0x1758b4));_0xaba47a=String(_0x1758b4);});python_process[_0x6399('0x2d')]['on'](_0x6399('0x2e'),function(_0x223713){if(_0xaba47a)return _0x523230[_0x6399('0xa')](0x1f4)['send'](_0xaba47a);else return _0x523230[_0x6399('0xa')](0xc8)[_0x6399('0x10')]({'serverMessage':_0x6399('0x2f')});});}catch(_0x328fcf){console['log'](_0x328fcf);return _0x523230[_0x6399('0xa')](0x1f4)['send'](_0x328fcf);}});_0x58a740[_0x6399('0x4')]('/api/admin/wirelessConnections',function(_0x4c4573,_0x2c5c5a){if(os[_0x6399('0x18')]()==_0x6399('0x19')){return _0x2c5c5a[_0x6399('0xa')](0xc8)[_0x6399('0x9')]();}else{iwlist[_0x6399('0x30')](nicInterface,function(_0xe42b89,_0x193e10){if(_0xe42b89)return _0x2c5c5a[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x6399('0x31'));else return _0x2c5c5a[_0x6399('0xa')](0xc8)[_0x6399('0x9')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x193e10});});}});_0x58a740[_0x6399('0x32')]('/api/admin/wirelessConnections',function(_0x579a42,_0x7a1e4b){var _0x238e68=undefined;var _0x4dacdb='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x6399('0x33');var _0x24e080=_0x6399('0x34')+_0x6399('0x35')+_0x579a42[_0x6399('0x7')][_0x6399('0x1f')]+'\x22\x0a'+_0x6399('0x36')+_0x6399('0x37')+_0x579a42[_0x6399('0x7')]['password']+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+_0x6399('0x38');if(_0x579a42[_0x6399('0x7')]['password']){_0x238e68=shell[_0x6399('0x39')](_0x6399('0x3a')+_0x579a42[_0x6399('0x7')][_0x6399('0x1f')]+_0x6399('0x3b')+_0x579a42[_0x6399('0x7')][_0x6399('0xc')]+'\x22',{'silent':!![]})['stdout'];}else{_0x238e68='network={\x0a'+'\x20\x20\x20\x20ssid=\x22'+_0x579a42['body']['ssid']+'\x22\x0a'+_0x6399('0x3c')+'}\x0a';}let _0x5e5183='';if(_0x579a42[_0x6399('0x7')]['hiddenNetwork'])_0x5e5183=_0x4dacdb+_0x24e080;else _0x5e5183=_0x4dacdb+_0x238e68;fs[_0x6399('0x3d')](_0x6399('0x3e'),_0x5e5183,function(_0x1795d9){if(_0x1795d9)return _0x7a1e4b['status'](0x1f4)[_0x6399('0x9')](_0x1795d9);shell[_0x6399('0x39')](_0x6399('0x3f')+nicInterface+'\x20reconfigure',{'silent':!![]});const _0x4b9b51=0x3a98;var _0x3135df=0x12c;var _0x582f71=0x0;var _0x10ecc7=setInterval(function(){var _0x523eb6=[_0x6399('0x40'),_0x6399('0x41'),_0x6399('0x42'),_0x6399('0x43'),_0x6399('0x44')];wpa_cli[_0x6399('0xa')](nicInterface,function(_0x513c07,_0x51f804){if(_0x513c07)return _0x7a1e4b[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x513c07);if(_0x51f804[_0x6399('0x45')]==_0x6399('0x46')){if(_0x51f804['ip']){console[_0x6399('0x2c')](_0x6399('0x47')+_0x51f804['ip']+'\x20assigned');clearInterval(_0x10ecc7);_0x364f65['SocketVariables'][_0x6399('0x48')]=_0x51f804;_0x48ba3c['sockets']['emit']('wifi-connection',_0x51f804);return _0x7a1e4b[_0x6399('0xa')](0xc8)[_0x6399('0x10')]({'serverMessage':'Connected\x20to\x20'+_0x579a42[_0x6399('0x7')][_0x6399('0x1f')]+_0x6399('0x49')});}else if(_0x582f71>_0x4b9b51){console['log'](_0x6399('0x4a'));clearInterval(_0x10ecc7);return _0x7a1e4b[_0x6399('0xa')](0x1f4)['send'](_0x6399('0x4b')+_0x579a42[_0x6399('0x7')]['ssid']);}_0x582f71+=_0x3135df;}else if(_0x523eb6[_0x6399('0x4c')](_0x51f804[_0x6399('0x45')])==-0x1){clearInterval(_0x10ecc7);_0x48ba3c['sockets'][_0x6399('0x4d')](_0x6399('0x4e'),_0x51f804);return _0x7a1e4b[_0x6399('0xa')](0x1f4)[_0x6399('0x9')]('Error\x20connecting\x20to\x20'+_0x579a42[_0x6399('0x7')][_0x6399('0x1f')]);}});},_0x3135df);});});_0x58a740['get'](_0x6399('0x4f'),function(_0x43ab80,_0x183305){if(os[_0x6399('0x18')]()==_0x6399('0x19')){_0x183305[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x6399('0x50'));}else{var _0x4efd33=_0x6399('0x51')+_0x6399('0x52')+'country=US\x0a\x0a';fs[_0x6399('0x3d')](_0x6399('0x3e'),_0x4efd33,function(_0x3e51e0){if(_0x3e51e0)return _0x183305[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x3e51e0);shell[_0x6399('0x39')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x6399('0x53'),{'silent':!![]});var _0x3ac850=setInterval(function(){var _0x23aeaa=[];wpa_cli['status'](nicInterface,function(_0x5a589b,_0xba9164){if(_0x5a589b)return _0x183305['status'](0x1f4)[_0x6399('0x9')](_0x5a589b);_0x364f65[_0x6399('0x54')][_0x6399('0x48')]=_0xba9164;_0x48ba3c[_0x6399('0x55')][_0x6399('0x4d')](_0x6399('0x4e'),_0xba9164);if(_0xba9164[_0x6399('0x45')]==_0x6399('0x43')||_0xba9164[_0x6399('0x45')]==_0x6399('0x56')){clearInterval(_0x3ac850);_0x48ba3c[_0x6399('0x55')][_0x6399('0x4d')](_0x6399('0x4e'),_0xba9164);return _0x183305[_0x6399('0xa')](0xc8)[_0x6399('0x10')]({'serverMessage':_0x6399('0x57')});}else if(connectingStatuses['indexOf'](_0xba9164['wpa_state'])==-0x1){clearInterval(_0x3ac850);_0x48ba3c[_0x6399('0x55')][_0x6399('0x4d')](_0x6399('0x4e'),_0xba9164);return _0x183305[_0x6399('0xa')](0x1f4)['send'](_0x6399('0x58'));}});},0x12c);});}});_0x58a740[_0x6399('0x4')](_0x6399('0x59'),function(_0x2d9657,_0xf56dc2){var _0x2c8426=_0x6399('0x5a');fs[_0x6399('0x5b')](_0x2c8426,function(_0x200c21,_0x18dabe){if(_0x200c21)return _0xf56dc2['status'](0x1f4)[_0x6399('0x9')](_0x200c21);if(_0x18dabe[_0x6399('0x1e')]>0x0){fs['readFile'](_0x2c8426+'/'+_0x18dabe[0x0],_0x6399('0x1b'),function(_0x43a42c,_0x4b647d){if(_0x43a42c)return status(0x1f4)[_0x6399('0x9')](_0x6399('0x5c'));_0xf56dc2['setHeader'](_0x6399('0x5d'),'attachment;\x20filename='+_0x18dabe[0x0]);return _0xf56dc2['status'](0xc8)[_0x6399('0x5e')](_0x2c8426+'/'+_0x18dabe[0x0]);});}else{return _0xf56dc2[_0x6399('0xa')](0xc8)[_0x6399('0x9')]('No\x20crash\x20files\x20found');}});});var _0x34ecce=null;_0x58a740[_0x6399('0x32')](_0x6399('0x5f'),function(_0x2fe4c6,_0x6db510){if(os[_0x6399('0x18')]()!='win32'){_0x34ecce=spawn(_0x6399('0x14'),['sh','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py']);_0x34ecce[_0x6399('0x2d')]['on'](_0x6399('0x2b'),function(_0x12c1c6){console[_0x6399('0x2c')](String(_0x12c1c6));});_0x34ecce['stderr']['on'](_0x6399('0x2b'),function(_0x4b2a3d){console[_0x6399('0x2c')](String(_0x4b2a3d));});var _0x552a84=0x1;var _0x5da46b=0x3;var _0x57a7f6=setInterval(function(){if(_0x552a84<=_0x5da46b){var _0x3368a5=shell[_0x6399('0x39')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x6399('0x2d')];if(_0x3368a5){clearInterval(_0x57a7f6);_0x364f65[_0x6399('0x54')][_0x6399('0x60')]={'process':_0x3368a5,'socket':_0x2fe4c6[_0x6399('0x7')][_0x6399('0x61')]};_0x48ba3c[_0x6399('0x55')][_0x6399('0x4d')](_0x6399('0x62'),_0x364f65['SocketVariables'][_0x6399('0x60')]);return _0x6db510[_0x6399('0xa')](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x552a84++;}}else{clearInterval(_0x57a7f6);return _0x6db510[_0x6399('0xa')](0x1f4)[_0x6399('0x9')]('Error\x20starting\x20diagnostic\x20tool');}},0x12c);}else{return _0x6db510['status'](0xc8)[_0x6399('0x10')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});_0x58a740[_0x6399('0x4')]('/api/diagnostics/stop',function(_0x15e94e,_0x46c01a){if(os['platform']()!=_0x6399('0x19')){shell[_0x6399('0x39')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x6399('0x39')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x491837,_0x2f83bf,_0x28ccf6){(function(_0x38908f){var _0xe46904=_0x38908f[_0x6399('0x63')]();if(_0xe46904){return _0x46c01a[_0x6399('0xa')](0x1f4)[_0x6399('0x9')](_0x6399('0x64'));}else{_0x364f65[_0x6399('0x54')][_0x6399('0x60')]=null;_0x48ba3c[_0x6399('0x55')]['emit'](_0x6399('0x62'),_0x364f65[_0x6399('0x54')][_0x6399('0x60')]);_0x34ecce=null;return _0x46c01a[_0x6399('0xa')](0xc8)[_0x6399('0x10')]({'serverMessage':_0x6399('0x65')});}}(_0x2f83bf[_0x6399('0x63')]()));});}else{return _0x46c01a[_0x6399('0xa')](0xc8)[_0x6399('0x10')]({'serverMessage':_0x6399('0x66')});}});function _0x149503(){return function(_0x24d8ac,_0x38e3cd,_0x24c991){if(_0x24d8ac[_0x6399('0x67')]()){return _0x24c991();}else{_0x38e3cd['status'](0x191)[_0x6399('0x9')](_0x6399('0x68'));}};}};