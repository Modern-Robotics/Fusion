var _0x1026=['mkdirp','path','shelljs','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','config','get','Wifi_NIC','exports','/api/admin/users','findOne','body','username','status','send','password','generateHash','filepath','generateFileSystem','save','json','/api/admin/powerOff','Shut\x20Down\x20Commencing','child_process','spawn','sudo','poweroff','/api/admin/restart','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','platform','win32','../../etc/config-wap/hostapd.conf__npp.sh','readFile','split','length','ssid','wpa_passphrase','Password','SSID','/etc/hostapd/hostapd.conf','utf8','Wifi\x20file\x20not\x20found','post','join','etc','ssid_set.py','python','pipe','stderr','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','scan','/api/admin/wirelessConnections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09scan_ssid=1\x0a','\x09psk=\x22','}\x0a\x0a','\x22\x20\x22','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','ASSOCIATING','COMPLETED','Ip\x20address:\x20','SocketVariables','fusion_wifi_access','sockets','emit','wifi-connection','Connected\x20to\x20','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','indexOf','wpa_state','exec','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','fusion_diagnostics_running','socketId','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','diagnostics_running','Diagnostic\x20tool\x20stopped\x20successfully','User\x20Unauthenticated'];(function(_0x2c39ed,_0xe2d92b){var _0x5c25f5=function(_0x1a7a84){while(--_0x1a7a84){_0x2c39ed['push'](_0x2c39ed['shift']());}};_0x5c25f5(++_0xe2d92b);}(_0x1026,0x78));var _0x4a7d=function(_0x2abcc2,_0x29d0dc){_0x2abcc2=_0x2abcc2-0x0;var _0x1b50c5=_0x1026[_0x2abcc2];return _0x1b50c5;};var fs=require('fs');var mkdirp=require(_0x4a7d('0x0'));var os=require('os');var path=require(_0x4a7d('0x1'));var shell=require(_0x4a7d('0x2'));var wpa_cli=require(_0x4a7d('0x3'));var iwlist=require(_0x4a7d('0x4'));var wpa_supplicant=require(_0x4a7d('0x5'));var spawn=require('child_process')['spawn'];const config=require(_0x4a7d('0x6'));let nicInterface=config[_0x4a7d('0x7')](_0x4a7d('0x8'));module[_0x4a7d('0x9')]=function(_0x34de15,_0x33fa6a,_0x1728c9,_0x88fcb5,_0xcd5fe6){_0x34de15['post'](_0x4a7d('0xa'),_0xdf8047(),function(_0x2778d9,_0x2e683a){_0x33fa6a[_0x4a7d('0xb')]({'username':_0x2778d9[_0x4a7d('0xc')][_0x4a7d('0xd')]},function(_0xb5ad89,_0x491e4){if(_0xb5ad89)return _0x2e683a[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0xb5ad89);if(_0x491e4){return _0x2e683a[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')]('Username\x20already\x20taken.');}else{var _0x2743e7=new _0x33fa6a(_0x2778d9[_0x4a7d('0xc')]);_0x2743e7['username']=_0x2778d9[_0x4a7d('0xc')][_0x4a7d('0xd')];_0x2743e7[_0x4a7d('0x10')]=_0x2743e7[_0x4a7d('0x11')](_0x2778d9['body']['password']);_0x2743e7[_0x4a7d('0x12')]=_0x2743e7[_0x4a7d('0x13')](_0x2743e7['username']);_0x2743e7[_0x4a7d('0x14')](function(_0x38bb07){if(_0x38bb07)return _0x2e683a[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x38bb07);return _0x2e683a['status'](0xc8)[_0x4a7d('0x15')]({'serverMessage':'User\x20created!'});});}});});_0x34de15[_0x4a7d('0x7')](_0x4a7d('0x16'),function(_0x415a90,_0x35a31d){_0x35a31d[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x17')});var _0xb8269e=require(_0x4a7d('0x18'))[_0x4a7d('0x19')];var _0x1277cf=_0xb8269e(_0x4a7d('0x1a'),[_0x4a7d('0x1b')]);});_0x34de15['get'](_0x4a7d('0x1c'),function(_0x5b3235,_0x3ace1f){_0x3ace1f[_0x4a7d('0xe')](0xc8)[_0x4a7d('0xf')](_0x4a7d('0x1d'));var _0x5ec06e=require(_0x4a7d('0x18'))[_0x4a7d('0x19')];var _0x482676=_0x5ec06e(_0x4a7d('0x1a'),[_0x4a7d('0x1e')]);});_0x34de15[_0x4a7d('0x7')](_0x4a7d('0x1f'),function(_0x318486,_0x2a0f9){var _0x57f8f9;var _0x155d82=require('os')[_0x4a7d('0x20')];var _0x4cfe90;var _0x3da7c3;var _0x5b69c1={};if(os[_0x4a7d('0x21')]()==_0x4a7d('0x22')){_0x57f8f9=_0x4a7d('0x23');fs[_0x4a7d('0x24')](_0x57f8f9,'utf8',function(_0x445b35,_0x1e429d){if(_0x445b35)_0x2a0f9[_0x4a7d('0xe')](0x1f4)['send']('Wifi\x20file\x20not\x20found');_0x4cfe90=_0x1e429d[_0x4a7d('0x25')]('\x0a');for(var _0x305c15=0x0;_0x305c15<_0x4cfe90[_0x4a7d('0x26')];_0x305c15++){_0x3da7c3=_0x4cfe90[_0x305c15][_0x4a7d('0x25')]('=');if(_0x3da7c3[0x0]==_0x4a7d('0x27'))_0x5b69c1['SSID']=_0x3da7c3[0x1];else if(_0x3da7c3[0x0]==_0x4a7d('0x28'))_0x5b69c1[_0x4a7d('0x29')]=_0x3da7c3[0x1];}_0x2a0f9['status'](0xc8)[_0x4a7d('0x15')]({'SSID':_0x5b69c1[_0x4a7d('0x2a')],'Password':_0x5b69c1[_0x4a7d('0x29')]});});}else{_0x57f8f9=_0x4a7d('0x2b');fs['readFile'](_0x57f8f9,_0x4a7d('0x2c'),function(_0x135dc3,_0x3e1fb1){if(_0x135dc3)_0x2a0f9['status'](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x2d'));_0x4cfe90=_0x3e1fb1[_0x4a7d('0x25')](_0x155d82);for(var _0x4c98ef=0x0;_0x4c98ef<_0x4cfe90[_0x4a7d('0x26')];_0x4c98ef++){_0x3da7c3=_0x4cfe90[_0x4c98ef]['split']('=');if(_0x3da7c3[0x0]==_0x4a7d('0x27'))_0x5b69c1[_0x4a7d('0x2a')]=_0x3da7c3[0x1];else if(_0x3da7c3[0x0]=='wpa_passphrase')_0x5b69c1[_0x4a7d('0x29')]=_0x3da7c3[0x1];}if(!_0x5b69c1['SSID']){_0x5b69c1[_0x4a7d('0x2a')]='Not\x20configured..';_0x5b69c1[_0x4a7d('0x29')]='';}_0x2a0f9[_0x4a7d('0xe')](0xc8)['json']({'SSID':_0x5b69c1[_0x4a7d('0x2a')],'Password':_0x5b69c1[_0x4a7d('0x29')]});});}});_0x34de15[_0x4a7d('0x2e')](_0x4a7d('0x1f'),function(_0x54d2da,_0x3c5850){try{var _0x1a6302;var _0x5a0e38;var _0x58846b=path[_0x4a7d('0x2f')]('..','..',_0x4a7d('0x30'),_0x4a7d('0x31'));if(_0x54d2da['body'][_0x4a7d('0x27')]==null&&_0x54d2da[_0x4a7d('0xc')][_0x4a7d('0x10')]==null)_0x5a0e38=[_0x4a7d('0x32'),_0x58846b,'-d'];else _0x5a0e38=[_0x4a7d('0x32'),_0x58846b,'-s',_0x54d2da[_0x4a7d('0xc')]['ssid'],'-p',_0x54d2da[_0x4a7d('0xc')]['password']];var _0x29abc3=require(_0x4a7d('0x18'))['spawn'];python_process=_0x29abc3(_0x4a7d('0x1a'),_0x5a0e38,{'stdio':_0x4a7d('0x33')});python_process[_0x4a7d('0x34')]['on']('data',function(_0x3d4302){console[_0x4a7d('0x35')](String(_0x3d4302));_0x1a6302=String(_0x3d4302);});python_process[_0x4a7d('0x36')]['on'](_0x4a7d('0x37'),function(_0x280b17){if(_0x1a6302)return _0x3c5850[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x1a6302);else return _0x3c5850['status'](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x38')});});}catch(_0x443a1d){console[_0x4a7d('0x35')](_0x443a1d);return _0x3c5850[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x443a1d);}});_0x34de15['get']('/api/admin/wirelessConnections',function(_0x33b94c,_0x3172eb){if(os[_0x4a7d('0x21')]()==_0x4a7d('0x22')){return _0x3172eb[_0x4a7d('0xe')](0xc8)[_0x4a7d('0xf')]();}else{iwlist[_0x4a7d('0x39')](nicInterface,function(_0x1a9631,_0x2ff620){if(_0x1a9631)return _0x3172eb['status'](0x1f4)[_0x4a7d('0xf')]('Wireless\x20interface\x20not\x20found');else return _0x3172eb[_0x4a7d('0xe')](0xc8)[_0x4a7d('0xf')]({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x2ff620});});}});_0x34de15['post'](_0x4a7d('0x3a'),function(_0x3411d5,_0x4d88b2){var _0x559cb4=undefined;var _0x722f27=_0x4a7d('0x3b')+_0x4a7d('0x3c')+_0x4a7d('0x3d');var _0x1a9556=_0x4a7d('0x3e')+'\x09ssid=\x22'+_0x3411d5[_0x4a7d('0xc')]['ssid']+'\x22\x0a'+_0x4a7d('0x3f')+_0x4a7d('0x40')+_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x10')]+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+_0x4a7d('0x41');if(_0x3411d5[_0x4a7d('0xc')]['password']){_0x559cb4=shell['exec']('wpa_passphrase\x20\x22'+_0x3411d5['body']['ssid']+_0x4a7d('0x42')+_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x10')]+'\x22',{'silent':!![]})['stdout'];}else{_0x559cb4='network={\x0a'+_0x4a7d('0x43')+_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x27')]+'\x22\x0a'+_0x4a7d('0x44')+'}\x0a';}let _0x410b40='';if(_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x45')])_0x410b40=_0x722f27+_0x1a9556;else _0x410b40=_0x722f27+_0x559cb4;fs[_0x4a7d('0x46')](_0x4a7d('0x47'),_0x410b40,function(_0x13a588){if(_0x13a588)return _0x4d88b2[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x13a588);shell['exec'](_0x4a7d('0x48')+nicInterface+_0x4a7d('0x49'),{'silent':!![]});const _0x3e1819=0x3a98;var _0xcb0722=0x12c;var _0x47598b=0x0;var _0x4e389c=setInterval(function(){var _0x2b60d1=[_0x4a7d('0x4a'),_0x4a7d('0x4b'),_0x4a7d('0x4c'),_0x4a7d('0x4d'),_0x4a7d('0x4e')];wpa_cli[_0x4a7d('0xe')](nicInterface,function(_0x504ace,_0x112e0f){if(_0x504ace)return _0x4d88b2[_0x4a7d('0xe')](0x1f4)['send'](_0x504ace);if(_0x112e0f['wpa_state']==_0x4a7d('0x4f')){if(_0x112e0f['ip']){console['log'](_0x4a7d('0x50')+_0x112e0f['ip']+'\x20assigned');clearInterval(_0x4e389c);_0xcd5fe6[_0x4a7d('0x51')][_0x4a7d('0x52')]=_0x112e0f;_0x88fcb5[_0x4a7d('0x53')][_0x4a7d('0x54')](_0x4a7d('0x55'),_0x112e0f);return _0x4d88b2[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x56')+_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x27')]+_0x4a7d('0x57')});}else if(_0x47598b>_0x3e1819){console[_0x4a7d('0x35')](_0x4a7d('0x58'));clearInterval(_0x4e389c);return _0x4d88b2['status'](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x59')+_0x3411d5[_0x4a7d('0xc')][_0x4a7d('0x27')]);}_0x47598b+=_0xcb0722;}else if(_0x2b60d1[_0x4a7d('0x5a')](_0x112e0f[_0x4a7d('0x5b')])==-0x1){clearInterval(_0x4e389c);_0x88fcb5[_0x4a7d('0x53')][_0x4a7d('0x54')]('wifi-connection',_0x112e0f);return _0x4d88b2['status'](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x59')+_0x3411d5['body'][_0x4a7d('0x27')]);}});},_0xcb0722);});});_0x34de15[_0x4a7d('0x7')]('/api/admin/wirelessConnections/disconnect',function(_0x272708,_0x2c84e4){if(os[_0x4a7d('0x21')]()==_0x4a7d('0x22')){_0x2c84e4[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')]('Disconnect\x20not\x20available\x20on\x20Windows');}else{var _0x15d778=_0x4a7d('0x3b')+_0x4a7d('0x3c')+_0x4a7d('0x3d');fs[_0x4a7d('0x46')](_0x4a7d('0x47'),_0x15d778,function(_0xd85303){if(_0xd85303)return _0x2c84e4['status'](0x1f4)['send'](_0xd85303);shell[_0x4a7d('0x5c')](_0x4a7d('0x48')+nicInterface+_0x4a7d('0x49'),{'silent':!![]});var _0x4c043e=setInterval(function(){var _0x5ca731=[];wpa_cli['status'](nicInterface,function(_0x35bad7,_0x2535e4){if(_0x35bad7)return _0x2c84e4[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x35bad7);_0xcd5fe6[_0x4a7d('0x51')][_0x4a7d('0x52')]=_0x2535e4;_0x88fcb5[_0x4a7d('0x53')][_0x4a7d('0x54')](_0x4a7d('0x55'),_0x2535e4);if(_0x2535e4[_0x4a7d('0x5b')]==_0x4a7d('0x4d')||_0x2535e4[_0x4a7d('0x5b')]==_0x4a7d('0x5d')){clearInterval(_0x4c043e);_0x88fcb5[_0x4a7d('0x53')]['emit']('wifi-connection',_0x2535e4);return _0x2c84e4[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x5e')});}else if(connectingStatuses[_0x4a7d('0x5a')](_0x2535e4[_0x4a7d('0x5b')])==-0x1){clearInterval(_0x4c043e);_0x88fcb5['sockets'][_0x4a7d('0x54')](_0x4a7d('0x55'),_0x2535e4);return _0x2c84e4[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x5f'));}});},0x12c);});}});_0x34de15[_0x4a7d('0x7')](_0x4a7d('0x60'),function(_0x3c6cd0,_0x48a20f){var _0x21661b=_0x4a7d('0x61');fs[_0x4a7d('0x62')](_0x21661b,function(_0x2c43d4,_0x2cf9b8){if(_0x2c43d4)return _0x48a20f[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x2c43d4);if(_0x2cf9b8[_0x4a7d('0x26')]>0x0){fs[_0x4a7d('0x24')](_0x21661b+'/'+_0x2cf9b8[0x0],_0x4a7d('0x2c'),function(_0x38623f,_0x1ba601){if(_0x38623f)return status(0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x63'));_0x48a20f['setHeader'](_0x4a7d('0x64'),_0x4a7d('0x65')+_0x2cf9b8[0x0]);return _0x48a20f[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x66')](_0x21661b+'/'+_0x2cf9b8[0x0]);});}else{return _0x48a20f[_0x4a7d('0xe')](0xc8)[_0x4a7d('0xf')](_0x4a7d('0x67'));}});});var _0x40fcee=null;_0x34de15[_0x4a7d('0x2e')](_0x4a7d('0x68'),function(_0xd740db,_0x392b66){if(os[_0x4a7d('0x21')]()!='win32'){_0x40fcee=spawn(_0x4a7d('0x1a'),['sh',_0x4a7d('0x69'),_0x4a7d('0x6a')]);_0x40fcee[_0x4a7d('0x36')]['on'](_0x4a7d('0x6b'),function(_0x21a5df){console['log'](String(_0x21a5df));});_0x40fcee[_0x4a7d('0x34')]['on'](_0x4a7d('0x6b'),function(_0x5ceb57){console[_0x4a7d('0x35')](String(_0x5ceb57));});var _0x17c1e2=0x1;var _0x596c31=0x3;var _0x6c8ce7=setInterval(function(){if(_0x17c1e2<=_0x596c31){var _0x7eaafd=shell[_0x4a7d('0x5c')](_0x4a7d('0x6c'),{'silent':!![]})[_0x4a7d('0x36')];if(_0x7eaafd){clearInterval(_0x6c8ce7);_0xcd5fe6['SocketVariables'][_0x4a7d('0x6d')]={'process':_0x7eaafd,'socket':_0xd740db[_0x4a7d('0xc')][_0x4a7d('0x6e')]};_0x88fcb5[_0x4a7d('0x53')][_0x4a7d('0x54')]('diagnostics_running',_0xcd5fe6[_0x4a7d('0x51')][_0x4a7d('0x6d')]);return _0x392b66[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x6f')});}else{_0x17c1e2++;}}else{clearInterval(_0x6c8ce7);return _0x392b66['status'](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x70'));}},0x12c);}else{return _0x392b66['status'](0xc8)[_0x4a7d('0x15')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});_0x34de15[_0x4a7d('0x7')](_0x4a7d('0x71'),function(_0x1183b6,_0x2dc6d6){if(os[_0x4a7d('0x21')]()!=_0x4a7d('0x22')){shell['exec'](_0x4a7d('0x72'),{'silent':!![]});shell[_0x4a7d('0x5c')](_0x4a7d('0x6c'),{'silent':!![]},function(_0x530321,_0x4fb489,_0x2cac7a){(function(_0x406f5e){var _0x5d593f=_0x406f5e[_0x4a7d('0x73')]();if(_0x5d593f){return _0x2dc6d6[_0x4a7d('0xe')](0x1f4)[_0x4a7d('0xf')](_0x4a7d('0x74'));}else{_0xcd5fe6[_0x4a7d('0x51')][_0x4a7d('0x6d')]=null;_0x88fcb5[_0x4a7d('0x53')][_0x4a7d('0x54')](_0x4a7d('0x75'),_0xcd5fe6[_0x4a7d('0x51')]['fusion_diagnostics_running']);_0x40fcee=null;return _0x2dc6d6[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':_0x4a7d('0x76')});}}(_0x4fb489[_0x4a7d('0x73')]()));});}else{return _0x2dc6d6[_0x4a7d('0xe')](0xc8)[_0x4a7d('0x15')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});function _0xdf8047(){return function(_0x24302c,_0x5a16c9,_0x160873){if(_0x24302c['isAuthenticated']()){return _0x160873();}else{_0x5a16c9[_0x4a7d('0xe')](0x191)[_0x4a7d('0xf')](_0x4a7d('0x77'));}};}};