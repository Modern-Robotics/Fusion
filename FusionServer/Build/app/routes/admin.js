var _0x5502=['reboot','/api/admin/wirelessSettings','EOL','platform','win32','readFile','utf8','Wifi\x20file\x20not\x20found','split','length','ssid','wpa_passphrase','Password','SSID','/etc/hostapd/hostapd.conf','join','etc','ssid_set.py','python','pipe','stderr','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','\x20assigned','SocketVariables','fusion_wifi_access','emit','wifi-connection','Connected\x20to\x20','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','indexOf','sockets','Error\x20connecting\x20to\x20','Disconnect\x20not\x20available\x20on\x20Windows','country=US\x0a\x0a','/etc/wpa_supplicant/wpa_supplicant.conf','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','Content-disposition','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','diagnostics_running','fusion_diagnostics_running','Error\x20starting\x20diagnostic\x20tool','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','User\x20Unauthenticated','mkdirp','path','shelljs','wireless-tools/wpa_cli','child_process','spawn','get','Wifi_NIC','post','findOne','body','username','status','send','Username\x20already\x20taken.','generateHash','password','generateFileSystem','save','User\x20created!','/api/admin/powerOff','json','Shut\x20Down\x20Commencing','sudo','/api/admin/restart'];(function(_0x5ad8ab,_0x1765d3){var _0x30d099=function(_0x4e96d1){while(--_0x4e96d1){_0x5ad8ab['push'](_0x5ad8ab['shift']());}};_0x30d099(++_0x1765d3);}(_0x5502,0x140));var _0x452e=function(_0x121513,_0x4bb134){_0x121513=_0x121513-0x0;var _0x4d2cf4=_0x5502[_0x121513];return _0x4d2cf4;};var fs=require('fs');var mkdirp=require(_0x452e('0x0'));var os=require('os');var path=require(_0x452e('0x1'));var shell=require(_0x452e('0x2'));var wpa_cli=require(_0x452e('0x3'));var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require('wireless-tools/wpa_supplicant');var spawn=require(_0x452e('0x4'))[_0x452e('0x5')];const config=require('config');let nicInterface=config[_0x452e('0x6')](_0x452e('0x7'));module['exports']=function(_0x36551a,_0x2fa5ff,_0x16cd8e,_0x3ec305,_0x33b9ca){_0x36551a[_0x452e('0x8')]('/api/admin/users',_0x2254b7(),function(_0x30bae4,_0x5dadbe){_0x2fa5ff[_0x452e('0x9')]({'username':_0x30bae4[_0x452e('0xa')][_0x452e('0xb')]},function(_0x1d5466,_0x18ebd6){if(_0x1d5466)return _0x5dadbe['status'](0x1f4)['send'](_0x1d5466);if(_0x18ebd6){return _0x5dadbe[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0xe'));}else{var _0x145723=new _0x2fa5ff(_0x30bae4[_0x452e('0xa')]);_0x145723['username']=_0x30bae4[_0x452e('0xa')][_0x452e('0xb')];_0x145723['password']=_0x145723[_0x452e('0xf')](_0x30bae4[_0x452e('0xa')][_0x452e('0x10')]);_0x145723['filepath']=_0x145723[_0x452e('0x11')](_0x145723[_0x452e('0xb')]);_0x145723[_0x452e('0x12')](function(_0x2e1167){if(_0x2e1167)return _0x5dadbe[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x2e1167);return _0x5dadbe[_0x452e('0xc')](0xc8)['json']({'serverMessage':_0x452e('0x13')});});}});});_0x36551a[_0x452e('0x6')](_0x452e('0x14'),function(_0x3f038f,_0x2308c1){_0x2308c1[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x16')});var _0x2418cb=require(_0x452e('0x4'))['spawn'];var _0x9a3bf3=_0x2418cb(_0x452e('0x17'),['poweroff']);});_0x36551a['get'](_0x452e('0x18'),function(_0x54c185,_0x25e660){_0x25e660['status'](0xc8)['send']('Restart\x20Commencing');var _0x31d86a=require(_0x452e('0x4'))['spawn'];var _0x3440c4=_0x31d86a('sudo',[_0x452e('0x19')]);});_0x36551a['get'](_0x452e('0x1a'),function(_0x35ce8c,_0x31c89f){var _0x39561c;var _0x471b7c=require('os')[_0x452e('0x1b')];var _0x3d70dd;var _0x25a5d6;var _0x3d4c77={};if(os[_0x452e('0x1c')]()==_0x452e('0x1d')){_0x39561c='../../etc/hostapd.conf';fs[_0x452e('0x1e')](_0x39561c,_0x452e('0x1f'),function(_0x416433,_0x13fe66){if(_0x416433)_0x31c89f[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x20'));_0x3d70dd=_0x13fe66[_0x452e('0x21')]('\x0a');for(var _0x4c64f7=0x0;_0x4c64f7<_0x3d70dd[_0x452e('0x22')];_0x4c64f7++){_0x25a5d6=_0x3d70dd[_0x4c64f7][_0x452e('0x21')]('=');if(_0x25a5d6[0x0]==_0x452e('0x23'))_0x3d4c77['SSID']=_0x25a5d6[0x1];else if(_0x25a5d6[0x0]==_0x452e('0x24'))_0x3d4c77[_0x452e('0x25')]=_0x25a5d6[0x1];}_0x31c89f[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'SSID':_0x3d4c77[_0x452e('0x26')],'Password':_0x3d4c77[_0x452e('0x25')]});});}else{_0x39561c=_0x452e('0x27');fs[_0x452e('0x1e')](_0x39561c,_0x452e('0x1f'),function(_0x532e36,_0xe5bc90){if(_0x532e36)_0x31c89f[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x20'));_0x3d70dd=_0xe5bc90[_0x452e('0x21')](_0x471b7c);for(var _0x8b7d63=0x0;_0x8b7d63<_0x3d70dd[_0x452e('0x22')];_0x8b7d63++){_0x25a5d6=_0x3d70dd[_0x8b7d63][_0x452e('0x21')]('=');if(_0x25a5d6[0x0]=='ssid')_0x3d4c77[_0x452e('0x26')]=_0x25a5d6[0x1];else if(_0x25a5d6[0x0]==_0x452e('0x24'))_0x3d4c77[_0x452e('0x25')]=_0x25a5d6[0x1];}_0x31c89f[_0x452e('0xc')](0xc8)['json']({'SSID':_0x3d4c77['SSID'],'Password':_0x3d4c77[_0x452e('0x25')]});});}});_0x36551a[_0x452e('0x8')]('/api/admin/wirelessSettings',function(_0x3af08a,_0x5d4abb){try{var _0x4088dc;var _0x574ea2;var _0x308fc9=path[_0x452e('0x28')]('..','..',_0x452e('0x29'),_0x452e('0x2a'));if(_0x3af08a[_0x452e('0xa')]['ssid']==null&&_0x3af08a[_0x452e('0xa')]['password']==null)_0x574ea2=[_0x452e('0x2b'),_0x308fc9,'-d'];else _0x574ea2=['python',_0x308fc9,'-s',_0x3af08a['body'][_0x452e('0x23')],'-p',_0x3af08a[_0x452e('0xa')][_0x452e('0x10')]];var _0x273a8d=require(_0x452e('0x4'))['spawn'];python_process=_0x273a8d(_0x452e('0x17'),_0x574ea2,{'stdio':_0x452e('0x2c')});python_process[_0x452e('0x2d')]['on']('data',function(_0xe135fe){console[_0x452e('0x2e')](String(_0xe135fe));_0x4088dc=String(_0xe135fe);});python_process[_0x452e('0x2f')]['on'](_0x452e('0x30'),function(_0x502e26){if(_0x4088dc)return _0x5d4abb[_0x452e('0xc')](0x1f4)['send'](_0x4088dc);else return _0x5d4abb[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x31')});});}catch(_0xd6a3f){console[_0x452e('0x2e')](_0xd6a3f);return _0x5d4abb[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0xd6a3f);}});_0x36551a[_0x452e('0x6')](_0x452e('0x32'),function(_0x16623b,_0x414432){if(os['platform']()=='win32'){return _0x414432[_0x452e('0xc')](0xc8)['send']();}else{iwlist[_0x452e('0x33')](nicInterface,function(_0x2009d0,_0x50e9a6){if(_0x2009d0)return _0x414432[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x34'));else return _0x414432[_0x452e('0xc')](0xc8)['send']({'serverMessage':_0x452e('0x35'),'data':_0x50e9a6});});}});_0x36551a['post'](_0x452e('0x32'),function(_0x338438,_0x2435f9){var _0x4c5082=undefined;var _0x769751=_0x452e('0x36')+_0x452e('0x37')+'country=US\x0a\x0a';var _0x39c254=_0x452e('0x38')+_0x452e('0x39')+_0x338438[_0x452e('0xa')][_0x452e('0x23')]+'\x22\x0a'+_0x452e('0x3a')+'\x09psk=\x22'+_0x338438[_0x452e('0xa')]['password']+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+_0x452e('0x3b');if(_0x338438[_0x452e('0xa')]['password']){_0x4c5082=shell[_0x452e('0x3c')](_0x452e('0x3d')+_0x338438[_0x452e('0xa')][_0x452e('0x23')]+_0x452e('0x3e')+_0x338438[_0x452e('0xa')][_0x452e('0x10')]+'\x22',{'silent':!![]})['stdout'];}else{_0x4c5082=_0x452e('0x38')+_0x452e('0x3f')+_0x338438['body']['ssid']+'\x22\x0a'+_0x452e('0x40')+'}\x0a';}let _0x878e06='';if(_0x338438[_0x452e('0xa')][_0x452e('0x41')])_0x878e06=_0x769751+_0x39c254;else _0x878e06=_0x769751+_0x4c5082;fs[_0x452e('0x42')]('/etc/wpa_supplicant/wpa_supplicant.conf',_0x878e06,function(_0x30697a){if(_0x30697a)return _0x2435f9[_0x452e('0xc')](0x1f4)['send'](_0x30697a);shell[_0x452e('0x3c')](_0x452e('0x43')+nicInterface+_0x452e('0x44'),{'silent':!![]});const _0x585734=0x3a98;var _0x5444c9=0x12c;var _0x36c2c8=0x0;var _0x557c0a=setInterval(function(){var _0x27303d=[_0x452e('0x45'),_0x452e('0x46'),_0x452e('0x47'),_0x452e('0x48'),_0x452e('0x49')];wpa_cli['status'](nicInterface,function(_0xcd791,_0xdf728b){if(_0xcd791)return _0x2435f9[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0xcd791);if(_0xdf728b[_0x452e('0x4a')]==_0x452e('0x4b')){if(_0xdf728b['ip']){console[_0x452e('0x2e')]('Ip\x20address:\x20'+_0xdf728b['ip']+_0x452e('0x4c'));clearInterval(_0x557c0a);_0x33b9ca[_0x452e('0x4d')][_0x452e('0x4e')]=_0xdf728b;_0x3ec305['sockets'][_0x452e('0x4f')](_0x452e('0x50'),_0xdf728b);return _0x2435f9[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x51')+_0x338438[_0x452e('0xa')][_0x452e('0x23')]+_0x452e('0x52')});}else if(_0x36c2c8>_0x585734){console[_0x452e('0x2e')](_0x452e('0x53'));clearInterval(_0x557c0a);return _0x2435f9[_0x452e('0xc')](0x1f4)['send']('Error\x20connecting\x20to\x20'+_0x338438[_0x452e('0xa')][_0x452e('0x23')]);}_0x36c2c8+=_0x5444c9;}else if(_0x27303d[_0x452e('0x54')](_0xdf728b[_0x452e('0x4a')])==-0x1){clearInterval(_0x557c0a);_0x3ec305[_0x452e('0x55')][_0x452e('0x4f')](_0x452e('0x50'),_0xdf728b);return _0x2435f9[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x56')+_0x338438[_0x452e('0xa')][_0x452e('0x23')]);}});},_0x5444c9);});});_0x36551a[_0x452e('0x6')]('/api/admin/wirelessConnections/disconnect',function(_0x5ee56d,_0x2a3004){if(os[_0x452e('0x1c')]()==_0x452e('0x1d')){_0x2a3004[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x57'));}else{var _0x29706a='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x452e('0x37')+_0x452e('0x58');fs[_0x452e('0x42')](_0x452e('0x59'),_0x29706a,function(_0x2dffde){if(_0x2dffde)return _0x2a3004['status'](0x1f4)['send'](_0x2dffde);shell['exec'](_0x452e('0x43')+nicInterface+'\x20reconfigure',{'silent':!![]});var _0x4ade12=setInterval(function(){var _0x37bb7a=[];wpa_cli[_0x452e('0xc')](nicInterface,function(_0x147713,_0x40011c){if(_0x147713)return _0x2a3004['status'](0x1f4)['send'](_0x147713);_0x33b9ca['SocketVariables'][_0x452e('0x4e')]=_0x40011c;_0x3ec305['sockets'][_0x452e('0x4f')](_0x452e('0x50'),_0x40011c);if(_0x40011c[_0x452e('0x4a')]==_0x452e('0x48')||_0x40011c[_0x452e('0x4a')]==_0x452e('0x5a')){clearInterval(_0x4ade12);_0x3ec305[_0x452e('0x55')][_0x452e('0x4f')](_0x452e('0x50'),_0x40011c);return _0x2a3004[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x5b')});}else if(connectingStatuses[_0x452e('0x54')](_0x40011c[_0x452e('0x4a')])==-0x1){clearInterval(_0x4ade12);_0x3ec305[_0x452e('0x55')][_0x452e('0x4f')]('wifi-connection',_0x40011c);return _0x2a3004[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x5c'));}});},0x12c);});}});_0x36551a[_0x452e('0x6')](_0x452e('0x5d'),function(_0x180150,_0x19b759){var _0x2ef7c8=_0x452e('0x5e');fs[_0x452e('0x5f')](_0x2ef7c8,function(_0x3038ee,_0x5a15d1){if(_0x3038ee)return _0x19b759[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x3038ee);if(_0x5a15d1[_0x452e('0x22')]>0x0){fs[_0x452e('0x1e')](_0x2ef7c8+'/'+_0x5a15d1[0x0],'utf8',function(_0x33230e,_0x2b99fa){if(_0x33230e)return status(0x1f4)[_0x452e('0xd')](_0x452e('0x60'));_0x19b759['setHeader'](_0x452e('0x61'),'attachment;\x20filename='+_0x5a15d1[0x0]);return _0x19b759[_0x452e('0xc')](0xc8)[_0x452e('0x62')](_0x2ef7c8+'/'+_0x5a15d1[0x0]);});}else{return _0x19b759[_0x452e('0xc')](0xc8)[_0x452e('0xd')](_0x452e('0x63'));}});});var _0x59c639=null;_0x36551a[_0x452e('0x8')](_0x452e('0x64'),function(_0x51ce72,_0x5f4968){if(os['platform']()!='win32'){_0x59c639=spawn(_0x452e('0x17'),['sh',_0x452e('0x65'),_0x452e('0x66')]);_0x59c639[_0x452e('0x2f')]['on'](_0x452e('0x67'),function(_0x316dec){console[_0x452e('0x2e')](String(_0x316dec));});_0x59c639[_0x452e('0x2d')]['on'](_0x452e('0x67'),function(_0x3a4e8d){console[_0x452e('0x2e')](String(_0x3a4e8d));});var _0x1e176f=0x1;var _0x35ae63=0x3;var _0x1d2660=setInterval(function(){if(_0x1e176f<=_0x35ae63){var _0x149bf1=shell[_0x452e('0x3c')](_0x452e('0x68'),{'silent':!![]})[_0x452e('0x2f')];if(_0x149bf1){clearInterval(_0x1d2660);_0x33b9ca['SocketVariables']['fusion_diagnostics_running']={'process':_0x149bf1,'socket':_0x51ce72[_0x452e('0xa')]['socketId']};_0x3ec305[_0x452e('0x55')][_0x452e('0x4f')](_0x452e('0x69'),_0x33b9ca[_0x452e('0x4d')][_0x452e('0x6a')]);return _0x5f4968['status'](0xc8)[_0x452e('0x15')]({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x1e176f++;}}else{clearInterval(_0x1d2660);return _0x5f4968[_0x452e('0xc')](0x1f4)['send'](_0x452e('0x6b'));}},0x12c);}else{return _0x5f4968['status'](0xc8)[_0x452e('0x15')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});_0x36551a[_0x452e('0x6')](_0x452e('0x6c'),function(_0x3aac34,_0x4b95a6){if(os[_0x452e('0x1c')]()!=_0x452e('0x1d')){shell['exec'](_0x452e('0x6d'),{'silent':!![]});shell[_0x452e('0x3c')](_0x452e('0x68'),{'silent':!![]},function(_0x81e04,_0x4cd18d,_0x1ea5bf){(function(_0xe0d56e){var _0x111dfa=_0xe0d56e[_0x452e('0x6e')]();if(_0x111dfa){return _0x4b95a6[_0x452e('0xc')](0x1f4)[_0x452e('0xd')](_0x452e('0x6f'));}else{_0x33b9ca['SocketVariables'][_0x452e('0x6a')]=null;_0x3ec305[_0x452e('0x55')][_0x452e('0x4f')](_0x452e('0x69'),_0x33b9ca[_0x452e('0x4d')][_0x452e('0x6a')]);_0x59c639=null;return _0x4b95a6[_0x452e('0xc')](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x70')});}}(_0x4cd18d[_0x452e('0x6e')]()));});}else{return _0x4b95a6['status'](0xc8)[_0x452e('0x15')]({'serverMessage':_0x452e('0x71')});}});function _0x2254b7(){return function(_0x4b656c,_0x3d97d,_0x412b21){if(_0x4b656c['isAuthenticated']()){return _0x412b21();}else{_0x3d97d[_0x452e('0xc')](0x191)[_0x452e('0xd')](_0x452e('0x72'));}};}};