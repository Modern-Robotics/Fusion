var _0x58ff=['\x20\x20\x20\x20ssid=\x22','send','utf8','\x20\x20\x20\x20key_mgmt=NONE\x0a','Error\x20disconnecting','shelljs','wireless-tools/wpa_supplicant','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','Username\x20already\x20taken.','sockets','User\x20created!','Content-disposition','fs-extra','fusion_diagnostics_running','Connected\x20to\x20','.crash','body','readdir','Retreived\x20wireless\x20connections','/api/admin/powerOff','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','sudo\x20wpa_cli\x20-i\x20','/etc/hostapd/hostapd.conf','ssid_set.py','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','generateFileSystem','ASSOCIATING','wireless-tools/iwlist','/api/admin/wirelessConnections','DISCONNECTED','SocketVariables','\x20successfully','diagnostics_running','sudo','indexOf','split','User\x20Unauthenticated','pipe','Not\x20configured..','readFile','Diagnostic\x20tool\x20started\x20successfully','\x20reconfigure','/api/admin/wirelessConnections/disconnect','attachment;\x20filename=','/api/admin/wirelessSettings','fusion_wifi_access','config','network={\x0a','message','writeFile','wpa_passphrase','Diagnostic\x20tool\x20stopped\x20successfully','Error\x20reading\x20crash\x20file','Password','trim','Wifi_NIC','stdout','exports','../../diagnostics/runRemi.sh','wpa_passphrase\x20\x22','get','save','child_process','Disconnected\x20successfully','stderr','/api/autonomous','findOne','length','No\x20crash\x20files\x20found','wifi-connection','COMPLETED','json','platform','Error\x20starting\x20diagnostic\x20tool','./app/filesystem/','socketId','exec','country=US\x0a\x0a','spawn','update_config=1\x0a','emit','SSID','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','Wireless\x20interface\x20not\x20found','win32','setHeader','4WAY_HANDSHAKE','scan','wpa_state','data','SCANNING','log','INACTIVE','wireless-tools/wpa_cli','path','isAuthenticated','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','hiddenNetwork','\x22\x20\x22','/api/diagnostics/stop','\x09ssid=\x22','Successfully\x20changed\x20wifi\x20settings','python','ssid','Wifi\x20file\x20not\x20found','}\x0a\x0a','etc','join','username','post','../../etc/config-wap/hostapd.conf__npp.sh','status','password','Shut\x20Down\x20Commencing'];(function(_0x4942cd,_0x58ff5d){var _0x36a60c=function(_0x34bd29){while(--_0x34bd29){_0x4942cd['push'](_0x4942cd['shift']());}};_0x36a60c(++_0x58ff5d);}(_0x58ff,0x198));var _0x36a6=function(_0x4942cd,_0x58ff5d){_0x4942cd=_0x4942cd-0x0;var _0x36a60c=_0x58ff[_0x4942cd];return _0x36a60c;};var fs=require(_0x36a6('0x3c'));var mkdirp=require('mkdirp');var os=require('os');var path=require(_0x36a6('0x1c'));var shell=require(_0x36a6('0x35'));var wpa_cli=require(_0x36a6('0x1b'));var iwlist=require(_0x36a6('0x4b'));var wpa_supplicant=require(_0x36a6('0x36'));var spawn=require(_0x36a6('0x6e'))['spawn'];const config=require(_0x36a6('0x5e'));const autonomous=require('./../models/autonomous');let nicInterface=config[_0x36a6('0x6c')](_0x36a6('0x67'));module[_0x36a6('0x69')]=function(_0x5d4b91,_0x1beabb,_0x4bc142,_0x8c94be,_0x1983a3){_0x5d4b91[_0x36a6('0x2b')]('/api/admin/users',_0xdddd08(),function(_0x3183d4,_0x2ea49d){_0x1beabb[_0x36a6('0x0')]({'username':_0x3183d4['body']['username']},async function(_0x5413a6,_0x2fcc3a){if(_0x5413a6)return _0x2ea49d[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x5413a6);if(_0x2fcc3a){return _0x2ea49d['status'](0x1f4)['send'](_0x36a6('0x38'));}else{var _0x2b6c33=new _0x1beabb(_0x3183d4[_0x36a6('0x40')]);_0x2b6c33[_0x36a6('0x2a')]=_0x3183d4[_0x36a6('0x40')][_0x36a6('0x2a')];_0x2b6c33[_0x36a6('0x2e')]=_0x2b6c33['generateHash'](_0x3183d4[_0x36a6('0x40')][_0x36a6('0x2e')]);_0x2b6c33['filepath']=await _0x2b6c33[_0x36a6('0x49')](_0x2b6c33[_0x36a6('0x2a')]);_0x2b6c33[_0x36a6('0x6d')](function(_0x333b76){if(_0x333b76)return _0x2ea49d[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x333b76);return _0x2ea49d[_0x36a6('0x2d')](0xc8)['json']({'serverMessage':_0x36a6('0x3a')});});}});});_0x5d4b91[_0x36a6('0x6c')](_0x36a6('0x43'),function(_0x2790fa,_0x4c2248){_0x4c2248[_0x36a6('0x2d')](0xc8)[_0x36a6('0x5')]({'serverMessage':_0x36a6('0x2f')});var _0x3f15e2=require(_0x36a6('0x6e'))['spawn'];var _0xc0fbd1=_0x3f15e2(_0x36a6('0x51'),['poweroff']);});_0x5d4b91[_0x36a6('0x6c')]('/api/admin/restart',function(_0x103a53,_0x1e292a){_0x1e292a[_0x36a6('0x2d')](0xc8)[_0x36a6('0x31')]('Restart\x20Commencing');var _0x53069f=require('child_process')[_0x36a6('0xc')];var _0x363844=_0x53069f(_0x36a6('0x51'),['reboot']);});_0x5d4b91[_0x36a6('0x6c')](_0x36a6('0x5c'),function(_0x19df51,_0x42b799){var _0x3a1d8c;var _0x2146fd=require('os')['EOL'];var _0x16c1ff;var _0x281a16;var _0x1727bc={};if(os[_0x36a6('0x6')]()==_0x36a6('0x12')){_0x3a1d8c=_0x36a6('0x2c');fs[_0x36a6('0x57')](_0x3a1d8c,_0x36a6('0x32'),function(_0x2f74c1,_0x21318a){if(_0x2f74c1)_0x42b799['status'](0x1f4)[_0x36a6('0x31')](_0x36a6('0x26'));_0x16c1ff=_0x21318a[_0x36a6('0x53')]('\x0a');for(var _0x58c5ad=0x0;_0x58c5ad<_0x16c1ff[_0x36a6('0x1')];_0x58c5ad++){_0x281a16=_0x16c1ff[_0x58c5ad][_0x36a6('0x53')]('=');if(_0x281a16[0x0]==_0x36a6('0x25'))_0x1727bc[_0x36a6('0xf')]=_0x281a16[0x1];else if(_0x281a16[0x0]==_0x36a6('0x62'))_0x1727bc[_0x36a6('0x65')]=_0x281a16[0x1];}_0x42b799[_0x36a6('0x2d')](0xc8)[_0x36a6('0x5')]({'SSID':_0x1727bc[_0x36a6('0xf')],'Password':_0x1727bc[_0x36a6('0x65')]});});}else{_0x3a1d8c=_0x36a6('0x46');fs['readFile'](_0x3a1d8c,_0x36a6('0x32'),function(_0x3412d8,_0x29e25a){if(_0x3412d8)_0x42b799[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x36a6('0x26'));_0x16c1ff=_0x29e25a['split'](_0x2146fd);for(var _0x1d1178=0x0;_0x1d1178<_0x16c1ff[_0x36a6('0x1')];_0x1d1178++){_0x281a16=_0x16c1ff[_0x1d1178][_0x36a6('0x53')]('=');if(_0x281a16[0x0]=='ssid')_0x1727bc[_0x36a6('0xf')]=_0x281a16[0x1];else if(_0x281a16[0x0]=='wpa_passphrase')_0x1727bc['Password']=_0x281a16[0x1];}if(!_0x1727bc[_0x36a6('0xf')]){_0x1727bc['SSID']=_0x36a6('0x56');_0x1727bc[_0x36a6('0x65')]='';}_0x42b799['status'](0xc8)[_0x36a6('0x5')]({'SSID':_0x1727bc[_0x36a6('0xf')],'Password':_0x1727bc[_0x36a6('0x65')]});});}});_0x5d4b91[_0x36a6('0x2b')](_0x36a6('0x5c'),function(_0x3d5e68,_0x168847){try{var _0x5b2715;var _0x658093;var _0x418f40=path[_0x36a6('0x29')]('..','..',_0x36a6('0x28'),_0x36a6('0x47'));if(_0x3d5e68['body']['ssid']==null&&_0x3d5e68[_0x36a6('0x40')][_0x36a6('0x2e')]==null)_0x658093=['python',_0x418f40,'-d'];else _0x658093=[_0x36a6('0x24'),_0x418f40,'-s',_0x3d5e68[_0x36a6('0x40')][_0x36a6('0x25')],'-p',_0x3d5e68[_0x36a6('0x40')][_0x36a6('0x2e')]];var _0x321188=require(_0x36a6('0x6e'))[_0x36a6('0xc')];python_process=_0x321188(_0x36a6('0x51'),_0x658093,{'stdio':_0x36a6('0x55')});python_process[_0x36a6('0x70')]['on'](_0x36a6('0x17'),function(_0x5034f7){console[_0x36a6('0x19')](String(_0x5034f7));_0x5b2715=String(_0x5034f7);});python_process[_0x36a6('0x68')]['on']('close',function(_0x18968f){if(_0x5b2715)return _0x168847[_0x36a6('0x2d')](0x1f4)['send'](_0x5b2715);else return _0x168847[_0x36a6('0x2d')](0xc8)[_0x36a6('0x5')]({'serverMessage':_0x36a6('0x23')});});}catch(_0x162c48){console[_0x36a6('0x19')](_0x162c48);return _0x168847['status'](0x1f4)[_0x36a6('0x31')](_0x162c48);}});_0x5d4b91[_0x36a6('0x6c')]('/api/admin/wirelessConnections',function(_0x321946,_0x382156){if(os[_0x36a6('0x6')]()==_0x36a6('0x12')){return _0x382156['status'](0xc8)[_0x36a6('0x31')]();}else{iwlist[_0x36a6('0x15')](nicInterface,function(_0x3bbc9d,_0x207803){if(_0x3bbc9d)return _0x382156['status'](0x1f4)[_0x36a6('0x31')](_0x36a6('0x11'));else return _0x382156[_0x36a6('0x2d')](0xc8)['send']({'serverMessage':_0x36a6('0x42'),'data':_0x207803});});}});_0x5d4b91[_0x36a6('0x2b')](_0x36a6('0x4c'),function(_0x410b01,_0x2c2604){var _0x36997c=undefined;var _0x11b201=_0x36a6('0x48')+_0x36a6('0xd')+_0x36a6('0xb');var _0x249848=_0x36a6('0x5f')+_0x36a6('0x22')+_0x410b01[_0x36a6('0x40')][_0x36a6('0x25')]+'\x22\x0a'+'\x09scan_ssid=1\x0a'+'\x09psk=\x22'+_0x410b01['body'][_0x36a6('0x2e')]+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+_0x36a6('0x27');if(_0x410b01[_0x36a6('0x40')]['password']){_0x36997c=shell[_0x36a6('0xa')](_0x36a6('0x6b')+_0x410b01[_0x36a6('0x40')][_0x36a6('0x25')]+_0x36a6('0x20')+_0x410b01['body'][_0x36a6('0x2e')]+'\x22',{'silent':!![]})['stdout'];}else{_0x36997c=_0x36a6('0x5f')+_0x36a6('0x30')+_0x410b01['body']['ssid']+'\x22\x0a'+_0x36a6('0x33')+'}\x0a';}let _0x10a72d='';if(_0x410b01[_0x36a6('0x40')][_0x36a6('0x1f')])_0x10a72d=_0x11b201+_0x249848;else _0x10a72d=_0x11b201+_0x36997c;fs[_0x36a6('0x61')]('/etc/wpa_supplicant/wpa_supplicant.conf',_0x10a72d,function(_0x4a08f0){if(_0x4a08f0)return _0x2c2604[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x4a08f0);shell[_0x36a6('0xa')](_0x36a6('0x45')+nicInterface+_0x36a6('0x59'),{'silent':!![]});const _0x3b1cd9=0x3a98;var _0x4d463e=0x12c;var _0x34b622=0x0;var _0x12fd0b=setInterval(function(){var _0x370c78=[_0x36a6('0x18'),_0x36a6('0x14'),'AUTHENTICATING',_0x36a6('0x4d'),_0x36a6('0x4a')];wpa_cli[_0x36a6('0x2d')](nicInterface,function(_0x5de398,_0x1cd775){if(_0x5de398)return _0x2c2604[_0x36a6('0x2d')](0x1f4)['send'](_0x5de398);if(_0x1cd775['wpa_state']==_0x36a6('0x4')){if(_0x1cd775['ip']){console[_0x36a6('0x19')]('Ip\x20address:\x20'+_0x1cd775['ip']+'\x20assigned');clearInterval(_0x12fd0b);_0x1983a3['SocketVariables']['fusion_wifi_access']=_0x1cd775;_0x8c94be['sockets'][_0x36a6('0xe')](_0x36a6('0x3'),_0x1cd775);return _0x2c2604[_0x36a6('0x2d')](0xc8)['json']({'serverMessage':_0x36a6('0x3e')+_0x410b01[_0x36a6('0x40')][_0x36a6('0x25')]+_0x36a6('0x4f')});}else if(_0x34b622>_0x3b1cd9){console[_0x36a6('0x19')](_0x36a6('0x1e'));clearInterval(_0x12fd0b);return _0x2c2604[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')]('Error\x20connecting\x20to\x20'+_0x410b01[_0x36a6('0x40')][_0x36a6('0x25')]);}_0x34b622+=_0x4d463e;}else if(_0x370c78[_0x36a6('0x52')](_0x1cd775['wpa_state'])==-0x1){clearInterval(_0x12fd0b);_0x8c94be[_0x36a6('0x39')][_0x36a6('0xe')](_0x36a6('0x3'),_0x1cd775);return _0x2c2604[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')]('Error\x20connecting\x20to\x20'+_0x410b01[_0x36a6('0x40')]['ssid']);}});},_0x4d463e);});});_0x5d4b91[_0x36a6('0x6c')](_0x36a6('0x5a'),function(_0x44b390,_0x2dbea4){if(os[_0x36a6('0x6')]()==_0x36a6('0x12')){_0x2dbea4['status'](0x1f4)[_0x36a6('0x31')]('Disconnect\x20not\x20available\x20on\x20Windows');}else{var _0x317549=_0x36a6('0x48')+_0x36a6('0xd')+_0x36a6('0xb');fs[_0x36a6('0x61')]('/etc/wpa_supplicant/wpa_supplicant.conf',_0x317549,function(_0x59359c){if(_0x59359c)return _0x2dbea4[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x59359c);shell['exec'](_0x36a6('0x45')+nicInterface+_0x36a6('0x59'),{'silent':!![]});var _0x3baf78=setInterval(function(){var _0x341339=[];wpa_cli[_0x36a6('0x2d')](nicInterface,function(_0x3eaa6a,_0x30d9dd){if(_0x3eaa6a)return _0x2dbea4[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x3eaa6a);_0x1983a3['SocketVariables'][_0x36a6('0x5d')]=_0x30d9dd;_0x8c94be['sockets']['emit'](_0x36a6('0x3'),_0x30d9dd);if(_0x30d9dd[_0x36a6('0x16')]==_0x36a6('0x4d')||_0x30d9dd[_0x36a6('0x16')]==_0x36a6('0x1a')){clearInterval(_0x3baf78);_0x8c94be[_0x36a6('0x39')][_0x36a6('0xe')](_0x36a6('0x3'),_0x30d9dd);return _0x2dbea4[_0x36a6('0x2d')](0xc8)[_0x36a6('0x5')]({'serverMessage':_0x36a6('0x6f')});}else if(connectingStatuses[_0x36a6('0x52')](_0x30d9dd[_0x36a6('0x16')])==-0x1){clearInterval(_0x3baf78);_0x8c94be[_0x36a6('0x39')][_0x36a6('0xe')]('wifi-connection',_0x30d9dd);return _0x2dbea4['status'](0x1f4)[_0x36a6('0x31')](_0x36a6('0x34'));}});},0x12c);});}});_0x5d4b91[_0x36a6('0x6c')]('/api/admin/crashReport',function(_0x33f8a3,_0x35f77e){var _0x5c5dc9=_0x36a6('0x3f');fs[_0x36a6('0x41')](_0x5c5dc9,function(_0x1f5c69,_0x3f2c49){if(_0x1f5c69)return _0x35f77e[_0x36a6('0x2d')](0x1f4)['send'](_0x1f5c69);if(_0x3f2c49[_0x36a6('0x1')]>0x0){fs[_0x36a6('0x57')](_0x5c5dc9+'/'+_0x3f2c49[0x0],'utf8',function(_0x5abfd6,_0x42d1a8){if(_0x5abfd6)return status(0x1f4)['send'](_0x36a6('0x64'));_0x35f77e[_0x36a6('0x13')](_0x36a6('0x3b'),_0x36a6('0x5b')+_0x3f2c49[0x0]);return _0x35f77e[_0x36a6('0x2d')](0xc8)['download'](_0x5c5dc9+'/'+_0x3f2c49[0x0]);});}else{return _0x35f77e[_0x36a6('0x2d')](0xc8)[_0x36a6('0x31')](_0x36a6('0x2'));}});});var _0x377022=null;_0x5d4b91[_0x36a6('0x2b')]('/api/diagnostics/start',function(_0x49ca4a,_0x393486){if(os[_0x36a6('0x6')]()!=_0x36a6('0x12')){_0x377022=spawn(_0x36a6('0x51'),['sh',_0x36a6('0x6a'),'../../diagnostics/diagnosticGUI.py']);_0x377022[_0x36a6('0x68')]['on'](_0x36a6('0x17'),function(_0x149aeb){console[_0x36a6('0x19')](String(_0x149aeb));});_0x377022['stderr']['on'](_0x36a6('0x17'),function(_0x3b3b7d){console['log'](String(_0x3b3b7d));});var _0x5d2834=0x1;var _0x3e0e64=0x3;var _0x1ac75e=setInterval(function(){if(_0x5d2834<=_0x3e0e64){var _0x3a906d=shell[_0x36a6('0xa')](_0x36a6('0x37'),{'silent':!![]})['stdout'];if(_0x3a906d){clearInterval(_0x1ac75e);_0x1983a3[_0x36a6('0x4e')][_0x36a6('0x3d')]={'process':_0x3a906d,'socket':_0x49ca4a[_0x36a6('0x40')][_0x36a6('0x9')]};_0x8c94be[_0x36a6('0x39')]['emit'](_0x36a6('0x50'),_0x1983a3['SocketVariables'][_0x36a6('0x3d')]);return _0x393486['status'](0xc8)[_0x36a6('0x5')]({'serverMessage':_0x36a6('0x58')});}else{_0x5d2834++;}}else{clearInterval(_0x1ac75e);return _0x393486[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](_0x36a6('0x7'));}},0x12c);}else{return _0x393486[_0x36a6('0x2d')](0xc8)[_0x36a6('0x5')]({'serverMessage':_0x36a6('0x44')});}});_0x5d4b91[_0x36a6('0x6c')](_0x36a6('0x21'),function(_0x120404,_0x5c485a){if(os[_0x36a6('0x6')]()!=_0x36a6('0x12')){shell[_0x36a6('0xa')](_0x36a6('0x10'),{'silent':!![]});shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x25e7fc,_0xfecc57,_0x5d8c33){(function(_0x524a7a){var _0x17f503=_0x524a7a[_0x36a6('0x66')]();if(_0x17f503){return _0x5c485a[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x1983a3[_0x36a6('0x4e')][_0x36a6('0x3d')]=null;_0x8c94be[_0x36a6('0x39')][_0x36a6('0xe')](_0x36a6('0x50'),_0x1983a3['SocketVariables'][_0x36a6('0x3d')]);_0x377022=null;return _0x5c485a[_0x36a6('0x2d')](0xc8)['json']({'serverMessage':_0x36a6('0x63')});}}(_0xfecc57[_0x36a6('0x66')]()));});}else{return _0x5c485a[_0x36a6('0x2d')](0xc8)['json']({'serverMessage':_0x36a6('0x44')});}});_0x5d4b91[_0x36a6('0x6c')]('/api/autonomous',async function(_0x5b8cab,_0x2aa764){try{const _0x1cfdac=await autonomous[_0x36a6('0x0')]()[_0x36a6('0xa')]();return _0x2aa764['json'](_0x1cfdac);}catch(_0x4fc26d){return _0x2aa764[_0x36a6('0x2d')](0x1f4)[_0x36a6('0x31')](error[_0x36a6('0x60')]);}});_0x5d4b91[_0x36a6('0x2b')](_0x36a6('0x71'),async function(_0xc8fcac,_0x262a17){try{const _0x418201=await autonomous['findOneAndUpdate']({},_0xc8fcac[_0x36a6('0x40')]);return _0x262a17['status'](0xc8)[_0x36a6('0x5')]({'serverMessage':'Updated\x20successfully'});}catch(_0x3852ad){return _0x262a17[_0x36a6('0x2d')](0x1f4)['send'](_0x3852ad[_0x36a6('0x60')]);}});_0x5d4b91['post']('/api/autonomousPrograms',async function(_0x35b7e5,_0x54e7a9){try{const _0x11e870=_0x35b7e5[_0x36a6('0x40')]['username'];const _0x56f820=_0x35b7e5[_0x36a6('0x40')]['type'];const _0x503da1=await fs[_0x36a6('0x41')](_0x36a6('0x8')+_0x11e870+'/'+_0x56f820);return _0x54e7a9[_0x36a6('0x2d')](0xc8)['json']({'files':_0x503da1});}catch(_0x42fe5){return _0x54e7a9['status'](0x1f4)[_0x36a6('0x31')](_0x42fe5[_0x36a6('0x60')]);}});function _0xdddd08(){return function(_0x129cd9,_0x5cc3d2,_0x58faf7){if(_0x129cd9[_0x36a6('0x1d')]()){return _0x58faf7();}else{_0x5cc3d2[_0x36a6('0x2d')](0x191)[_0x36a6('0x31')](_0x36a6('0x54'));}};}};