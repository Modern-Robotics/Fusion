var _0x623e=['\x20reconfigure','SCANNING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','\x20assigned','SocketVariables','sockets','emit','Connected\x20to\x20','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','indexOf','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','update_config=1\x0a','country=US\x0a\x0a','fusion_wifi_access','INACTIVE','wifi-connection','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','attachment;\x20filename=','download','No\x20crash\x20files\x20found','win32','../../diagnostics/diagnosticGUI.py','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','fusion_diagnostics_running','socketId','diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Diagnostic\x20tool\x20stopped\x20successfully','isAuthenticated','User\x20Unauthenticated','mkdirp','path','shelljs','wireless-tools/wpa_cli','wireless-tools/wpa_supplicant','child_process','spawn','config','get','Wifi_NIC','exports','post','/api/admin/users','findOne','body','username','status','send','password','generateHash','filepath','generateFileSystem','json','User\x20created!','/api/admin/powerOff','Shut\x20Down\x20Commencing','poweroff','/api/admin/restart','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','../../etc/hostapd.conf','readFile','Wifi\x20file\x20not\x20found','length','split','ssid','SSID','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','utf8','join','etc','python','sudo','stderr','data','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','platform','scan','Retreived\x20wireless\x20connections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20'];(function(_0x193517,_0x2fef82){var _0x312b7a=function(_0x447d2f){while(--_0x447d2f){_0x193517['push'](_0x193517['shift']());}};_0x312b7a(++_0x2fef82);}(_0x623e,0x1f4));var _0x43b3=function(_0x27201d,_0x5b0344){_0x27201d=_0x27201d-0x0;var _0x3b14fa=_0x623e[_0x27201d];return _0x3b14fa;};var fs=require('fs');var mkdirp=require(_0x43b3('0x0'));var os=require('os');var path=require(_0x43b3('0x1'));var shell=require(_0x43b3('0x2'));var wpa_cli=require(_0x43b3('0x3'));var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require(_0x43b3('0x4'));var spawn=require(_0x43b3('0x5'))[_0x43b3('0x6')];const config=require(_0x43b3('0x7'));let nicInterface=config[_0x43b3('0x8')](_0x43b3('0x9'));module[_0x43b3('0xa')]=function(_0x10d2e8,_0x23541e,_0x52ba57,_0x33ef4a,_0x456f60){_0x10d2e8[_0x43b3('0xb')](_0x43b3('0xc'),_0x3a7504(),function(_0x4f5c99,_0x40a5a0){_0x23541e[_0x43b3('0xd')]({'username':_0x4f5c99[_0x43b3('0xe')][_0x43b3('0xf')]},function(_0x5fb56d,_0x53f767){if(_0x5fb56d)return _0x40a5a0[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x5fb56d);if(_0x53f767){return _0x40a5a0[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')]('Username\x20already\x20taken.');}else{var _0x3514ec=new _0x23541e(_0x4f5c99[_0x43b3('0xe')]);_0x3514ec[_0x43b3('0xf')]=_0x4f5c99[_0x43b3('0xe')][_0x43b3('0xf')];_0x3514ec[_0x43b3('0x12')]=_0x3514ec[_0x43b3('0x13')](_0x4f5c99[_0x43b3('0xe')][_0x43b3('0x12')]);_0x3514ec[_0x43b3('0x14')]=_0x3514ec[_0x43b3('0x15')](_0x3514ec[_0x43b3('0xf')]);_0x3514ec['save'](function(_0x349019){if(_0x349019)return _0x40a5a0['status'](0x1f4)[_0x43b3('0x11')](_0x349019);return _0x40a5a0[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':_0x43b3('0x17')});});}});});_0x10d2e8['get'](_0x43b3('0x18'),function(_0xa68cf4,_0x5ba183){_0x5ba183[_0x43b3('0x10')](0xc8)['json']({'serverMessage':_0x43b3('0x19')});var _0x18ecce=require(_0x43b3('0x5'))[_0x43b3('0x6')];var _0x6eeff9=_0x18ecce('sudo',[_0x43b3('0x1a')]);});_0x10d2e8[_0x43b3('0x8')](_0x43b3('0x1b'),function(_0x19ecea,_0x4d3ca2){_0x4d3ca2[_0x43b3('0x10')](0xc8)[_0x43b3('0x11')](_0x43b3('0x1c'));var _0x5e9a10=require(_0x43b3('0x5'))[_0x43b3('0x6')];var _0x2489ea=_0x5e9a10('sudo',[_0x43b3('0x1d')]);});_0x10d2e8[_0x43b3('0x8')](_0x43b3('0x1e'),function(_0xcc56c2,_0x579105){var _0x11af01;var _0x4a4785=require('os')[_0x43b3('0x1f')];var _0x142c5c;var _0x512313;var _0x2b363f={};if(os['platform']()=='win32'){_0x11af01=_0x43b3('0x20');fs[_0x43b3('0x21')](_0x11af01,'utf8',function(_0x8ab26f,_0x5a9cdd){if(_0x8ab26f)_0x579105['status'](0x1f4)[_0x43b3('0x11')](_0x43b3('0x22'));_0x142c5c=_0x5a9cdd['split']('\x0a');for(var _0x22592f=0x0;_0x22592f<_0x142c5c[_0x43b3('0x23')];_0x22592f++){_0x512313=_0x142c5c[_0x22592f][_0x43b3('0x24')]('=');if(_0x512313[0x0]==_0x43b3('0x25'))_0x2b363f[_0x43b3('0x26')]=_0x512313[0x1];else if(_0x512313[0x0]==_0x43b3('0x27'))_0x2b363f[_0x43b3('0x28')]=_0x512313[0x1];}_0x579105[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'SSID':_0x2b363f[_0x43b3('0x26')],'Password':_0x2b363f['Password']});});}else{_0x11af01=_0x43b3('0x29');fs[_0x43b3('0x21')](_0x11af01,_0x43b3('0x2a'),function(_0x4ddfaf,_0x213a6f){if(_0x4ddfaf)_0x579105[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x43b3('0x22'));_0x142c5c=_0x213a6f[_0x43b3('0x24')](_0x4a4785);for(var _0x3713e5=0x0;_0x3713e5<_0x142c5c['length'];_0x3713e5++){_0x512313=_0x142c5c[_0x3713e5][_0x43b3('0x24')]('=');if(_0x512313[0x0]==_0x43b3('0x25'))_0x2b363f[_0x43b3('0x26')]=_0x512313[0x1];else if(_0x512313[0x0]==_0x43b3('0x27'))_0x2b363f[_0x43b3('0x28')]=_0x512313[0x1];}_0x579105[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'SSID':_0x2b363f[_0x43b3('0x26')],'Password':_0x2b363f[_0x43b3('0x28')]});});}});_0x10d2e8['post'](_0x43b3('0x1e'),function(_0x3181b2,_0x2012ab){try{var _0x50bad1;var _0x4cbbd6;var _0x26f303=path[_0x43b3('0x2b')]('..','..',_0x43b3('0x2c'),'ssid_set.py');if(_0x3181b2[_0x43b3('0xe')]['ssid']==null&&_0x3181b2['body'][_0x43b3('0x12')]==null)_0x4cbbd6=[_0x43b3('0x2d'),_0x26f303,'-d'];else _0x4cbbd6=[_0x43b3('0x2d'),_0x26f303,'-s',_0x3181b2[_0x43b3('0xe')][_0x43b3('0x25')],'-p',_0x3181b2['body'][_0x43b3('0x12')]];var _0x4150df=require(_0x43b3('0x5'))[_0x43b3('0x6')];python_process=_0x4150df(_0x43b3('0x2e'),_0x4cbbd6,{'stdio':'pipe'});python_process[_0x43b3('0x2f')]['on'](_0x43b3('0x30'),function(_0x1491ba){console[_0x43b3('0x31')](String(_0x1491ba));_0x50bad1=String(_0x1491ba);});python_process[_0x43b3('0x32')]['on'](_0x43b3('0x33'),function(_0x2e8446){if(_0x50bad1)return _0x2012ab[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x50bad1);else return _0x2012ab[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':_0x43b3('0x34')});});}catch(_0x5846eb){console['log'](_0x5846eb);return _0x2012ab[_0x43b3('0x10')](0x1f4)['send'](_0x5846eb);}});_0x10d2e8[_0x43b3('0x8')](_0x43b3('0x35'),function(_0x2a346d,_0xea6554){if(os[_0x43b3('0x36')]()=='win32'){return _0xea6554[_0x43b3('0x10')](0xc8)['send']();}else{iwlist[_0x43b3('0x37')](nicInterface,function(_0x3c0fcd,_0x3a6205){if(_0x3c0fcd)return _0xea6554[_0x43b3('0x10')](0x1f4)['send']('Wireless\x20interface\x20not\x20found');else return _0xea6554[_0x43b3('0x10')](0xc8)[_0x43b3('0x11')]({'serverMessage':_0x43b3('0x38'),'data':_0x3a6205});});}});_0x10d2e8[_0x43b3('0xb')](_0x43b3('0x35'),function(_0x58c03f,_0x4170d2){var _0x1ae94a=undefined;var _0x92ee57=_0x43b3('0x39')+'update_config=1\x0a'+'country=US\x0a\x0a';var _0x2e16a0='network={\x0a'+_0x43b3('0x3a')+_0x58c03f[_0x43b3('0xe')][_0x43b3('0x25')]+'\x22\x0a'+_0x43b3('0x3b')+'\x09psk=\x22'+_0x58c03f['body'][_0x43b3('0x12')]+'\x22\x0a'+_0x43b3('0x3c')+_0x43b3('0x3d');if(_0x58c03f[_0x43b3('0xe')]['password']){_0x1ae94a=shell[_0x43b3('0x3e')](_0x43b3('0x3f')+_0x58c03f[_0x43b3('0xe')]['ssid']+_0x43b3('0x40')+_0x58c03f[_0x43b3('0xe')][_0x43b3('0x12')]+'\x22',{'silent':!![]})['stdout'];}else{_0x1ae94a='network={\x0a'+'\x20\x20\x20\x20ssid=\x22'+_0x58c03f['body'][_0x43b3('0x25')]+'\x22\x0a'+_0x43b3('0x41')+'}\x0a';}let _0x7851f='';if(_0x58c03f[_0x43b3('0xe')][_0x43b3('0x42')])_0x7851f=_0x92ee57+_0x2e16a0;else _0x7851f=_0x92ee57+_0x1ae94a;fs[_0x43b3('0x43')](_0x43b3('0x44'),_0x7851f,function(_0x4725c5){if(_0x4725c5)return _0x4170d2[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x4725c5);shell[_0x43b3('0x3e')](_0x43b3('0x45')+nicInterface+_0x43b3('0x46'),{'silent':!![]});const _0x460088=0x3a98;var _0x498578=0x12c;var _0x461109=0x0;var _0x5d4123=setInterval(function(){var _0x5853d8=[_0x43b3('0x47'),'4WAY_HANDSHAKE','AUTHENTICATING',_0x43b3('0x48'),_0x43b3('0x49')];wpa_cli['status'](nicInterface,function(_0x5f5972,_0x309da5){if(_0x5f5972)return _0x4170d2['status'](0x1f4)[_0x43b3('0x11')](_0x5f5972);if(_0x309da5[_0x43b3('0x4a')]==_0x43b3('0x4b')){if(_0x309da5['ip']){console['log']('Ip\x20address:\x20'+_0x309da5['ip']+_0x43b3('0x4c'));clearInterval(_0x5d4123);_0x456f60[_0x43b3('0x4d')]['fusion_wifi_access']=_0x309da5;_0x33ef4a[_0x43b3('0x4e')][_0x43b3('0x4f')]('wifi-connection',_0x309da5);return _0x4170d2[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':_0x43b3('0x50')+_0x58c03f[_0x43b3('0xe')][_0x43b3('0x25')]+_0x43b3('0x51')});}else if(_0x461109>_0x460088){console[_0x43b3('0x31')](_0x43b3('0x52'));clearInterval(_0x5d4123);return _0x4170d2[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x43b3('0x53')+_0x58c03f[_0x43b3('0xe')][_0x43b3('0x25')]);}_0x461109+=_0x498578;}else if(_0x5853d8[_0x43b3('0x54')](_0x309da5[_0x43b3('0x4a')])==-0x1){clearInterval(_0x5d4123);_0x33ef4a[_0x43b3('0x4e')]['emit']('wifi-connection',_0x309da5);return _0x4170d2['status'](0x1f4)[_0x43b3('0x11')]('Error\x20connecting\x20to\x20'+_0x58c03f[_0x43b3('0xe')]['ssid']);}});},_0x498578);});});_0x10d2e8[_0x43b3('0x8')](_0x43b3('0x55'),function(_0xada034,_0x1ee689){if(os[_0x43b3('0x36')]()=='win32'){_0x1ee689[_0x43b3('0x10')](0x1f4)['send'](_0x43b3('0x56'));}else{var _0x2947b8=_0x43b3('0x39')+_0x43b3('0x57')+_0x43b3('0x58');fs[_0x43b3('0x43')](_0x43b3('0x44'),_0x2947b8,function(_0x147f7e){if(_0x147f7e)return _0x1ee689[_0x43b3('0x10')](0x1f4)['send'](_0x147f7e);shell[_0x43b3('0x3e')](_0x43b3('0x45')+nicInterface+'\x20reconfigure',{'silent':!![]});var _0x49befe=setInterval(function(){var _0x4049d3=[];wpa_cli['status'](nicInterface,function(_0x2c824e,_0x48cc19){if(_0x2c824e)return _0x1ee689[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')](_0x2c824e);_0x456f60[_0x43b3('0x4d')][_0x43b3('0x59')]=_0x48cc19;_0x33ef4a['sockets'][_0x43b3('0x4f')]('wifi-connection',_0x48cc19);if(_0x48cc19[_0x43b3('0x4a')]==_0x43b3('0x48')||_0x48cc19['wpa_state']==_0x43b3('0x5a')){clearInterval(_0x49befe);_0x33ef4a['sockets']['emit'](_0x43b3('0x5b'),_0x48cc19);return _0x1ee689[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x43b3('0x54')](_0x48cc19[_0x43b3('0x4a')])==-0x1){clearInterval(_0x49befe);_0x33ef4a['sockets']['emit'](_0x43b3('0x5b'),_0x48cc19);return _0x1ee689[_0x43b3('0x10')](0x1f4)['send']('Error\x20disconnecting');}});},0x12c);});}});_0x10d2e8[_0x43b3('0x8')](_0x43b3('0x5c'),function(_0x28a206,_0x38a465){var _0x2aae59=_0x43b3('0x5d');fs[_0x43b3('0x5e')](_0x2aae59,function(_0xb6b26,_0x4420a4){if(_0xb6b26)return _0x38a465['status'](0x1f4)['send'](_0xb6b26);if(_0x4420a4[_0x43b3('0x23')]>0x0){fs['readFile'](_0x2aae59+'/'+_0x4420a4[0x0],_0x43b3('0x2a'),function(_0x4fd328,_0x550c85){if(_0x4fd328)return status(0x1f4)['send'](_0x43b3('0x5f'));_0x38a465[_0x43b3('0x60')]('Content-disposition',_0x43b3('0x61')+_0x4420a4[0x0]);return _0x38a465[_0x43b3('0x10')](0xc8)[_0x43b3('0x62')](_0x2aae59+'/'+_0x4420a4[0x0]);});}else{return _0x38a465['status'](0xc8)[_0x43b3('0x11')](_0x43b3('0x63'));}});});var _0x4efa9f=null;_0x10d2e8['post']('/api/diagnostics/start',function(_0x13b651,_0x383218){if(os[_0x43b3('0x36')]()!=_0x43b3('0x64')){_0x4efa9f=spawn('sudo',['sh','../../diagnostics/runRemi.sh',_0x43b3('0x65')]);_0x4efa9f[_0x43b3('0x32')]['on'](_0x43b3('0x30'),function(_0x5efecd){console[_0x43b3('0x31')](String(_0x5efecd));});_0x4efa9f['stderr']['on'](_0x43b3('0x30'),function(_0x18b5e3){console[_0x43b3('0x31')](String(_0x18b5e3));});var _0x6251c7=0x1;var _0xda938b=0x3;var _0x27eddd=setInterval(function(){if(_0x6251c7<=_0xda938b){var _0xa098ac=shell['exec'](_0x43b3('0x66'),{'silent':!![]})[_0x43b3('0x32')];if(_0xa098ac){clearInterval(_0x27eddd);_0x456f60['SocketVariables'][_0x43b3('0x67')]={'process':_0xa098ac,'socket':_0x13b651[_0x43b3('0xe')][_0x43b3('0x68')]};_0x33ef4a[_0x43b3('0x4e')]['emit'](_0x43b3('0x69'),_0x456f60[_0x43b3('0x4d')]['fusion_diagnostics_running']);return _0x383218[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':_0x43b3('0x6a')});}else{_0x6251c7++;}}else{clearInterval(_0x27eddd);return _0x383218['status'](0x1f4)[_0x43b3('0x11')]('Error\x20starting\x20diagnostic\x20tool');}},0x12c);}else{return _0x383218[_0x43b3('0x10')](0xc8)[_0x43b3('0x16')]({'serverMessage':_0x43b3('0x6b')});}});_0x10d2e8['get'](_0x43b3('0x6c'),function(_0x12fa62,_0x3c8863){if(os[_0x43b3('0x36')]()!=_0x43b3('0x64')){shell[_0x43b3('0x3e')](_0x43b3('0x6d'),{'silent':!![]});shell[_0x43b3('0x3e')](_0x43b3('0x66'),{'silent':!![]},function(_0x541f84,_0xdb0bef,_0xd76da4){(function(_0x35bebb){var _0x1812f3=_0x35bebb[_0x43b3('0x6e')]();if(_0x1812f3){return _0x3c8863[_0x43b3('0x10')](0x1f4)[_0x43b3('0x11')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x456f60['SocketVariables'][_0x43b3('0x67')]=null;_0x33ef4a[_0x43b3('0x4e')][_0x43b3('0x4f')]('diagnostics_running',_0x456f60[_0x43b3('0x4d')][_0x43b3('0x67')]);_0x4efa9f=null;return _0x3c8863[_0x43b3('0x10')](0xc8)['json']({'serverMessage':_0x43b3('0x6f')});}}(_0xdb0bef[_0x43b3('0x6e')]()));});}else{return _0x3c8863[_0x43b3('0x10')](0xc8)['json']({'serverMessage':_0x43b3('0x6b')});}});function _0x3a7504(){return function(_0x4a41ec,_0x47e2f2,_0x1cff9d){if(_0x4a41ec[_0x43b3('0x70')]()){return _0x1cff9d();}else{_0x47e2f2[_0x43b3('0x10')](0x191)[_0x43b3('0x11')](_0x43b3('0x71'));}};}};