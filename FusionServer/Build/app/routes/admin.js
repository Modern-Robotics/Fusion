var _0x2447=['username','password','generateHash','filepath','generateFileSystem','save','User\x20created!','get','/api/admin/powerOff','json','Shut\x20Down\x20Commencing','child_process','sudo','poweroff','/api/admin/restart','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','platform','win32','../../etc/hostapd.conf','utf8','length','split','ssid','wpa_passphrase','Password','SSID','readFile','Wifi\x20file\x20not\x20found','etc','python','pipe','stderr','data','log','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','wlan1','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','country=US\x0a\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','stdout','network={\x0a','hiddenNetwork','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20wlan1\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','ASSOCIATING','wpa_state','\x20assigned','SocketVariables','fusion_wifi_access','sockets','emit','Connected\x20to\x20','Error\x20connecting\x20to\x20','wifi-connection','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','update_config=1\x0a','DISCONNECTED','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','readdir','Error\x20reading\x20crash\x20file','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','fusion_diagnostics_running','socketId','diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','User\x20Unauthenticated','mkdirp','shelljs','wireless-tools/wpa_cli','wireless-tools/wpa_supplicant','spawn','post','/api/admin/users','findOne','send','status','body'];(function(_0xcdc2bb,_0x8f3824){var _0x59d4f7=function(_0x1a19c2){while(--_0x1a19c2){_0xcdc2bb['push'](_0xcdc2bb['shift']());}};_0x59d4f7(++_0x8f3824);}(_0x2447,0x1f3));var _0x52ce=function(_0x498b93,_0x4be27a){_0x498b93=_0x498b93-0x0;var _0x1cfd08=_0x2447[_0x498b93];return _0x1cfd08;};var fs=require('fs');var mkdirp=require(_0x52ce('0x0'));var os=require('os');var path=require('path');var shell=require(_0x52ce('0x1'));var wpa_cli=require(_0x52ce('0x2'));var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require(_0x52ce('0x3'));var spawn=require('child_process')[_0x52ce('0x4')];module['exports']=function(_0x2823b9,_0x591e59,_0x205bbd,_0x57520a,_0x249e54){_0x2823b9[_0x52ce('0x5')](_0x52ce('0x6'),_0x35fcbf(),function(_0x2dced6,_0x54b424){_0x591e59[_0x52ce('0x7')]({'username':_0x2dced6['body']['username']},function(_0xa81466,_0x3a3002){if(_0xa81466)return _0x54b424['status'](0x1f4)[_0x52ce('0x8')](_0xa81466);if(_0x3a3002){return _0x54b424[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')]('Username\x20already\x20taken.');}else{var _0x47baef=new _0x591e59(_0x2dced6[_0x52ce('0xa')]);_0x47baef['username']=_0x2dced6[_0x52ce('0xa')][_0x52ce('0xb')];_0x47baef[_0x52ce('0xc')]=_0x47baef[_0x52ce('0xd')](_0x2dced6[_0x52ce('0xa')][_0x52ce('0xc')]);_0x47baef[_0x52ce('0xe')]=_0x47baef[_0x52ce('0xf')](_0x47baef[_0x52ce('0xb')]);_0x47baef[_0x52ce('0x10')](function(_0x2bf052){if(_0x2bf052)return _0x54b424[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x2bf052);return _0x54b424[_0x52ce('0x9')](0xc8)['json']({'serverMessage':_0x52ce('0x11')});});}});});_0x2823b9[_0x52ce('0x12')](_0x52ce('0x13'),function(_0xf7f914,_0x3b0875){_0x3b0875[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x15')});var _0x3f51de=require(_0x52ce('0x16'))['spawn'];var _0x3f7b0b=_0x3f51de(_0x52ce('0x17'),[_0x52ce('0x18')]);});_0x2823b9[_0x52ce('0x12')](_0x52ce('0x19'),function(_0x40542a,_0x337697){_0x337697['status'](0xc8)[_0x52ce('0x8')](_0x52ce('0x1a'));var _0x3def8a=require('child_process')['spawn'];var _0x4a0669=_0x3def8a(_0x52ce('0x17'),[_0x52ce('0x1b')]);});_0x2823b9['get'](_0x52ce('0x1c'),function(_0x2867c3,_0x1e197d){var _0x287fc9;var _0x45feff=require('os')[_0x52ce('0x1d')];var _0x5a9f2b;var _0x483d83;var _0x323007={};if(os[_0x52ce('0x1e')]()==_0x52ce('0x1f')){_0x287fc9=_0x52ce('0x20');fs['readFile'](_0x287fc9,_0x52ce('0x21'),function(_0x259086,_0x35f2eb){if(_0x259086)_0x1e197d[_0x52ce('0x9')](0x1f4)['send']('Wifi\x20file\x20not\x20found');_0x5a9f2b=_0x35f2eb['split']('\x0a');for(var _0x5ca18c=0x0;_0x5ca18c<_0x5a9f2b[_0x52ce('0x22')];_0x5ca18c++){_0x483d83=_0x5a9f2b[_0x5ca18c][_0x52ce('0x23')]('=');if(_0x483d83[0x0]==_0x52ce('0x24'))_0x323007['SSID']=_0x483d83[0x1];else if(_0x483d83[0x0]==_0x52ce('0x25'))_0x323007[_0x52ce('0x26')]=_0x483d83[0x1];}_0x1e197d['status'](0xc8)[_0x52ce('0x14')]({'SSID':_0x323007[_0x52ce('0x27')],'Password':_0x323007[_0x52ce('0x26')]});});}else{_0x287fc9='/etc/hostapd/hostapd.conf';fs[_0x52ce('0x28')](_0x287fc9,_0x52ce('0x21'),function(_0x35ae8a,_0x161a7c){if(_0x35ae8a)_0x1e197d['status'](0x1f4)['send'](_0x52ce('0x29'));_0x5a9f2b=_0x161a7c[_0x52ce('0x23')](_0x45feff);for(var _0x2f79e9=0x0;_0x2f79e9<_0x5a9f2b['length'];_0x2f79e9++){_0x483d83=_0x5a9f2b[_0x2f79e9][_0x52ce('0x23')]('=');if(_0x483d83[0x0]=='ssid')_0x323007[_0x52ce('0x27')]=_0x483d83[0x1];else if(_0x483d83[0x0]==_0x52ce('0x25'))_0x323007['Password']=_0x483d83[0x1];}_0x1e197d[_0x52ce('0x9')](0xc8)['json']({'SSID':_0x323007[_0x52ce('0x27')],'Password':_0x323007[_0x52ce('0x26')]});});}});_0x2823b9[_0x52ce('0x5')](_0x52ce('0x1c'),function(_0xf4f39e,_0x41b2dd){try{var _0x377797;var _0x28a0a3;var _0x56c590=path['join']('..','..',_0x52ce('0x2a'),'ssid_set.py');if(_0xf4f39e[_0x52ce('0xa')][_0x52ce('0x24')]==null&&_0xf4f39e[_0x52ce('0xa')][_0x52ce('0xc')]==null)_0x28a0a3=[_0x52ce('0x2b'),_0x56c590,'-d'];else _0x28a0a3=['python',_0x56c590,'-s',_0xf4f39e[_0x52ce('0xa')]['ssid'],'-p',_0xf4f39e[_0x52ce('0xa')][_0x52ce('0xc')]];var _0x16496c=require('child_process')[_0x52ce('0x4')];python_process=_0x16496c(_0x52ce('0x17'),_0x28a0a3,{'stdio':_0x52ce('0x2c')});python_process[_0x52ce('0x2d')]['on'](_0x52ce('0x2e'),function(_0x11602b){console[_0x52ce('0x2f')](String(_0x11602b));_0x377797=String(_0x11602b);});python_process['stdout']['on'](_0x52ce('0x30'),function(_0x51ba56){if(_0x377797)return _0x41b2dd[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x377797);else return _0x41b2dd[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x31')});});}catch(_0xdcfd2d){console[_0x52ce('0x2f')](_0xdcfd2d);return _0x41b2dd[_0x52ce('0x9')](0x1f4)['send'](_0xdcfd2d);}});_0x2823b9[_0x52ce('0x12')](_0x52ce('0x32'),function(_0x184a5,_0x1c6a2d){if(os[_0x52ce('0x1e')]()=='win32'){return _0x1c6a2d[_0x52ce('0x9')](0xc8)[_0x52ce('0x8')]();}else{iwlist['scan'](_0x52ce('0x33'),function(_0x504481,_0x5cc97d){if(_0x504481)return _0x1c6a2d[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')]('Wireless\x20interface\x20not\x20found');else return _0x1c6a2d['status'](0xc8)['send']({'serverMessage':'Retreived\x20wireless\x20connections','data':_0x5cc97d});});}});_0x2823b9[_0x52ce('0x5')](_0x52ce('0x32'),function(_0xe185c9,_0xb08372){var _0x428a6d=undefined;var _0x25ed3e=_0x52ce('0x34')+'update_config=1\x0a'+_0x52ce('0x35');var _0x11d7f0='network={\x0a'+_0x52ce('0x36')+_0xe185c9[_0x52ce('0xa')][_0x52ce('0x24')]+'\x22\x0a'+_0x52ce('0x37')+_0x52ce('0x38')+_0xe185c9[_0x52ce('0xa')][_0x52ce('0xc')]+'\x22\x0a'+_0x52ce('0x39')+'}\x0a\x0a';if(_0xe185c9['body'][_0x52ce('0xc')]){_0x428a6d=shell[_0x52ce('0x3a')](_0x52ce('0x3b')+_0xe185c9[_0x52ce('0xa')]['ssid']+_0x52ce('0x3c')+_0xe185c9[_0x52ce('0xa')][_0x52ce('0xc')]+'\x22',{'silent':!![]})[_0x52ce('0x3d')];}else{_0x428a6d=_0x52ce('0x3e')+'\x20\x20\x20\x20ssid=\x22'+_0xe185c9[_0x52ce('0xa')][_0x52ce('0x24')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0x3b3b0f='';if(_0xe185c9[_0x52ce('0xa')][_0x52ce('0x3f')])_0x3b3b0f=_0x25ed3e+_0x11d7f0;else _0x3b3b0f=_0x25ed3e+_0x428a6d;fs['writeFile'](_0x52ce('0x40'),_0x3b3b0f,function(_0x371785){if(_0x371785)return _0xb08372[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x371785);shell[_0x52ce('0x3a')](_0x52ce('0x41'),{'silent':!![]});const _0x2f4727=0x3a98;var _0x359110=0x12c;var _0x54a865=0x0;var _0x586b68=setInterval(function(){var _0x269f48=[_0x52ce('0x42'),_0x52ce('0x43'),_0x52ce('0x44'),'DISCONNECTED',_0x52ce('0x45')];wpa_cli[_0x52ce('0x9')](_0x52ce('0x33'),function(_0x517139,_0x25347c){if(_0x517139)return _0xb08372['status'](0x1f4)['send'](_0x517139);if(_0x25347c[_0x52ce('0x46')]=='COMPLETED'){if(_0x25347c['ip']){console[_0x52ce('0x2f')]('Ip\x20address:\x20'+_0x25347c['ip']+_0x52ce('0x47'));clearInterval(_0x586b68);_0x249e54[_0x52ce('0x48')][_0x52ce('0x49')]=_0x25347c;_0x57520a[_0x52ce('0x4a')][_0x52ce('0x4b')]('wifi-connection',_0x25347c);return _0xb08372[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x4c')+_0xe185c9[_0x52ce('0xa')][_0x52ce('0x24')]+'\x20successfully'});}else if(_0x54a865>_0x2f4727){console[_0x52ce('0x2f')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x586b68);return _0xb08372[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x52ce('0x4d')+_0xe185c9['body'][_0x52ce('0x24')]);}_0x54a865+=_0x359110;}else if(_0x269f48['indexOf'](_0x25347c[_0x52ce('0x46')])==-0x1){clearInterval(_0x586b68);_0x57520a[_0x52ce('0x4a')]['emit'](_0x52ce('0x4e'),_0x25347c);return _0xb08372[_0x52ce('0x9')](0x1f4)['send']('Error\x20connecting\x20to\x20'+_0xe185c9[_0x52ce('0xa')]['ssid']);}});},_0x359110);});});_0x2823b9['get'](_0x52ce('0x4f'),function(_0x403299,_0x1bc75c){if(os[_0x52ce('0x1e')]()==_0x52ce('0x1f')){_0x1bc75c[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x52ce('0x50'));}else{var _0x5f2eb1='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x52ce('0x51')+_0x52ce('0x35');fs['writeFile'](_0x52ce('0x40'),_0x5f2eb1,function(_0x36c4af){if(_0x36c4af)return _0x1bc75c[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x36c4af);shell[_0x52ce('0x3a')](_0x52ce('0x41'),{'silent':!![]});var _0x20f0d6=setInterval(function(){var _0x52e863=[];wpa_cli['status'](_0x52ce('0x33'),function(_0x48bfbd,_0x469f0f){if(_0x48bfbd)return _0x1bc75c[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x48bfbd);_0x249e54[_0x52ce('0x48')][_0x52ce('0x49')]=_0x469f0f;_0x57520a[_0x52ce('0x4a')][_0x52ce('0x4b')](_0x52ce('0x4e'),_0x469f0f);if(_0x469f0f[_0x52ce('0x46')]==_0x52ce('0x52')||_0x469f0f[_0x52ce('0x46')]==_0x52ce('0x53')){clearInterval(_0x20f0d6);_0x57520a[_0x52ce('0x4a')][_0x52ce('0x4b')](_0x52ce('0x4e'),_0x469f0f);return _0x1bc75c[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x54')});}else if(connectingStatuses['indexOf'](_0x469f0f[_0x52ce('0x46')])==-0x1){clearInterval(_0x20f0d6);_0x57520a[_0x52ce('0x4a')][_0x52ce('0x4b')](_0x52ce('0x4e'),_0x469f0f);return _0x1bc75c[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x52ce('0x55'));}});},0x12c);});}});_0x2823b9[_0x52ce('0x12')]('/api/admin/crashReport',function(_0x1321a2,_0x6ea1fe){var _0x537b12='.crash';fs[_0x52ce('0x56')](_0x537b12,function(_0x2c5222,_0x45bc25){if(_0x2c5222)return _0x6ea1fe['status'](0x1f4)['send'](_0x2c5222);if(_0x45bc25[_0x52ce('0x22')]>0x0){fs[_0x52ce('0x28')](_0x537b12+'/'+_0x45bc25[0x0],'utf8',function(_0x13b888,_0x4093be){if(_0x13b888)return status(0x1f4)[_0x52ce('0x8')](_0x52ce('0x57'));_0x6ea1fe['setHeader']('Content-disposition','attachment;\x20filename='+_0x45bc25[0x0]);return _0x6ea1fe[_0x52ce('0x9')](0xc8)[_0x52ce('0x58')](_0x537b12+'/'+_0x45bc25[0x0]);});}else{return _0x6ea1fe[_0x52ce('0x9')](0xc8)[_0x52ce('0x8')](_0x52ce('0x59'));}});});var _0x5a58d9=null;_0x2823b9[_0x52ce('0x5')](_0x52ce('0x5a'),function(_0x2269e9,_0x1adde7){if(os[_0x52ce('0x1e')]()!=_0x52ce('0x1f')){_0x5a58d9=spawn(_0x52ce('0x17'),['sh',_0x52ce('0x5b'),_0x52ce('0x5c')]);_0x5a58d9[_0x52ce('0x3d')]['on'](_0x52ce('0x2e'),function(_0x321fcd){console[_0x52ce('0x2f')](String(_0x321fcd));});_0x5a58d9[_0x52ce('0x2d')]['on'](_0x52ce('0x2e'),function(_0x3be4f5){console['log'](String(_0x3be4f5));});var _0x3c42bf=0x1;var _0x5dac7b=0x3;var _0x3b2cc2=setInterval(function(){if(_0x3c42bf<=_0x5dac7b){var _0x2a5fec=shell[_0x52ce('0x3a')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x52ce('0x3d')];if(_0x2a5fec){clearInterval(_0x3b2cc2);_0x249e54[_0x52ce('0x48')][_0x52ce('0x5d')]={'process':_0x2a5fec,'socket':_0x2269e9[_0x52ce('0xa')][_0x52ce('0x5e')]};_0x57520a['sockets']['emit'](_0x52ce('0x5f'),_0x249e54[_0x52ce('0x48')][_0x52ce('0x5d')]);return _0x1adde7[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x60')});}else{_0x3c42bf++;}}else{clearInterval(_0x3b2cc2);return _0x1adde7[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')](_0x52ce('0x61'));}},0x12c);}else{return _0x1adde7[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':_0x52ce('0x62')});}});_0x2823b9[_0x52ce('0x12')]('/api/diagnostics/stop',function(_0x388f61,_0x2fd017){if(os[_0x52ce('0x1e')]()!=_0x52ce('0x1f')){shell['exec'](_0x52ce('0x63'),{'silent':!![]});shell[_0x52ce('0x3a')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x152253,_0x42fb72,_0x1cd96c){(function(_0x97c989){var _0x1fab66=_0x97c989[_0x52ce('0x64')]();if(_0x1fab66){return _0x2fd017[_0x52ce('0x9')](0x1f4)[_0x52ce('0x8')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x249e54[_0x52ce('0x48')][_0x52ce('0x5d')]=null;_0x57520a[_0x52ce('0x4a')][_0x52ce('0x4b')](_0x52ce('0x5f'),_0x249e54[_0x52ce('0x48')][_0x52ce('0x5d')]);_0x5a58d9=null;return _0x2fd017[_0x52ce('0x9')](0xc8)[_0x52ce('0x14')]({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x42fb72['trim']()));});}else{return _0x2fd017['status'](0xc8)[_0x52ce('0x14')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});function _0x35fcbf(){return function(_0x45c42d,_0x42fc57,_0x4e9aa2){if(_0x45c42d['isAuthenticated']()){return _0x4e9aa2();}else{_0x42fc57['status'](0x191)['send'](_0x52ce('0x65'));}};}};