var _0x4575=['python','pipe','stderr','data','Successfully\x20changed\x20wifi\x20settings','log','wlan1','Retreived\x20wireless\x20connections','post','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','network={\x0a','\x09ssid=\x22','\x09psk=\x22','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','sudo\x20wpa_cli\x20-i\x20wlan1\x20reconfigure','SCANNING','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','Ip\x20address:\x20','SocketVariables','fusion_wifi_access','sockets','emit','wifi-connection','Connected\x20to\x20','indexOf','Error\x20connecting\x20to\x20','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','/etc/wpa_supplicant/wpa_supplicant.conf','INACTIVE','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','stdout','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','fusion_diagnostics_running','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','User\x20Unauthenticated','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','spawn','exports','/api/admin/users','findOne','body','username','send','status','Username\x20already\x20taken.','password','generateHash','generateFileSystem','save','json','User\x20created!','get','/api/admin/powerOff','Shut\x20Down\x20Commencing','sudo','poweroff','/api/admin/restart','Restart\x20Commencing','/api/admin/wirelessSettings','EOL','platform','win32','../../etc/hostapd.conf','utf8','Wifi\x20file\x20not\x20found','split','length','wpa_passphrase','Password','SSID','/etc/hostapd/hostapd.conf','etc','ssid_set.py','ssid'];(function(_0x4dc10e,_0x3e9f73){var _0xe9d5eb=function(_0x48b2f3){while(--_0x48b2f3){_0x4dc10e['push'](_0x4dc10e['shift']());}};_0xe9d5eb(++_0x3e9f73);}(_0x4575,0x186));var _0x4a1e=function(_0x25b9d7,_0x5a28c6){_0x25b9d7=_0x25b9d7-0x0;var _0x4aaf33=_0x4575[_0x25b9d7];return _0x4aaf33;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require('path');var shell=require('shelljs');var wpa_cli=require(_0x4a1e('0x0'));var iwlist=require(_0x4a1e('0x1'));var wpa_supplicant=require(_0x4a1e('0x2'));var spawn=require(_0x4a1e('0x3'))[_0x4a1e('0x4')];module[_0x4a1e('0x5')]=function(_0x5c94a2,_0x5677db,_0x1dff6a,_0x464e77,_0x471fb8){_0x5c94a2['post'](_0x4a1e('0x6'),_0x31a285(),function(_0x158987,_0x5c95b8){_0x5677db[_0x4a1e('0x7')]({'username':_0x158987[_0x4a1e('0x8')][_0x4a1e('0x9')]},function(_0x158d84,_0x727b8f){if(_0x158d84)return _0x5c95b8['status'](0x1f4)[_0x4a1e('0xa')](_0x158d84);if(_0x727b8f){return _0x5c95b8[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0xc'));}else{var _0x4302e1=new _0x5677db(_0x158987[_0x4a1e('0x8')]);_0x4302e1[_0x4a1e('0x9')]=_0x158987[_0x4a1e('0x8')][_0x4a1e('0x9')];_0x4302e1[_0x4a1e('0xd')]=_0x4302e1[_0x4a1e('0xe')](_0x158987['body'][_0x4a1e('0xd')]);_0x4302e1['filepath']=_0x4302e1[_0x4a1e('0xf')](_0x4302e1['username']);_0x4302e1[_0x4a1e('0x10')](function(_0x5bf640){if(_0x5bf640)return _0x5c95b8[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x5bf640);return _0x5c95b8['status'](0xc8)[_0x4a1e('0x11')]({'serverMessage':_0x4a1e('0x12')});});}});});_0x5c94a2[_0x4a1e('0x13')](_0x4a1e('0x14'),function(_0x460521,_0x1a882d){_0x1a882d[_0x4a1e('0xb')](0xc8)[_0x4a1e('0x11')]({'serverMessage':_0x4a1e('0x15')});var _0x5bde12=require(_0x4a1e('0x3'))[_0x4a1e('0x4')];var _0xce6322=_0x5bde12(_0x4a1e('0x16'),[_0x4a1e('0x17')]);});_0x5c94a2[_0x4a1e('0x13')](_0x4a1e('0x18'),function(_0x15b4c6,_0x32ed0a){_0x32ed0a[_0x4a1e('0xb')](0xc8)[_0x4a1e('0xa')](_0x4a1e('0x19'));var _0x34c090=require(_0x4a1e('0x3'))[_0x4a1e('0x4')];var _0x1faef0=_0x34c090(_0x4a1e('0x16'),['reboot']);});_0x5c94a2['get'](_0x4a1e('0x1a'),function(_0x54cc67,_0x168252){var _0x31f604;var _0x4472a5=require('os')[_0x4a1e('0x1b')];var _0x379e58;var _0x2ba866;var _0x9b7ca0={};if(os[_0x4a1e('0x1c')]()==_0x4a1e('0x1d')){_0x31f604=_0x4a1e('0x1e');fs['readFile'](_0x31f604,_0x4a1e('0x1f'),function(_0x1bfd16,_0x1a34e8){if(_0x1bfd16)_0x168252[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x20'));_0x379e58=_0x1a34e8[_0x4a1e('0x21')]('\x0a');for(var _0x541fa0=0x0;_0x541fa0<_0x379e58[_0x4a1e('0x22')];_0x541fa0++){_0x2ba866=_0x379e58[_0x541fa0][_0x4a1e('0x21')]('=');if(_0x2ba866[0x0]=='ssid')_0x9b7ca0['SSID']=_0x2ba866[0x1];else if(_0x2ba866[0x0]==_0x4a1e('0x23'))_0x9b7ca0[_0x4a1e('0x24')]=_0x2ba866[0x1];}_0x168252[_0x4a1e('0xb')](0xc8)[_0x4a1e('0x11')]({'SSID':_0x9b7ca0[_0x4a1e('0x25')],'Password':_0x9b7ca0[_0x4a1e('0x24')]});});}else{_0x31f604=_0x4a1e('0x26');fs['readFile'](_0x31f604,_0x4a1e('0x1f'),function(_0x50ed39,_0x4a17d9){if(_0x50ed39)_0x168252['status'](0x1f4)[_0x4a1e('0xa')]('Wifi\x20file\x20not\x20found');_0x379e58=_0x4a17d9['split'](_0x4472a5);for(var _0x4270d8=0x0;_0x4270d8<_0x379e58[_0x4a1e('0x22')];_0x4270d8++){_0x2ba866=_0x379e58[_0x4270d8][_0x4a1e('0x21')]('=');if(_0x2ba866[0x0]=='ssid')_0x9b7ca0[_0x4a1e('0x25')]=_0x2ba866[0x1];else if(_0x2ba866[0x0]==_0x4a1e('0x23'))_0x9b7ca0[_0x4a1e('0x24')]=_0x2ba866[0x1];}_0x168252['status'](0xc8)[_0x4a1e('0x11')]({'SSID':_0x9b7ca0['SSID'],'Password':_0x9b7ca0[_0x4a1e('0x24')]});});}});_0x5c94a2['post']('/api/admin/wirelessSettings',function(_0x3a894b,_0x1ca057){try{var _0x3b3783;var _0xc3a58c;var _0x1a4592=path['join']('..','..',_0x4a1e('0x27'),_0x4a1e('0x28'));if(_0x3a894b[_0x4a1e('0x8')][_0x4a1e('0x29')]==null&&_0x3a894b[_0x4a1e('0x8')][_0x4a1e('0xd')]==null)_0xc3a58c=['python',_0x1a4592,'-d'];else _0xc3a58c=[_0x4a1e('0x2a'),_0x1a4592,'-s',_0x3a894b[_0x4a1e('0x8')][_0x4a1e('0x29')],'-p',_0x3a894b[_0x4a1e('0x8')][_0x4a1e('0xd')]];var _0x520b4e=require(_0x4a1e('0x3'))[_0x4a1e('0x4')];python_process=_0x520b4e(_0x4a1e('0x16'),_0xc3a58c,{'stdio':_0x4a1e('0x2b')});python_process[_0x4a1e('0x2c')]['on'](_0x4a1e('0x2d'),function(_0x43a75a){console['log'](String(_0x43a75a));_0x3b3783=String(_0x43a75a);});python_process['stdout']['on']('close',function(_0x15eeaa){if(_0x3b3783)return _0x1ca057[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x3b3783);else return _0x1ca057[_0x4a1e('0xb')](0xc8)['json']({'serverMessage':_0x4a1e('0x2e')});});}catch(_0x488e19){console[_0x4a1e('0x2f')](_0x488e19);return _0x1ca057[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x488e19);}});_0x5c94a2['get']('/api/admin/wirelessConnections',function(_0x22b847,_0x2c1169){if(os[_0x4a1e('0x1c')]()==_0x4a1e('0x1d')){return _0x2c1169[_0x4a1e('0xb')](0xc8)[_0x4a1e('0xa')]();}else{iwlist['scan'](_0x4a1e('0x30'),function(_0x2c7f59,_0x56292d){if(_0x2c7f59)return _0x2c1169[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')]('Wireless\x20interface\x20not\x20found');else return _0x2c1169['status'](0xc8)[_0x4a1e('0xa')]({'serverMessage':_0x4a1e('0x31'),'data':_0x56292d});});}});_0x5c94a2[_0x4a1e('0x32')]('/api/admin/wirelessConnections',function(_0x732bbd,_0x235eec){var _0x57e831=undefined;var _0xf1a5bf=_0x4a1e('0x33')+_0x4a1e('0x34')+'country=US\x0a\x0a';var _0x75beba=_0x4a1e('0x35')+_0x4a1e('0x36')+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0x29')]+'\x22\x0a'+'\x09scan_ssid=1\x0a'+_0x4a1e('0x37')+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0xd')]+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+'}\x0a\x0a';if(_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0xd')]){_0x57e831=shell[_0x4a1e('0x38')](_0x4a1e('0x39')+_0x732bbd['body']['ssid']+_0x4a1e('0x3a')+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0xd')]+'\x22',{'silent':!![]})['stdout'];}else{_0x57e831=_0x4a1e('0x35')+'\x20\x20\x20\x20ssid=\x22'+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0x29')]+'\x22\x0a'+_0x4a1e('0x3b')+'}\x0a';}let _0x3d7d3e='';if(_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0x3c')])_0x3d7d3e=_0xf1a5bf+_0x75beba;else _0x3d7d3e=_0xf1a5bf+_0x57e831;fs[_0x4a1e('0x3d')]('/etc/wpa_supplicant/wpa_supplicant.conf',_0x3d7d3e,function(_0x2cf5ed){if(_0x2cf5ed)return _0x235eec[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x2cf5ed);shell[_0x4a1e('0x38')](_0x4a1e('0x3e'),{'silent':!![]});const _0x1ae866=0x3a98;var _0x467879=0x12c;var _0x35de40=0x0;var _0x1b0700=setInterval(function(){var _0x3d76d2=[_0x4a1e('0x3f'),'4WAY_HANDSHAKE',_0x4a1e('0x40'),_0x4a1e('0x41'),_0x4a1e('0x42')];wpa_cli[_0x4a1e('0xb')](_0x4a1e('0x30'),function(_0x43a14e,_0x56215f){if(_0x43a14e)return _0x235eec[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x43a14e);if(_0x56215f[_0x4a1e('0x43')]==_0x4a1e('0x44')){if(_0x56215f['ip']){console[_0x4a1e('0x2f')](_0x4a1e('0x45')+_0x56215f['ip']+'\x20assigned');clearInterval(_0x1b0700);_0x471fb8[_0x4a1e('0x46')][_0x4a1e('0x47')]=_0x56215f;_0x464e77[_0x4a1e('0x48')][_0x4a1e('0x49')](_0x4a1e('0x4a'),_0x56215f);return _0x235eec[_0x4a1e('0xb')](0xc8)[_0x4a1e('0x11')]({'serverMessage':_0x4a1e('0x4b')+_0x732bbd[_0x4a1e('0x8')]['ssid']+'\x20successfully'});}else if(_0x35de40>_0x1ae866){console[_0x4a1e('0x2f')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x1b0700);return _0x235eec[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')]('Error\x20connecting\x20to\x20'+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0x29')]);}_0x35de40+=_0x467879;}else if(_0x3d76d2[_0x4a1e('0x4c')](_0x56215f[_0x4a1e('0x43')])==-0x1){clearInterval(_0x1b0700);_0x464e77[_0x4a1e('0x48')][_0x4a1e('0x49')](_0x4a1e('0x4a'),_0x56215f);return _0x235eec['status'](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x4d')+_0x732bbd[_0x4a1e('0x8')][_0x4a1e('0x29')]);}});},_0x467879);});});_0x5c94a2['get'](_0x4a1e('0x4e'),function(_0x192d5a,_0x346702){if(os[_0x4a1e('0x1c')]()==_0x4a1e('0x1d')){_0x346702[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x4f'));}else{var _0x2eabd5=_0x4a1e('0x33')+_0x4a1e('0x34')+'country=US\x0a\x0a';fs[_0x4a1e('0x3d')](_0x4a1e('0x50'),_0x2eabd5,function(_0x1fceb4){if(_0x1fceb4)return _0x346702[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x1fceb4);shell[_0x4a1e('0x38')](_0x4a1e('0x3e'),{'silent':!![]});var _0x29fa4e=setInterval(function(){var _0x2d8158=[];wpa_cli[_0x4a1e('0xb')](_0x4a1e('0x30'),function(_0x5d0e06,_0x33cc27){if(_0x5d0e06)return _0x346702[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x5d0e06);_0x471fb8['SocketVariables'][_0x4a1e('0x47')]=_0x33cc27;_0x464e77['sockets']['emit'](_0x4a1e('0x4a'),_0x33cc27);if(_0x33cc27['wpa_state']==_0x4a1e('0x41')||_0x33cc27[_0x4a1e('0x43')]==_0x4a1e('0x51')){clearInterval(_0x29fa4e);_0x464e77[_0x4a1e('0x48')][_0x4a1e('0x49')](_0x4a1e('0x4a'),_0x33cc27);return _0x346702[_0x4a1e('0xb')](0xc8)['json']({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x4a1e('0x4c')](_0x33cc27[_0x4a1e('0x43')])==-0x1){clearInterval(_0x29fa4e);_0x464e77[_0x4a1e('0x48')]['emit'](_0x4a1e('0x4a'),_0x33cc27);return _0x346702[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x52'));}});},0x12c);});}});_0x5c94a2[_0x4a1e('0x13')](_0x4a1e('0x53'),function(_0x267d12,_0x5ed26d){var _0x5dc921=_0x4a1e('0x54');fs[_0x4a1e('0x55')](_0x5dc921,function(_0x1fa4cf,_0x4cce1a){if(_0x1fa4cf)return _0x5ed26d[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x1fa4cf);if(_0x4cce1a[_0x4a1e('0x22')]>0x0){fs['readFile'](_0x5dc921+'/'+_0x4cce1a[0x0],_0x4a1e('0x1f'),function(_0x1c3abc,_0x2522a1){if(_0x1c3abc)return status(0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x56'));_0x5ed26d[_0x4a1e('0x57')](_0x4a1e('0x58'),_0x4a1e('0x59')+_0x4cce1a[0x0]);return _0x5ed26d[_0x4a1e('0xb')](0xc8)[_0x4a1e('0x5a')](_0x5dc921+'/'+_0x4cce1a[0x0]);});}else{return _0x5ed26d['status'](0xc8)['send'](_0x4a1e('0x5b'));}});});var _0x471b23=null;_0x5c94a2[_0x4a1e('0x32')](_0x4a1e('0x5c'),function(_0xd5bc4e,_0x5e62e8){if(os[_0x4a1e('0x1c')]()!=_0x4a1e('0x1d')){_0x471b23=spawn(_0x4a1e('0x16'),['sh',_0x4a1e('0x5d'),_0x4a1e('0x5e')]);_0x471b23[_0x4a1e('0x5f')]['on']('data',function(_0x3e4a9b){console[_0x4a1e('0x2f')](String(_0x3e4a9b));});_0x471b23[_0x4a1e('0x2c')]['on'](_0x4a1e('0x2d'),function(_0x426b0f){console[_0x4a1e('0x2f')](String(_0x426b0f));});var _0x238115=0x1;var _0x3b10d5=0x3;var _0x58bb89=setInterval(function(){if(_0x238115<=_0x3b10d5){var _0x41e13d=shell['exec'](_0x4a1e('0x60'),{'silent':!![]})[_0x4a1e('0x5f')];if(_0x41e13d){clearInterval(_0x58bb89);_0x471fb8[_0x4a1e('0x46')]['fusion_diagnostics_running']={'process':_0x41e13d,'socket':_0xd5bc4e['body'][_0x4a1e('0x61')]};_0x464e77[_0x4a1e('0x48')][_0x4a1e('0x49')](_0x4a1e('0x62'),_0x471fb8[_0x4a1e('0x46')][_0x4a1e('0x63')]);return _0x5e62e8['status'](0xc8)[_0x4a1e('0x11')]({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x238115++;}}else{clearInterval(_0x58bb89);return _0x5e62e8[_0x4a1e('0xb')](0x1f4)['send'](_0x4a1e('0x64'));}},0x12c);}else{return _0x5e62e8[_0x4a1e('0xb')](0xc8)['json']({'serverMessage':_0x4a1e('0x65')});}});_0x5c94a2[_0x4a1e('0x13')](_0x4a1e('0x66'),function(_0x4fad23,_0x94fed3){if(os[_0x4a1e('0x1c')]()!=_0x4a1e('0x1d')){shell['exec'](_0x4a1e('0x67'),{'silent':!![]});shell[_0x4a1e('0x38')](_0x4a1e('0x60'),{'silent':!![]},function(_0x4157f3,_0x34b536,_0x5ae2c7){(function(_0x37492a){var _0x70c089=_0x37492a[_0x4a1e('0x68')]();if(_0x70c089){return _0x94fed3[_0x4a1e('0xb')](0x1f4)[_0x4a1e('0xa')](_0x4a1e('0x69'));}else{_0x471fb8['SocketVariables'][_0x4a1e('0x63')]=null;_0x464e77['sockets'][_0x4a1e('0x49')]('diagnostics_running',_0x471fb8['SocketVariables'][_0x4a1e('0x63')]);_0x471b23=null;return _0x94fed3[_0x4a1e('0xb')](0xc8)[_0x4a1e('0x11')]({'serverMessage':_0x4a1e('0x6a')});}}(_0x34b536[_0x4a1e('0x68')]()));});}else{return _0x94fed3[_0x4a1e('0xb')](0xc8)['json']({'serverMessage':_0x4a1e('0x65')});}});function _0x31a285(){return function(_0x26b234,_0x3166d1,_0x18589a){if(_0x26b234['isAuthenticated']()){return _0x18589a();}else{_0x3166d1[_0x4a1e('0xb')](0x191)[_0x4a1e('0xa')](_0x4a1e('0x6b'));}};}};