var _0x5576=['length','split','SSID','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','ssid','etc','python','stderr','data','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','/api/admin/wirelessConnections','platform','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','wpa_passphrase\x20\x22','\x22\x20\x22','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','exec','sudo\x20wpa_cli\x20-i\x20','SCANNING','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','COMPLETED','Ip\x20address:\x20','\x20assigned','SocketVariables','fusion_wifi_access','sockets','wifi-connection','Connected\x20to\x20','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','Error\x20connecting\x20to\x20','emit','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','attachment;\x20filename=','/api/diagnostics/start','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','fusion_diagnostics_running','socketId','diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','isAuthenticated','mkdirp','wireless-tools/wpa_cli','wireless-tools/iwlist','child_process','spawn','config','Wifi_NIC','exports','post','findOne','body','username','status','send','Username\x20already\x20taken.','password','generateHash','generateFileSystem','save','json','/api/admin/powerOff','Shut\x20Down\x20Commencing','sudo','get','reboot','/api/admin/wirelessSettings','win32','../../etc/config-wap/hostapd.conf__npp.sh','readFile','utf8','Wifi\x20file\x20not\x20found'];(function(_0x427c6f,_0x517e3f){var _0x533658=function(_0x280b4f){while(--_0x280b4f){_0x427c6f['push'](_0x427c6f['shift']());}};_0x533658(++_0x517e3f);}(_0x5576,0xbb));var _0x2357=function(_0x4dcb5a,_0x581b05){_0x4dcb5a=_0x4dcb5a-0x0;var _0x1bf309=_0x5576[_0x4dcb5a];return _0x1bf309;};var fs=require('fs');var mkdirp=require(_0x2357('0x0'));var os=require('os');var path=require('path');var shell=require('shelljs');var wpa_cli=require(_0x2357('0x1'));var iwlist=require(_0x2357('0x2'));var wpa_supplicant=require('wireless-tools/wpa_supplicant');var spawn=require(_0x2357('0x3'))[_0x2357('0x4')];const config=require(_0x2357('0x5'));let nicInterface=config['get'](_0x2357('0x6'));module[_0x2357('0x7')]=function(_0x4fbcb2,_0x35eac0,_0x4ab0a6,_0x54f464,_0x429df4){_0x4fbcb2[_0x2357('0x8')]('/api/admin/users',_0x107720(),function(_0x27bee6,_0x4c4975){_0x35eac0[_0x2357('0x9')]({'username':_0x27bee6[_0x2357('0xa')][_0x2357('0xb')]},function(_0xf25991,_0x247d6e){if(_0xf25991)return _0x4c4975['status'](0x1f4)['send'](_0xf25991);if(_0x247d6e){return _0x4c4975[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0xe'));}else{var _0x946c0c=new _0x35eac0(_0x27bee6[_0x2357('0xa')]);_0x946c0c[_0x2357('0xb')]=_0x27bee6[_0x2357('0xa')]['username'];_0x946c0c[_0x2357('0xf')]=_0x946c0c[_0x2357('0x10')](_0x27bee6['body'][_0x2357('0xf')]);_0x946c0c['filepath']=_0x946c0c[_0x2357('0x11')](_0x946c0c[_0x2357('0xb')]);_0x946c0c[_0x2357('0x12')](function(_0x32e965){if(_0x32e965)return _0x4c4975[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x32e965);return _0x4c4975[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':'User\x20created!'});});}});});_0x4fbcb2['get'](_0x2357('0x14'),function(_0x99de24,_0x21dcc5){_0x21dcc5[_0x2357('0xc')](0xc8)['json']({'serverMessage':_0x2357('0x15')});var _0x4f074a=require('child_process')[_0x2357('0x4')];var _0x50eedc=_0x4f074a(_0x2357('0x16'),['poweroff']);});_0x4fbcb2[_0x2357('0x17')]('/api/admin/restart',function(_0x267dfb,_0x15c9de){_0x15c9de['status'](0xc8)[_0x2357('0xd')]('Restart\x20Commencing');var _0x488213=require(_0x2357('0x3'))[_0x2357('0x4')];var _0x11b423=_0x488213(_0x2357('0x16'),[_0x2357('0x18')]);});_0x4fbcb2[_0x2357('0x17')](_0x2357('0x19'),function(_0x1b848d,_0x34225f){var _0x5c50ad;var _0x580b20=require('os')['EOL'];var _0x4156d2;var _0x36072a;var _0x53ab17={};if(os['platform']()==_0x2357('0x1a')){_0x5c50ad=_0x2357('0x1b');fs[_0x2357('0x1c')](_0x5c50ad,_0x2357('0x1d'),function(_0x25cdd2,_0x5d15ed){if(_0x25cdd2)_0x34225f[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0x1e'));_0x4156d2=_0x5d15ed['split']('\x0a');for(var _0x4c77a8=0x0;_0x4c77a8<_0x4156d2[_0x2357('0x1f')];_0x4c77a8++){_0x36072a=_0x4156d2[_0x4c77a8][_0x2357('0x20')]('=');if(_0x36072a[0x0]=='ssid')_0x53ab17[_0x2357('0x21')]=_0x36072a[0x1];else if(_0x36072a[0x0]==_0x2357('0x22'))_0x53ab17[_0x2357('0x23')]=_0x36072a[0x1];}_0x34225f[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'SSID':_0x53ab17[_0x2357('0x21')],'Password':_0x53ab17[_0x2357('0x23')]});});}else{_0x5c50ad=_0x2357('0x24');fs['readFile'](_0x5c50ad,_0x2357('0x1d'),function(_0x434018,_0x235c90){if(_0x434018)_0x34225f[_0x2357('0xc')](0x1f4)[_0x2357('0xd')]('Wifi\x20file\x20not\x20found');_0x4156d2=_0x235c90[_0x2357('0x20')](_0x580b20);for(var _0x33335b=0x0;_0x33335b<_0x4156d2[_0x2357('0x1f')];_0x33335b++){_0x36072a=_0x4156d2[_0x33335b][_0x2357('0x20')]('=');if(_0x36072a[0x0]==_0x2357('0x25'))_0x53ab17[_0x2357('0x21')]=_0x36072a[0x1];else if(_0x36072a[0x0]==_0x2357('0x22'))_0x53ab17[_0x2357('0x23')]=_0x36072a[0x1];}if(!_0x53ab17['SSID']){_0x53ab17[_0x2357('0x21')]='Not\x20configured..';_0x53ab17['Password']='';}_0x34225f[_0x2357('0xc')](0xc8)['json']({'SSID':_0x53ab17[_0x2357('0x21')],'Password':_0x53ab17['Password']});});}});_0x4fbcb2[_0x2357('0x8')]('/api/admin/wirelessSettings',function(_0x5caeff,_0x145b9e){try{var _0x2daf1e;var _0x3a5c95;var _0x50a330=path['join']('..','..',_0x2357('0x26'),'ssid_set.py');if(_0x5caeff[_0x2357('0xa')][_0x2357('0x25')]==null&&_0x5caeff[_0x2357('0xa')][_0x2357('0xf')]==null)_0x3a5c95=[_0x2357('0x27'),_0x50a330,'-d'];else _0x3a5c95=[_0x2357('0x27'),_0x50a330,'-s',_0x5caeff[_0x2357('0xa')]['ssid'],'-p',_0x5caeff[_0x2357('0xa')][_0x2357('0xf')]];var _0x4bb763=require('child_process')[_0x2357('0x4')];python_process=_0x4bb763('sudo',_0x3a5c95,{'stdio':'pipe'});python_process[_0x2357('0x28')]['on'](_0x2357('0x29'),function(_0x2aa966){console[_0x2357('0x2a')](String(_0x2aa966));_0x2daf1e=String(_0x2aa966);});python_process[_0x2357('0x2b')]['on'](_0x2357('0x2c'),function(_0x2f907c){if(_0x2daf1e)return _0x145b9e[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2daf1e);else return _0x145b9e[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':_0x2357('0x2d')});});}catch(_0xf289eb){console[_0x2357('0x2a')](_0xf289eb);return _0x145b9e[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0xf289eb);}});_0x4fbcb2['get'](_0x2357('0x2e'),function(_0x134d31,_0x2bb351){if(os[_0x2357('0x2f')]()=='win32'){return _0x2bb351[_0x2357('0xc')](0xc8)['send']();}else{iwlist[_0x2357('0x30')](nicInterface,function(_0x2c33bd,_0x539348){if(_0x2c33bd)return _0x2bb351[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0x31'));else return _0x2bb351[_0x2357('0xc')](0xc8)[_0x2357('0xd')]({'serverMessage':_0x2357('0x32'),'data':_0x539348});});}});_0x4fbcb2['post'](_0x2357('0x2e'),function(_0x409321,_0xf59fac){var _0x2dfd0e=undefined;var _0x3899ed='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x2357('0x33')+_0x2357('0x34');var _0x554476=_0x2357('0x35')+_0x2357('0x36')+_0x409321[_0x2357('0xa')][_0x2357('0x25')]+'\x22\x0a'+_0x2357('0x37')+_0x2357('0x38')+_0x409321[_0x2357('0xa')][_0x2357('0xf')]+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+'}\x0a\x0a';if(_0x409321[_0x2357('0xa')][_0x2357('0xf')]){_0x2dfd0e=shell['exec'](_0x2357('0x39')+_0x409321['body'][_0x2357('0x25')]+_0x2357('0x3a')+_0x409321[_0x2357('0xa')][_0x2357('0xf')]+'\x22',{'silent':!![]})[_0x2357('0x2b')];}else{_0x2dfd0e=_0x2357('0x35')+'\x20\x20\x20\x20ssid=\x22'+_0x409321['body'][_0x2357('0x25')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0x21c50f='';if(_0x409321[_0x2357('0xa')][_0x2357('0x3b')])_0x21c50f=_0x3899ed+_0x554476;else _0x21c50f=_0x3899ed+_0x2dfd0e;fs[_0x2357('0x3c')](_0x2357('0x3d'),_0x21c50f,function(_0x500d1a){if(_0x500d1a)return _0xf59fac[_0x2357('0xc')](0x1f4)['send'](_0x500d1a);shell[_0x2357('0x3e')](_0x2357('0x3f')+nicInterface+'\x20reconfigure',{'silent':!![]});const _0x337daa=0x3a98;var _0x58f736=0x12c;var _0x54ee0b=0x0;var _0x197b74=setInterval(function(){var _0x2bb20f=[_0x2357('0x40'),'4WAY_HANDSHAKE',_0x2357('0x41'),_0x2357('0x42'),_0x2357('0x43')];wpa_cli[_0x2357('0xc')](nicInterface,function(_0x5853c3,_0x46f71b){if(_0x5853c3)return _0xf59fac[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x5853c3);if(_0x46f71b[_0x2357('0x44')]==_0x2357('0x45')){if(_0x46f71b['ip']){console[_0x2357('0x2a')](_0x2357('0x46')+_0x46f71b['ip']+_0x2357('0x47'));clearInterval(_0x197b74);_0x429df4[_0x2357('0x48')][_0x2357('0x49')]=_0x46f71b;_0x54f464[_0x2357('0x4a')]['emit'](_0x2357('0x4b'),_0x46f71b);return _0xf59fac[_0x2357('0xc')](0xc8)['json']({'serverMessage':_0x2357('0x4c')+_0x409321['body'][_0x2357('0x25')]+_0x2357('0x4d')});}else if(_0x54ee0b>_0x337daa){console[_0x2357('0x2a')](_0x2357('0x4e'));clearInterval(_0x197b74);return _0xf59fac[_0x2357('0xc')](0x1f4)['send'](_0x2357('0x4f')+_0x409321[_0x2357('0xa')][_0x2357('0x25')]);}_0x54ee0b+=_0x58f736;}else if(_0x2bb20f['indexOf'](_0x46f71b['wpa_state'])==-0x1){clearInterval(_0x197b74);_0x54f464[_0x2357('0x4a')][_0x2357('0x50')](_0x2357('0x4b'),_0x46f71b);return _0xf59fac[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0x4f')+_0x409321['body'][_0x2357('0x25')]);}});},_0x58f736);});});_0x4fbcb2[_0x2357('0x17')](_0x2357('0x51'),function(_0x1efce1,_0x379524){if(os[_0x2357('0x2f')]()==_0x2357('0x1a')){_0x379524[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0x52'));}else{var _0x2c5cc4=_0x2357('0x53')+_0x2357('0x33')+'country=US\x0a\x0a';fs[_0x2357('0x3c')](_0x2357('0x3d'),_0x2c5cc4,function(_0x52ee88){if(_0x52ee88)return _0x379524[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x52ee88);shell[_0x2357('0x3e')](_0x2357('0x3f')+nicInterface+'\x20reconfigure',{'silent':!![]});var _0x59eef1=setInterval(function(){var _0x49b7f3=[];wpa_cli[_0x2357('0xc')](nicInterface,function(_0x14ff78,_0x3561ab){if(_0x14ff78)return _0x379524[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x14ff78);_0x429df4[_0x2357('0x48')][_0x2357('0x49')]=_0x3561ab;_0x54f464[_0x2357('0x4a')][_0x2357('0x50')](_0x2357('0x4b'),_0x3561ab);if(_0x3561ab['wpa_state']=='DISCONNECTED'||_0x3561ab['wpa_state']=='INACTIVE'){clearInterval(_0x59eef1);_0x54f464['sockets'][_0x2357('0x50')]('wifi-connection',_0x3561ab);return _0x379524[_0x2357('0xc')](0xc8)['json']({'serverMessage':_0x2357('0x54')});}else if(connectingStatuses['indexOf'](_0x3561ab[_0x2357('0x44')])==-0x1){clearInterval(_0x59eef1);_0x54f464[_0x2357('0x4a')][_0x2357('0x50')]('wifi-connection',_0x3561ab);return _0x379524['status'](0x1f4)[_0x2357('0xd')](_0x2357('0x55'));}});},0x12c);});}});_0x4fbcb2[_0x2357('0x17')](_0x2357('0x56'),function(_0x87b84a,_0x3ece66){var _0x359ee2=_0x2357('0x57');fs[_0x2357('0x58')](_0x359ee2,function(_0x484930,_0x1511b8){if(_0x484930)return _0x3ece66[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x484930);if(_0x1511b8['length']>0x0){fs[_0x2357('0x1c')](_0x359ee2+'/'+_0x1511b8[0x0],'utf8',function(_0x3659b6,_0x4244cf){if(_0x3659b6)return status(0x1f4)[_0x2357('0xd')](_0x2357('0x59'));_0x3ece66[_0x2357('0x5a')](_0x2357('0x5b'),_0x2357('0x5c')+_0x1511b8[0x0]);return _0x3ece66[_0x2357('0xc')](0xc8)['download'](_0x359ee2+'/'+_0x1511b8[0x0]);});}else{return _0x3ece66[_0x2357('0xc')](0xc8)[_0x2357('0xd')]('No\x20crash\x20files\x20found');}});});var _0x401635=null;_0x4fbcb2[_0x2357('0x8')](_0x2357('0x5d'),function(_0x58d2f1,_0x365201){if(os[_0x2357('0x2f')]()!=_0x2357('0x1a')){_0x401635=spawn(_0x2357('0x16'),['sh',_0x2357('0x5e'),_0x2357('0x5f')]);_0x401635[_0x2357('0x2b')]['on'](_0x2357('0x29'),function(_0xd4cc53){console['log'](String(_0xd4cc53));});_0x401635[_0x2357('0x28')]['on'](_0x2357('0x29'),function(_0x2db53c){console['log'](String(_0x2db53c));});var _0x42d88b=0x1;var _0x288212=0x3;var _0x431435=setInterval(function(){if(_0x42d88b<=_0x288212){var _0x36cbbb=shell[_0x2357('0x3e')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})['stdout'];if(_0x36cbbb){clearInterval(_0x431435);_0x429df4[_0x2357('0x48')][_0x2357('0x60')]={'process':_0x36cbbb,'socket':_0x58d2f1[_0x2357('0xa')][_0x2357('0x61')]};_0x54f464[_0x2357('0x4a')][_0x2357('0x50')](_0x2357('0x62'),_0x429df4[_0x2357('0x48')]['fusion_diagnostics_running']);return _0x365201[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':_0x2357('0x63')});}else{_0x42d88b++;}}else{clearInterval(_0x431435);return _0x365201[_0x2357('0xc')](0x1f4)['send'](_0x2357('0x64'));}},0x12c);}else{return _0x365201[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':_0x2357('0x65')});}});_0x4fbcb2[_0x2357('0x17')](_0x2357('0x66'),function(_0x38ceda,_0x16d33b){if(os[_0x2357('0x2f')]()!='win32'){shell[_0x2357('0x3e')](_0x2357('0x67'),{'silent':!![]});shell[_0x2357('0x3e')](_0x2357('0x68'),{'silent':!![]},function(_0x10b727,_0x298072,_0x294e12){(function(_0x3fb02f){var _0x5e91c0=_0x3fb02f[_0x2357('0x69')]();if(_0x5e91c0){return _0x16d33b[_0x2357('0xc')](0x1f4)[_0x2357('0xd')](_0x2357('0x6a'));}else{_0x429df4[_0x2357('0x48')]['fusion_diagnostics_running']=null;_0x54f464['sockets'][_0x2357('0x50')](_0x2357('0x62'),_0x429df4[_0x2357('0x48')]['fusion_diagnostics_running']);_0x401635=null;return _0x16d33b[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':_0x2357('0x6b')});}}(_0x298072[_0x2357('0x69')]()));});}else{return _0x16d33b[_0x2357('0xc')](0xc8)[_0x2357('0x13')]({'serverMessage':_0x2357('0x65')});}});function _0x107720(){return function(_0x1e4232,_0x275d2c,_0x3654ea){if(_0x1e4232[_0x2357('0x6c')]()){return _0x3654ea();}else{_0x275d2c[_0x2357('0xc')](0x191)[_0x2357('0xd')]('User\x20Unauthenticated');}};}};