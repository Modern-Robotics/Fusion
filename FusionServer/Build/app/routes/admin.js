var _0x45b2=['country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','\x20\x20\x20\x20ssid=\x22','hiddenNetwork','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','wpa_state','COMPLETED','Ip\x20address:\x20','\x20assigned','SocketVariables','fusion_wifi_access','sockets','emit','wifi-connection','\x20successfully','Error\x20connecting\x20to\x20','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','writeFile','INACTIVE','indexOf','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','No\x20crash\x20files\x20found','fusion_diagnostics_running','socketId','diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','trim','Diagnostic\x20tool\x20stopped\x20successfully','isAuthenticated','User\x20Unauthenticated','mkdirp','path','shelljs','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','config','get','exports','/api/admin/users','findOne','username','status','send','Username\x20already\x20taken.','body','password','generateHash','filepath','generateFileSystem','save','/api/admin/powerOff','json','Shut\x20Down\x20Commencing','spawn','sudo','poweroff','/api/admin/restart','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','platform','../../etc/config-wap/hostapd.conf__npp.sh','Wifi\x20file\x20not\x20found','split','length','SSID','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','readFile','utf8','ssid','Not\x20configured..','post','join','etc','python','pipe','stderr','data','log','stdout','close','Successfully\x20changed\x20wifi\x20settings','win32','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','/api/admin/wirelessConnections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a'];(function(_0xc2c71d,_0x349b38){var _0x47b9a3=function(_0x2d12e4){while(--_0x2d12e4){_0xc2c71d['push'](_0xc2c71d['shift']());}};_0x47b9a3(++_0x349b38);}(_0x45b2,0x199));var _0x5b5d=function(_0xf01951,_0x4af0b8){_0xf01951=_0xf01951-0x0;var _0x5a0f55=_0x45b2[_0xf01951];return _0x5a0f55;};var fs=require('fs');var mkdirp=require(_0x5b5d('0x0'));var os=require('os');var path=require(_0x5b5d('0x1'));var shell=require(_0x5b5d('0x2'));var wpa_cli=require(_0x5b5d('0x3'));var iwlist=require(_0x5b5d('0x4'));var wpa_supplicant=require(_0x5b5d('0x5'));var spawn=require(_0x5b5d('0x6'))['spawn'];const config=require(_0x5b5d('0x7'));let nicInterface=config[_0x5b5d('0x8')]('Wifi_NIC');module[_0x5b5d('0x9')]=function(_0x56807f,_0x3414ab,_0x5334c3,_0x2022bf,_0x561a45){_0x56807f['post'](_0x5b5d('0xa'),_0x2c80d2(),function(_0x110958,_0x44f63c){_0x3414ab[_0x5b5d('0xb')]({'username':_0x110958['body'][_0x5b5d('0xc')]},function(_0xee38ce,_0x5d65d1){if(_0xee38ce)return _0x44f63c[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0xee38ce);if(_0x5d65d1){return _0x44f63c[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0xf'));}else{var _0x2eb3ae=new _0x3414ab(_0x110958[_0x5b5d('0x10')]);_0x2eb3ae[_0x5b5d('0xc')]=_0x110958[_0x5b5d('0x10')][_0x5b5d('0xc')];_0x2eb3ae[_0x5b5d('0x11')]=_0x2eb3ae[_0x5b5d('0x12')](_0x110958[_0x5b5d('0x10')][_0x5b5d('0x11')]);_0x2eb3ae[_0x5b5d('0x13')]=_0x2eb3ae[_0x5b5d('0x14')](_0x2eb3ae[_0x5b5d('0xc')]);_0x2eb3ae[_0x5b5d('0x15')](function(_0x4b9cfa){if(_0x4b9cfa)return _0x44f63c['status'](0x1f4)[_0x5b5d('0xe')](_0x4b9cfa);return _0x44f63c[_0x5b5d('0xd')](0xc8)['json']({'serverMessage':'User\x20created!'});});}});});_0x56807f[_0x5b5d('0x8')](_0x5b5d('0x16'),function(_0xbbff79,_0x46332d){_0x46332d[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'serverMessage':_0x5b5d('0x18')});var _0x2533ec=require(_0x5b5d('0x6'))[_0x5b5d('0x19')];var _0x5e5e65=_0x2533ec(_0x5b5d('0x1a'),[_0x5b5d('0x1b')]);});_0x56807f['get'](_0x5b5d('0x1c'),function(_0x3420d6,_0x45c990){_0x45c990[_0x5b5d('0xd')](0xc8)[_0x5b5d('0xe')](_0x5b5d('0x1d'));var _0x55377c=require(_0x5b5d('0x6'))[_0x5b5d('0x19')];var _0xffc2cf=_0x55377c('sudo',[_0x5b5d('0x1e')]);});_0x56807f[_0x5b5d('0x8')](_0x5b5d('0x1f'),function(_0x13e975,_0x423bed){var _0x422e34;var _0x318f36=require('os')['EOL'];var _0x1897ce;var _0x224f72;var _0x4de2ef={};if(os[_0x5b5d('0x20')]()=='win32'){_0x422e34=_0x5b5d('0x21');fs['readFile'](_0x422e34,'utf8',function(_0x33a00c,_0x4f01b3){if(_0x33a00c)_0x423bed['status'](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x22'));_0x1897ce=_0x4f01b3[_0x5b5d('0x23')]('\x0a');for(var _0x1a232d=0x0;_0x1a232d<_0x1897ce[_0x5b5d('0x24')];_0x1a232d++){_0x224f72=_0x1897ce[_0x1a232d][_0x5b5d('0x23')]('=');if(_0x224f72[0x0]=='ssid')_0x4de2ef[_0x5b5d('0x25')]=_0x224f72[0x1];else if(_0x224f72[0x0]==_0x5b5d('0x26'))_0x4de2ef[_0x5b5d('0x27')]=_0x224f72[0x1];}_0x423bed[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'SSID':_0x4de2ef[_0x5b5d('0x25')],'Password':_0x4de2ef[_0x5b5d('0x27')]});});}else{_0x422e34=_0x5b5d('0x28');fs[_0x5b5d('0x29')](_0x422e34,_0x5b5d('0x2a'),function(_0x2b3b7c,_0x286caf){if(_0x2b3b7c)_0x423bed[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x22'));_0x1897ce=_0x286caf[_0x5b5d('0x23')](_0x318f36);for(var _0x157190=0x0;_0x157190<_0x1897ce[_0x5b5d('0x24')];_0x157190++){_0x224f72=_0x1897ce[_0x157190][_0x5b5d('0x23')]('=');if(_0x224f72[0x0]==_0x5b5d('0x2b'))_0x4de2ef['SSID']=_0x224f72[0x1];else if(_0x224f72[0x0]==_0x5b5d('0x26'))_0x4de2ef[_0x5b5d('0x27')]=_0x224f72[0x1];}if(!_0x4de2ef[_0x5b5d('0x25')]){_0x4de2ef['SSID']=_0x5b5d('0x2c');_0x4de2ef[_0x5b5d('0x27')]='';}_0x423bed[_0x5b5d('0xd')](0xc8)['json']({'SSID':_0x4de2ef[_0x5b5d('0x25')],'Password':_0x4de2ef['Password']});});}});_0x56807f[_0x5b5d('0x2d')]('/api/admin/wirelessSettings',function(_0x3b128b,_0x42bc8b){try{var _0x2dd7ef;var _0x3c2b53;var _0x239506=path[_0x5b5d('0x2e')]('..','..',_0x5b5d('0x2f'),'ssid_set.py');if(_0x3b128b['body'][_0x5b5d('0x2b')]==null&&_0x3b128b['body']['password']==null)_0x3c2b53=['python',_0x239506,'-d'];else _0x3c2b53=[_0x5b5d('0x30'),_0x239506,'-s',_0x3b128b[_0x5b5d('0x10')][_0x5b5d('0x2b')],'-p',_0x3b128b[_0x5b5d('0x10')]['password']];var _0xafcd71=require(_0x5b5d('0x6'))[_0x5b5d('0x19')];python_process=_0xafcd71(_0x5b5d('0x1a'),_0x3c2b53,{'stdio':_0x5b5d('0x31')});python_process[_0x5b5d('0x32')]['on'](_0x5b5d('0x33'),function(_0x301bdb){console[_0x5b5d('0x34')](String(_0x301bdb));_0x2dd7ef=String(_0x301bdb);});python_process[_0x5b5d('0x35')]['on'](_0x5b5d('0x36'),function(_0x3bfcdb){if(_0x2dd7ef)return _0x42bc8b['status'](0x1f4)[_0x5b5d('0xe')](_0x2dd7ef);else return _0x42bc8b[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'serverMessage':_0x5b5d('0x37')});});}catch(_0x4e543a){console[_0x5b5d('0x34')](_0x4e543a);return _0x42bc8b[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x4e543a);}});_0x56807f[_0x5b5d('0x8')]('/api/admin/wirelessConnections',function(_0x5b84dc,_0x24a2c5){if(os[_0x5b5d('0x20')]()==_0x5b5d('0x38')){return _0x24a2c5[_0x5b5d('0xd')](0xc8)['send']();}else{iwlist[_0x5b5d('0x39')](nicInterface,function(_0x2b6c7c,_0x537b2e){if(_0x2b6c7c)return _0x24a2c5[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x3a'));else return _0x24a2c5[_0x5b5d('0xd')](0xc8)['send']({'serverMessage':_0x5b5d('0x3b'),'data':_0x537b2e});});}});_0x56807f['post'](_0x5b5d('0x3c'),function(_0x1b6de2,_0x3ced69){var _0x252de5=undefined;var _0x5b3a28=_0x5b5d('0x3d')+_0x5b5d('0x3e')+_0x5b5d('0x3f');var _0x11f196=_0x5b5d('0x40')+_0x5b5d('0x41')+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x2b')]+'\x22\x0a'+_0x5b5d('0x42')+_0x5b5d('0x43')+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x11')]+'\x22\x0a'+_0x5b5d('0x44')+_0x5b5d('0x45');if(_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x11')]){_0x252de5=shell[_0x5b5d('0x46')](_0x5b5d('0x47')+_0x1b6de2['body']['ssid']+_0x5b5d('0x48')+_0x1b6de2['body']['password']+'\x22',{'silent':!![]})[_0x5b5d('0x35')];}else{_0x252de5='network={\x0a'+_0x5b5d('0x49')+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x2b')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0x39dbba='';if(_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x4a')])_0x39dbba=_0x5b3a28+_0x11f196;else _0x39dbba=_0x5b3a28+_0x252de5;fs['writeFile'](_0x5b5d('0x4b'),_0x39dbba,function(_0x7fc231){if(_0x7fc231)return _0x3ced69[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x7fc231);shell[_0x5b5d('0x46')](_0x5b5d('0x4c')+nicInterface+_0x5b5d('0x4d'),{'silent':!![]});const _0x3ecf49=0x3a98;var _0x27721e=0x12c;var _0x36a596=0x0;var _0x331ff5=setInterval(function(){var _0x1f9ec5=['SCANNING',_0x5b5d('0x4e'),_0x5b5d('0x4f'),_0x5b5d('0x50'),'ASSOCIATING'];wpa_cli[_0x5b5d('0xd')](nicInterface,function(_0x599e5e,_0x38aa97){if(_0x599e5e)return _0x3ced69[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x599e5e);if(_0x38aa97[_0x5b5d('0x51')]==_0x5b5d('0x52')){if(_0x38aa97['ip']){console[_0x5b5d('0x34')](_0x5b5d('0x53')+_0x38aa97['ip']+_0x5b5d('0x54'));clearInterval(_0x331ff5);_0x561a45[_0x5b5d('0x55')][_0x5b5d('0x56')]=_0x38aa97;_0x2022bf[_0x5b5d('0x57')][_0x5b5d('0x58')](_0x5b5d('0x59'),_0x38aa97);return _0x3ced69[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'serverMessage':'Connected\x20to\x20'+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x2b')]+_0x5b5d('0x5a')});}else if(_0x36a596>_0x3ecf49){console[_0x5b5d('0x34')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x331ff5);return _0x3ced69[_0x5b5d('0xd')](0x1f4)['send'](_0x5b5d('0x5b')+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x2b')]);}_0x36a596+=_0x27721e;}else if(_0x1f9ec5['indexOf'](_0x38aa97[_0x5b5d('0x51')])==-0x1){clearInterval(_0x331ff5);_0x2022bf[_0x5b5d('0x57')][_0x5b5d('0x58')](_0x5b5d('0x59'),_0x38aa97);return _0x3ced69['status'](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x5b')+_0x1b6de2[_0x5b5d('0x10')][_0x5b5d('0x2b')]);}});},_0x27721e);});});_0x56807f[_0x5b5d('0x8')](_0x5b5d('0x5c'),function(_0x27252e,_0x5056bf){if(os[_0x5b5d('0x20')]()=='win32'){_0x5056bf[_0x5b5d('0xd')](0x1f4)['send'](_0x5b5d('0x5d'));}else{var _0xa434c6=_0x5b5d('0x3d')+_0x5b5d('0x3e')+_0x5b5d('0x3f');fs[_0x5b5d('0x5e')](_0x5b5d('0x4b'),_0xa434c6,function(_0x40d594){if(_0x40d594)return _0x5056bf['status'](0x1f4)['send'](_0x40d594);shell[_0x5b5d('0x46')](_0x5b5d('0x4c')+nicInterface+_0x5b5d('0x4d'),{'silent':!![]});var _0x446ccc=setInterval(function(){var _0x561521=[];wpa_cli['status'](nicInterface,function(_0x2ba201,_0xa7171){if(_0x2ba201)return _0x5056bf['status'](0x1f4)[_0x5b5d('0xe')](_0x2ba201);_0x561a45['SocketVariables'][_0x5b5d('0x56')]=_0xa7171;_0x2022bf[_0x5b5d('0x57')]['emit'](_0x5b5d('0x59'),_0xa7171);if(_0xa7171[_0x5b5d('0x51')]=='DISCONNECTED'||_0xa7171['wpa_state']==_0x5b5d('0x5f')){clearInterval(_0x446ccc);_0x2022bf[_0x5b5d('0x57')][_0x5b5d('0x58')](_0x5b5d('0x59'),_0xa7171);return _0x5056bf['status'](0xc8)[_0x5b5d('0x17')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x5b5d('0x60')](_0xa7171[_0x5b5d('0x51')])==-0x1){clearInterval(_0x446ccc);_0x2022bf[_0x5b5d('0x57')]['emit'](_0x5b5d('0x59'),_0xa7171);return _0x5056bf[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x61'));}});},0x12c);});}});_0x56807f[_0x5b5d('0x8')](_0x5b5d('0x62'),function(_0x618e68,_0x3a9226){var _0x244ceb=_0x5b5d('0x63');fs[_0x5b5d('0x64')](_0x244ceb,function(_0x3f474e,_0x34ecb9){if(_0x3f474e)return _0x3a9226[_0x5b5d('0xd')](0x1f4)[_0x5b5d('0xe')](_0x3f474e);if(_0x34ecb9[_0x5b5d('0x24')]>0x0){fs[_0x5b5d('0x29')](_0x244ceb+'/'+_0x34ecb9[0x0],'utf8',function(_0x5ebf3b,_0x16d16a){if(_0x5ebf3b)return status(0x1f4)[_0x5b5d('0xe')](_0x5b5d('0x65'));_0x3a9226[_0x5b5d('0x66')](_0x5b5d('0x67'),'attachment;\x20filename='+_0x34ecb9[0x0]);return _0x3a9226[_0x5b5d('0xd')](0xc8)['download'](_0x244ceb+'/'+_0x34ecb9[0x0]);});}else{return _0x3a9226['status'](0xc8)[_0x5b5d('0xe')](_0x5b5d('0x68'));}});});var _0x459562=null;_0x56807f[_0x5b5d('0x2d')]('/api/diagnostics/start',function(_0x322df0,_0x4fac36){if(os['platform']()!=_0x5b5d('0x38')){_0x459562=spawn('sudo',['sh','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py']);_0x459562[_0x5b5d('0x35')]['on'](_0x5b5d('0x33'),function(_0x5d0d23){console[_0x5b5d('0x34')](String(_0x5d0d23));});_0x459562[_0x5b5d('0x32')]['on'](_0x5b5d('0x33'),function(_0xf683d7){console[_0x5b5d('0x34')](String(_0xf683d7));});var _0x2bf711=0x1;var _0x454916=0x3;var _0x13bbc1=setInterval(function(){if(_0x2bf711<=_0x454916){var _0x36a07a=shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x5b5d('0x35')];if(_0x36a07a){clearInterval(_0x13bbc1);_0x561a45[_0x5b5d('0x55')][_0x5b5d('0x69')]={'process':_0x36a07a,'socket':_0x322df0[_0x5b5d('0x10')][_0x5b5d('0x6a')]};_0x2022bf[_0x5b5d('0x57')][_0x5b5d('0x58')](_0x5b5d('0x6b'),_0x561a45[_0x5b5d('0x55')][_0x5b5d('0x69')]);return _0x4fac36[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'serverMessage':_0x5b5d('0x6c')});}else{_0x2bf711++;}}else{clearInterval(_0x13bbc1);return _0x4fac36[_0x5b5d('0xd')](0x1f4)['send'](_0x5b5d('0x6d'));}},0x12c);}else{return _0x4fac36[_0x5b5d('0xd')](0xc8)[_0x5b5d('0x17')]({'serverMessage':_0x5b5d('0x6e')});}});_0x56807f[_0x5b5d('0x8')](_0x5b5d('0x6f'),function(_0x494d19,_0x19e272){if(os['platform']()!=_0x5b5d('0x38')){shell[_0x5b5d('0x46')](_0x5b5d('0x70'),{'silent':!![]});shell['exec'](_0x5b5d('0x71'),{'silent':!![]},function(_0x545891,_0x1771c5,_0x14f932){(function(_0x5f123a){var _0x4e6032=_0x5f123a[_0x5b5d('0x72')]();if(_0x4e6032){return _0x19e272['status'](0x1f4)[_0x5b5d('0xe')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x561a45[_0x5b5d('0x55')][_0x5b5d('0x69')]=null;_0x2022bf['sockets'][_0x5b5d('0x58')](_0x5b5d('0x6b'),_0x561a45[_0x5b5d('0x55')][_0x5b5d('0x69')]);_0x459562=null;return _0x19e272[_0x5b5d('0xd')](0xc8)['json']({'serverMessage':_0x5b5d('0x73')});}}(_0x1771c5[_0x5b5d('0x72')]()));});}else{return _0x19e272[_0x5b5d('0xd')](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});function _0x2c80d2(){return function(_0x5af19f,_0x398c07,_0x573011){if(_0x5af19f[_0x5b5d('0x74')]()){return _0x573011();}else{_0x398c07['status'](0x191)[_0x5b5d('0xe')](_0x5b5d('0x75'));}};}};