var _0x5d20=['sudo','poweroff','/api/admin/restart','Restart\x20Commencing','reboot','/api/admin/wirelessSettings','EOL','platform','win32','readFile','utf8','ssid','wpa_passphrase','SSID','Password','/etc/hostapd/hostapd.conf','Wifi\x20file\x20not\x20found','split','length','join','etc','ssid_set.py','python','stderr','data','stdout','close','Successfully\x20changed\x20wifi\x20settings','log','/api/admin/wirelessConnections','scan','wlan1','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','country=US\x0a\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','network={\x0a','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','AUTHENTICATING','wpa_state','Ip\x20address:\x20','\x20assigned','SocketVariables','fusion_wifi_access','sockets','wifi-connection','\x20successfully','indexOf','emit','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','sudo\x20wpa_cli\x20-i\x20wlan1\x20reconfigure','INACTIVE','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','trim','fusion_diagnostics_running','isAuthenticated','User\x20Unauthenticated','mkdirp','path','shelljs','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','spawn','exports','post','/api/admin/users','findOne','body','username','status','send','Username\x20already\x20taken.','password','generateHash','generateFileSystem','User\x20created!','get','/api/admin/powerOff','json','Shut\x20Down\x20Commencing'];(function(_0x5504bf,_0x3176e3){var _0x15a197=function(_0x371148){while(--_0x371148){_0x5504bf['push'](_0x5504bf['shift']());}};_0x15a197(++_0x3176e3);}(_0x5d20,0x198));var _0x2bbb=function(_0xc9e7e,_0x43d97c){_0xc9e7e=_0xc9e7e-0x0;var _0x496e3b=_0x5d20[_0xc9e7e];return _0x496e3b;};var fs=require('fs');var mkdirp=require(_0x2bbb('0x0'));var os=require('os');var path=require(_0x2bbb('0x1'));var shell=require(_0x2bbb('0x2'));var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require(_0x2bbb('0x3'));var wpa_supplicant=require(_0x2bbb('0x4'));var spawn=require(_0x2bbb('0x5'))[_0x2bbb('0x6')];module[_0x2bbb('0x7')]=function(_0x458732,_0x256b5e,_0x4c1a5b,_0x33923d,_0x7fb095){_0x458732[_0x2bbb('0x8')](_0x2bbb('0x9'),_0x89d58e(),function(_0x470874,_0x41f5b6){_0x256b5e[_0x2bbb('0xa')]({'username':_0x470874[_0x2bbb('0xb')][_0x2bbb('0xc')]},function(_0x37b6f8,_0x511286){if(_0x37b6f8)return _0x41f5b6[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x37b6f8);if(_0x511286){return _0x41f5b6[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x2bbb('0xf'));}else{var _0x21706d=new _0x256b5e(_0x470874[_0x2bbb('0xb')]);_0x21706d[_0x2bbb('0xc')]=_0x470874['body']['username'];_0x21706d[_0x2bbb('0x10')]=_0x21706d[_0x2bbb('0x11')](_0x470874[_0x2bbb('0xb')][_0x2bbb('0x10')]);_0x21706d['filepath']=_0x21706d[_0x2bbb('0x12')](_0x21706d[_0x2bbb('0xc')]);_0x21706d['save'](function(_0x192b3f){if(_0x192b3f)return _0x41f5b6[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x192b3f);return _0x41f5b6['status'](0xc8)['json']({'serverMessage':_0x2bbb('0x13')});});}});});_0x458732[_0x2bbb('0x14')](_0x2bbb('0x15'),function(_0x4e88b2,_0x86ca8){_0x86ca8[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'serverMessage':_0x2bbb('0x17')});var _0x5057e5=require(_0x2bbb('0x5'))[_0x2bbb('0x6')];var _0x581ddb=_0x5057e5(_0x2bbb('0x18'),[_0x2bbb('0x19')]);});_0x458732[_0x2bbb('0x14')](_0x2bbb('0x1a'),function(_0x365aaf,_0x5827c5){_0x5827c5[_0x2bbb('0xd')](0xc8)[_0x2bbb('0xe')](_0x2bbb('0x1b'));var _0x20d23f=require('child_process')[_0x2bbb('0x6')];var _0x428866=_0x20d23f(_0x2bbb('0x18'),[_0x2bbb('0x1c')]);});_0x458732[_0x2bbb('0x14')](_0x2bbb('0x1d'),function(_0x4acfdc,_0x3dce59){var _0x43ea63;var _0x273798=require('os')[_0x2bbb('0x1e')];var _0x2152d2;var _0x3fc4a9;var _0x2934b5={};if(os[_0x2bbb('0x1f')]()==_0x2bbb('0x20')){_0x43ea63='../../etc/hostapd.conf';fs[_0x2bbb('0x21')](_0x43ea63,_0x2bbb('0x22'),function(_0xf9f47,_0x4d5992){if(_0xf9f47)_0x3dce59['status'](0x1f4)[_0x2bbb('0xe')]('Wifi\x20file\x20not\x20found');_0x2152d2=_0x4d5992['split']('\x0a');for(var _0x3454e6=0x0;_0x3454e6<_0x2152d2['length'];_0x3454e6++){_0x3fc4a9=_0x2152d2[_0x3454e6]['split']('=');if(_0x3fc4a9[0x0]==_0x2bbb('0x23'))_0x2934b5['SSID']=_0x3fc4a9[0x1];else if(_0x3fc4a9[0x0]==_0x2bbb('0x24'))_0x2934b5['Password']=_0x3fc4a9[0x1];}_0x3dce59[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'SSID':_0x2934b5[_0x2bbb('0x25')],'Password':_0x2934b5[_0x2bbb('0x26')]});});}else{_0x43ea63=_0x2bbb('0x27');fs[_0x2bbb('0x21')](_0x43ea63,_0x2bbb('0x22'),function(_0x2c6c58,_0x4548c2){if(_0x2c6c58)_0x3dce59[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x2bbb('0x28'));_0x2152d2=_0x4548c2[_0x2bbb('0x29')](_0x273798);for(var _0x1f22e8=0x0;_0x1f22e8<_0x2152d2[_0x2bbb('0x2a')];_0x1f22e8++){_0x3fc4a9=_0x2152d2[_0x1f22e8][_0x2bbb('0x29')]('=');if(_0x3fc4a9[0x0]=='ssid')_0x2934b5[_0x2bbb('0x25')]=_0x3fc4a9[0x1];else if(_0x3fc4a9[0x0]==_0x2bbb('0x24'))_0x2934b5['Password']=_0x3fc4a9[0x1];}_0x3dce59[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'SSID':_0x2934b5[_0x2bbb('0x25')],'Password':_0x2934b5[_0x2bbb('0x26')]});});}});_0x458732[_0x2bbb('0x8')](_0x2bbb('0x1d'),function(_0x3c7106,_0x4f4c0c){try{var _0x20e7d7;var _0x20fbba;var _0x5eb903=path[_0x2bbb('0x2b')]('..','..',_0x2bbb('0x2c'),_0x2bbb('0x2d'));if(_0x3c7106[_0x2bbb('0xb')][_0x2bbb('0x23')]==null&&_0x3c7106['body']['password']==null)_0x20fbba=[_0x2bbb('0x2e'),_0x5eb903,'-d'];else _0x20fbba=[_0x2bbb('0x2e'),_0x5eb903,'-s',_0x3c7106['body'][_0x2bbb('0x23')],'-p',_0x3c7106[_0x2bbb('0xb')][_0x2bbb('0x10')]];var _0x1c77c0=require(_0x2bbb('0x5'))['spawn'];python_process=_0x1c77c0('sudo',_0x20fbba,{'stdio':'pipe'});python_process[_0x2bbb('0x2f')]['on'](_0x2bbb('0x30'),function(_0x3bc234){console['log'](String(_0x3bc234));_0x20e7d7=String(_0x3bc234);});python_process[_0x2bbb('0x31')]['on'](_0x2bbb('0x32'),function(_0x30d604){if(_0x20e7d7)return _0x4f4c0c['status'](0x1f4)['send'](_0x20e7d7);else return _0x4f4c0c[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'serverMessage':_0x2bbb('0x33')});});}catch(_0x1ab849){console[_0x2bbb('0x34')](_0x1ab849);return _0x4f4c0c[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x1ab849);}});_0x458732[_0x2bbb('0x14')](_0x2bbb('0x35'),function(_0x3a35d8,_0x4ae4b7){if(os[_0x2bbb('0x1f')]()=='win32'){return _0x4ae4b7['status'](0xc8)[_0x2bbb('0xe')]();}else{iwlist[_0x2bbb('0x36')](_0x2bbb('0x37'),function(_0x280b2a,_0x50165e){if(_0x280b2a)return _0x4ae4b7[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x2bbb('0x38'));else return _0x4ae4b7[_0x2bbb('0xd')](0xc8)[_0x2bbb('0xe')]({'serverMessage':_0x2bbb('0x39'),'data':_0x50165e});});}});_0x458732[_0x2bbb('0x8')](_0x2bbb('0x35'),function(_0x527e50,_0x4f717c){var _0x2f9627=undefined;var _0x5d6a7e='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x2bbb('0x3a');var _0x2f4b62='network={\x0a'+_0x2bbb('0x3b')+_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x23')]+'\x22\x0a'+_0x2bbb('0x3c')+_0x2bbb('0x3d')+_0x527e50['body'][_0x2bbb('0x10')]+'\x22\x0a'+_0x2bbb('0x3e')+_0x2bbb('0x3f');if(_0x527e50[_0x2bbb('0xb')]['password']){_0x2f9627=shell[_0x2bbb('0x40')](_0x2bbb('0x41')+_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x23')]+_0x2bbb('0x42')+_0x527e50[_0x2bbb('0xb')]['password']+'\x22',{'silent':!![]})['stdout'];}else{_0x2f9627=_0x2bbb('0x43')+'\x20\x20\x20\x20ssid=\x22'+_0x527e50['body']['ssid']+'\x22\x0a'+_0x2bbb('0x44')+'}\x0a';}let _0x5affdc='';if(_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x45')])_0x5affdc=_0x5d6a7e+_0x2f4b62;else _0x5affdc=_0x5d6a7e+_0x2f9627;fs[_0x2bbb('0x46')](_0x2bbb('0x47'),_0x5affdc,function(_0x1358ee){if(_0x1358ee)return _0x4f717c[_0x2bbb('0xd')](0x1f4)['send'](_0x1358ee);shell[_0x2bbb('0x40')]('sudo\x20wpa_cli\x20-i\x20wlan1\x20reconfigure',{'silent':!![]});const _0x37c9bf=0x3a98;var _0x1e8136=0x12c;var _0x3fc55b=0x0;var _0x4061a6=setInterval(function(){var _0x3fd058=['SCANNING','4WAY_HANDSHAKE',_0x2bbb('0x48'),'DISCONNECTED','ASSOCIATING'];wpa_cli['status']('wlan1',function(_0x118d22,_0x30eed6){if(_0x118d22)return _0x4f717c[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x118d22);if(_0x30eed6[_0x2bbb('0x49')]=='COMPLETED'){if(_0x30eed6['ip']){console['log'](_0x2bbb('0x4a')+_0x30eed6['ip']+_0x2bbb('0x4b'));clearInterval(_0x4061a6);_0x7fb095[_0x2bbb('0x4c')][_0x2bbb('0x4d')]=_0x30eed6;_0x33923d[_0x2bbb('0x4e')]['emit'](_0x2bbb('0x4f'),_0x30eed6);return _0x4f717c['status'](0xc8)['json']({'serverMessage':'Connected\x20to\x20'+_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x23')]+_0x2bbb('0x50')});}else if(_0x3fc55b>_0x37c9bf){console[_0x2bbb('0x34')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x4061a6);return _0x4f717c['status'](0x1f4)['send']('Error\x20connecting\x20to\x20'+_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x23')]);}_0x3fc55b+=_0x1e8136;}else if(_0x3fd058[_0x2bbb('0x51')](_0x30eed6['wpa_state'])==-0x1){clearInterval(_0x4061a6);_0x33923d[_0x2bbb('0x4e')][_0x2bbb('0x52')](_0x2bbb('0x4f'),_0x30eed6);return _0x4f717c['status'](0x1f4)['send']('Error\x20connecting\x20to\x20'+_0x527e50[_0x2bbb('0xb')][_0x2bbb('0x23')]);}});},_0x1e8136);});});_0x458732[_0x2bbb('0x14')](_0x2bbb('0x53'),function(_0x2bdab8,_0x5dcf09){if(os[_0x2bbb('0x1f')]()==_0x2bbb('0x20')){_0x5dcf09['status'](0x1f4)[_0x2bbb('0xe')](_0x2bbb('0x54'));}else{var _0x206060='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+'update_config=1\x0a'+_0x2bbb('0x3a');fs[_0x2bbb('0x46')](_0x2bbb('0x47'),_0x206060,function(_0x10bde3){if(_0x10bde3)return _0x5dcf09[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x10bde3);shell[_0x2bbb('0x40')](_0x2bbb('0x55'),{'silent':!![]});var _0x494391=setInterval(function(){var _0x5799b5=[];wpa_cli[_0x2bbb('0xd')](_0x2bbb('0x37'),function(_0x29ecc9,_0xb29fbf){if(_0x29ecc9)return _0x5dcf09[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x29ecc9);_0x7fb095[_0x2bbb('0x4c')][_0x2bbb('0x4d')]=_0xb29fbf;_0x33923d['sockets'][_0x2bbb('0x52')](_0x2bbb('0x4f'),_0xb29fbf);if(_0xb29fbf[_0x2bbb('0x49')]=='DISCONNECTED'||_0xb29fbf[_0x2bbb('0x49')]==_0x2bbb('0x56')){clearInterval(_0x494391);_0x33923d[_0x2bbb('0x4e')]['emit'](_0x2bbb('0x4f'),_0xb29fbf);return _0x5dcf09['status'](0xc8)[_0x2bbb('0x16')]({'serverMessage':_0x2bbb('0x57')});}else if(connectingStatuses['indexOf'](_0xb29fbf['wpa_state'])==-0x1){clearInterval(_0x494391);_0x33923d[_0x2bbb('0x4e')][_0x2bbb('0x52')](_0x2bbb('0x4f'),_0xb29fbf);return _0x5dcf09['status'](0x1f4)[_0x2bbb('0xe')](_0x2bbb('0x58'));}});},0x12c);});}});_0x458732['get'](_0x2bbb('0x59'),function(_0x13dbe5,_0x3264d8){var _0x44ccbc=_0x2bbb('0x5a');fs[_0x2bbb('0x5b')](_0x44ccbc,function(_0x3bcaa3,_0x47fcee){if(_0x3bcaa3)return _0x3264d8[_0x2bbb('0xd')](0x1f4)[_0x2bbb('0xe')](_0x3bcaa3);if(_0x47fcee[_0x2bbb('0x2a')]>0x0){fs[_0x2bbb('0x21')](_0x44ccbc+'/'+_0x47fcee[0x0],'utf8',function(_0x328488,_0x25acd6){if(_0x328488)return status(0x1f4)[_0x2bbb('0xe')](_0x2bbb('0x5c'));_0x3264d8['setHeader'](_0x2bbb('0x5d'),_0x2bbb('0x5e')+_0x47fcee[0x0]);return _0x3264d8[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x5f')](_0x44ccbc+'/'+_0x47fcee[0x0]);});}else{return _0x3264d8[_0x2bbb('0xd')](0xc8)[_0x2bbb('0xe')](_0x2bbb('0x60'));}});});var _0x340698=null;_0x458732[_0x2bbb('0x8')](_0x2bbb('0x61'),function(_0x558646,_0x3293c2){if(os[_0x2bbb('0x1f')]()!='win32'){_0x340698=spawn(_0x2bbb('0x18'),['sh','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py']);_0x340698[_0x2bbb('0x31')]['on']('data',function(_0x5df09f){console[_0x2bbb('0x34')](String(_0x5df09f));});_0x340698[_0x2bbb('0x2f')]['on'](_0x2bbb('0x30'),function(_0x458ea1){console[_0x2bbb('0x34')](String(_0x458ea1));});var _0x28ac89=0x1;var _0x11f739=0x3;var _0x438b8f=setInterval(function(){if(_0x28ac89<=_0x11f739){var _0x4ef35c=shell['exec'](_0x2bbb('0x62'),{'silent':!![]})[_0x2bbb('0x31')];if(_0x4ef35c){clearInterval(_0x438b8f);_0x7fb095[_0x2bbb('0x4c')]['fusion_diagnostics_running']={'process':_0x4ef35c,'socket':_0x558646[_0x2bbb('0xb')][_0x2bbb('0x63')]};_0x33923d[_0x2bbb('0x4e')]['emit'](_0x2bbb('0x64'),_0x7fb095[_0x2bbb('0x4c')]['fusion_diagnostics_running']);return _0x3293c2[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x28ac89++;}}else{clearInterval(_0x438b8f);return _0x3293c2['status'](0x1f4)['send'](_0x2bbb('0x65'));}},0x12c);}else{return _0x3293c2['status'](0xc8)[_0x2bbb('0x16')]({'serverMessage':_0x2bbb('0x66')});}});_0x458732[_0x2bbb('0x14')]('/api/diagnostics/stop',function(_0x4094f1,_0x7f897c){if(os[_0x2bbb('0x1f')]()!=_0x2bbb('0x20')){shell[_0x2bbb('0x40')](_0x2bbb('0x67'),{'silent':!![]});shell[_0x2bbb('0x40')](_0x2bbb('0x62'),{'silent':!![]},function(_0x446f48,_0x117418,_0x45aed1){(function(_0x1f8df4){var _0x4c09cc=_0x1f8df4[_0x2bbb('0x68')]();if(_0x4c09cc){return _0x7f897c['status'](0x1f4)[_0x2bbb('0xe')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{_0x7fb095['SocketVariables'][_0x2bbb('0x69')]=null;_0x33923d[_0x2bbb('0x4e')]['emit'](_0x2bbb('0x64'),_0x7fb095[_0x2bbb('0x4c')][_0x2bbb('0x69')]);_0x340698=null;return _0x7f897c[_0x2bbb('0xd')](0xc8)[_0x2bbb('0x16')]({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x117418[_0x2bbb('0x68')]()));});}else{return _0x7f897c[_0x2bbb('0xd')](0xc8)['json']({'serverMessage':_0x2bbb('0x66')});}});function _0x89d58e(){return function(_0x1fa31a,_0x3c39b0,_0x4dde55){if(_0x1fa31a[_0x2bbb('0x6a')]()){return _0x4dde55();}else{_0x3c39b0[_0x2bbb('0xd')](0x191)[_0x2bbb('0xe')](_0x2bbb('0x6b'));}};}};