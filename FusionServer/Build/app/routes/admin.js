var _0x550c=['child_process','spawn','config','get','Wifi_NIC','exports','post','/api/admin/users','findOne','username','status','body','password','generateFileSystem','save','send','json','User\x20created!','/api/admin/powerOff','poweroff','/api/admin/restart','Restart\x20Commencing','sudo','reboot','/api/admin/wirelessSettings','platform','../../etc/config-wap/hostapd.conf__npp.sh','readFile','utf8','length','split','ssid','wpa_passphrase','SSID','Password','/etc/hostapd/hostapd.conf','Wifi\x20file\x20not\x20found','Not\x20configured..','join','etc','ssid_set.py','python','pipe','stderr','log','close','Successfully\x20changed\x20wifi\x20settings','scan','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x22\x20\x22','stdout','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','ASSOCIATING','wpa_state','COMPLETED','\x20assigned','SocketVariables','wifi-connection','Connected\x20to\x20','\x20successfully','Error\x20connecting\x20to\x20','sockets','/api/admin/wirelessConnections/disconnect','Disconnect\x20not\x20available\x20on\x20Windows','fusion_wifi_access','emit','DISCONNECTED','INACTIVE','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','setHeader','Content-disposition','attachment;\x20filename=','No\x20crash\x20files\x20found','win32','../../diagnostics/runRemi.sh','../../diagnostics/diagnosticGUI.py','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','diagnostics_running','fusion_diagnostics_running','Error\x20starting\x20diagnostic\x20tool','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','/api/diagnostics/stop','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','Diagnostic\x20tool\x20stopped\x20successfully','/api/autonomous','message','findOneAndUpdate','Updated\x20successfully','./app/filesystem/','isAuthenticated','User\x20Unauthenticated','fs-extra','mkdirp','path','shelljs','wireless-tools/wpa_cli','wireless-tools/wpa_supplicant'];(function(_0xe94a57,_0x2d171c){var _0x4b90fe=function(_0x4d5d46){while(--_0x4d5d46){_0xe94a57['push'](_0xe94a57['shift']());}};_0x4b90fe(++_0x2d171c);}(_0x550c,0x1e6));var _0x56ae=function(_0x464792,_0xed7e4a){_0x464792=_0x464792-0x0;var _0x1bb3d5=_0x550c[_0x464792];return _0x1bb3d5;};var fs=require(_0x56ae('0x0'));var mkdirp=require(_0x56ae('0x1'));var os=require('os');var path=require(_0x56ae('0x2'));var shell=require(_0x56ae('0x3'));var wpa_cli=require(_0x56ae('0x4'));var iwlist=require('wireless-tools/iwlist');var wpa_supplicant=require(_0x56ae('0x5'));var spawn=require(_0x56ae('0x6'))[_0x56ae('0x7')];const config=require(_0x56ae('0x8'));const autonomous=require('./../models/autonomous');let nicInterface=config[_0x56ae('0x9')](_0x56ae('0xa'));module[_0x56ae('0xb')]=function(_0x29929c,_0x5dd881,_0x550fbc,_0x18d5c9,_0x4ce2f1){_0x29929c[_0x56ae('0xc')](_0x56ae('0xd'),_0x5b7940(),function(_0x2ab90b,_0x991246){_0x5dd881[_0x56ae('0xe')]({'username':_0x2ab90b['body'][_0x56ae('0xf')]},function(_0x441e3a,_0x2cc193){if(_0x441e3a)return _0x991246['status'](0x1f4)['send'](_0x441e3a);if(_0x2cc193){return _0x991246[_0x56ae('0x10')](0x1f4)['send']('Username\x20already\x20taken.');}else{var _0x39753a=new _0x5dd881(_0x2ab90b[_0x56ae('0x11')]);_0x39753a[_0x56ae('0xf')]=_0x2ab90b[_0x56ae('0x11')][_0x56ae('0xf')];_0x39753a[_0x56ae('0x12')]=_0x39753a['generateHash'](_0x2ab90b['body']['password']);_0x39753a['filepath']=_0x39753a[_0x56ae('0x13')](_0x39753a[_0x56ae('0xf')]);_0x39753a[_0x56ae('0x14')](function(_0x26d672){if(_0x26d672)return _0x991246[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x26d672);return _0x991246['status'](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x17')});});}});});_0x29929c[_0x56ae('0x9')](_0x56ae('0x18'),function(_0x44dcfd,_0x4d5611){_0x4d5611['status'](0xc8)[_0x56ae('0x16')]({'serverMessage':'Shut\x20Down\x20Commencing'});var _0x1985b6=require('child_process')[_0x56ae('0x7')];var _0x12066b=_0x1985b6('sudo',[_0x56ae('0x19')]);});_0x29929c['get'](_0x56ae('0x1a'),function(_0x478723,_0x106033){_0x106033[_0x56ae('0x10')](0xc8)[_0x56ae('0x15')](_0x56ae('0x1b'));var _0x530eb7=require(_0x56ae('0x6'))[_0x56ae('0x7')];var _0x112016=_0x530eb7(_0x56ae('0x1c'),[_0x56ae('0x1d')]);});_0x29929c['get'](_0x56ae('0x1e'),function(_0x155cce,_0x53682f){var _0x20f109;var _0x5a09ef=require('os')['EOL'];var _0x3a02e1;var _0x432e56;var _0x38e7c4={};if(os[_0x56ae('0x1f')]()=='win32'){_0x20f109=_0x56ae('0x20');fs[_0x56ae('0x21')](_0x20f109,_0x56ae('0x22'),function(_0x4d00e6,_0x370d86){if(_0x4d00e6)_0x53682f[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')]('Wifi\x20file\x20not\x20found');_0x3a02e1=_0x370d86['split']('\x0a');for(var _0x197ec0=0x0;_0x197ec0<_0x3a02e1[_0x56ae('0x23')];_0x197ec0++){_0x432e56=_0x3a02e1[_0x197ec0][_0x56ae('0x24')]('=');if(_0x432e56[0x0]==_0x56ae('0x25'))_0x38e7c4['SSID']=_0x432e56[0x1];else if(_0x432e56[0x0]==_0x56ae('0x26'))_0x38e7c4['Password']=_0x432e56[0x1];}_0x53682f[_0x56ae('0x10')](0xc8)['json']({'SSID':_0x38e7c4[_0x56ae('0x27')],'Password':_0x38e7c4[_0x56ae('0x28')]});});}else{_0x20f109=_0x56ae('0x29');fs[_0x56ae('0x21')](_0x20f109,_0x56ae('0x22'),function(_0x1538a4,_0x11c3b6){if(_0x1538a4)_0x53682f[_0x56ae('0x10')](0x1f4)['send'](_0x56ae('0x2a'));_0x3a02e1=_0x11c3b6[_0x56ae('0x24')](_0x5a09ef);for(var _0x2b1f27=0x0;_0x2b1f27<_0x3a02e1[_0x56ae('0x23')];_0x2b1f27++){_0x432e56=_0x3a02e1[_0x2b1f27]['split']('=');if(_0x432e56[0x0]==_0x56ae('0x25'))_0x38e7c4[_0x56ae('0x27')]=_0x432e56[0x1];else if(_0x432e56[0x0]==_0x56ae('0x26'))_0x38e7c4[_0x56ae('0x28')]=_0x432e56[0x1];}if(!_0x38e7c4[_0x56ae('0x27')]){_0x38e7c4[_0x56ae('0x27')]=_0x56ae('0x2b');_0x38e7c4[_0x56ae('0x28')]='';}_0x53682f[_0x56ae('0x10')](0xc8)['json']({'SSID':_0x38e7c4[_0x56ae('0x27')],'Password':_0x38e7c4['Password']});});}});_0x29929c[_0x56ae('0xc')](_0x56ae('0x1e'),function(_0x1122db,_0x33bdb7){try{var _0x25ce3a;var _0x5180f1;var _0x66c1d2=path[_0x56ae('0x2c')]('..','..',_0x56ae('0x2d'),_0x56ae('0x2e'));if(_0x1122db[_0x56ae('0x11')][_0x56ae('0x25')]==null&&_0x1122db[_0x56ae('0x11')][_0x56ae('0x12')]==null)_0x5180f1=['python',_0x66c1d2,'-d'];else _0x5180f1=[_0x56ae('0x2f'),_0x66c1d2,'-s',_0x1122db['body'][_0x56ae('0x25')],'-p',_0x1122db[_0x56ae('0x11')][_0x56ae('0x12')]];var _0x3f3d41=require('child_process')[_0x56ae('0x7')];python_process=_0x3f3d41(_0x56ae('0x1c'),_0x5180f1,{'stdio':_0x56ae('0x30')});python_process[_0x56ae('0x31')]['on']('data',function(_0x54135e){console[_0x56ae('0x32')](String(_0x54135e));_0x25ce3a=String(_0x54135e);});python_process['stdout']['on'](_0x56ae('0x33'),function(_0x3d9717){if(_0x25ce3a)return _0x33bdb7[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x25ce3a);else return _0x33bdb7['status'](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x34')});});}catch(_0x3cae){console['log'](_0x3cae);return _0x33bdb7[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x3cae);}});_0x29929c[_0x56ae('0x9')]('/api/admin/wirelessConnections',function(_0x546ef8,_0x11b61d){if(os[_0x56ae('0x1f')]()=='win32'){return _0x11b61d[_0x56ae('0x10')](0xc8)[_0x56ae('0x15')]();}else{iwlist[_0x56ae('0x35')](nicInterface,function(_0x148f55,_0x4b38d9){if(_0x148f55)return _0x11b61d['status'](0x1f4)[_0x56ae('0x15')](_0x56ae('0x36'));else return _0x11b61d['status'](0xc8)[_0x56ae('0x15')]({'serverMessage':_0x56ae('0x37'),'data':_0x4b38d9});});}});_0x29929c[_0x56ae('0xc')]('/api/admin/wirelessConnections',function(_0x316c8f,_0x2cfea9){var _0x274e8e=undefined;var _0x43dd5b=_0x56ae('0x38')+_0x56ae('0x39')+_0x56ae('0x3a');var _0x45a9b8=_0x56ae('0x3b')+_0x56ae('0x3c')+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x25')]+'\x22\x0a'+_0x56ae('0x3d')+_0x56ae('0x3e')+_0x316c8f[_0x56ae('0x11')]['password']+'\x22\x0a'+'\x09key_mgmt=WPA-PSK\x0a'+_0x56ae('0x3f');if(_0x316c8f[_0x56ae('0x11')][_0x56ae('0x12')]){_0x274e8e=shell[_0x56ae('0x40')](_0x56ae('0x41')+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x25')]+_0x56ae('0x42')+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x12')]+'\x22',{'silent':!![]})[_0x56ae('0x43')];}else{_0x274e8e=_0x56ae('0x3b')+'\x20\x20\x20\x20ssid=\x22'+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x25')]+'\x22\x0a'+_0x56ae('0x44')+'}\x0a';}let _0xfbd5ad='';if(_0x316c8f[_0x56ae('0x11')][_0x56ae('0x45')])_0xfbd5ad=_0x43dd5b+_0x45a9b8;else _0xfbd5ad=_0x43dd5b+_0x274e8e;fs[_0x56ae('0x46')](_0x56ae('0x47'),_0xfbd5ad,function(_0x59afe8){if(_0x59afe8)return _0x2cfea9[_0x56ae('0x10')](0x1f4)['send'](_0x59afe8);shell[_0x56ae('0x40')](_0x56ae('0x48')+nicInterface+_0x56ae('0x49'),{'silent':!![]});const _0x562fb4=0x3a98;var _0x14bec2=0x12c;var _0x7f6eb1=0x0;var _0x4774f4=setInterval(function(){var _0x34aa5a=[_0x56ae('0x4a'),_0x56ae('0x4b'),_0x56ae('0x4c'),'DISCONNECTED',_0x56ae('0x4d')];wpa_cli[_0x56ae('0x10')](nicInterface,function(_0x1b5e80,_0x16f976){if(_0x1b5e80)return _0x2cfea9[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x1b5e80);if(_0x16f976[_0x56ae('0x4e')]==_0x56ae('0x4f')){if(_0x16f976['ip']){console[_0x56ae('0x32')]('Ip\x20address:\x20'+_0x16f976['ip']+_0x56ae('0x50'));clearInterval(_0x4774f4);_0x4ce2f1[_0x56ae('0x51')]['fusion_wifi_access']=_0x16f976;_0x18d5c9['sockets']['emit'](_0x56ae('0x52'),_0x16f976);return _0x2cfea9[_0x56ae('0x10')](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x53')+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x25')]+_0x56ae('0x54')});}else if(_0x7f6eb1>_0x562fb4){console[_0x56ae('0x32')]('Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.');clearInterval(_0x4774f4);return _0x2cfea9['status'](0x1f4)['send'](_0x56ae('0x55')+_0x316c8f[_0x56ae('0x11')][_0x56ae('0x25')]);}_0x7f6eb1+=_0x14bec2;}else if(_0x34aa5a['indexOf'](_0x16f976[_0x56ae('0x4e')])==-0x1){clearInterval(_0x4774f4);_0x18d5c9[_0x56ae('0x56')]['emit']('wifi-connection',_0x16f976);return _0x2cfea9[_0x56ae('0x10')](0x1f4)['send'](_0x56ae('0x55')+_0x316c8f['body'][_0x56ae('0x25')]);}});},_0x14bec2);});});_0x29929c[_0x56ae('0x9')](_0x56ae('0x57'),function(_0x53613a,_0x2f82da){if(os[_0x56ae('0x1f')]()=='win32'){_0x2f82da['status'](0x1f4)[_0x56ae('0x15')](_0x56ae('0x58'));}else{var _0x49c095=_0x56ae('0x38')+'update_config=1\x0a'+_0x56ae('0x3a');fs['writeFile'](_0x56ae('0x47'),_0x49c095,function(_0x4a6deb){if(_0x4a6deb)return _0x2f82da['status'](0x1f4)['send'](_0x4a6deb);shell[_0x56ae('0x40')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x56ae('0x49'),{'silent':!![]});var _0x65432=setInterval(function(){var _0x3cfd00=[];wpa_cli[_0x56ae('0x10')](nicInterface,function(_0x232830,_0x272738){if(_0x232830)return _0x2f82da[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x232830);_0x4ce2f1['SocketVariables'][_0x56ae('0x59')]=_0x272738;_0x18d5c9[_0x56ae('0x56')][_0x56ae('0x5a')](_0x56ae('0x52'),_0x272738);if(_0x272738[_0x56ae('0x4e')]==_0x56ae('0x5b')||_0x272738['wpa_state']==_0x56ae('0x5c')){clearInterval(_0x65432);_0x18d5c9[_0x56ae('0x56')]['emit'](_0x56ae('0x52'),_0x272738);return _0x2f82da['status'](0xc8)[_0x56ae('0x16')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses['indexOf'](_0x272738['wpa_state'])==-0x1){clearInterval(_0x65432);_0x18d5c9[_0x56ae('0x56')]['emit'](_0x56ae('0x52'),_0x272738);return _0x2f82da[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x56ae('0x5d'));}});},0x12c);});}});_0x29929c[_0x56ae('0x9')](_0x56ae('0x5e'),function(_0x49eed0,_0x1627a7){var _0x5854cc=_0x56ae('0x5f');fs[_0x56ae('0x60')](_0x5854cc,function(_0x51aaf7,_0x5adf8f){if(_0x51aaf7)return _0x1627a7[_0x56ae('0x10')](0x1f4)[_0x56ae('0x15')](_0x51aaf7);if(_0x5adf8f[_0x56ae('0x23')]>0x0){fs[_0x56ae('0x21')](_0x5854cc+'/'+_0x5adf8f[0x0],'utf8',function(_0x1d0dc8,_0xe05a5a){if(_0x1d0dc8)return status(0x1f4)['send'](_0x56ae('0x61'));_0x1627a7[_0x56ae('0x62')](_0x56ae('0x63'),_0x56ae('0x64')+_0x5adf8f[0x0]);return _0x1627a7[_0x56ae('0x10')](0xc8)['download'](_0x5854cc+'/'+_0x5adf8f[0x0]);});}else{return _0x1627a7[_0x56ae('0x10')](0xc8)[_0x56ae('0x15')](_0x56ae('0x65'));}});});var _0x47bb43=null;_0x29929c[_0x56ae('0xc')]('/api/diagnostics/start',function(_0x5211e3,_0x242745){if(os[_0x56ae('0x1f')]()!=_0x56ae('0x66')){_0x47bb43=spawn(_0x56ae('0x1c'),['sh',_0x56ae('0x67'),_0x56ae('0x68')]);_0x47bb43[_0x56ae('0x43')]['on'](_0x56ae('0x69'),function(_0x2d7205){console[_0x56ae('0x32')](String(_0x2d7205));});_0x47bb43[_0x56ae('0x31')]['on'](_0x56ae('0x69'),function(_0x2bbb86){console[_0x56ae('0x32')](String(_0x2bbb86));});var _0x320898=0x1;var _0x412a72=0x3;var _0x2a28c0=setInterval(function(){if(_0x320898<=_0x412a72){var _0x4257c9=shell['exec'](_0x56ae('0x6a'),{'silent':!![]})[_0x56ae('0x43')];if(_0x4257c9){clearInterval(_0x2a28c0);_0x4ce2f1[_0x56ae('0x51')]['fusion_diagnostics_running']={'process':_0x4257c9,'socket':_0x5211e3[_0x56ae('0x11')][_0x56ae('0x6b')]};_0x18d5c9['sockets'][_0x56ae('0x5a')](_0x56ae('0x6c'),_0x4ce2f1[_0x56ae('0x51')][_0x56ae('0x6d')]);return _0x242745[_0x56ae('0x10')](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20started\x20successfully'});}else{_0x320898++;}}else{clearInterval(_0x2a28c0);return _0x242745['status'](0x1f4)[_0x56ae('0x15')](_0x56ae('0x6e'));}},0x12c);}else{return _0x242745[_0x56ae('0x10')](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x6f')});}});_0x29929c[_0x56ae('0x9')](_0x56ae('0x70'),function(_0x1a0677,_0x5512d1){if(os[_0x56ae('0x1f')]()!=_0x56ae('0x66')){shell[_0x56ae('0x40')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x56ae('0x40')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]},function(_0x4437ff,_0x44351d,_0x4c46c1){(function(_0x2ed01e){var _0x75912a=_0x2ed01e[_0x56ae('0x71')]();if(_0x75912a){return _0x5512d1[_0x56ae('0x10')](0x1f4)['send'](_0x56ae('0x72'));}else{_0x4ce2f1[_0x56ae('0x51')][_0x56ae('0x6d')]=null;_0x18d5c9[_0x56ae('0x56')]['emit'](_0x56ae('0x6c'),_0x4ce2f1[_0x56ae('0x51')][_0x56ae('0x6d')]);_0x47bb43=null;return _0x5512d1[_0x56ae('0x10')](0xc8)['json']({'serverMessage':_0x56ae('0x73')});}}(_0x44351d[_0x56ae('0x71')]()));});}else{return _0x5512d1[_0x56ae('0x10')](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x6f')});}});_0x29929c[_0x56ae('0x9')](_0x56ae('0x74'),async function(_0x3df0e3,_0x1a7b03){try{const _0x336dc3=await autonomous[_0x56ae('0xe')]()[_0x56ae('0x40')]();return _0x1a7b03[_0x56ae('0x16')](_0x336dc3);}catch(_0xe0749e){return _0x1a7b03['status'](0x1f4)[_0x56ae('0x15')](error[_0x56ae('0x75')]);}});_0x29929c[_0x56ae('0xc')]('/api/autonomous',async function(_0x3736e0,_0x33dda0){try{const _0x8cea96=await autonomous[_0x56ae('0x76')]({},_0x3736e0['body']);return _0x33dda0['status'](0xc8)[_0x56ae('0x16')]({'serverMessage':_0x56ae('0x77')});}catch(_0x4c54fa){return _0x33dda0[_0x56ae('0x10')](0x1f4)['send'](_0x4c54fa[_0x56ae('0x75')]);}});_0x29929c[_0x56ae('0xc')]('/api/autonomousPrograms',async function(_0x28a942,_0x41cf12){try{const _0x2d2286=_0x28a942[_0x56ae('0x11')][_0x56ae('0xf')];const _0x1f42a0=_0x28a942[_0x56ae('0x11')]['type'];const _0x2973d3=await fs[_0x56ae('0x60')](_0x56ae('0x78')+_0x2d2286+'/'+_0x1f42a0);return _0x41cf12[_0x56ae('0x10')](0xc8)['json']({'files':_0x2973d3});}catch(_0xf51744){return _0x41cf12[_0x56ae('0x10')](0x1f4)['send'](_0xf51744[_0x56ae('0x75')]);}});function _0x5b7940(){return function(_0x163710,_0x2bb25a,_0x3003eb){if(_0x163710[_0x56ae('0x79')]()){return _0x3003eb();}else{_0x2bb25a['status'](0x191)['send'](_0x56ae('0x7a'));}};}};