var _0x3926=['EOL','platform','win32','readFile','Wifi\x20file\x20not\x20found','split','length','SSID','wpa_passphrase','Password','/etc/hostapd/hostapd.conf','utf8','Not\x20configured..','join','etc','ssid','python','pipe','stderr','stdout','close','log','Wireless\x20interface\x20not\x20found','Retreived\x20wireless\x20connections','/api/admin/wirelessConnections','update_config=1\x0a','country=US\x0a\x0a','network={\x0a','\x09ssid=\x22','\x09scan_ssid=1\x0a','\x09psk=\x22','\x09key_mgmt=WPA-PSK\x0a','}\x0a\x0a','exec','wpa_passphrase\x20\x22','\x20\x20\x20\x20ssid=\x22','\x20\x20\x20\x20key_mgmt=NONE\x0a','hiddenNetwork','writeFile','/etc/wpa_supplicant/wpa_supplicant.conf','sudo\x20wpa_cli\x20-i\x20','\x20reconfigure','SCANNING','4WAY_HANDSHAKE','AUTHENTICATING','DISCONNECTED','ASSOCIATING','wpa_state','Ip\x20address:\x20','\x20assigned','fusion_wifi_access','sockets','emit','wifi-connection','Connected\x20to\x20','\x20successfully','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','indexOf','Error\x20connecting\x20to\x20','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','SocketVariables','Disconnected\x20successfully','Error\x20disconnecting','/api/admin/crashReport','.crash','readdir','Error\x20reading\x20crash\x20file','Content-disposition','attachment;\x20filename=','download','No\x20crash\x20files\x20found','/api/diagnostics/start','../../diagnostics/runRemi.sh','data','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','socketId','fusion_diagnostics_running','Diagnostic\x20tool\x20started\x20successfully','Error\x20starting\x20diagnostic\x20tool','trim','Unable\x20to\x20stop\x20diagnostic\x20tool','diagnostics_running','Diagnostic\x20tool\x20stopped\x20successfully','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','isAuthenticated','User\x20Unauthenticated','path','wireless-tools/wpa_cli','wireless-tools/iwlist','wireless-tools/wpa_supplicant','child_process','spawn','get','Wifi_NIC','exports','post','/api/admin/users','findOne','username','status','send','Username\x20already\x20taken.','body','filepath','generateFileSystem','json','User\x20created!','/api/admin/powerOff','Shut\x20Down\x20Commencing','sudo','/api/admin/restart','/api/admin/wirelessSettings'];(function(_0x539178,_0x306b54){var _0x1a1eb3=function(_0x201378){while(--_0x201378){_0x539178['push'](_0x539178['shift']());}};_0x1a1eb3(++_0x306b54);}(_0x3926,0x136));var _0x2a3a=function(_0x110757,_0x5d093d){_0x110757=_0x110757-0x0;var _0x4b67dc=_0x3926[_0x110757];return _0x4b67dc;};var fs=require('fs');var mkdirp=require('mkdirp');var os=require('os');var path=require(_0x2a3a('0x0'));var shell=require('shelljs');var wpa_cli=require(_0x2a3a('0x1'));var iwlist=require(_0x2a3a('0x2'));var wpa_supplicant=require(_0x2a3a('0x3'));var spawn=require(_0x2a3a('0x4'))[_0x2a3a('0x5')];const config=require('config');let nicInterface=config[_0x2a3a('0x6')](_0x2a3a('0x7'));module[_0x2a3a('0x8')]=function(_0x299007,_0x4fcfc4,_0x1e4b58,_0x57c278,_0x3ecf7e){_0x299007[_0x2a3a('0x9')](_0x2a3a('0xa'),_0x326861(),function(_0x49a540,_0x762ce4){_0x4fcfc4[_0x2a3a('0xb')]({'username':_0x49a540['body'][_0x2a3a('0xc')]},function(_0x130959,_0x4e3b94){if(_0x130959)return _0x762ce4[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x130959);if(_0x4e3b94){return _0x762ce4['status'](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0xf'));}else{var _0x55078d=new _0x4fcfc4(_0x49a540[_0x2a3a('0x10')]);_0x55078d[_0x2a3a('0xc')]=_0x49a540['body']['username'];_0x55078d['password']=_0x55078d['generateHash'](_0x49a540[_0x2a3a('0x10')]['password']);_0x55078d[_0x2a3a('0x11')]=_0x55078d[_0x2a3a('0x12')](_0x55078d[_0x2a3a('0xc')]);_0x55078d['save'](function(_0x2e325f){if(_0x2e325f)return _0x762ce4['status'](0x1f4)[_0x2a3a('0xe')](_0x2e325f);return _0x762ce4[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'serverMessage':_0x2a3a('0x14')});});}});});_0x299007[_0x2a3a('0x6')](_0x2a3a('0x15'),function(_0x1fa431,_0x1be8e2){_0x1be8e2[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'serverMessage':_0x2a3a('0x16')});var _0x6baf37=require('child_process')[_0x2a3a('0x5')];var _0x56179b=_0x6baf37(_0x2a3a('0x17'),['poweroff']);});_0x299007[_0x2a3a('0x6')](_0x2a3a('0x18'),function(_0x394b27,_0x4bfb9e){_0x4bfb9e['status'](0xc8)['send']('Restart\x20Commencing');var _0x56a926=require(_0x2a3a('0x4'))[_0x2a3a('0x5')];var _0x1df96d=_0x56a926('sudo',['reboot']);});_0x299007[_0x2a3a('0x6')](_0x2a3a('0x19'),function(_0x68761a,_0x4a9d96){var _0x15e635;var _0x1c0189=require('os')[_0x2a3a('0x1a')];var _0x988c0c;var _0x3c6226;var _0x130e1b={};if(os[_0x2a3a('0x1b')]()==_0x2a3a('0x1c')){_0x15e635='../../etc/config-wap/hostapd.conf__npp.sh';fs[_0x2a3a('0x1d')](_0x15e635,'utf8',function(_0x732946,_0x45548d){if(_0x732946)_0x4a9d96[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x1e'));_0x988c0c=_0x45548d[_0x2a3a('0x1f')]('\x0a');for(var _0x40e945=0x0;_0x40e945<_0x988c0c[_0x2a3a('0x20')];_0x40e945++){_0x3c6226=_0x988c0c[_0x40e945][_0x2a3a('0x1f')]('=');if(_0x3c6226[0x0]=='ssid')_0x130e1b[_0x2a3a('0x21')]=_0x3c6226[0x1];else if(_0x3c6226[0x0]==_0x2a3a('0x22'))_0x130e1b[_0x2a3a('0x23')]=_0x3c6226[0x1];}_0x4a9d96[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'SSID':_0x130e1b[_0x2a3a('0x21')],'Password':_0x130e1b[_0x2a3a('0x23')]});});}else{_0x15e635=_0x2a3a('0x24');fs[_0x2a3a('0x1d')](_0x15e635,_0x2a3a('0x25'),function(_0x4c70f4,_0x49531a){if(_0x4c70f4)_0x4a9d96[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')]('Wifi\x20file\x20not\x20found');_0x988c0c=_0x49531a['split'](_0x1c0189);for(var _0x12da0c=0x0;_0x12da0c<_0x988c0c[_0x2a3a('0x20')];_0x12da0c++){_0x3c6226=_0x988c0c[_0x12da0c][_0x2a3a('0x1f')]('=');if(_0x3c6226[0x0]=='ssid')_0x130e1b['SSID']=_0x3c6226[0x1];else if(_0x3c6226[0x0]==_0x2a3a('0x22'))_0x130e1b[_0x2a3a('0x23')]=_0x3c6226[0x1];}if(!_0x130e1b[_0x2a3a('0x21')]){_0x130e1b[_0x2a3a('0x21')]=_0x2a3a('0x26');_0x130e1b[_0x2a3a('0x23')]='';}_0x4a9d96[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'SSID':_0x130e1b[_0x2a3a('0x21')],'Password':_0x130e1b[_0x2a3a('0x23')]});});}});_0x299007['post'](_0x2a3a('0x19'),function(_0x160052,_0x24c8a0){try{var _0x3f6d51;var _0x24481a;var _0x5aeb14=path[_0x2a3a('0x27')]('..','..',_0x2a3a('0x28'),'ssid_set.py');if(_0x160052['body'][_0x2a3a('0x29')]==null&&_0x160052['body']['password']==null)_0x24481a=[_0x2a3a('0x2a'),_0x5aeb14,'-d'];else _0x24481a=['python',_0x5aeb14,'-s',_0x160052['body'][_0x2a3a('0x29')],'-p',_0x160052[_0x2a3a('0x10')]['password']];var _0x3e9114=require('child_process')[_0x2a3a('0x5')];python_process=_0x3e9114('sudo',_0x24481a,{'stdio':_0x2a3a('0x2b')});python_process[_0x2a3a('0x2c')]['on']('data',function(_0x498b72){console['log'](String(_0x498b72));_0x3f6d51=String(_0x498b72);});python_process[_0x2a3a('0x2d')]['on'](_0x2a3a('0x2e'),function(_0x54e826){if(_0x3f6d51)return _0x24c8a0[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x3f6d51);else return _0x24c8a0[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'serverMessage':'Successfully\x20changed\x20wifi\x20settings'});});}catch(_0x139538){console[_0x2a3a('0x2f')](_0x139538);return _0x24c8a0[_0x2a3a('0xd')](0x1f4)['send'](_0x139538);}});_0x299007[_0x2a3a('0x6')]('/api/admin/wirelessConnections',function(_0x3ab96a,_0x5f4cde){if(os[_0x2a3a('0x1b')]()==_0x2a3a('0x1c')){return _0x5f4cde[_0x2a3a('0xd')](0xc8)[_0x2a3a('0xe')]();}else{iwlist['scan'](nicInterface,function(_0x38eabd,_0x2b4549){if(_0x38eabd)return _0x5f4cde['status'](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x30'));else return _0x5f4cde[_0x2a3a('0xd')](0xc8)['send']({'serverMessage':_0x2a3a('0x31'),'data':_0x2b4549});});}});_0x299007['post'](_0x2a3a('0x32'),function(_0x3258e8,_0x37e0bd){var _0x36de28=undefined;var _0xb1d336='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x2a3a('0x33')+_0x2a3a('0x34');var _0x5bceb1=_0x2a3a('0x35')+_0x2a3a('0x36')+_0x3258e8[_0x2a3a('0x10')][_0x2a3a('0x29')]+'\x22\x0a'+_0x2a3a('0x37')+_0x2a3a('0x38')+_0x3258e8[_0x2a3a('0x10')]['password']+'\x22\x0a'+_0x2a3a('0x39')+_0x2a3a('0x3a');if(_0x3258e8[_0x2a3a('0x10')]['password']){_0x36de28=shell[_0x2a3a('0x3b')](_0x2a3a('0x3c')+_0x3258e8[_0x2a3a('0x10')]['ssid']+'\x22\x20\x22'+_0x3258e8[_0x2a3a('0x10')]['password']+'\x22',{'silent':!![]})['stdout'];}else{_0x36de28=_0x2a3a('0x35')+_0x2a3a('0x3d')+_0x3258e8[_0x2a3a('0x10')]['ssid']+'\x22\x0a'+_0x2a3a('0x3e')+'}\x0a';}let _0x6b8817='';if(_0x3258e8['body'][_0x2a3a('0x3f')])_0x6b8817=_0xb1d336+_0x5bceb1;else _0x6b8817=_0xb1d336+_0x36de28;fs[_0x2a3a('0x40')](_0x2a3a('0x41'),_0x6b8817,function(_0x215258){if(_0x215258)return _0x37e0bd['status'](0x1f4)[_0x2a3a('0xe')](_0x215258);shell['exec'](_0x2a3a('0x42')+nicInterface+_0x2a3a('0x43'),{'silent':!![]});const _0x5e6093=0x3a98;var _0x321707=0x12c;var _0x372f42=0x0;var _0x5efcfb=setInterval(function(){var _0x24f772=[_0x2a3a('0x44'),_0x2a3a('0x45'),_0x2a3a('0x46'),_0x2a3a('0x47'),_0x2a3a('0x48')];wpa_cli[_0x2a3a('0xd')](nicInterface,function(_0x5c83dc,_0x14b561){if(_0x5c83dc)return _0x37e0bd[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x5c83dc);if(_0x14b561[_0x2a3a('0x49')]=='COMPLETED'){if(_0x14b561['ip']){console[_0x2a3a('0x2f')](_0x2a3a('0x4a')+_0x14b561['ip']+_0x2a3a('0x4b'));clearInterval(_0x5efcfb);_0x3ecf7e['SocketVariables'][_0x2a3a('0x4c')]=_0x14b561;_0x57c278[_0x2a3a('0x4d')][_0x2a3a('0x4e')](_0x2a3a('0x4f'),_0x14b561);return _0x37e0bd[_0x2a3a('0xd')](0xc8)['json']({'serverMessage':_0x2a3a('0x50')+_0x3258e8[_0x2a3a('0x10')][_0x2a3a('0x29')]+_0x2a3a('0x51')});}else if(_0x372f42>_0x5e6093){console[_0x2a3a('0x2f')](_0x2a3a('0x52'));clearInterval(_0x5efcfb);return _0x37e0bd[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')]('Error\x20connecting\x20to\x20'+_0x3258e8[_0x2a3a('0x10')]['ssid']);}_0x372f42+=_0x321707;}else if(_0x24f772[_0x2a3a('0x53')](_0x14b561[_0x2a3a('0x49')])==-0x1){clearInterval(_0x5efcfb);_0x57c278[_0x2a3a('0x4d')][_0x2a3a('0x4e')](_0x2a3a('0x4f'),_0x14b561);return _0x37e0bd[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x54')+_0x3258e8[_0x2a3a('0x10')][_0x2a3a('0x29')]);}});},_0x321707);});});_0x299007[_0x2a3a('0x6')]('/api/admin/wirelessConnections/disconnect',function(_0x3f06ee,_0x2d9ec0){if(os['platform']()==_0x2a3a('0x1c')){_0x2d9ec0[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')]('Disconnect\x20not\x20available\x20on\x20Windows');}else{var _0xb7c56=_0x2a3a('0x55')+'update_config=1\x0a'+_0x2a3a('0x34');fs[_0x2a3a('0x40')](_0x2a3a('0x41'),_0xb7c56,function(_0x5098e2){if(_0x5098e2)return _0x2d9ec0[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x5098e2);shell[_0x2a3a('0x3b')](_0x2a3a('0x42')+nicInterface+_0x2a3a('0x43'),{'silent':!![]});var _0x143900=setInterval(function(){var _0x5878a7=[];wpa_cli[_0x2a3a('0xd')](nicInterface,function(_0x261ff5,_0x1d3250){if(_0x261ff5)return _0x2d9ec0['status'](0x1f4)[_0x2a3a('0xe')](_0x261ff5);_0x3ecf7e[_0x2a3a('0x56')][_0x2a3a('0x4c')]=_0x1d3250;_0x57c278[_0x2a3a('0x4d')]['emit'](_0x2a3a('0x4f'),_0x1d3250);if(_0x1d3250[_0x2a3a('0x49')]==_0x2a3a('0x47')||_0x1d3250[_0x2a3a('0x49')]=='INACTIVE'){clearInterval(_0x143900);_0x57c278[_0x2a3a('0x4d')][_0x2a3a('0x4e')](_0x2a3a('0x4f'),_0x1d3250);return _0x2d9ec0[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x13')]({'serverMessage':_0x2a3a('0x57')});}else if(connectingStatuses['indexOf'](_0x1d3250[_0x2a3a('0x49')])==-0x1){clearInterval(_0x143900);_0x57c278[_0x2a3a('0x4d')]['emit']('wifi-connection',_0x1d3250);return _0x2d9ec0['status'](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x58'));}});},0x12c);});}});_0x299007[_0x2a3a('0x6')](_0x2a3a('0x59'),function(_0x842876,_0xf1f8fd){var _0x820de5=_0x2a3a('0x5a');fs[_0x2a3a('0x5b')](_0x820de5,function(_0x5d2d60,_0x21b6e7){if(_0x5d2d60)return _0xf1f8fd[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x5d2d60);if(_0x21b6e7[_0x2a3a('0x20')]>0x0){fs[_0x2a3a('0x1d')](_0x820de5+'/'+_0x21b6e7[0x0],_0x2a3a('0x25'),function(_0x52d64d,_0x11c422){if(_0x52d64d)return status(0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x5c'));_0xf1f8fd['setHeader'](_0x2a3a('0x5d'),_0x2a3a('0x5e')+_0x21b6e7[0x0]);return _0xf1f8fd[_0x2a3a('0xd')](0xc8)[_0x2a3a('0x5f')](_0x820de5+'/'+_0x21b6e7[0x0]);});}else{return _0xf1f8fd['status'](0xc8)[_0x2a3a('0xe')](_0x2a3a('0x60'));}});});var _0x4e1c34=null;_0x299007['post'](_0x2a3a('0x61'),function(_0x1bc995,_0x480fdd){if(os[_0x2a3a('0x1b')]()!=_0x2a3a('0x1c')){_0x4e1c34=spawn(_0x2a3a('0x17'),['sh',_0x2a3a('0x62'),'../../diagnostics/diagnosticGUI.py']);_0x4e1c34[_0x2a3a('0x2d')]['on']('data',function(_0x5bed01){console['log'](String(_0x5bed01));});_0x4e1c34[_0x2a3a('0x2c')]['on'](_0x2a3a('0x63'),function(_0x1ab247){console['log'](String(_0x1ab247));});var _0x3a4492=0x1;var _0x4611a8=0x3;var _0x276875=setInterval(function(){if(_0x3a4492<=_0x4611a8){var _0x51fd68=shell['exec'](_0x2a3a('0x64'),{'silent':!![]})[_0x2a3a('0x2d')];if(_0x51fd68){clearInterval(_0x276875);_0x3ecf7e['SocketVariables']['fusion_diagnostics_running']={'process':_0x51fd68,'socket':_0x1bc995[_0x2a3a('0x10')][_0x2a3a('0x65')]};_0x57c278['sockets'][_0x2a3a('0x4e')]('diagnostics_running',_0x3ecf7e[_0x2a3a('0x56')][_0x2a3a('0x66')]);return _0x480fdd['status'](0xc8)[_0x2a3a('0x13')]({'serverMessage':_0x2a3a('0x67')});}else{_0x3a4492++;}}else{clearInterval(_0x276875);return _0x480fdd[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x68'));}},0x12c);}else{return _0x480fdd[_0x2a3a('0xd')](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});_0x299007[_0x2a3a('0x6')]('/api/diagnostics/stop',function(_0xc12538,_0x1cc910){if(os['platform']()!=_0x2a3a('0x1c')){shell[_0x2a3a('0x3b')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell['exec'](_0x2a3a('0x64'),{'silent':!![]},function(_0x1fa200,_0x2a188b,_0x1b7a8a){(function(_0x56cc6e){var _0x2999f4=_0x56cc6e[_0x2a3a('0x69')]();if(_0x2999f4){return _0x1cc910[_0x2a3a('0xd')](0x1f4)[_0x2a3a('0xe')](_0x2a3a('0x6a'));}else{_0x3ecf7e[_0x2a3a('0x56')]['fusion_diagnostics_running']=null;_0x57c278[_0x2a3a('0x4d')][_0x2a3a('0x4e')](_0x2a3a('0x6b'),_0x3ecf7e[_0x2a3a('0x56')][_0x2a3a('0x66')]);_0x4e1c34=null;return _0x1cc910[_0x2a3a('0xd')](0xc8)['json']({'serverMessage':_0x2a3a('0x6c')});}}(_0x2a188b[_0x2a3a('0x69')]()));});}else{return _0x1cc910['status'](0xc8)['json']({'serverMessage':_0x2a3a('0x6d')});}});function _0x326861(){return function(_0x151922,_0x14f62e,_0x56df22){if(_0x151922[_0x2a3a('0x6e')]()){return _0x56df22();}else{_0x14f62e[_0x2a3a('0xd')](0x191)['send'](_0x2a3a('0x6f'));}};}};