var _0x2584=['--no-merges','update-output','exports','--date=short','info','/api/fusion/restore','git','scripts/restoreFusion.sh','status','child_process','isAuthenticated','split','scripts/updateFusion.sh','/api/cookie','emit','Restore\x20starting','replace','pipe','log','stderr','get','../../express','json','Update\x20starting','--pretty=format:\x22[%cd]\x20(%h)\x20:\x20%s\x22','user','sudo','length','stdout','send','../../utils/logger','../../socket','join','Restore\x20Finished!','spawn','close','bash','data','/api/fusion/update'];(function(_0x376a3d,_0x2584f2){var _0x2b6ecc=function(_0x30c950){while(--_0x30c950){_0x376a3d['push'](_0x376a3d['shift']());}};_0x2b6ecc(++_0x2584f2);}(_0x2584,0x14c));var _0x2b6e=function(_0x376a3d,_0x2584f2){_0x376a3d=_0x376a3d-0x0;var _0x2b6ecc=_0x2584[_0x376a3d];return _0x2b6ecc;};const logger=require(_0x2b6e('0xa'));const app=require(_0x2b6e('0x1'));const io=require(_0x2b6e('0xb'));module[_0x2b6e('0x15')]=function(){app['get'](_0x2b6e('0x12'),_0x3de3b7(),function(_0x276ff5,_0x2cf8c8){try{var _0x369af5=require('child_process')[_0x2b6e('0xe')];var _0x123a7a=_0x2b6e('0x1f');var _0x3a28be=_0x369af5(_0x2b6e('0x6'),['bash',_0x123a7a],{'stdio':_0x2b6e('0x24')});_0x3a28be[_0x2b6e('0x8')]['on'](_0x2b6e('0x11'),function(_0x1887b8){logger[_0x2b6e('0x17')](String(_0x1887b8));io[_0x2b6e('0x21')](_0x2b6e('0x14'),{'output':String(_0x1887b8)});});_0x3a28be[_0x2b6e('0x26')]['on']('data',function(_0x5d8221){logger['info'](String(_0x5d8221));io['emit'](_0x2b6e('0x14'),{'output':String(_0x5d8221)});});_0x3a28be['stdout']['on'](_0x2b6e('0xf'),function(_0x55475c){logger[_0x2b6e('0x17')](String('Update\x20Finished!'));});}catch(_0x10b87f){logger['info'](_0x10b87f);}_0x2cf8c8['status'](0xc8)['send'](_0x2b6e('0x3'));});app[_0x2b6e('0x0')](_0x2b6e('0x18'),_0x3de3b7(),function(_0x24296a,_0x3ad0c3){try{var _0x58766f=require(_0x2b6e('0x1c'))[_0x2b6e('0xe')];var _0x40283a=_0x2b6e('0x1a');var _0x218501=_0x58766f(_0x2b6e('0x6'),[_0x2b6e('0x10'),_0x40283a],{'stdio':_0x2b6e('0x24')});_0x218501[_0x2b6e('0x8')]['on'](_0x2b6e('0x11'),function(_0x26572e){logger[_0x2b6e('0x17')](String(_0x26572e));io[_0x2b6e('0x21')](_0x2b6e('0x14'),{'output':String(_0x26572e)});});_0x218501[_0x2b6e('0x26')]['on'](_0x2b6e('0x11'),function(_0x1fd8b1){logger[_0x2b6e('0x17')](String(_0x1fd8b1));io[_0x2b6e('0x21')](_0x2b6e('0x14'),{'output':String(_0x1fd8b1)});});_0x218501[_0x2b6e('0x8')]['on']('close',function(_0x1f6066){logger[_0x2b6e('0x17')](String(_0x2b6e('0xd')));});}catch(_0x12a61a){logger[_0x2b6e('0x17')](_0x12a61a);}_0x3ad0c3[_0x2b6e('0x1b')](0xc8)[_0x2b6e('0x9')](_0x2b6e('0x22'));});app[_0x2b6e('0x0')]('/api/fusion/releaseNotes',function(_0x45226c,_0x213f58){var _0x554817=require(_0x2b6e('0x1c'))['spawn'];var _0x39bacc='';var _0x359154=!![];var _0x18bb2f=_0x554817(_0x2b6e('0x19'),[_0x2b6e('0x25'),_0x2b6e('0x4'),_0x2b6e('0x16'),_0x2b6e('0x13')],{'stdio':'pipe'});_0x18bb2f[_0x2b6e('0x8')]['on'](_0x2b6e('0x11'),function(_0x1bbac2){_0x39bacc+=_0x1bbac2+'\x0a';});_0x18bb2f['stderr']['on'](_0x2b6e('0x11'),function(_0x21c5a7){logger['info'](String(_0x21c5a7));_0x359154=![];});_0x18bb2f[_0x2b6e('0x8')]['on']('close',function(_0xe30dd3){var _0x256f5b=_0x39bacc[_0x2b6e('0x1e')]('\x0a\x0a');for(var _0x17e41c=0x0;_0x17e41c<_0x256f5b[_0x2b6e('0x7')];_0x17e41c++){_0x256f5b[_0x17e41c]=_0x256f5b[_0x17e41c][_0x2b6e('0x23')](/"/g,'');}_0x39bacc=_0x256f5b[_0x2b6e('0xc')]('\x0a');if(_0x359154)_0x213f58['status'](0xc8)[_0x2b6e('0x2')]({'data':_0x39bacc});else _0x213f58[_0x2b6e('0x1b')](0x1f4)[_0x2b6e('0x9')]('Error\x20Reading\x20changelog');});});app[_0x2b6e('0x0')](_0x2b6e('0x20'),_0x3de3b7(),function(_0x552788,_0x4446b2){_0x4446b2['status'](0xc8)['send'](_0x552788[_0x2b6e('0x5')]);});function _0x3de3b7(){return function(_0x4b60e7,_0xcc8d51,_0x32e2f8){if(_0x4b60e7[_0x2b6e('0x1d')]()){return _0x32e2f8();}else{_0xcc8d51[_0x2b6e('0x1b')](0x191)[_0x2b6e('0x9')]('User\x20Unauthenticated');}};}}();