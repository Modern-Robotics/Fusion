var _0x1889=['scripts/restoreFusion.sh','spawn','close','bash','join','../../socket','Update\x20starting','emit','get','git','info','data','User\x20Unauthenticated','update-output','/api/fusion/update','pipe','isAuthenticated','stdout','split','user','Error\x20Reading\x20changelog','status','send','exports','../../express','/api/fusion/releaseNotes','log','json','--pretty=format:\x22[%cd]\x20(%h)\x20:\x20%s\x22','sudo','stderr','child_process','/api/cookie','scripts/updateFusion.sh','/api/fusion/restore','../../utils/logger','Restore\x20starting','length'];(function(_0x5748e1,_0x188985){var _0x2f4aaa=function(_0xce4f4a){while(--_0xce4f4a){_0x5748e1['push'](_0x5748e1['shift']());}};_0x2f4aaa(++_0x188985);}(_0x1889,0x1d3));var _0x2f4a=function(_0x5748e1,_0x188985){_0x5748e1=_0x5748e1-0x0;var _0x2f4aaa=_0x1889[_0x5748e1];return _0x2f4aaa;};const logger=require(_0x2f4a('0x18'));const app=require(_0x2f4a('0xd'));const io=require(_0x2f4a('0x20'));module[_0x2f4a('0xc')]=function(){app[_0x2f4a('0x23')](_0x2f4a('0x3'),_0x4e16df(),function(_0x46a132,_0x316b66){try{var _0x36ca2e=require(_0x2f4a('0x14'))['spawn'];var _0xec3b3e=_0x2f4a('0x16');var _0x203641=_0x36ca2e('sudo',[_0x2f4a('0x1e'),_0xec3b3e],{'stdio':_0x2f4a('0x4')});_0x203641[_0x2f4a('0x6')]['on']('data',function(_0x46ee59){logger[_0x2f4a('0x25')](String(_0x46ee59));io['emit'](_0x2f4a('0x2'),{'output':String(_0x46ee59)});});_0x203641[_0x2f4a('0x13')]['on'](_0x2f4a('0x0'),function(_0x46a1de){logger[_0x2f4a('0x25')](String(_0x46a1de));io[_0x2f4a('0x22')]('update-output',{'output':String(_0x46a1de)});});_0x203641[_0x2f4a('0x6')]['on'](_0x2f4a('0x1d'),function(_0x105d32){logger['info'](String('Update\x20Finished!'));});}catch(_0x24b8fb){logger[_0x2f4a('0x25')](_0x24b8fb);}_0x316b66[_0x2f4a('0xa')](0xc8)[_0x2f4a('0xb')](_0x2f4a('0x21'));});app['get'](_0x2f4a('0x17'),_0x4e16df(),function(_0x5a3bfd,_0x1ac349){try{var _0x117845=require(_0x2f4a('0x14'))['spawn'];var _0x4212df=_0x2f4a('0x1b');var _0x17dfad=_0x117845(_0x2f4a('0x12'),['bash',_0x4212df],{'stdio':_0x2f4a('0x4')});_0x17dfad[_0x2f4a('0x6')]['on'](_0x2f4a('0x0'),function(_0x3a6bae){logger[_0x2f4a('0x25')](String(_0x3a6bae));io['emit']('update-output',{'output':String(_0x3a6bae)});});_0x17dfad[_0x2f4a('0x13')]['on']('data',function(_0x125874){logger[_0x2f4a('0x25')](String(_0x125874));io[_0x2f4a('0x22')](_0x2f4a('0x2'),{'output':String(_0x125874)});});_0x17dfad[_0x2f4a('0x6')]['on'](_0x2f4a('0x1d'),function(_0x5f3f6e){logger[_0x2f4a('0x25')](String('Restore\x20Finished!'));});}catch(_0x27039f){logger['info'](_0x27039f);}_0x1ac349['status'](0xc8)[_0x2f4a('0xb')](_0x2f4a('0x19'));});app[_0x2f4a('0x23')](_0x2f4a('0xe'),function(_0x2429b1,_0x4f1737){var _0x39ea8b=require(_0x2f4a('0x14'))[_0x2f4a('0x1c')];var _0x2b344f='';var _0x344c7d=!![];var _0x5a6f57=_0x39ea8b(_0x2f4a('0x24'),[_0x2f4a('0xf'),_0x2f4a('0x11'),'--date=short','--no-merges'],{'stdio':_0x2f4a('0x4')});_0x5a6f57[_0x2f4a('0x6')]['on'](_0x2f4a('0x0'),function(_0xc82245){_0x2b344f+=_0xc82245+'\x0a';});_0x5a6f57[_0x2f4a('0x13')]['on'](_0x2f4a('0x0'),function(_0x35004d){logger[_0x2f4a('0x25')](String(_0x35004d));_0x344c7d=![];});_0x5a6f57[_0x2f4a('0x6')]['on'](_0x2f4a('0x1d'),function(_0x7ac86f){var _0x42615a=_0x2b344f[_0x2f4a('0x7')]('\x0a\x0a');for(var _0x20d450=0x0;_0x20d450<_0x42615a[_0x2f4a('0x1a')];_0x20d450++){_0x42615a[_0x20d450]=_0x42615a[_0x20d450]['replace'](/"/g,'');}_0x2b344f=_0x42615a[_0x2f4a('0x1f')]('\x0a');if(_0x344c7d)_0x4f1737[_0x2f4a('0xa')](0xc8)[_0x2f4a('0x10')]({'data':_0x2b344f});else _0x4f1737[_0x2f4a('0xa')](0x1f4)[_0x2f4a('0xb')](_0x2f4a('0x9'));});});app[_0x2f4a('0x23')](_0x2f4a('0x15'),_0x4e16df(),function(_0x510bf2,_0x2032c5){_0x2032c5[_0x2f4a('0xa')](0xc8)['send'](_0x510bf2[_0x2f4a('0x8')]);});function _0x4e16df(){return function(_0x23f36c,_0x267c0a,_0x2b3708){if(_0x23f36c[_0x2f4a('0x5')]()){return _0x2b3708();}else{_0x267c0a[_0x2f4a('0xa')](0x191)[_0x2f4a('0xb')](_0x2f4a('0x1'));}};}}();