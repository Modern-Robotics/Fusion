var _0x4433=['scripts/updateFusion.sh','Restore\x20starting','isAuthenticated','--date=short','User\x20Unauthenticated','stderr','/api/fusion/update','pipe','stdout','../../socket','length','Update\x20Finished!','spawn','git','send','exports','info','scripts/restoreFusion.sh','status','update-output','--pretty=format:\x22[%cd]\x20(%h)\x20:\x20%s\x22','split','replace','data','close','/api/fusion/releaseNotes','emit','log','sudo','--no-merges','Error\x20Reading\x20changelog','Update\x20starting','/api/cookie','get','child_process','bash','json'];(function(_0x70f13,_0x443354){var _0x382bb3=function(_0x4b2982){while(--_0x4b2982){_0x70f13['push'](_0x70f13['shift']());}};_0x382bb3(++_0x443354);}(_0x4433,0x65));var _0x382b=function(_0x70f13,_0x443354){_0x70f13=_0x70f13-0x0;var _0x382bb3=_0x4433[_0x70f13];return _0x382bb3;};const logger=require('../../utils/logger');const app=require('../../express');const io=require(_0x382b('0x13'));module[_0x382b('0x19')]=function(){app[_0x382b('0x6')](_0x382b('0x10'),_0x4c080c(),function(_0xf4ae98,_0x3c00d4){try{var _0x4b6a1c=require('child_process')['spawn'];var _0x55d126=_0x382b('0xa');var _0x56ad2c=_0x4b6a1c(_0x382b('0x1'),[_0x382b('0x8'),_0x55d126],{'stdio':_0x382b('0x11')});_0x56ad2c['stdout']['on'](_0x382b('0x21'),function(_0x204926){logger['info'](String(_0x204926));io[_0x382b('0x24')](_0x382b('0x1d'),{'output':String(_0x204926)});});_0x56ad2c[_0x382b('0xf')]['on']('data',function(_0x5edf91){logger[_0x382b('0x1a')](String(_0x5edf91));io['emit'](_0x382b('0x1d'),{'output':String(_0x5edf91)});});_0x56ad2c['stdout']['on'](_0x382b('0x22'),function(_0x34ca43){logger[_0x382b('0x1a')](String(_0x382b('0x15')));});}catch(_0x10b3ff){logger['info'](_0x10b3ff);}_0x3c00d4[_0x382b('0x1c')](0xc8)['send'](_0x382b('0x4'));});app[_0x382b('0x6')]('/api/fusion/restore',_0x4c080c(),function(_0x468567,_0x33eaf5){try{var _0x1d875d=require(_0x382b('0x7'))[_0x382b('0x16')];var _0x19dd4a=_0x382b('0x1b');var _0x308e36=_0x1d875d(_0x382b('0x1'),[_0x382b('0x8'),_0x19dd4a],{'stdio':_0x382b('0x11')});_0x308e36[_0x382b('0x12')]['on'](_0x382b('0x21'),function(_0x5cc8bb){logger[_0x382b('0x1a')](String(_0x5cc8bb));io[_0x382b('0x24')](_0x382b('0x1d'),{'output':String(_0x5cc8bb)});});_0x308e36[_0x382b('0xf')]['on'](_0x382b('0x21'),function(_0x4f381e){logger[_0x382b('0x1a')](String(_0x4f381e));io[_0x382b('0x24')](_0x382b('0x1d'),{'output':String(_0x4f381e)});});_0x308e36[_0x382b('0x12')]['on'](_0x382b('0x22'),function(_0x44465b){logger['info'](String('Restore\x20Finished!'));});}catch(_0x5abf2e){logger[_0x382b('0x1a')](_0x5abf2e);}_0x33eaf5[_0x382b('0x1c')](0xc8)[_0x382b('0x18')](_0x382b('0xb'));});app[_0x382b('0x6')](_0x382b('0x23'),function(_0x35f15d,_0x488346){var _0x235755=require(_0x382b('0x7'))[_0x382b('0x16')];var _0x5bb3e3='';var _0x56979a=!![];var _0x36944d=_0x235755(_0x382b('0x17'),[_0x382b('0x0'),_0x382b('0x1e'),_0x382b('0xd'),_0x382b('0x2')],{'stdio':'pipe'});_0x36944d[_0x382b('0x12')]['on']('data',function(_0x5e870b){_0x5bb3e3+=_0x5e870b+'\x0a';});_0x36944d[_0x382b('0xf')]['on'](_0x382b('0x21'),function(_0x225989){logger[_0x382b('0x1a')](String(_0x225989));_0x56979a=![];});_0x36944d['stdout']['on']('close',function(_0x228239){var _0x44d4cb=_0x5bb3e3[_0x382b('0x1f')]('\x0a\x0a');for(var _0x21f2dd=0x0;_0x21f2dd<_0x44d4cb[_0x382b('0x14')];_0x21f2dd++){_0x44d4cb[_0x21f2dd]=_0x44d4cb[_0x21f2dd][_0x382b('0x20')](/"/g,'');}_0x5bb3e3=_0x44d4cb['join']('\x0a');if(_0x56979a)_0x488346[_0x382b('0x1c')](0xc8)[_0x382b('0x9')]({'data':_0x5bb3e3});else _0x488346[_0x382b('0x1c')](0x1f4)[_0x382b('0x18')](_0x382b('0x3'));});});app[_0x382b('0x6')](_0x382b('0x5'),_0x4c080c(),function(_0x149058,_0x1df633){_0x1df633[_0x382b('0x1c')](0xc8)[_0x382b('0x18')](_0x149058['user']);});function _0x4c080c(){return function(_0xd8f4fc,_0x36d68d,_0x1e1fc0){if(_0xd8f4fc[_0x382b('0xc')]()){return _0x1e1fc0();}else{_0x36d68d['status'](0x191)[_0x382b('0x18')](_0x382b('0xe'));}};}}();