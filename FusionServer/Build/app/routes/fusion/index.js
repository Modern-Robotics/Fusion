var _0x46c7=['Restore\x20starting','Update\x20starting','sudo','data','bash','get','child_process','emit','status','pipe','replace','../../socket','info','../../utils/logger','/api/fusion/update','spawn','scripts/restoreFusion.sh','json','log','/api/fusion/releaseNotes','join','../../express','Error\x20Reading\x20changelog','stderr','/api/fusion/restore','stdout','close','scripts/updateFusion.sh','isAuthenticated','Restore\x20Finished!','update-output','/api/cookie','length','send','--no-merges','exports'];(function(_0x33e49c,_0x46c7ae){var _0x50671f=function(_0x20a8aa){while(--_0x20a8aa){_0x33e49c['push'](_0x33e49c['shift']());}};_0x50671f(++_0x46c7ae);}(_0x46c7,0x13e));var _0x5067=function(_0x33e49c,_0x46c7ae){_0x33e49c=_0x33e49c-0x0;var _0x50671f=_0x46c7[_0x33e49c];return _0x50671f;};const logger=require(_0x5067('0x13'));const app=require(_0x5067('0x1b'));const io=require(_0x5067('0x11'));module[_0x5067('0x5')]=function(){app[_0x5067('0xb')](_0x5067('0x14'),_0x274cb1(),function(_0x1e7d34,_0x407d18){try{var _0x32f05b=require(_0x5067('0xc'))[_0x5067('0x15')];var _0x596985=_0x5067('0x21');var _0x43c6ef=_0x32f05b(_0x5067('0x8'),['bash',_0x596985],{'stdio':_0x5067('0xf')});_0x43c6ef['stdout']['on'](_0x5067('0x9'),function(_0x4b8ece){logger['info'](String(_0x4b8ece));io[_0x5067('0xd')](_0x5067('0x0'),{'output':String(_0x4b8ece)});});_0x43c6ef[_0x5067('0x1d')]['on'](_0x5067('0x9'),function(_0x294c22){logger[_0x5067('0x12')](String(_0x294c22));io['emit'](_0x5067('0x0'),{'output':String(_0x294c22)});});_0x43c6ef[_0x5067('0x1f')]['on']('close',function(_0x4adbe3){logger['info'](String('Update\x20Finished!'));});}catch(_0x6ceb4){logger[_0x5067('0x12')](_0x6ceb4);}_0x407d18[_0x5067('0xe')](0xc8)['send'](_0x5067('0x7'));});app[_0x5067('0xb')](_0x5067('0x1e'),_0x274cb1(),function(_0x5832c8,_0xcab295){try{var _0xe0ad6b=require(_0x5067('0xc'))[_0x5067('0x15')];var _0x5ee3b7=_0x5067('0x16');var _0x4c4ca0=_0xe0ad6b(_0x5067('0x8'),[_0x5067('0xa'),_0x5ee3b7],{'stdio':_0x5067('0xf')});_0x4c4ca0[_0x5067('0x1f')]['on'](_0x5067('0x9'),function(_0x45f8d3){logger[_0x5067('0x12')](String(_0x45f8d3));io[_0x5067('0xd')](_0x5067('0x0'),{'output':String(_0x45f8d3)});});_0x4c4ca0[_0x5067('0x1d')]['on'](_0x5067('0x9'),function(_0x45f1fd){logger[_0x5067('0x12')](String(_0x45f1fd));io[_0x5067('0xd')](_0x5067('0x0'),{'output':String(_0x45f1fd)});});_0x4c4ca0[_0x5067('0x1f')]['on'](_0x5067('0x20'),function(_0x3cffae){logger['info'](String(_0x5067('0x23')));});}catch(_0xa4f912){logger['info'](_0xa4f912);}_0xcab295['status'](0xc8)[_0x5067('0x3')](_0x5067('0x6'));});app['get'](_0x5067('0x19'),function(_0x3c8618,_0x42bfe1){var _0x3d6111=require(_0x5067('0xc'))['spawn'];var _0x9b49c7='';var _0x3d050b=!![];var _0x3d906a=_0x3d6111('git',[_0x5067('0x18'),'--pretty=format:\x22[%cd]\x20(%h)\x20:\x20%s\x22','--date=short',_0x5067('0x4')],{'stdio':_0x5067('0xf')});_0x3d906a[_0x5067('0x1f')]['on'](_0x5067('0x9'),function(_0x1afeba){_0x9b49c7+=_0x1afeba+'\x0a';});_0x3d906a[_0x5067('0x1d')]['on'](_0x5067('0x9'),function(_0x5f0d52){logger[_0x5067('0x12')](String(_0x5f0d52));_0x3d050b=![];});_0x3d906a['stdout']['on'](_0x5067('0x20'),function(_0x3b18c2){var _0x229bfa=_0x9b49c7['split']('\x0a\x0a');for(var _0x3d4a82=0x0;_0x3d4a82<_0x229bfa[_0x5067('0x2')];_0x3d4a82++){_0x229bfa[_0x3d4a82]=_0x229bfa[_0x3d4a82][_0x5067('0x10')](/"/g,'');}_0x9b49c7=_0x229bfa[_0x5067('0x1a')]('\x0a');if(_0x3d050b)_0x42bfe1[_0x5067('0xe')](0xc8)[_0x5067('0x17')]({'data':_0x9b49c7});else _0x42bfe1[_0x5067('0xe')](0x1f4)[_0x5067('0x3')](_0x5067('0x1c'));});});app[_0x5067('0xb')](_0x5067('0x1'),_0x274cb1(),function(_0x587358,_0x59bb71){_0x59bb71[_0x5067('0xe')](0xc8)[_0x5067('0x3')](_0x587358['user']);});function _0x274cb1(){return function(_0x1de942,_0x5d014b,_0x1a8bbc){if(_0x1de942[_0x5067('0x22')]()){return _0x1a8bbc();}else{_0x5d014b[_0x5067('0xe')](0x191)[_0x5067('0x3')]('User\x20Unauthenticated');}};}}();