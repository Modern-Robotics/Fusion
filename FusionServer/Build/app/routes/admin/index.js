var _0x4491=['ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','path','child_process','\x09psk=\x22','sockets','COMPLETED','config','filepath','body','ssid','fusion_wifi_access','python','SCANNING','reboot','Password','isAuthenticated','username','readFile','type','stdout','Content-disposition','../../diagnostics/runRemi.sh','Error\x20starting\x20diagnostic\x20tool','split','poweroff','Retreived\x20wireless\x20connections','/api/diagnostics/stop','exec','win32','sudo\x20wpa_cli\x20-i\x20','/api/autonomousPrograms','Disconnect\x20not\x20available\x20on\x20Windows','EOL','generateHash','stderr','Disconnected\x20successfully','INACTIVE','Error\x20reading\x20crash\x20file','\x09scan_ssid=1\x0a','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','User\x20Unauthenticated','pipe','country=US\x0a\x0a','info','network={\x0a','length','No\x20crash\x20files\x20found','Shut\x20Down\x20Commencing','Ip\x20address:\x20','password','Wireless\x20interface\x20not\x20found','post','\x20\x20\x20\x20ssid=\x22','../../utils/logger','platform','../../diagnostics/diagnosticGUI.py','Error\x20disconnecting','wpa_passphrase\x20\x22','scan','trim','diagnostics_running','../../models/autonomous','Diagnostic\x20tool\x20started\x20successfully','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','../../models/user','User\x20created!','\x20reconfigure','SocketVariables','utf8','DISCONNECTED','/api/autonomous','sudo','emit','Wifi\x20file\x20not\x20found','/api/admin/wirelessConnections/disconnect','hiddenNetwork','json','close','ssid_set.py','.crash','message','wpa_state','\x20assigned','status','/api/admin/wirelessSettings','Error\x20connecting\x20to\x20','../../etc/config-wap/hostapd.conf__npp.sh','\x09key_mgmt=WPA-PSK\x0a','Connected\x20to\x20','wireless-tools/iwlist','/api/admin/restart','/api/admin/powerOff','/api/diagnostics/start','save','generateFileSystem','/etc/wpa_supplicant/wpa_supplicant.conf','readdir','indexOf','findOneAndUpdate','spawn','wpa_passphrase','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','/api/admin/users','findOne','\x09ssid=\x22','\x22\x20\x22','fusion_diagnostics_running','AUTHENTICATING','\x20successfully','exports','data','Restart\x20Commencing','shelljs','mkdirp','update_config=1\x0a','get','SSID','./app/filesystem/','send','wifi-connection','Username\x20already\x20taken.','etc','/etc/hostapd/hostapd.conf','/api/admin/wirelessConnections','../../express','fs-extra','socketId','ASSOCIATING'];(function(_0x3f1a36,_0x4491c8){var _0x13a32f=function(_0x3d9b8d){while(--_0x3d9b8d){_0x3f1a36['push'](_0x3f1a36['shift']());}};_0x13a32f(++_0x4491c8);}(_0x4491,0x16d));var _0x13a3=function(_0x3f1a36,_0x4491c8){_0x3f1a36=_0x3f1a36-0x0;var _0x13a32f=_0x4491[_0x3f1a36];return _0x13a32f;};var fs=require(_0x13a3('0x10'));var mkdirp=require(_0x13a3('0x4'));var os=require('os');var path=require(_0x13a3('0x14'));var shell=require(_0x13a3('0x3'));var wpa_cli=require('wireless-tools/wpa_cli');var iwlist=require(_0x13a3('0x6c'));var wpa_supplicant=require('wireless-tools/wpa_supplicant');var spawn=require(_0x13a3('0x15'))[_0x13a3('0x76')];const config=require(_0x13a3('0x19'));const autonomous=require(_0x13a3('0x50'));const logger=require(_0x13a3('0x48'));let nicInterface=config[_0x13a3('0x6')]('Wifi_NIC');const app=require(_0x13a3('0xf'));const User=require(_0x13a3('0x53'));const io=require('../../socket');const FusionSettings=require('../../global/fusionSettings');module[_0x13a3('0x0')]=function(){app[_0x13a3('0x46')](_0x13a3('0x79'),_0x5bff0c(),function(_0x2143d4,_0x46a14d){User[_0x13a3('0x7a')]({'username':_0x2143d4[_0x13a3('0x1b')][_0x13a3('0x23')]},async function(_0x28899e,_0x585e65){if(_0x28899e)return _0x46a14d[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x28899e);if(_0x585e65){return _0x46a14d[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0xb'));}else{var _0x714ef4=new User(_0x2143d4[_0x13a3('0x1b')]);_0x714ef4['username']=_0x2143d4[_0x13a3('0x1b')]['username'];_0x714ef4[_0x13a3('0x44')]=_0x714ef4[_0x13a3('0x34')](_0x2143d4[_0x13a3('0x1b')]['password']);_0x714ef4[_0x13a3('0x1a')]=await _0x714ef4[_0x13a3('0x71')](_0x714ef4[_0x13a3('0x23')]);_0x714ef4[_0x13a3('0x70')](function(_0x1c7b7b){if(_0x1c7b7b)return _0x46a14d[_0x13a3('0x66')](0x1f4)['send'](_0x1c7b7b);return _0x46a14d[_0x13a3('0x66')](0xc8)['json']({'serverMessage':_0x13a3('0x54')});});}});});app[_0x13a3('0x6')](_0x13a3('0x6e'),function(_0x263a45,_0x1a567e){_0x1a567e[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'serverMessage':_0x13a3('0x42')});var _0x3c1f2d=require('child_process')[_0x13a3('0x76')];var _0x15467b=_0x3c1f2d(_0x13a3('0x5a'),[_0x13a3('0x2b')]);});app[_0x13a3('0x6')](_0x13a3('0x6d'),function(_0x33f284,_0x525293){_0x525293['status'](0xc8)[_0x13a3('0x9')](_0x13a3('0x2'));var _0x251e0b=require(_0x13a3('0x15'))[_0x13a3('0x76')];var _0x2c7f7b=_0x251e0b(_0x13a3('0x5a'),[_0x13a3('0x20')]);});app['get']('/api/admin/wirelessSettings',function(_0x43018f,_0x4419a7){var _0xce4296;var _0x58a543=require('os')[_0x13a3('0x33')];var _0x3e41ff;var _0x52dce9;var _0x4d5c99={};if(os[_0x13a3('0x49')]()==_0x13a3('0x2f')){_0xce4296=_0x13a3('0x69');fs[_0x13a3('0x24')](_0xce4296,_0x13a3('0x57'),function(_0x3d3be4,_0x598569){if(_0x3d3be4)_0x4419a7[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0x5c'));_0x3e41ff=_0x598569[_0x13a3('0x2a')]('\x0a');for(var _0x1cfa99=0x0;_0x1cfa99<_0x3e41ff['length'];_0x1cfa99++){_0x52dce9=_0x3e41ff[_0x1cfa99]['split']('=');if(_0x52dce9[0x0]==_0x13a3('0x1c'))_0x4d5c99['SSID']=_0x52dce9[0x1];else if(_0x52dce9[0x0]==_0x13a3('0x77'))_0x4d5c99[_0x13a3('0x21')]=_0x52dce9[0x1];}_0x4419a7[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'SSID':_0x4d5c99[_0x13a3('0x7')],'Password':_0x4d5c99[_0x13a3('0x21')]});});}else{_0xce4296=_0x13a3('0xd');fs[_0x13a3('0x24')](_0xce4296,_0x13a3('0x57'),function(_0x235a4d,_0x4071ce){if(_0x235a4d)_0x4419a7[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0x5c'));_0x3e41ff=_0x4071ce[_0x13a3('0x2a')](_0x58a543);for(var _0x1de62a=0x0;_0x1de62a<_0x3e41ff[_0x13a3('0x40')];_0x1de62a++){_0x52dce9=_0x3e41ff[_0x1de62a]['split']('=');if(_0x52dce9[0x0]==_0x13a3('0x1c'))_0x4d5c99[_0x13a3('0x7')]=_0x52dce9[0x1];else if(_0x52dce9[0x0]==_0x13a3('0x77'))_0x4d5c99['Password']=_0x52dce9[0x1];}if(!_0x4d5c99[_0x13a3('0x7')]){_0x4d5c99[_0x13a3('0x7')]='Not\x20configured..';_0x4d5c99[_0x13a3('0x21')]='';}_0x4419a7[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'SSID':_0x4d5c99[_0x13a3('0x7')],'Password':_0x4d5c99['Password']});});}});app[_0x13a3('0x46')](_0x13a3('0x67'),function(_0x49b5cd,_0x34aedd){try{var _0x248005;var _0x1d8309;var _0x9900a4=path['join']('..','..',_0x13a3('0xc'),_0x13a3('0x61'));if(_0x49b5cd[_0x13a3('0x1b')]['ssid']==null&&_0x49b5cd[_0x13a3('0x1b')][_0x13a3('0x44')]==null)_0x1d8309=[_0x13a3('0x1e'),_0x9900a4,'-d'];else _0x1d8309=['python',_0x9900a4,'-s',_0x49b5cd['body'][_0x13a3('0x1c')],'-p',_0x49b5cd[_0x13a3('0x1b')][_0x13a3('0x44')]];var _0x10f3cc=require(_0x13a3('0x15'))[_0x13a3('0x76')];python_process=_0x10f3cc('sudo',_0x1d8309,{'stdio':_0x13a3('0x3c')});python_process[_0x13a3('0x35')]['on'](_0x13a3('0x1'),function(_0x57e128){logger[_0x13a3('0x3e')](String(_0x57e128));_0x248005=String(_0x57e128);});python_process['stdout']['on'](_0x13a3('0x60'),function(_0x7764b6){if(_0x248005)return _0x34aedd[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x248005);else return _0x34aedd['status'](0xc8)['json']({'serverMessage':'Successfully\x20changed\x20wifi\x20settings'});});}catch(_0x17023b){logger['info'](_0x17023b);return _0x34aedd[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x17023b);}});app['get'](_0x13a3('0xe'),function(_0x5dbc60,_0x45d25b){if(os[_0x13a3('0x49')]()==_0x13a3('0x2f')){return _0x45d25b[_0x13a3('0x66')](0xc8)[_0x13a3('0x9')]();}else{iwlist[_0x13a3('0x4d')](nicInterface,function(_0x35bd9e,_0x5b3e85){if(_0x35bd9e)return _0x45d25b[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0x45'));else return _0x45d25b[_0x13a3('0x66')](0xc8)[_0x13a3('0x9')]({'serverMessage':_0x13a3('0x2c'),'data':_0x5b3e85});});}});app[_0x13a3('0x46')](_0x13a3('0xe'),function(_0x329f4e,_0x11fc30){var _0x1082a8=undefined;var _0x5d813c=_0x13a3('0x52')+_0x13a3('0x5')+_0x13a3('0x3d');var _0x1b9e46=_0x13a3('0x3f')+_0x13a3('0x7b')+_0x329f4e[_0x13a3('0x1b')]['ssid']+'\x22\x0a'+_0x13a3('0x39')+_0x13a3('0x16')+_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x44')]+'\x22\x0a'+_0x13a3('0x6a')+'}\x0a\x0a';if(_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x44')]){_0x1082a8=shell[_0x13a3('0x2e')](_0x13a3('0x4c')+_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x1c')]+_0x13a3('0x7c')+_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x44')]+'\x22',{'silent':!![]})[_0x13a3('0x26')];}else{_0x1082a8=_0x13a3('0x3f')+_0x13a3('0x47')+_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x1c')]+'\x22\x0a'+'\x20\x20\x20\x20key_mgmt=NONE\x0a'+'}\x0a';}let _0x16fcdd='';if(_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x5e')])_0x16fcdd=_0x5d813c+_0x1b9e46;else _0x16fcdd=_0x5d813c+_0x1082a8;fs['writeFile'](_0x13a3('0x72'),_0x16fcdd,function(_0x2537df){if(_0x2537df)return _0x11fc30[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x2537df);shell[_0x13a3('0x2e')](_0x13a3('0x30')+nicInterface+_0x13a3('0x55'),{'silent':!![]});const _0x5b258d=0x3a98;var _0x330e16=0x12c;var _0xc22066=0x0;var _0x4040b7=setInterval(function(){var _0x46d19a=[_0x13a3('0x1f'),'4WAY_HANDSHAKE',_0x13a3('0x7e'),_0x13a3('0x58'),_0x13a3('0x12')];wpa_cli['status'](nicInterface,function(_0x2a83b4,_0x5c5b30){if(_0x2a83b4)return _0x11fc30['status'](0x1f4)[_0x13a3('0x9')](_0x2a83b4);if(_0x5c5b30[_0x13a3('0x64')]==_0x13a3('0x18')){if(_0x5c5b30['ip']){logger['info'](_0x13a3('0x43')+_0x5c5b30['ip']+_0x13a3('0x65'));clearInterval(_0x4040b7);FusionSettings[_0x13a3('0x56')][_0x13a3('0x1d')]=_0x5c5b30;io[_0x13a3('0x17')]['emit']('wifi-connection',_0x5c5b30);return _0x11fc30[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'serverMessage':_0x13a3('0x6b')+_0x329f4e[_0x13a3('0x1b')]['ssid']+_0x13a3('0x7f')});}else if(_0xc22066>_0x5b258d){logger['info'](_0x13a3('0x78'));clearInterval(_0x4040b7);return _0x11fc30[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')]('Error\x20connecting\x20to\x20'+_0x329f4e[_0x13a3('0x1b')][_0x13a3('0x1c')]);}_0xc22066+=_0x330e16;}else if(_0x46d19a['indexOf'](_0x5c5b30[_0x13a3('0x64')])==-0x1){clearInterval(_0x4040b7);io[_0x13a3('0x17')][_0x13a3('0x5b')](_0x13a3('0xa'),_0x5c5b30);return _0x11fc30['status'](0x1f4)['send'](_0x13a3('0x68')+_0x329f4e['body'][_0x13a3('0x1c')]);}});},_0x330e16);});});app[_0x13a3('0x6')](_0x13a3('0x5d'),function(_0x12e427,_0x1cb1e0){if(os[_0x13a3('0x49')]()=='win32'){_0x1cb1e0[_0x13a3('0x66')](0x1f4)['send'](_0x13a3('0x32'));}else{var _0x173e94=_0x13a3('0x52')+_0x13a3('0x5')+_0x13a3('0x3d');fs['writeFile'](_0x13a3('0x72'),_0x173e94,function(_0x59b180){if(_0x59b180)return _0x1cb1e0[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x59b180);shell[_0x13a3('0x2e')](_0x13a3('0x30')+nicInterface+_0x13a3('0x55'),{'silent':!![]});var _0xf4b271=setInterval(function(){var _0x3072c2=[];wpa_cli[_0x13a3('0x66')](nicInterface,function(_0xb85e7a,_0x9b5ac1){if(_0xb85e7a)return _0x1cb1e0['status'](0x1f4)[_0x13a3('0x9')](_0xb85e7a);FusionSettings[_0x13a3('0x56')][_0x13a3('0x1d')]=_0x9b5ac1;io[_0x13a3('0x17')]['emit']('wifi-connection',_0x9b5ac1);if(_0x9b5ac1[_0x13a3('0x64')]==_0x13a3('0x58')||_0x9b5ac1[_0x13a3('0x64')]==_0x13a3('0x37')){clearInterval(_0xf4b271);io[_0x13a3('0x17')][_0x13a3('0x5b')](_0x13a3('0xa'),_0x9b5ac1);return _0x1cb1e0[_0x13a3('0x66')](0xc8)['json']({'serverMessage':_0x13a3('0x36')});}else if(connectingStatuses[_0x13a3('0x74')](_0x9b5ac1['wpa_state'])==-0x1){clearInterval(_0xf4b271);io[_0x13a3('0x17')][_0x13a3('0x5b')](_0x13a3('0xa'),_0x9b5ac1);return _0x1cb1e0[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0x4b'));}});},0x12c);});}});app[_0x13a3('0x6')]('/api/admin/crashReport',function(_0xf609c6,_0x15d578){var _0x4cf7b6=_0x13a3('0x62');fs['readdir'](_0x4cf7b6,function(_0x1d897f,_0x43fb03){if(_0x1d897f)return _0x15d578[_0x13a3('0x66')](0x1f4)['send'](_0x1d897f);if(_0x43fb03['length']>0x0){fs[_0x13a3('0x24')](_0x4cf7b6+'/'+_0x43fb03[0x0],_0x13a3('0x57'),function(_0x4a9903,_0x410374){if(_0x4a9903)return status(0x1f4)[_0x13a3('0x9')](_0x13a3('0x38'));_0x15d578['setHeader'](_0x13a3('0x27'),'attachment;\x20filename='+_0x43fb03[0x0]);return _0x15d578[_0x13a3('0x66')](0xc8)['download'](_0x4cf7b6+'/'+_0x43fb03[0x0]);});}else{return _0x15d578[_0x13a3('0x66')](0xc8)[_0x13a3('0x9')](_0x13a3('0x41'));}});});var _0xa646e1=null;app[_0x13a3('0x46')](_0x13a3('0x6f'),function(_0xc29b38,_0x4eb11e){if(os[_0x13a3('0x49')]()!=_0x13a3('0x2f')){_0xa646e1=spawn(_0x13a3('0x5a'),['sh',_0x13a3('0x28'),_0x13a3('0x4a')]);_0xa646e1[_0x13a3('0x26')]['on'](_0x13a3('0x1'),function(_0x13659a){logger[_0x13a3('0x3e')](String(_0x13659a));});_0xa646e1[_0x13a3('0x35')]['on'](_0x13a3('0x1'),function(_0x5b6458){logger[_0x13a3('0x3e')](String(_0x5b6458));});var _0x48192a=0x1;var _0x5e3bef=0x3;var _0x21e3a7=setInterval(function(){if(_0x48192a<=_0x5e3bef){var _0x18a899=shell[_0x13a3('0x2e')](_0x13a3('0x13'),{'silent':!![]})[_0x13a3('0x26')];if(_0x18a899){clearInterval(_0x21e3a7);FusionSettings[_0x13a3('0x56')][_0x13a3('0x7d')]={'process':_0x18a899,'socket':_0xc29b38[_0x13a3('0x1b')][_0x13a3('0x11')]};io['sockets'][_0x13a3('0x5b')](_0x13a3('0x4f'),FusionSettings[_0x13a3('0x56')][_0x13a3('0x7d')]);return _0x4eb11e[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'serverMessage':_0x13a3('0x51')});}else{_0x48192a++;}}else{clearInterval(_0x21e3a7);return _0x4eb11e[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0x13a3('0x29'));}},0x12c);}else{return _0x4eb11e['status'](0xc8)['json']({'serverMessage':_0x13a3('0x3a')});}});app[_0x13a3('0x6')](_0x13a3('0x2d'),function(_0x1d066a,_0x17d236){if(os['platform']()!=_0x13a3('0x2f')){shell['exec']('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x13a3('0x2e')](_0x13a3('0x13'),{'silent':!![]},function(_0x5d7852,_0x256e01,_0x46c70c){(function(_0x226271){var _0x984924=_0x226271[_0x13a3('0x4e')]();if(_0x984924){return _0x17d236[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')]('Unable\x20to\x20stop\x20diagnostic\x20tool');}else{FusionSettings[_0x13a3('0x56')][_0x13a3('0x7d')]=null;io['sockets']['emit']('diagnostics_running',FusionSettings['SocketVariables'][_0x13a3('0x7d')]);_0xa646e1=null;return _0x17d236[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x256e01[_0x13a3('0x4e')]()));});}else{return _0x17d236['status'](0xc8)[_0x13a3('0x5f')]({'serverMessage':_0x13a3('0x3a')});}});app[_0x13a3('0x6')]('/api/autonomous',async function(_0x18aa66,_0x15c270){try{const _0x3d3da2=await autonomous[_0x13a3('0x7a')]()[_0x13a3('0x2e')]();return _0x15c270[_0x13a3('0x5f')](_0x3d3da2);}catch(_0x531c9f){return _0x15c270['status'](0x1f4)[_0x13a3('0x9')](error[_0x13a3('0x63')]);}});app[_0x13a3('0x46')](_0x13a3('0x59'),async function(_0x52dac0,_0xe37e03){try{const _0x467fee=await autonomous[_0x13a3('0x75')]({},_0x52dac0[_0x13a3('0x1b')]);return _0xe37e03[_0x13a3('0x66')](0xc8)[_0x13a3('0x5f')]({'serverMessage':'Updated\x20successfully'});}catch(_0xee91c7){return _0xe37e03[_0x13a3('0x66')](0x1f4)[_0x13a3('0x9')](_0xee91c7[_0x13a3('0x63')]);}});app[_0x13a3('0x46')](_0x13a3('0x31'),async function(_0x4f4f1f,_0x48107c){try{const _0x15528c=_0x4f4f1f[_0x13a3('0x1b')][_0x13a3('0x23')];const _0x47f4bc=_0x4f4f1f[_0x13a3('0x1b')][_0x13a3('0x25')];const _0x27733c=await fs[_0x13a3('0x73')](_0x13a3('0x8')+_0x15528c+'/'+_0x47f4bc);return _0x48107c[_0x13a3('0x66')](0xc8)['json']({'files':_0x27733c});}catch(_0x2ccb4a){return _0x48107c[_0x13a3('0x66')](0x1f4)['send'](_0x2ccb4a[_0x13a3('0x63')]);}});function _0x5bff0c(){return function(_0x32a598,_0x5b95a4,_0xb8c08c){if(_0x32a598[_0x13a3('0x22')]()){return _0xb8c08c();}else{_0x5b95a4['status'](0x191)[_0x13a3('0x9')](_0x13a3('0x3b'));}};}}();