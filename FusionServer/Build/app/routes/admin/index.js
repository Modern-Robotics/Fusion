var _0xa7f3=['exec','save','findOne','data','wireless-tools/wpa_cli','generateFileSystem','password','Error\x20reading\x20crash\x20file','network={\x0a','Successfully\x20changed\x20wifi\x20settings','etc','No\x20crash\x20files\x20found','mkdirp','readdir','Diagnostic\x20tool\x20stopped\x20successfully','sudo\x20wpa_cli\x20-i\x20','/api/admin/wirelessConnections','\x20reconfigure','\x20successfully','Retreived\x20wireless\x20connections','Disconnected\x20successfully','send','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','username','wireless-tools/wpa_supplicant','Connected\x20to\x20','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','wireless-tools/iwlist','../../etc/config-wap/hostapd.conf__npp.sh','wpa_state','scan','Not\x20configured..','/api/admin/wirelessSettings','close','body','EOL','exports','/api/admin/wirelessConnections/disconnect','generateHash','trim','sockets','Password','../../models/user','../../socket','wpa_passphrase\x20\x22','sudo','COMPLETED','stderr','\x20\x20\x20\x20ssid=\x22','emit','post','../../models/autonomous','Error\x20disconnecting','Restart\x20Commencing','Username\x20already\x20taken.','platform','filepath','shelljs','../../global/fusionSettings','/api/diagnostics/stop','/etc/hostapd/hostapd.conf','update_config=1\x0a','}\x0a\x0a','utf8','User\x20Unauthenticated','/api/admin/restart','Ip\x20address:\x20','/api/autonomous','AUTHENTICATING','\x09key_mgmt=WPA-PSK\x0a','setHeader','DISCONNECTED','wifi-connection','ssid_set.py','Wifi_NIC','/api/admin/users','status','/api/diagnostics/start','type','Diagnostic\x20tool\x20started\x20successfully','length','../../express','Wifi\x20file\x20not\x20found','diagnostics_running','Wireless\x20interface\x20not\x20found','message','download','readFile','config','get','win32','4WAY_HANDSHAKE','Unable\x20to\x20stop\x20diagnostic\x20tool','fusion_diagnostics_running','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','SSID','ASSOCIATING','\x20\x20\x20\x20key_mgmt=NONE\x0a','spawn','info','python','split','child_process','../../utils/logger','../../diagnostics/runRemi.sh','User\x20created!','./app/filesystem/','Error\x20connecting\x20to\x20','fusion_wifi_access','path','writeFile','attachment;\x20filename=','wpa_passphrase','.crash','../../diagnostics/diagnosticGUI.py','stdout','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','json','ssid','Error\x20starting\x20diagnostic\x20tool','/etc/wpa_supplicant/wpa_supplicant.conf','\x20assigned','indexOf','pipe','\x09ssid=\x22','SocketVariables'];(function(_0x11cabe,_0xa7f382){var _0x219bd0=function(_0x4a78b3){while(--_0x4a78b3){_0x11cabe['push'](_0x11cabe['shift']());}};_0x219bd0(++_0xa7f382);}(_0xa7f3,0xae));var _0x219b=function(_0x11cabe,_0xa7f382){_0x11cabe=_0x11cabe-0x0;var _0x219bd0=_0xa7f3[_0x11cabe];return _0x219bd0;};var fs=require('fs-extra');var mkdirp=require(_0x219b('0x5c'));var os=require('os');var path=require(_0x219b('0x3f'));var shell=require(_0x219b('0xb'));var wpa_cli=require(_0x219b('0x54'));var iwlist=require(_0x219b('0x6c'));var wpa_supplicant=require(_0x219b('0x68'));var spawn=require(_0x219b('0x38'))['spawn'];const config=require(_0x219b('0x2a'));const autonomous=require(_0x219b('0x5'));const logger=require(_0x219b('0x39'));let nicInterface=config[_0x219b('0x2b')](_0x219b('0x1c'));const app=require(_0x219b('0x23'));const User=require(_0x219b('0x7b'));const io=require(_0x219b('0x7c'));const FusionSettings=require(_0x219b('0xc'));module[_0x219b('0x75')]=function(){app[_0x219b('0x4')](_0x219b('0x1d'),_0x24cb1d(),function(_0x51e313,_0x1bff8a){User[_0x219b('0x52')]({'username':_0x51e313[_0x219b('0x73')][_0x219b('0x67')]},async function(_0x3f7a59,_0x546e4d){if(_0x3f7a59)return _0x1bff8a[_0x219b('0x1e')](0x1f4)['send'](_0x3f7a59);if(_0x546e4d){return _0x1bff8a['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x8'));}else{var _0x390af6=new User(_0x51e313[_0x219b('0x73')]);_0x390af6[_0x219b('0x67')]=_0x51e313[_0x219b('0x73')][_0x219b('0x67')];_0x390af6[_0x219b('0x56')]=_0x390af6[_0x219b('0x77')](_0x51e313[_0x219b('0x73')]['password']);_0x390af6[_0x219b('0xa')]=await _0x390af6[_0x219b('0x55')](_0x390af6['username']);_0x390af6[_0x219b('0x51')](function(_0x874048){if(_0x874048)return _0x1bff8a[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x874048);return _0x1bff8a[_0x219b('0x1e')](0xc8)['json']({'serverMessage':_0x219b('0x3b')});});}});});app[_0x219b('0x2b')]('/api/admin/powerOff',function(_0x4178a2,_0x20559c){_0x20559c[_0x219b('0x1e')](0xc8)[_0x219b('0x47')]({'serverMessage':'Shut\x20Down\x20Commencing'});var _0x35d01d=require(_0x219b('0x38'))[_0x219b('0x34')];var _0x213a53=_0x35d01d(_0x219b('0x7e'),['poweroff']);});app[_0x219b('0x2b')](_0x219b('0x13'),function(_0x34330c,_0x3bb31b){_0x3bb31b['status'](0xc8)[_0x219b('0x65')](_0x219b('0x7'));var _0x501bcb=require(_0x219b('0x38'))[_0x219b('0x34')];var _0x5100fd=_0x501bcb(_0x219b('0x7e'),['reboot']);});app[_0x219b('0x2b')](_0x219b('0x71'),function(_0x5451e4,_0x465572){var _0x458a1f;var _0x575011=require('os')[_0x219b('0x74')];var _0x43379a;var _0x5c6966;var _0x372acc={};if(os[_0x219b('0x9')]()==_0x219b('0x2c')){_0x458a1f=_0x219b('0x6d');fs['readFile'](_0x458a1f,'utf8',function(_0x20c298,_0x556023){if(_0x20c298)_0x465572[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x219b('0x24'));_0x43379a=_0x556023[_0x219b('0x37')]('\x0a');for(var _0x6e5f14=0x0;_0x6e5f14<_0x43379a[_0x219b('0x22')];_0x6e5f14++){_0x5c6966=_0x43379a[_0x6e5f14]['split']('=');if(_0x5c6966[0x0]==_0x219b('0x48'))_0x372acc[_0x219b('0x31')]=_0x5c6966[0x1];else if(_0x5c6966[0x0]=='wpa_passphrase')_0x372acc['Password']=_0x5c6966[0x1];}_0x465572['status'](0xc8)[_0x219b('0x47')]({'SSID':_0x372acc[_0x219b('0x31')],'Password':_0x372acc[_0x219b('0x7a')]});});}else{_0x458a1f=_0x219b('0xe');fs[_0x219b('0x29')](_0x458a1f,_0x219b('0x11'),function(_0x30a6df,_0x3ae387){if(_0x30a6df)_0x465572['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x24'));_0x43379a=_0x3ae387[_0x219b('0x37')](_0x575011);for(var _0xa02753=0x0;_0xa02753<_0x43379a[_0x219b('0x22')];_0xa02753++){_0x5c6966=_0x43379a[_0xa02753]['split']('=');if(_0x5c6966[0x0]==_0x219b('0x48'))_0x372acc[_0x219b('0x31')]=_0x5c6966[0x1];else if(_0x5c6966[0x0]==_0x219b('0x42'))_0x372acc[_0x219b('0x7a')]=_0x5c6966[0x1];}if(!_0x372acc[_0x219b('0x31')]){_0x372acc[_0x219b('0x31')]=_0x219b('0x70');_0x372acc[_0x219b('0x7a')]='';}_0x465572[_0x219b('0x1e')](0xc8)[_0x219b('0x47')]({'SSID':_0x372acc[_0x219b('0x31')],'Password':_0x372acc[_0x219b('0x7a')]});});}});app['post'](_0x219b('0x71'),function(_0x13a597,_0x8fc30b){try{var _0xc4f665;var _0x185438;var _0x2ace0a=path['join']('..','..',_0x219b('0x5a'),_0x219b('0x1b'));if(_0x13a597[_0x219b('0x73')][_0x219b('0x48')]==null&&_0x13a597[_0x219b('0x73')][_0x219b('0x56')]==null)_0x185438=['python',_0x2ace0a,'-d'];else _0x185438=[_0x219b('0x36'),_0x2ace0a,'-s',_0x13a597['body']['ssid'],'-p',_0x13a597[_0x219b('0x73')][_0x219b('0x56')]];var _0x43ab32=require(_0x219b('0x38'))['spawn'];python_process=_0x43ab32(_0x219b('0x7e'),_0x185438,{'stdio':_0x219b('0x4d')});python_process['stderr']['on'](_0x219b('0x53'),function(_0x201200){logger[_0x219b('0x35')](String(_0x201200));_0xc4f665=String(_0x201200);});python_process['stdout']['on'](_0x219b('0x72'),function(_0x2ccdf9){if(_0xc4f665)return _0x8fc30b['status'](0x1f4)[_0x219b('0x65')](_0xc4f665);else return _0x8fc30b[_0x219b('0x1e')](0xc8)[_0x219b('0x47')]({'serverMessage':_0x219b('0x59')});});}catch(_0x53c975){logger[_0x219b('0x35')](_0x53c975);return _0x8fc30b[_0x219b('0x1e')](0x1f4)['send'](_0x53c975);}});app[_0x219b('0x2b')](_0x219b('0x60'),function(_0x1b64f2,_0x3db614){if(os[_0x219b('0x9')]()==_0x219b('0x2c')){return _0x3db614['status'](0xc8)[_0x219b('0x65')]();}else{iwlist[_0x219b('0x6f')](nicInterface,function(_0x47a4af,_0x4ee279){if(_0x47a4af)return _0x3db614['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x26'));else return _0x3db614[_0x219b('0x1e')](0xc8)['send']({'serverMessage':_0x219b('0x63'),'data':_0x4ee279});});}});app[_0x219b('0x4')](_0x219b('0x60'),function(_0x3cf87b,_0x1be32e){var _0x47bf96=undefined;var _0x4149ca=_0x219b('0x30')+'update_config=1\x0a'+'country=US\x0a\x0a';var _0x3b2ec6='network={\x0a'+_0x219b('0x4e')+_0x3cf87b[_0x219b('0x73')][_0x219b('0x48')]+'\x22\x0a'+'\x09scan_ssid=1\x0a'+'\x09psk=\x22'+_0x3cf87b['body'][_0x219b('0x56')]+'\x22\x0a'+_0x219b('0x17')+_0x219b('0x10');if(_0x3cf87b[_0x219b('0x73')][_0x219b('0x56')]){_0x47bf96=shell[_0x219b('0x50')](_0x219b('0x7d')+_0x3cf87b[_0x219b('0x73')][_0x219b('0x48')]+'\x22\x20\x22'+_0x3cf87b[_0x219b('0x73')][_0x219b('0x56')]+'\x22',{'silent':!![]})[_0x219b('0x45')];}else{_0x47bf96=_0x219b('0x58')+_0x219b('0x2')+_0x3cf87b[_0x219b('0x73')][_0x219b('0x48')]+'\x22\x0a'+_0x219b('0x33')+'}\x0a';}let _0x381108='';if(_0x3cf87b[_0x219b('0x73')]['hiddenNetwork'])_0x381108=_0x4149ca+_0x3b2ec6;else _0x381108=_0x4149ca+_0x47bf96;fs['writeFile']('/etc/wpa_supplicant/wpa_supplicant.conf',_0x381108,function(_0x4bf07b){if(_0x4bf07b)return _0x1be32e[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x4bf07b);shell[_0x219b('0x50')](_0x219b('0x5f')+nicInterface+_0x219b('0x61'),{'silent':!![]});const _0x221c76=0x3a98;var _0x41c61b=0x12c;var _0x3a7708=0x0;var _0x3d5018=setInterval(function(){var _0x2f456a=['SCANNING',_0x219b('0x2d'),_0x219b('0x16'),_0x219b('0x19'),_0x219b('0x32')];wpa_cli[_0x219b('0x1e')](nicInterface,function(_0x4f640d,_0x10c291){if(_0x4f640d)return _0x1be32e[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x4f640d);if(_0x10c291[_0x219b('0x6e')]==_0x219b('0x0')){if(_0x10c291['ip']){logger[_0x219b('0x35')](_0x219b('0x14')+_0x10c291['ip']+_0x219b('0x4b'));clearInterval(_0x3d5018);FusionSettings[_0x219b('0x4f')][_0x219b('0x3e')]=_0x10c291;io[_0x219b('0x79')][_0x219b('0x3')](_0x219b('0x1a'),_0x10c291);return _0x1be32e['status'](0xc8)[_0x219b('0x47')]({'serverMessage':_0x219b('0x69')+_0x3cf87b[_0x219b('0x73')][_0x219b('0x48')]+_0x219b('0x62')});}else if(_0x3a7708>_0x221c76){logger['info'](_0x219b('0x66'));clearInterval(_0x3d5018);return _0x1be32e['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x3d')+_0x3cf87b[_0x219b('0x73')][_0x219b('0x48')]);}_0x3a7708+=_0x41c61b;}else if(_0x2f456a[_0x219b('0x4c')](_0x10c291['wpa_state'])==-0x1){clearInterval(_0x3d5018);io['sockets'][_0x219b('0x3')](_0x219b('0x1a'),_0x10c291);return _0x1be32e['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x3d')+_0x3cf87b['body'][_0x219b('0x48')]);}});},_0x41c61b);});});app[_0x219b('0x2b')](_0x219b('0x76'),function(_0x4fc0ea,_0x545831){if(os[_0x219b('0x9')]()=='win32'){_0x545831[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')]('Disconnect\x20not\x20available\x20on\x20Windows');}else{var _0x38917b=_0x219b('0x30')+_0x219b('0xf')+'country=US\x0a\x0a';fs[_0x219b('0x40')](_0x219b('0x4a'),_0x38917b,function(_0x277274){if(_0x277274)return _0x545831['status'](0x1f4)[_0x219b('0x65')](_0x277274);shell[_0x219b('0x50')]('sudo\x20wpa_cli\x20-i\x20'+nicInterface+_0x219b('0x61'),{'silent':!![]});var _0x5977fe=setInterval(function(){var _0x3ddd2b=[];wpa_cli[_0x219b('0x1e')](nicInterface,function(_0x447a64,_0x5a948b){if(_0x447a64)return _0x545831[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x447a64);FusionSettings[_0x219b('0x4f')][_0x219b('0x3e')]=_0x5a948b;io['sockets'][_0x219b('0x3')](_0x219b('0x1a'),_0x5a948b);if(_0x5a948b[_0x219b('0x6e')]==_0x219b('0x19')||_0x5a948b['wpa_state']=='INACTIVE'){clearInterval(_0x5977fe);io[_0x219b('0x79')][_0x219b('0x3')](_0x219b('0x1a'),_0x5a948b);return _0x545831['status'](0xc8)['json']({'serverMessage':_0x219b('0x64')});}else if(connectingStatuses[_0x219b('0x4c')](_0x5a948b[_0x219b('0x6e')])==-0x1){clearInterval(_0x5977fe);io[_0x219b('0x79')][_0x219b('0x3')](_0x219b('0x1a'),_0x5a948b);return _0x545831[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x219b('0x6'));}});},0x12c);});}});app['get']('/api/admin/crashReport',function(_0x26ffdd,_0x10037a){var _0x4b36c0=_0x219b('0x43');fs['readdir'](_0x4b36c0,function(_0x503723,_0x2b4969){if(_0x503723)return _0x10037a[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x503723);if(_0x2b4969[_0x219b('0x22')]>0x0){fs[_0x219b('0x29')](_0x4b36c0+'/'+_0x2b4969[0x0],_0x219b('0x11'),function(_0x52124e,_0x4c2315){if(_0x52124e)return status(0x1f4)['send'](_0x219b('0x57'));_0x10037a[_0x219b('0x18')]('Content-disposition',_0x219b('0x41')+_0x2b4969[0x0]);return _0x10037a[_0x219b('0x1e')](0xc8)[_0x219b('0x28')](_0x4b36c0+'/'+_0x2b4969[0x0]);});}else{return _0x10037a[_0x219b('0x1e')](0xc8)[_0x219b('0x65')](_0x219b('0x5b'));}});});var _0x37e5d6=null;app[_0x219b('0x4')](_0x219b('0x1f'),function(_0x14be10,_0x384c2b){if(os[_0x219b('0x9')]()!=_0x219b('0x2c')){_0x37e5d6=spawn(_0x219b('0x7e'),['sh',_0x219b('0x3a'),_0x219b('0x44')]);_0x37e5d6['stdout']['on'](_0x219b('0x53'),function(_0x167310){logger[_0x219b('0x35')](String(_0x167310));});_0x37e5d6[_0x219b('0x1')]['on']('data',function(_0x4eb67e){logger[_0x219b('0x35')](String(_0x4eb67e));});var _0x584b27=0x1;var _0x4a2295=0x3;var _0x579145=setInterval(function(){if(_0x584b27<=_0x4a2295){var _0x146a02=shell[_0x219b('0x50')](_0x219b('0x46'),{'silent':!![]})[_0x219b('0x45')];if(_0x146a02){clearInterval(_0x579145);FusionSettings[_0x219b('0x4f')]['fusion_diagnostics_running']={'process':_0x146a02,'socket':_0x14be10[_0x219b('0x73')]['socketId']};io[_0x219b('0x79')]['emit'](_0x219b('0x25'),FusionSettings[_0x219b('0x4f')][_0x219b('0x2f')]);return _0x384c2b['status'](0xc8)[_0x219b('0x47')]({'serverMessage':_0x219b('0x21')});}else{_0x584b27++;}}else{clearInterval(_0x579145);return _0x384c2b[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x219b('0x49'));}},0x12c);}else{return _0x384c2b[_0x219b('0x1e')](0xc8)[_0x219b('0x47')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});app[_0x219b('0x2b')](_0x219b('0xd'),function(_0x337d5e,_0x361e45){if(os['platform']()!=_0x219b('0x2c')){shell[_0x219b('0x50')](_0x219b('0x6b'),{'silent':!![]});shell[_0x219b('0x50')](_0x219b('0x46'),{'silent':!![]},function(_0x33c46e,_0x4071a2,_0x5bd6d5){(function(_0x30daf0){var _0x3c1c7e=_0x30daf0[_0x219b('0x78')]();if(_0x3c1c7e){return _0x361e45['status'](0x1f4)[_0x219b('0x65')](_0x219b('0x2e'));}else{FusionSettings[_0x219b('0x4f')][_0x219b('0x2f')]=null;io[_0x219b('0x79')][_0x219b('0x3')](_0x219b('0x25'),FusionSettings['SocketVariables']['fusion_diagnostics_running']);_0x37e5d6=null;return _0x361e45['status'](0xc8)[_0x219b('0x47')]({'serverMessage':_0x219b('0x5e')});}}(_0x4071a2[_0x219b('0x78')]()));});}else{return _0x361e45[_0x219b('0x1e')](0xc8)[_0x219b('0x47')]({'serverMessage':_0x219b('0x6a')});}});app[_0x219b('0x2b')]('/api/autonomous',async function(_0x213c76,_0x30d9b7){try{const _0x34f224=await autonomous[_0x219b('0x52')]()['exec']();return _0x30d9b7[_0x219b('0x47')](_0x34f224);}catch(_0x3f2862){return _0x30d9b7[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](error[_0x219b('0x27')]);}});app[_0x219b('0x4')](_0x219b('0x15'),async function(_0x19214c,_0x2fca3e){try{const _0x44bbe4=await autonomous['findOneAndUpdate']({},_0x19214c[_0x219b('0x73')]);return _0x2fca3e['status'](0xc8)[_0x219b('0x47')]({'serverMessage':'Updated\x20successfully'});}catch(_0x3a289f){return _0x2fca3e[_0x219b('0x1e')](0x1f4)['send'](_0x3a289f['message']);}});app[_0x219b('0x4')]('/api/autonomousPrograms',async function(_0x7d2b38,_0x1f4de0){try{const _0x6c9735=_0x7d2b38[_0x219b('0x73')][_0x219b('0x67')];const _0x575227=_0x7d2b38[_0x219b('0x73')][_0x219b('0x20')];const _0x2cc1ec=await fs[_0x219b('0x5d')](_0x219b('0x3c')+_0x6c9735+'/'+_0x575227);return _0x1f4de0['status'](0xc8)[_0x219b('0x47')]({'files':_0x2cc1ec});}catch(_0x33d200){return _0x1f4de0[_0x219b('0x1e')](0x1f4)[_0x219b('0x65')](_0x33d200['message']);}});function _0x24cb1d(){return function(_0x45f35c,_0x4187eb,_0x4c3f4c){if(_0x45f35c['isAuthenticated']()){return _0x4c3f4c();}else{_0x4187eb[_0x219b('0x1e')](0x191)[_0x219b('0x65')](_0x219b('0x12'));}};}}();