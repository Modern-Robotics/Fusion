var _0x568a=['/api/admin/restart','findOne','wpa_passphrase','update_config=1\x0a','SSID','win32','Retreived\x20wireless\x20connections','../../global/fusionSettings','trim','data','DISCONNECTED','info','/api/admin/wirelessConnections','/api/admin/wirelessSettings','Error\x20starting\x20diagnostic\x20tool','../../models/autonomous','diagnostics_running','Error\x20reading\x20crash\x20file','message','poweroff','send','fusion_wifi_access','join','attachment;\x20filename=','isAuthenticated','fs-extra','child_process','\x20successfully','Error\x20connecting\x20to\x20','\x20\x20\x20\x20ssid=\x22','/api/admin/users','Took\x20too\x20long\x20to\x20connect.\x20Something\x20must\x20be\x20wrong.','python','}\x0a\x0a','ASSOCIATING','../../utils/logger','username','Not\x20configured..','../../socket','\x09key_mgmt=WPA-PSK\x0a','/api/autonomous','../../diagnostics/runRemi.sh','\x20\x20\x20\x20key_mgmt=NONE\x0a','\x09ssid=\x22','Error\x20disconnecting','scan','Content-disposition','Username\x20already\x20taken.','INACTIVE','stderr','/api/diagnostics/stop','json','Disconnect\x20not\x20available\x20on\x20Windows','split','password','readdir','body','User\x20Unauthenticated','platform','\x20assigned','Wifi_NIC','reboot','get','download','wireless-tools/wpa_supplicant','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','Wifi\x20file\x20not\x20found','status','Successfully\x20changed\x20wifi\x20settings','\x09psk=\x22','generateFileSystem','ssid_set.py','type','wireless-tools/iwlist','/etc/hostapd/hostapd.conf','readFile','country=US\x0a\x0a','/api/admin/wirelessConnections/disconnect','utf8','stdout','Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows','config','\x20reconfigure','Restart\x20Commencing','indexOf','etc','length','SocketVariables','fusion_diagnostics_running','pipe','wifi-connection','SCANNING','Diagnostic\x20tool\x20started\x20successfully','mkdirp','exports','AUTHENTICATING','Ip\x20address:\x20','../../etc/config-wap/hostapd.conf__npp.sh','\x22\x20\x22','Password','wpa_passphrase\x20\x22','spawn','path','ssid','.crash','EOL','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a','writeFile','sockets','sudo','exec','/api/admin/powerOff','save','wpa_state','No\x20crash\x20files\x20found','/api/diagnostics/start','Connected\x20to\x20','network={\x0a','close','hiddenNetwork','Wireless\x20interface\x20not\x20found','/etc/wpa_supplicant/wpa_supplicant.conf','generateHash','User\x20created!','./app/filesystem/','Unable\x20to\x20stop\x20diagnostic\x20tool','post','sudo\x20wpa_cli\x20-i\x20','wireless-tools/wpa_cli','emit','shelljs','filepath'];(function(_0x1e5ae5,_0x568a1d){var _0x42dd27=function(_0xed315f){while(--_0xed315f){_0x1e5ae5['push'](_0x1e5ae5['shift']());}};_0x42dd27(++_0x568a1d);}(_0x568a,0xe3));var _0x42dd=function(_0x1e5ae5,_0x568a1d){_0x1e5ae5=_0x1e5ae5-0x0;var _0x42dd27=_0x568a[_0x1e5ae5];return _0x42dd27;};var fs=require(_0x42dd('0x40'));var mkdirp=require(_0x42dd('0x84'));var os=require('os');var path=require(_0x42dd('0x8'));var shell=require(_0x42dd('0x25'));var wpa_cli=require(_0x42dd('0x23'));var iwlist=require(_0x42dd('0x70'));var wpa_supplicant=require(_0x42dd('0x67'));var spawn=require('child_process')['spawn'];const config=require(_0x42dd('0x78'));const autonomous=require(_0x42dd('0x36'));const logger=require(_0x42dd('0x4a'));let nicInterface=config['get'](_0x42dd('0x63'));const app=require('../../express');const User=require('../../models/user');const io=require(_0x42dd('0x4d'));const FusionSettings=require(_0x42dd('0x2e'));module[_0x42dd('0x0')]=function(){app[_0x42dd('0x21')](_0x42dd('0x45'),_0x4e8bfb(),function(_0x43f1ad,_0x21c8b6){User['findOne']({'username':_0x43f1ad[_0x42dd('0x5f')][_0x42dd('0x4b')]},async function(_0x4b5015,_0x27489c){if(_0x4b5015)return _0x21c8b6[_0x42dd('0x6a')](0x1f4)['send'](_0x4b5015);if(_0x27489c){return _0x21c8b6[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x56'));}else{var _0x27b0dd=new User(_0x43f1ad['body']);_0x27b0dd[_0x42dd('0x4b')]=_0x43f1ad['body'][_0x42dd('0x4b')];_0x27b0dd[_0x42dd('0x5d')]=_0x27b0dd[_0x42dd('0x1d')](_0x43f1ad[_0x42dd('0x5f')]['password']);_0x27b0dd[_0x42dd('0x26')]=await _0x27b0dd[_0x42dd('0x6d')](_0x27b0dd[_0x42dd('0x4b')]);_0x27b0dd[_0x42dd('0x13')](function(_0x1f6253){if(_0x1f6253)return _0x21c8b6[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x1f6253);return _0x21c8b6[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':_0x42dd('0x1e')});});}});});app['get'](_0x42dd('0x12'),function(_0x29b0b6,_0x33e0f8){_0x33e0f8[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':'Shut\x20Down\x20Commencing'});var _0x5b011=require(_0x42dd('0x41'))[_0x42dd('0x7')];var _0x23fc83=_0x5b011(_0x42dd('0x10'),[_0x42dd('0x3a')]);});app[_0x42dd('0x65')](_0x42dd('0x27'),function(_0x140b48,_0x43a279){_0x43a279[_0x42dd('0x6a')](0xc8)['send'](_0x42dd('0x7a'));var _0x561544=require(_0x42dd('0x41'))['spawn'];var _0x136e26=_0x561544('sudo',[_0x42dd('0x64')]);});app[_0x42dd('0x65')]('/api/admin/wirelessSettings',function(_0x5c9e48,_0x3fb003){var _0x434591;var _0x1d4cd5=require('os')[_0x42dd('0xb')];var _0x21f508;var _0x13aa4d;var _0x394edb={};if(os[_0x42dd('0x61')]()==_0x42dd('0x2c')){_0x434591=_0x42dd('0x3');fs['readFile'](_0x434591,_0x42dd('0x75'),function(_0x13aff8,_0x539925){if(_0x13aff8)_0x3fb003[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x69'));_0x21f508=_0x539925[_0x42dd('0x5c')]('\x0a');for(var _0x243809=0x0;_0x243809<_0x21f508[_0x42dd('0x7d')];_0x243809++){_0x13aa4d=_0x21f508[_0x243809][_0x42dd('0x5c')]('=');if(_0x13aa4d[0x0]==_0x42dd('0x9'))_0x394edb[_0x42dd('0x2b')]=_0x13aa4d[0x1];else if(_0x13aa4d[0x0]=='wpa_passphrase')_0x394edb[_0x42dd('0x5')]=_0x13aa4d[0x1];}_0x3fb003[_0x42dd('0x6a')](0xc8)['json']({'SSID':_0x394edb['SSID'],'Password':_0x394edb[_0x42dd('0x5')]});});}else{_0x434591=_0x42dd('0x71');fs[_0x42dd('0x72')](_0x434591,'utf8',function(_0x44b743,_0x24fbbb){if(_0x44b743)_0x3fb003[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x69'));_0x21f508=_0x24fbbb[_0x42dd('0x5c')](_0x1d4cd5);for(var _0x1724b4=0x0;_0x1724b4<_0x21f508[_0x42dd('0x7d')];_0x1724b4++){_0x13aa4d=_0x21f508[_0x1724b4][_0x42dd('0x5c')]('=');if(_0x13aa4d[0x0]==_0x42dd('0x9'))_0x394edb[_0x42dd('0x2b')]=_0x13aa4d[0x1];else if(_0x13aa4d[0x0]==_0x42dd('0x29'))_0x394edb[_0x42dd('0x5')]=_0x13aa4d[0x1];}if(!_0x394edb['SSID']){_0x394edb['SSID']=_0x42dd('0x4c');_0x394edb[_0x42dd('0x5')]='';}_0x3fb003[_0x42dd('0x6a')](0xc8)['json']({'SSID':_0x394edb[_0x42dd('0x2b')],'Password':_0x394edb[_0x42dd('0x5')]});});}});app[_0x42dd('0x21')](_0x42dd('0x34'),function(_0xd6536,_0x1077d2){try{var _0x2ceeb3;var _0x2c6aa6;var _0x399eb1=path[_0x42dd('0x3d')]('..','..',_0x42dd('0x7c'),_0x42dd('0x6e'));if(_0xd6536[_0x42dd('0x5f')]['ssid']==null&&_0xd6536[_0x42dd('0x5f')]['password']==null)_0x2c6aa6=[_0x42dd('0x47'),_0x399eb1,'-d'];else _0x2c6aa6=['python',_0x399eb1,'-s',_0xd6536[_0x42dd('0x5f')][_0x42dd('0x9')],'-p',_0xd6536[_0x42dd('0x5f')][_0x42dd('0x5d')]];var _0x3bb83e=require(_0x42dd('0x41'))[_0x42dd('0x7')];python_process=_0x3bb83e('sudo',_0x2c6aa6,{'stdio':_0x42dd('0x80')});python_process['stderr']['on']('data',function(_0x25a772){logger[_0x42dd('0x32')](String(_0x25a772));_0x2ceeb3=String(_0x25a772);});python_process[_0x42dd('0x76')]['on'](_0x42dd('0x19'),function(_0x1940ad){if(_0x2ceeb3)return _0x1077d2[_0x42dd('0x6a')](0x1f4)['send'](_0x2ceeb3);else return _0x1077d2['status'](0xc8)[_0x42dd('0x5a')]({'serverMessage':_0x42dd('0x6b')});});}catch(_0x2cce51){logger[_0x42dd('0x32')](_0x2cce51);return _0x1077d2[_0x42dd('0x6a')](0x1f4)['send'](_0x2cce51);}});app[_0x42dd('0x65')](_0x42dd('0x33'),function(_0xfeae51,_0x5d88b0){if(os[_0x42dd('0x61')]()==_0x42dd('0x2c')){return _0x5d88b0[_0x42dd('0x6a')](0xc8)['send']();}else{iwlist[_0x42dd('0x54')](nicInterface,function(_0x514933,_0x1b4ab5){if(_0x514933)return _0x5d88b0['status'](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x1b'));else return _0x5d88b0[_0x42dd('0x6a')](0xc8)[_0x42dd('0x3b')]({'serverMessage':_0x42dd('0x2d'),'data':_0x1b4ab5});});}});app[_0x42dd('0x21')]('/api/admin/wirelessConnections',function(_0x5db4ad,_0x3323e6){var _0x2b7120=undefined;var _0x4caede='ctrl_interface=DIR=/var/run/wpa_supplicant\x20GROUP=netdev\x0a'+_0x42dd('0x2a')+_0x42dd('0x73');var _0x3a7dd2=_0x42dd('0x18')+_0x42dd('0x52')+_0x5db4ad[_0x42dd('0x5f')][_0x42dd('0x9')]+'\x22\x0a'+'\x09scan_ssid=1\x0a'+_0x42dd('0x6c')+_0x5db4ad[_0x42dd('0x5f')][_0x42dd('0x5d')]+'\x22\x0a'+_0x42dd('0x4e')+_0x42dd('0x48');if(_0x5db4ad['body'][_0x42dd('0x5d')]){_0x2b7120=shell['exec'](_0x42dd('0x6')+_0x5db4ad['body']['ssid']+_0x42dd('0x4')+_0x5db4ad['body'][_0x42dd('0x5d')]+'\x22',{'silent':!![]})['stdout'];}else{_0x2b7120=_0x42dd('0x18')+_0x42dd('0x44')+_0x5db4ad[_0x42dd('0x5f')][_0x42dd('0x9')]+'\x22\x0a'+_0x42dd('0x51')+'}\x0a';}let _0x1f9811='';if(_0x5db4ad['body'][_0x42dd('0x1a')])_0x1f9811=_0x4caede+_0x3a7dd2;else _0x1f9811=_0x4caede+_0x2b7120;fs['writeFile'](_0x42dd('0x1c'),_0x1f9811,function(_0x327793){if(_0x327793)return _0x3323e6[_0x42dd('0x6a')](0x1f4)['send'](_0x327793);shell[_0x42dd('0x11')](_0x42dd('0x22')+nicInterface+_0x42dd('0x79'),{'silent':!![]});const _0x44b7e9=0x3a98;var _0x3b70d4=0x12c;var _0x3dd9aa=0x0;var _0xaaccf9=setInterval(function(){var _0x4f40f7=[_0x42dd('0x82'),'4WAY_HANDSHAKE',_0x42dd('0x1'),_0x42dd('0x31'),_0x42dd('0x49')];wpa_cli[_0x42dd('0x6a')](nicInterface,function(_0x39d443,_0x4c3269){if(_0x39d443)return _0x3323e6['status'](0x1f4)['send'](_0x39d443);if(_0x4c3269[_0x42dd('0x14')]=='COMPLETED'){if(_0x4c3269['ip']){logger[_0x42dd('0x32')](_0x42dd('0x2')+_0x4c3269['ip']+_0x42dd('0x62'));clearInterval(_0xaaccf9);FusionSettings[_0x42dd('0x7e')][_0x42dd('0x3c')]=_0x4c3269;io['sockets']['emit'](_0x42dd('0x81'),_0x4c3269);return _0x3323e6[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':_0x42dd('0x17')+_0x5db4ad[_0x42dd('0x5f')][_0x42dd('0x9')]+_0x42dd('0x42')});}else if(_0x3dd9aa>_0x44b7e9){logger[_0x42dd('0x32')](_0x42dd('0x46'));clearInterval(_0xaaccf9);return _0x3323e6['status'](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x43')+_0x5db4ad[_0x42dd('0x5f')]['ssid']);}_0x3dd9aa+=_0x3b70d4;}else if(_0x4f40f7[_0x42dd('0x7b')](_0x4c3269['wpa_state'])==-0x1){clearInterval(_0xaaccf9);io[_0x42dd('0xf')][_0x42dd('0x24')]('wifi-connection',_0x4c3269);return _0x3323e6[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x43')+_0x5db4ad[_0x42dd('0x5f')][_0x42dd('0x9')]);}});},_0x3b70d4);});});app[_0x42dd('0x65')](_0x42dd('0x74'),function(_0x45f508,_0x27c980){if(os['platform']()==_0x42dd('0x2c')){_0x27c980[_0x42dd('0x6a')](0x1f4)['send'](_0x42dd('0x5b'));}else{var _0x355ec0=_0x42dd('0xd')+_0x42dd('0x2a')+_0x42dd('0x73');fs[_0x42dd('0xe')](_0x42dd('0x1c'),_0x355ec0,function(_0x2f34e9){if(_0x2f34e9)return _0x27c980['status'](0x1f4)[_0x42dd('0x3b')](_0x2f34e9);shell[_0x42dd('0x11')](_0x42dd('0x22')+nicInterface+_0x42dd('0x79'),{'silent':!![]});var _0x1f7af6=setInterval(function(){var _0x1924e1=[];wpa_cli['status'](nicInterface,function(_0x463ea6,_0x798e0b){if(_0x463ea6)return _0x27c980['status'](0x1f4)[_0x42dd('0x3b')](_0x463ea6);FusionSettings['SocketVariables']['fusion_wifi_access']=_0x798e0b;io[_0x42dd('0xf')][_0x42dd('0x24')](_0x42dd('0x81'),_0x798e0b);if(_0x798e0b[_0x42dd('0x14')]==_0x42dd('0x31')||_0x798e0b[_0x42dd('0x14')]==_0x42dd('0x57')){clearInterval(_0x1f7af6);io['sockets']['emit'](_0x42dd('0x81'),_0x798e0b);return _0x27c980[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':'Disconnected\x20successfully'});}else if(connectingStatuses[_0x42dd('0x7b')](_0x798e0b[_0x42dd('0x14')])==-0x1){clearInterval(_0x1f7af6);io[_0x42dd('0xf')][_0x42dd('0x24')](_0x42dd('0x81'),_0x798e0b);return _0x27c980[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x53'));}});},0x12c);});}});app[_0x42dd('0x65')]('/api/admin/crashReport',function(_0x44ef16,_0x27de3e){var _0x1e342c=_0x42dd('0xa');fs[_0x42dd('0x5e')](_0x1e342c,function(_0x3764fc,_0x13f5ac){if(_0x3764fc)return _0x27de3e[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x3764fc);if(_0x13f5ac[_0x42dd('0x7d')]>0x0){fs[_0x42dd('0x72')](_0x1e342c+'/'+_0x13f5ac[0x0],_0x42dd('0x75'),function(_0x127ee0,_0x268c4f){if(_0x127ee0)return status(0x1f4)[_0x42dd('0x3b')](_0x42dd('0x38'));_0x27de3e['setHeader'](_0x42dd('0x55'),_0x42dd('0x3e')+_0x13f5ac[0x0]);return _0x27de3e[_0x42dd('0x6a')](0xc8)[_0x42dd('0x66')](_0x1e342c+'/'+_0x13f5ac[0x0]);});}else{return _0x27de3e[_0x42dd('0x6a')](0xc8)[_0x42dd('0x3b')](_0x42dd('0x15'));}});});var _0x4caeb1=null;app[_0x42dd('0x21')](_0x42dd('0x16'),function(_0x15250f,_0x45a69d){if(os[_0x42dd('0x61')]()!=_0x42dd('0x2c')){_0x4caeb1=spawn(_0x42dd('0x10'),['sh',_0x42dd('0x50'),'../../diagnostics/diagnosticGUI.py']);_0x4caeb1[_0x42dd('0x76')]['on'](_0x42dd('0x30'),function(_0x432543){logger[_0x42dd('0x32')](String(_0x432543));});_0x4caeb1[_0x42dd('0x58')]['on']('data',function(_0x1adab9){logger[_0x42dd('0x32')](String(_0x1adab9));});var _0x1aec25=0x1;var _0x14963e=0x3;var _0x569339=setInterval(function(){if(_0x1aec25<=_0x14963e){var _0x47b353=shell[_0x42dd('0x11')]('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x42dd('0x76')];if(_0x47b353){clearInterval(_0x569339);FusionSettings[_0x42dd('0x7e')][_0x42dd('0x7f')]={'process':_0x47b353,'socket':_0x15250f[_0x42dd('0x5f')]['socketId']};io[_0x42dd('0xf')]['emit'](_0x42dd('0x37'),FusionSettings[_0x42dd('0x7e')][_0x42dd('0x7f')]);return _0x45a69d[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':_0x42dd('0x83')});}else{_0x1aec25++;}}else{clearInterval(_0x569339);return _0x45a69d[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x35'));}},0x12c);}else{return _0x45a69d[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':'Diagnostic\x20tool\x20does\x20not\x20run\x20on\x20windows'});}});app['get'](_0x42dd('0x59'),function(_0x5ed2a1,_0x4f71f6){if(os[_0x42dd('0x61')]()!='win32'){shell[_0x42dd('0x11')](_0x42dd('0xc'),{'silent':!![]});shell['exec'](_0x42dd('0x68'),{'silent':!![]},function(_0x4a2475,_0x254425,_0x133a06){(function(_0x194795){var _0x599f20=_0x194795[_0x42dd('0x2f')]();if(_0x599f20){return _0x4f71f6[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x42dd('0x20'));}else{FusionSettings['SocketVariables'][_0x42dd('0x7f')]=null;io[_0x42dd('0xf')][_0x42dd('0x24')](_0x42dd('0x37'),FusionSettings['SocketVariables'][_0x42dd('0x7f')]);_0x4caeb1=null;return _0x4f71f6[_0x42dd('0x6a')](0xc8)['json']({'serverMessage':'Diagnostic\x20tool\x20stopped\x20successfully'});}}(_0x254425[_0x42dd('0x2f')]()));});}else{return _0x4f71f6['status'](0xc8)['json']({'serverMessage':_0x42dd('0x77')});}});app[_0x42dd('0x65')]('/api/autonomous',async function(_0x431b2e,_0x3e8f56){try{const _0x376f7d=await autonomous[_0x42dd('0x28')]()[_0x42dd('0x11')]();return _0x3e8f56['json'](_0x376f7d);}catch(_0xa8b868){return _0x3e8f56[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](error[_0x42dd('0x39')]);}});app[_0x42dd('0x21')](_0x42dd('0x4f'),async function(_0x1fb38a,_0x523724){try{const _0x228b42=await autonomous['findOneAndUpdate']({},_0x1fb38a['body']);return _0x523724[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'serverMessage':'Updated\x20successfully'});}catch(_0x190c9a){return _0x523724['status'](0x1f4)['send'](_0x190c9a[_0x42dd('0x39')]);}});app[_0x42dd('0x21')]('/api/autonomousPrograms',async function(_0x5a58c1,_0x4a1079){try{const _0x136e50=_0x5a58c1[_0x42dd('0x5f')][_0x42dd('0x4b')];const _0x28fb0b=_0x5a58c1[_0x42dd('0x5f')][_0x42dd('0x6f')];const _0x4a5a39=await fs['readdir'](_0x42dd('0x1f')+_0x136e50+'/'+_0x28fb0b);return _0x4a1079[_0x42dd('0x6a')](0xc8)[_0x42dd('0x5a')]({'files':_0x4a5a39});}catch(_0x4bd312){return _0x4a1079[_0x42dd('0x6a')](0x1f4)[_0x42dd('0x3b')](_0x4bd312[_0x42dd('0x39')]);}});function _0x4e8bfb(){return function(_0x22d6f9,_0x767b2d,_0xc9c5b5){if(_0x22d6f9[_0x42dd('0x3f')]()){return _0xc9c5b5();}else{_0x767b2d[_0x42dd('0x6a')](0x191)[_0x42dd('0x3b')](_0x42dd('0x60'));}};}}();