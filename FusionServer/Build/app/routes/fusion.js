var _0x195b=['data','log','update-output','stderr','close','Update\x20Finished!','send','/api/fusion/restore','spawn','emit','Restore\x20Finished!','get','git','--no-merges','split','join','json','/api/cookie','status','user','isAuthenticated','User\x20Unauthenticated','/api/fusion/update','child_process','scripts/updateFusion.sh','sudo','pipe','stdout'];(function(_0x1944cc,_0x1c7c0b){var _0x3d657b=function(_0x4d925b){while(--_0x4d925b){_0x1944cc['push'](_0x1944cc['shift']());}};_0x3d657b(++_0x1c7c0b);}(_0x195b,0xa2));var _0x2676=function(_0x177eec,_0x424aa0){_0x177eec=_0x177eec-0x0;var _0x556a06=_0x195b[_0x177eec];return _0x556a06;};module['exports']=function(_0x5d9af5,_0x525eee){_0x5d9af5['get'](_0x2676('0x0'),_0x110156(),function(_0x2e2ce7,_0x2bbb2c){try{var _0x1f6d9e=require(_0x2676('0x1'))['spawn'];var _0x4f6b1d=_0x2676('0x2');var _0x29a779=_0x1f6d9e(_0x2676('0x3'),['bash',_0x4f6b1d],{'stdio':_0x2676('0x4')});_0x29a779[_0x2676('0x5')]['on'](_0x2676('0x6'),function(_0x36aaf9){console[_0x2676('0x7')](String(_0x36aaf9));_0x525eee['emit'](_0x2676('0x8'),{'output':String(_0x36aaf9)});});_0x29a779[_0x2676('0x9')]['on']('data',function(_0xe3392d){console['log'](String(_0xe3392d));_0x525eee['emit'](_0x2676('0x8'),{'output':String(_0xe3392d)});});_0x29a779[_0x2676('0x5')]['on'](_0x2676('0xa'),function(_0x5d6c8b){console[_0x2676('0x7')](String(_0x2676('0xb')));});}catch(_0xf13b6f){console[_0x2676('0x7')](_0xf13b6f);}_0x2bbb2c['status'](0xc8)[_0x2676('0xc')]('Update\x20starting');});_0x5d9af5['get'](_0x2676('0xd'),_0x110156(),function(_0xdb910d,_0x2aa13e){try{var _0x563038=require(_0x2676('0x1'))[_0x2676('0xe')];var _0x31174f='scripts/restoreFusion.sh';var _0x597a27=_0x563038('sudo',['bash',_0x31174f],{'stdio':_0x2676('0x4')});_0x597a27[_0x2676('0x5')]['on'](_0x2676('0x6'),function(_0x2120cc){console[_0x2676('0x7')](String(_0x2120cc));_0x525eee[_0x2676('0xf')]('update-output',{'output':String(_0x2120cc)});});_0x597a27['stderr']['on'](_0x2676('0x6'),function(_0x303a0f){console[_0x2676('0x7')](String(_0x303a0f));_0x525eee['emit'](_0x2676('0x8'),{'output':String(_0x303a0f)});});_0x597a27[_0x2676('0x5')]['on']('close',function(_0x199014){console[_0x2676('0x7')](String(_0x2676('0x10')));});}catch(_0x5d1a78){console['log'](_0x5d1a78);}_0x2aa13e['status'](0xc8)['send']('Restore\x20starting');});_0x5d9af5[_0x2676('0x11')]('/api/fusion/releaseNotes',function(_0x5a80f6,_0x346580){var _0x2ef3f5=require(_0x2676('0x1'))[_0x2676('0xe')];var _0x2f4040='';var _0xc485bd=!![];var _0x41f244=_0x2ef3f5(_0x2676('0x12'),['log','--pretty=format:\x22[%cd]\x20(%h)\x20:\x20%s\x22','--date=short',_0x2676('0x13')],{'stdio':_0x2676('0x4')});_0x41f244[_0x2676('0x5')]['on']('data',function(_0x3a16b9){_0x2f4040+=_0x3a16b9+'\x0a';});_0x41f244[_0x2676('0x9')]['on'](_0x2676('0x6'),function(_0x47360c){console[_0x2676('0x7')](String(_0x47360c));_0xc485bd=![];});_0x41f244[_0x2676('0x5')]['on'](_0x2676('0xa'),function(_0x14e252){var _0x49b8a6=_0x2f4040[_0x2676('0x14')]('\x0a\x0a');for(var _0x42bfc6=0x0;_0x42bfc6<_0x49b8a6['length'];_0x42bfc6++){_0x49b8a6[_0x42bfc6]=_0x49b8a6[_0x42bfc6]['replace'](/"/g,'');}_0x2f4040=_0x49b8a6[_0x2676('0x15')]('\x0a');if(_0xc485bd)_0x346580['status'](0xc8)[_0x2676('0x16')]({'data':_0x2f4040});else _0x346580['status'](0x1f4)['send']('Error\x20Reading\x20changelog');});});_0x5d9af5[_0x2676('0x11')](_0x2676('0x17'),_0x110156(),function(_0x300e82,_0xa168c6){_0xa168c6[_0x2676('0x18')](0xc8)[_0x2676('0xc')](_0x300e82[_0x2676('0x19')]);});function _0x110156(){return function(_0x258c4e,_0x2015a4,_0x4495e6){if(_0x258c4e[_0x2676('0x1a')]()){return _0x4495e6();}else{_0x2015a4['status'](0x191)[_0x2676('0xc')](_0x2676('0x1b'));}};}};