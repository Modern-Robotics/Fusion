var _0x27e8=['platform','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','json','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','process\x20not\x20found','isAuthenticated','stderr','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','fusion_dataLogger_running','win32','info','Error\x20starting\x20data\x20logger','../../utils/logger','../../logging/dataLogger.py','shelljs','status','../../socket','../../express','child_process','sudo','dataLogger_running','username','send','error','trim','SocketVariables','sockets','emit','stdout','spawn','data','get','post','body','Data\x20logger\x20stopped\x20successfully','Data\x20logger\x20started\x20successfully','exec','Unable\x20to\x20stop\x20data\x20logger','process\x20found','socketId','../../global/fusionSettings'];(function(_0x4f61c0,_0x27e8d6){var _0x5a799a=function(_0x191bdf){while(--_0x191bdf){_0x4f61c0['push'](_0x4f61c0['shift']());}};_0x5a799a(++_0x27e8d6);}(_0x27e8,0x1b1));var _0x5a79=function(_0x4f61c0,_0x27e8d6){_0x4f61c0=_0x4f61c0-0x0;var _0x5a799a=_0x27e8[_0x4f61c0];return _0x5a799a;};var os=require('os');var spawn=require(_0x5a79('0x24'))[_0x5a79('0x6')];var shell=require(_0x5a79('0x20'));const logger=require(_0x5a79('0x1e'));const app=require(_0x5a79('0x23'));const io=require(_0x5a79('0x22'));const FusionSettings=require(_0x5a79('0x11'));module['exports']=function(){var _0x8d0be7=null;app['route']('/api/util/dataLogger/start')[_0x5a79('0x9')](function(_0x3cb780,_0x1bce58){if(os[_0x5a79('0x12')]()!='win32'){_0x8d0be7=spawn(_0x5a79('0x25'),['sh','../../logging/runRemi.sh',_0x5a79('0x1f'),_0x3cb780['user'][_0x5a79('0x27')]]);_0x8d0be7[_0x5a79('0x5')]['on']('data',function(_0x23c902){logger[_0x5a79('0x1c')](String(_0x23c902));});_0x8d0be7[_0x5a79('0x18')]['on'](_0x5a79('0x7'),function(_0x170dc8){logger[_0x5a79('0x0')](String(_0x170dc8));});var _0x83444c=0x1;var _0x53b51=0x3;var _0x11213f=setInterval(function(){if(_0x83444c<=_0x53b51){var _0x32c65f=shell['exec'](_0x5a79('0x15'),{'silent':!![]})['stdout'];logger[_0x5a79('0x1c')]('process\x20number\x20'+_0x32c65f);if(_0x32c65f){logger[_0x5a79('0x1c')](_0x5a79('0xf'));clearInterval(_0x11213f);FusionSettings[_0x5a79('0x2')]['fusion_dataLogger_running']={'process':_0x32c65f,'socket':_0x3cb780[_0x5a79('0xa')][_0x5a79('0x10')]};io[_0x5a79('0x3')][_0x5a79('0x4')](_0x5a79('0x26'),FusionSettings[_0x5a79('0x2')][_0x5a79('0x1a')]);return _0x1bce58[_0x5a79('0x21')](0xc8)[_0x5a79('0x14')]({'serverMessage':_0x5a79('0xc')});}else{logger[_0x5a79('0x1c')](_0x5a79('0x16'));_0x83444c++;}}else{clearInterval(_0x11213f);return _0x1bce58[_0x5a79('0x21')](0x1f4)[_0x5a79('0x28')](_0x5a79('0x1d'));}},0x12c);}else{return _0x1bce58['status'](0x1f4)[_0x5a79('0x14')]({'serverMessage':'Data\x20Logger\x20does\x20not\x20run\x20on\x20windows'});}});app['route']('/api/util/dataLogger/stop')[_0x5a79('0x8')](function(_0x2aa9fa,_0x15d5c2){if(os[_0x5a79('0x12')]()!=_0x5a79('0x1b')){shell['exec'](_0x5a79('0x19'),{'silent':!![]});shell[_0x5a79('0xd')](_0x5a79('0x15'),{'silent':!![]},function(_0x1c4213,_0x3b0bc8,_0x48d86b){(function(_0x59b52a){var _0x2d8e20=_0x59b52a[_0x5a79('0x1')]();if(_0x2d8e20){return _0x15d5c2[_0x5a79('0x21')](0x1f4)['send'](_0x5a79('0xe'));}else{FusionSettings[_0x5a79('0x2')][_0x5a79('0x1a')]=null;io[_0x5a79('0x3')][_0x5a79('0x4')](_0x5a79('0x26'),FusionSettings['SocketVariables'][_0x5a79('0x1a')]);_0x8d0be7=null;return _0x15d5c2[_0x5a79('0x21')](0xc8)['json']({'serverMessage':_0x5a79('0xb')});}}(_0x3b0bc8['trim']()));});}else{return _0x15d5c2[_0x5a79('0x21')](0xc8)['json']({'serverMessage':_0x5a79('0x13')});}});function _0x36eafe(){return function(_0x2c3958,_0x278b84,_0x18e2b4){if(_0x2c3958[_0x5a79('0x17')]()){return _0x18e2b4();}else{_0x278b84[_0x5a79('0x21')](0x191)[_0x5a79('0x28')]('User\x20Unauthenticated');}};}}();