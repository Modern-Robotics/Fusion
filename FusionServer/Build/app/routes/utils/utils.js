var _0x2c52=['username','user','info','win32','shelljs','Data\x20logger\x20stopped\x20successfully','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','SocketVariables','error','sockets','data','../../socket','/api/util/dataLogger/stop','Data\x20logger\x20started\x20successfully','child_process','platform','socketId','send','Error\x20starting\x20data\x20logger','status','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','route','exec','../../logging/runRemi.sh','isAuthenticated','process\x20number\x20','trim','fusion_dataLogger_running','stdout','../../express','sudo','User\x20Unauthenticated','body','json','dataLogger_running','stderr','process\x20found','../../global/fusionSettings'];(function(_0x27018c,_0x2c5281){var _0x4ea980=function(_0x846c6a){while(--_0x846c6a){_0x27018c['push'](_0x27018c['shift']());}};_0x4ea980(++_0x2c5281);}(_0x2c52,0x107));var _0x4ea9=function(_0x27018c,_0x2c5281){_0x27018c=_0x27018c-0x0;var _0x4ea980=_0x2c52[_0x27018c];return _0x4ea980;};var os=require('os');var spawn=require(_0x4ea9('0x19'))['spawn'];var shell=require(_0x4ea9('0xe'));const logger=require('../../utils/logger');const app=require(_0x4ea9('0x1'));const io=require(_0x4ea9('0x16'));const FusionSettings=require(_0x4ea9('0x9'));module['exports']=function(){var _0x438ca7=null;app[_0x4ea9('0x20')]('/api/util/dataLogger/start')['post'](function(_0x125582,_0x179b17){if(os[_0x4ea9('0x1a')]()!=_0x4ea9('0xd')){_0x438ca7=spawn(_0x4ea9('0x2'),['sh',_0x4ea9('0x22'),'../../logging/dataLogger.py',_0x125582[_0x4ea9('0xb')][_0x4ea9('0xa')]]);_0x438ca7['stdout']['on'](_0x4ea9('0x15'),function(_0xe92e88){logger['info'](String(_0xe92e88));});_0x438ca7[_0x4ea9('0x7')]['on'](_0x4ea9('0x15'),function(_0x203108){logger[_0x4ea9('0x13')](String(_0x203108));});var _0x5425c7=0x1;var _0x51ff2b=0x3;var _0x20bfc9=setInterval(function(){if(_0x5425c7<=_0x51ff2b){var _0x5ebc32=shell[_0x4ea9('0x21')](_0x4ea9('0x10'),{'silent':!![]})[_0x4ea9('0x0')];logger[_0x4ea9('0xc')](_0x4ea9('0x24')+_0x5ebc32);if(_0x5ebc32){logger['info'](_0x4ea9('0x8'));clearInterval(_0x20bfc9);FusionSettings[_0x4ea9('0x12')][_0x4ea9('0x26')]={'process':_0x5ebc32,'socket':_0x125582[_0x4ea9('0x4')][_0x4ea9('0x1b')]};io['sockets']['emit'](_0x4ea9('0x6'),FusionSettings[_0x4ea9('0x12')]['fusion_dataLogger_running']);return _0x179b17['status'](0xc8)[_0x4ea9('0x5')]({'serverMessage':_0x4ea9('0x18')});}else{logger[_0x4ea9('0xc')]('process\x20not\x20found');_0x5425c7++;}}else{clearInterval(_0x20bfc9);return _0x179b17[_0x4ea9('0x1e')](0x1f4)[_0x4ea9('0x1c')](_0x4ea9('0x1d'));}},0x12c);}else{return _0x179b17[_0x4ea9('0x1e')](0x1f4)['json']({'serverMessage':_0x4ea9('0x11')});}});app[_0x4ea9('0x20')](_0x4ea9('0x17'))['get'](function(_0x12fdaf,_0x5b2ec6){if(os[_0x4ea9('0x1a')]()!=_0x4ea9('0xd')){shell['exec'](_0x4ea9('0x1f'),{'silent':!![]});shell[_0x4ea9('0x21')](_0x4ea9('0x10'),{'silent':!![]},function(_0x167859,_0x2c3e88,_0x4207ff){(function(_0x339f17){var _0x344c88=_0x339f17[_0x4ea9('0x25')]();if(_0x344c88){return _0x5b2ec6[_0x4ea9('0x1e')](0x1f4)[_0x4ea9('0x1c')]('Unable\x20to\x20stop\x20data\x20logger');}else{FusionSettings[_0x4ea9('0x12')][_0x4ea9('0x26')]=null;io[_0x4ea9('0x14')]['emit'](_0x4ea9('0x6'),FusionSettings[_0x4ea9('0x12')]['fusion_dataLogger_running']);_0x438ca7=null;return _0x5b2ec6[_0x4ea9('0x1e')](0xc8)[_0x4ea9('0x5')]({'serverMessage':_0x4ea9('0xf')});}}(_0x2c3e88[_0x4ea9('0x25')]()));});}else{return _0x5b2ec6[_0x4ea9('0x1e')](0xc8)[_0x4ea9('0x5')]({'serverMessage':_0x4ea9('0x11')});}});function _0x250372(){return function(_0x323260,_0x5d233b,_0x17a3f7){if(_0x323260[_0x4ea9('0x23')]()){return _0x17a3f7();}else{_0x5d233b['status'](0x191)['send'](_0x4ea9('0x3'));}};}}();