var _0x40bd=['../../global/fusionSettings','SocketVariables','sockets','json','data','stdout','Error\x20starting\x20data\x20logger','post','/api/util/dataLogger/stop','route','send','trim','username','platform','info','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','Data\x20logger\x20stopped\x20successfully','fusion_dataLogger_running','process\x20not\x20found','User\x20Unauthenticated','win32','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','status','process\x20number\x20','../../utils/logger','dataLogger_running','stderr','socketId','Unable\x20to\x20stop\x20data\x20logger','child_process','exec','get','process\x20found','emit'];(function(_0x2a3545,_0x40bdee){var _0x7cb9bd=function(_0xf5ee0c){while(--_0xf5ee0c){_0x2a3545['push'](_0x2a3545['shift']());}};_0x7cb9bd(++_0x40bdee);}(_0x40bd,0x115));var _0x7cb9=function(_0x2a3545,_0x40bdee){_0x2a3545=_0x2a3545-0x0;var _0x7cb9bd=_0x40bd[_0x2a3545];return _0x7cb9bd;};var os=require('os');var spawn=require(_0x7cb9('0x18'))['spawn'];var shell=require('shelljs');const logger=require(_0x7cb9('0x13'));const app=require('../../express');const io=require('../../socket');const FusionSettings=require(_0x7cb9('0x1d'));module['exports']=function(){var _0x20563c=null;app[_0x7cb9('0x4')]('/api/util/dataLogger/start')[_0x7cb9('0x2')](function(_0x11ee97,_0x45d380){if(os[_0x7cb9('0x8')]()!=_0x7cb9('0xf')){_0x20563c=spawn('sudo',['sh','../../logging/runRemi.sh','../../logging/dataLogger.py',_0x11ee97['user'][_0x7cb9('0x7')]]);_0x20563c[_0x7cb9('0x0')]['on'](_0x7cb9('0x21'),function(_0xe2e02d){logger[_0x7cb9('0x9')](String(_0xe2e02d));});_0x20563c[_0x7cb9('0x15')]['on'](_0x7cb9('0x21'),function(_0x49f29f){logger['error'](String(_0x49f29f));});var _0x4a1926=0x1;var _0x3609b0=0x3;var _0x743d34=setInterval(function(){if(_0x4a1926<=_0x3609b0){var _0x12fb35=shell['exec'](_0x7cb9('0xa'),{'silent':!![]})['stdout'];logger['info'](_0x7cb9('0x12')+_0x12fb35);if(_0x12fb35){logger[_0x7cb9('0x9')](_0x7cb9('0x1b'));clearInterval(_0x743d34);FusionSettings[_0x7cb9('0x1e')][_0x7cb9('0xc')]={'process':_0x12fb35,'socket':_0x11ee97['body'][_0x7cb9('0x16')]};io[_0x7cb9('0x1f')][_0x7cb9('0x1c')](_0x7cb9('0x14'),FusionSettings[_0x7cb9('0x1e')][_0x7cb9('0xc')]);return _0x45d380[_0x7cb9('0x11')](0xc8)[_0x7cb9('0x20')]({'serverMessage':'Data\x20logger\x20started\x20successfully'});}else{logger[_0x7cb9('0x9')](_0x7cb9('0xd'));_0x4a1926++;}}else{clearInterval(_0x743d34);return _0x45d380[_0x7cb9('0x11')](0x1f4)[_0x7cb9('0x5')](_0x7cb9('0x1'));}},0x12c);}else{return _0x45d380[_0x7cb9('0x11')](0x1f4)[_0x7cb9('0x20')]({'serverMessage':_0x7cb9('0x10')});}});app[_0x7cb9('0x4')](_0x7cb9('0x3'))[_0x7cb9('0x1a')](function(_0x7d0c09,_0x41f90a){if(os['platform']()!=_0x7cb9('0xf')){shell[_0x7cb9('0x19')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x7cb9('0x19')](_0x7cb9('0xa'),{'silent':!![]},function(_0x35b009,_0x402e0f,_0x5efd52){(function(_0x4d8a3e){var _0x36752b=_0x4d8a3e[_0x7cb9('0x6')]();if(_0x36752b){return _0x41f90a[_0x7cb9('0x11')](0x1f4)[_0x7cb9('0x5')](_0x7cb9('0x17'));}else{FusionSettings[_0x7cb9('0x1e')][_0x7cb9('0xc')]=null;io['sockets'][_0x7cb9('0x1c')](_0x7cb9('0x14'),FusionSettings[_0x7cb9('0x1e')][_0x7cb9('0xc')]);_0x20563c=null;return _0x41f90a[_0x7cb9('0x11')](0xc8)['json']({'serverMessage':_0x7cb9('0xb')});}}(_0x402e0f[_0x7cb9('0x6')]()));});}else{return _0x41f90a[_0x7cb9('0x11')](0xc8)[_0x7cb9('0x20')]({'serverMessage':_0x7cb9('0x10')});}});function _0x37fc77(){return function(_0x693ddf,_0x3afe90,_0x225d9b){if(_0x693ddf['isAuthenticated']()){return _0x225d9b();}else{_0x3afe90[_0x7cb9('0x11')](0x191)[_0x7cb9('0x5')](_0x7cb9('0xe'));}};}}();