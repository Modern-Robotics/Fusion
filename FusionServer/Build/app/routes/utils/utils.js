var _0x58da=['stderr','fusion_dataLogger_running','error','/api/util/dataLogger/stop','isAuthenticated','post','send','info','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','status','../../logging/dataLogger.py','SocketVariables','route','process\x20number\x20','trim','platform','dataLogger_running','../../utils/logger','spawn','Data\x20logger\x20started\x20successfully','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','body','../../express','exec','json','sockets','emit','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','win32','data','get','Error\x20starting\x20data\x20logger','user','Unable\x20to\x20stop\x20data\x20logger','stdout','process\x20found','exports','process\x20not\x20found'];(function(_0x248337,_0x58dadf){var _0x2ecefd=function(_0x531a8e){while(--_0x531a8e){_0x248337['push'](_0x248337['shift']());}};_0x2ecefd(++_0x58dadf);}(_0x58da,0xfd));var _0x2ece=function(_0x248337,_0x58dadf){_0x248337=_0x248337-0x0;var _0x2ecefd=_0x58da[_0x248337];return _0x2ecefd;};var os=require('os');var spawn=require('child_process')[_0x2ece('0x1f')];var shell=require('shelljs');const logger=require(_0x2ece('0x1e'));const app=require(_0x2ece('0x23'));const io=require('../../socket');const FusionSettings=require('../../global/fusionSettings');module[_0x2ece('0xb')]=function(){var _0x4fc0ee=null;app[_0x2ece('0x19')]('/api/util/dataLogger/start')[_0x2ece('0x12')](function(_0x281148,_0x281040){if(os[_0x2ece('0x1c')]()!=_0x2ece('0x3')){_0x4fc0ee=spawn('sudo',['sh','../../logging/runRemi.sh',_0x2ece('0x17'),_0x281148[_0x2ece('0x7')]['username']]);_0x4fc0ee['stdout']['on']('data',function(_0x14495d){logger[_0x2ece('0x14')](String(_0x14495d));});_0x4fc0ee[_0x2ece('0xd')]['on'](_0x2ece('0x4'),function(_0x4d29fe){logger[_0x2ece('0xf')](String(_0x4d29fe));});var _0x303d77=0x1;var _0x53b085=0x3;var _0x49f192=setInterval(function(){if(_0x303d77<=_0x53b085){var _0x2a019b=shell['exec'](_0x2ece('0x2'),{'silent':!![]})[_0x2ece('0x9')];logger['info'](_0x2ece('0x1a')+_0x2a019b);if(_0x2a019b){logger[_0x2ece('0x14')](_0x2ece('0xa'));clearInterval(_0x49f192);FusionSettings[_0x2ece('0x18')]['fusion_dataLogger_running']={'process':_0x2a019b,'socket':_0x281148[_0x2ece('0x22')]['socketId']};io[_0x2ece('0x0')]['emit']('dataLogger_running',FusionSettings[_0x2ece('0x18')][_0x2ece('0xe')]);return _0x281040[_0x2ece('0x16')](0xc8)['json']({'serverMessage':_0x2ece('0x20')});}else{logger[_0x2ece('0x14')](_0x2ece('0xc'));_0x303d77++;}}else{clearInterval(_0x49f192);return _0x281040[_0x2ece('0x16')](0x1f4)[_0x2ece('0x13')](_0x2ece('0x6'));}},0x12c);}else{return _0x281040['status'](0x1f4)[_0x2ece('0x25')]({'serverMessage':_0x2ece('0x21')});}});app[_0x2ece('0x19')](_0x2ece('0x10'))[_0x2ece('0x5')](function(_0x2790e0,_0x1860c7){if(os['platform']()!='win32'){shell[_0x2ece('0x24')](_0x2ece('0x15'),{'silent':!![]});shell['exec'](_0x2ece('0x2'),{'silent':!![]},function(_0x328f8b,_0x363f8b,_0x4a1ed1){(function(_0x241a4e){var _0x2ee07c=_0x241a4e[_0x2ece('0x1b')]();if(_0x2ee07c){return _0x1860c7[_0x2ece('0x16')](0x1f4)[_0x2ece('0x13')](_0x2ece('0x8'));}else{FusionSettings[_0x2ece('0x18')][_0x2ece('0xe')]=null;io['sockets'][_0x2ece('0x1')](_0x2ece('0x1d'),FusionSettings[_0x2ece('0x18')][_0x2ece('0xe')]);_0x4fc0ee=null;return _0x1860c7['status'](0xc8)[_0x2ece('0x25')]({'serverMessage':'Data\x20logger\x20stopped\x20successfully'});}}(_0x363f8b[_0x2ece('0x1b')]()));});}else{return _0x1860c7[_0x2ece('0x16')](0xc8)[_0x2ece('0x25')]({'serverMessage':'Data\x20Logger\x20does\x20not\x20run\x20on\x20windows'});}});function _0x346c7d(){return function(_0x456f04,_0xbe6944,_0x2bdaa4){if(_0x456f04[_0x2ece('0x11')]()){return _0x2bdaa4();}else{_0xbe6944['status'](0x191)['send']('User\x20Unauthenticated');}};}}();