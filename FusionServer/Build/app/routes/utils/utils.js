var _0xf00b=['../../utils/logger','dataLogger_running','stdout','../../socket','win32','exec','data','json','isAuthenticated','error','get','Data\x20logger\x20started\x20successfully','../../logging/dataLogger.py','platform','status','send','route','Error\x20starting\x20data\x20logger','/api/util/dataLogger/start','stderr','post','emit','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)','/api/util/dataLogger/stop','process\x20number\x20','../../logging/runRemi.sh','Data\x20logger\x20stopped\x20successfully','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','SocketVariables','trim','Unable\x20to\x20stop\x20data\x20logger','info','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','fusion_dataLogger_running','body','socketId','child_process'];(function(_0x4dbf83,_0xf00b7b){var _0x579208=function(_0x152fd5){while(--_0x152fd5){_0x4dbf83['push'](_0x4dbf83['shift']());}};_0x579208(++_0xf00b7b);}(_0xf00b,0x1aa));var _0x5792=function(_0x4dbf83,_0xf00b7b){_0x4dbf83=_0x4dbf83-0x0;var _0x579208=_0xf00b[_0x4dbf83];return _0x579208;};var os=require('os');var spawn=require(_0x5792('0x11'))['spawn'];var shell=require('shelljs');const logger=require(_0x5792('0x12'));const app=require('../../express');const io=require(_0x5792('0x15'));const FusionSettings=require('../../global/fusionSettings');module['exports']=function(){var _0x262506=null;app[_0x5792('0x22')](_0x5792('0x24'))[_0x5792('0x1')](function(_0x220463,_0x22676f){if(os[_0x5792('0x1f')]()!=_0x5792('0x16')){_0x262506=spawn('sudo',['sh',_0x5792('0x6'),_0x5792('0x1e'),_0x220463['user']['username']]);_0x262506[_0x5792('0x14')]['on'](_0x5792('0x18'),function(_0x1cecb9){logger[_0x5792('0xc')](String(_0x1cecb9));});_0x262506[_0x5792('0x0')]['on']('data',function(_0x4537de){logger[_0x5792('0x1b')](String(_0x4537de));});var _0xae5b77=0x1;var _0x54a7a2=0x3;var _0x507655=setInterval(function(){if(_0xae5b77<=_0x54a7a2){var _0x23d3be=shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x5792('0x14')];logger[_0x5792('0xc')](_0x5792('0x5')+_0x23d3be);if(_0x23d3be){logger[_0x5792('0xc')]('process\x20found');clearInterval(_0x507655);FusionSettings[_0x5792('0x9')][_0x5792('0xe')]={'process':_0x23d3be,'socket':_0x220463[_0x5792('0xf')][_0x5792('0x10')]};io['sockets'][_0x5792('0x2')](_0x5792('0x13'),FusionSettings[_0x5792('0x9')][_0x5792('0xe')]);return _0x22676f[_0x5792('0x20')](0xc8)['json']({'serverMessage':_0x5792('0x1d')});}else{logger[_0x5792('0xc')]('process\x20not\x20found');_0xae5b77++;}}else{clearInterval(_0x507655);return _0x22676f[_0x5792('0x20')](0x1f4)[_0x5792('0x21')](_0x5792('0x23'));}},0x12c);}else{return _0x22676f[_0x5792('0x20')](0x1f4)['json']({'serverMessage':_0x5792('0x8')});}});app[_0x5792('0x22')](_0x5792('0x4'))[_0x5792('0x1c')](function(_0x11e2f6,_0x4a4c50){if(os['platform']()!='win32'){shell[_0x5792('0x17')](_0x5792('0x3'),{'silent':!![]});shell[_0x5792('0x17')](_0x5792('0xd'),{'silent':!![]},function(_0x46a72,_0xb58be7,_0x54971e){(function(_0x409eda){var _0x146831=_0x409eda['trim']();if(_0x146831){return _0x4a4c50[_0x5792('0x20')](0x1f4)[_0x5792('0x21')](_0x5792('0xb'));}else{FusionSettings[_0x5792('0x9')]['fusion_dataLogger_running']=null;io['sockets']['emit'](_0x5792('0x13'),FusionSettings[_0x5792('0x9')][_0x5792('0xe')]);_0x262506=null;return _0x4a4c50[_0x5792('0x20')](0xc8)['json']({'serverMessage':_0x5792('0x7')});}}(_0xb58be7[_0x5792('0xa')]()));});}else{return _0x4a4c50[_0x5792('0x20')](0xc8)[_0x5792('0x19')]({'serverMessage':_0x5792('0x8')});}});function _0x255c61(){return function(_0x24735b,_0x28fbed,_0x4aec18){if(_0x24735b[_0x5792('0x1a')]()){return _0x4aec18();}else{_0x28fbed['status'](0x191)[_0x5792('0x21')]('User\x20Unauthenticated');}};}}();