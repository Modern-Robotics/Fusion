var _0x555d=['win32','platform','Error\x20starting\x20data\x20logger','../../socket','status','process\x20number\x20','shelljs','Data\x20logger\x20started\x20successfully','dataLogger_running','route','/api/util/dataLogger/stop','process\x20found','sudo','fusion_dataLogger_running','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','exports','User\x20Unauthenticated','Data\x20logger\x20stopped\x20successfully','stdout','SocketVariables','../../global/fusionSettings','../../logging/runRemi.sh','Unable\x20to\x20stop\x20data\x20logger','get','trim','error','process\x20not\x20found','spawn','emit','post','exec','socketId','send','/api/util/dataLogger/start','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','data','sockets','../../utils/logger','json','username','../../logging/dataLogger.py','info','body','sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)'];(function(_0x3e66a1,_0x555d04){var _0x13c073=function(_0x4a13f3){while(--_0x4a13f3){_0x3e66a1['push'](_0x3e66a1['shift']());}};_0x13c073(++_0x555d04);}(_0x555d,0x16a));var _0x13c0=function(_0x3e66a1,_0x555d04){_0x3e66a1=_0x3e66a1-0x0;var _0x13c073=_0x555d[_0x3e66a1];return _0x13c073;};var os=require('os');var spawn=require('child_process')[_0x13c0('0x11')];var shell=require(_0x13c0('0x28'));const logger=require(_0x13c0('0x1b'));const app=require('../../express');const io=require(_0x13c0('0x25'));const FusionSettings=require(_0x13c0('0xa'));module[_0x13c0('0x5')]=function(){var _0x49adbc=null;app['route'](_0x13c0('0x17'))[_0x13c0('0x13')](function(_0xe3e5f8,_0x15d5f2){if(os[_0x13c0('0x23')]()!=_0x13c0('0x22')){_0x49adbc=spawn(_0x13c0('0x2'),['sh',_0x13c0('0xb'),_0x13c0('0x1e'),_0xe3e5f8['user'][_0x13c0('0x1d')]]);_0x49adbc[_0x13c0('0x8')]['on'](_0x13c0('0x19'),function(_0x1944f4){logger[_0x13c0('0x1f')](String(_0x1944f4));});_0x49adbc['stderr']['on'](_0x13c0('0x19'),function(_0xc9c9b1){logger[_0x13c0('0xf')](String(_0xc9c9b1));});var _0x24ed77=0x1;var _0x14f257=0x3;var _0x4fd7b9=setInterval(function(){if(_0x24ed77<=_0x14f257){var _0x2da6ae=shell[_0x13c0('0x14')](_0x13c0('0x18'),{'silent':!![]})[_0x13c0('0x8')];logger[_0x13c0('0x1f')](_0x13c0('0x27')+_0x2da6ae);if(_0x2da6ae){logger[_0x13c0('0x1f')](_0x13c0('0x1'));clearInterval(_0x4fd7b9);FusionSettings[_0x13c0('0x9')]['fusion_dataLogger_running']={'process':_0x2da6ae,'socket':_0xe3e5f8[_0x13c0('0x20')][_0x13c0('0x15')]};io['sockets'][_0x13c0('0x12')](_0x13c0('0x2a'),FusionSettings[_0x13c0('0x9')][_0x13c0('0x3')]);return _0x15d5f2[_0x13c0('0x26')](0xc8)[_0x13c0('0x1c')]({'serverMessage':_0x13c0('0x29')});}else{logger[_0x13c0('0x1f')](_0x13c0('0x10'));_0x24ed77++;}}else{clearInterval(_0x4fd7b9);return _0x15d5f2[_0x13c0('0x26')](0x1f4)['send'](_0x13c0('0x24'));}},0x12c);}else{return _0x15d5f2[_0x13c0('0x26')](0x1f4)['json']({'serverMessage':_0x13c0('0x4')});}});app[_0x13c0('0x2b')](_0x13c0('0x0'))[_0x13c0('0xd')](function(_0xf9de3c,_0x3cd35c){if(os[_0x13c0('0x23')]()!='win32'){shell[_0x13c0('0x14')](_0x13c0('0x21'),{'silent':!![]});shell[_0x13c0('0x14')](_0x13c0('0x18'),{'silent':!![]},function(_0x13f230,_0x41f92d,_0x4684c7){(function(_0x1ff05b){var _0x4d763e=_0x1ff05b['trim']();if(_0x4d763e){return _0x3cd35c[_0x13c0('0x26')](0x1f4)[_0x13c0('0x16')](_0x13c0('0xc'));}else{FusionSettings[_0x13c0('0x9')][_0x13c0('0x3')]=null;io[_0x13c0('0x1a')][_0x13c0('0x12')](_0x13c0('0x2a'),FusionSettings[_0x13c0('0x9')][_0x13c0('0x3')]);_0x49adbc=null;return _0x3cd35c[_0x13c0('0x26')](0xc8)[_0x13c0('0x1c')]({'serverMessage':_0x13c0('0x7')});}}(_0x41f92d[_0x13c0('0xe')]()));});}else{return _0x3cd35c['status'](0xc8)['json']({'serverMessage':'Data\x20Logger\x20does\x20not\x20run\x20on\x20windows'});}});function _0x3f67b3(){return function(_0x3e7304,_0xefe6b8,_0x3784dd){if(_0x3e7304['isAuthenticated']()){return _0x3784dd();}else{_0xefe6b8[_0x13c0('0x26')](0x191)['send'](_0x13c0('0x6'));}};}}();