var _0x53bf=['../../global/fusionSettings','sockets','body','spawn','/api/util/dataLogger/start','data','fusion_dataLogger_running','../../utils/logger','isAuthenticated','Data\x20logger\x20started\x20successfully','route','emit','sudo','send','process\x20found','/api/util/dataLogger/stop','json','get','Unable\x20to\x20stop\x20data\x20logger','stdout','error','SocketVariables','post','process\x20number\x20','status','exports','../../express','shelljs','process\x20not\x20found','stderr','dataLogger_running','exec','platform','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','child_process','info','username','../../logging/dataLogger.py','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows'];(function(_0x228210,_0x53bfb3){var _0x53abeb=function(_0x6fa1c1){while(--_0x6fa1c1){_0x228210['push'](_0x228210['shift']());}};_0x53abeb(++_0x53bfb3);}(_0x53bf,0xf5));var _0x53ab=function(_0x228210,_0x53bfb3){_0x228210=_0x228210-0x0;var _0x53abeb=_0x53bf[_0x228210];return _0x53abeb;};var os=require('os');var spawn=require(_0x53ab('0x17'))[_0x53ab('0x1f')];var shell=require(_0x53ab('0x10'));const logger=require(_0x53ab('0x23'));const app=require(_0x53ab('0xf'));const io=require('../../socket');const FusionSettings=require(_0x53ab('0x1c'));module[_0x53ab('0xe')]=function(){var _0x555c3d=null;app[_0x53ab('0x26')](_0x53ab('0x20'))[_0x53ab('0xb')](function(_0x866c94,_0x5245be){if(os['platform']()!='win32'){_0x555c3d=spawn(_0x53ab('0x1'),['sh','../../logging/runRemi.sh',_0x53ab('0x1a'),_0x866c94['user'][_0x53ab('0x19')]]);_0x555c3d[_0x53ab('0x8')]['on']('data',function(_0x1e19f1){logger['info'](String(_0x1e19f1));});_0x555c3d[_0x53ab('0x12')]['on'](_0x53ab('0x21'),function(_0x25fd3d){logger[_0x53ab('0x9')](String(_0x25fd3d));});var _0x33c632=0x1;var _0x350de9=0x3;var _0xb1f4a=setInterval(function(){if(_0x33c632<=_0x350de9){var _0xafabad=shell['exec'](_0x53ab('0x16'),{'silent':!![]})[_0x53ab('0x8')];logger[_0x53ab('0x18')](_0x53ab('0xc')+_0xafabad);if(_0xafabad){logger[_0x53ab('0x18')](_0x53ab('0x3'));clearInterval(_0xb1f4a);FusionSettings[_0x53ab('0xa')][_0x53ab('0x22')]={'process':_0xafabad,'socket':_0x866c94[_0x53ab('0x1e')]['socketId']};io[_0x53ab('0x1d')][_0x53ab('0x0')](_0x53ab('0x13'),FusionSettings[_0x53ab('0xa')][_0x53ab('0x22')]);return _0x5245be[_0x53ab('0xd')](0xc8)[_0x53ab('0x5')]({'serverMessage':_0x53ab('0x25')});}else{logger[_0x53ab('0x18')](_0x53ab('0x11'));_0x33c632++;}}else{clearInterval(_0xb1f4a);return _0x5245be[_0x53ab('0xd')](0x1f4)[_0x53ab('0x2')]('Error\x20starting\x20data\x20logger');}},0x12c);}else{return _0x5245be[_0x53ab('0xd')](0x1f4)['json']({'serverMessage':_0x53ab('0x1b')});}});app[_0x53ab('0x26')](_0x53ab('0x4'))[_0x53ab('0x6')](function(_0x268f34,_0x23579d){if(os[_0x53ab('0x15')]()!='win32'){shell[_0x53ab('0x14')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell['exec'](_0x53ab('0x16'),{'silent':!![]},function(_0x111c47,_0x2ebd24,_0x14e90a){(function(_0x1bd37a){var _0x259194=_0x1bd37a['trim']();if(_0x259194){return _0x23579d['status'](0x1f4)[_0x53ab('0x2')](_0x53ab('0x7'));}else{FusionSettings[_0x53ab('0xa')][_0x53ab('0x22')]=null;io[_0x53ab('0x1d')]['emit']('dataLogger_running',FusionSettings[_0x53ab('0xa')][_0x53ab('0x22')]);_0x555c3d=null;return _0x23579d[_0x53ab('0xd')](0xc8)['json']({'serverMessage':'Data\x20logger\x20stopped\x20successfully'});}}(_0x2ebd24['trim']()));});}else{return _0x23579d[_0x53ab('0xd')](0xc8)['json']({'serverMessage':_0x53ab('0x1b')});}});function _0x211f42(){return function(_0x3edae5,_0x56f017,_0x3dd1b5){if(_0x3edae5[_0x53ab('0x24')]()){return _0x3dd1b5();}else{_0x56f017[_0x53ab('0xd')](0x191)[_0x53ab('0x2')]('User\x20Unauthenticated');}};}}();