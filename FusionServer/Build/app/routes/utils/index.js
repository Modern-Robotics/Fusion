var _0x4dc6=['spawn','send','/api/util/dataLogger/start','../../utils/logger','sudo','json','route','sockets','/api/util/dataLogger/stop','stderr','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','../../express','body','../../logging/runRemi.sh','platform','Data\x20logger\x20started\x20successfully','socketId','Data\x20logger\x20stopped\x20successfully','Unable\x20to\x20stop\x20data\x20logger','stdout','win32','child_process','data','user','info','trim','Error\x20starting\x20data\x20logger','../../logging/dataLogger.py','../../socket','process\x20number\x20','post','username','exports','dataLogger_running','shelljs','get','emit','SocketVariables','exec','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','fusion_dataLogger_running','status'];(function(_0x39af8c,_0x4dc666){var _0x47ecf7=function(_0xf12824){while(--_0xf12824){_0x39af8c['push'](_0x39af8c['shift']());}};_0x47ecf7(++_0x4dc666);}(_0x4dc6,0x156));var _0x47ec=function(_0x39af8c,_0x4dc666){_0x39af8c=_0x39af8c-0x0;var _0x47ecf7=_0x4dc6[_0x39af8c];return _0x47ecf7;};var os=require('os');var spawn=require(_0x47ec('0xf'))[_0x47ec('0x24')];var shell=require(_0x47ec('0x1c'));const logger=require(_0x47ec('0x27'));const app=require(_0x47ec('0x5'));const io=require(_0x47ec('0x16'));const FusionSettings=require('../../global/fusionSettings');module[_0x47ec('0x1a')]=function(){var _0x4a32cb=null;app[_0x47ec('0x0')](_0x47ec('0x26'))[_0x47ec('0x18')](function(_0x13e2ae,_0x36f87f){if(os[_0x47ec('0x8')]()!=_0x47ec('0xe')){_0x4a32cb=spawn(_0x47ec('0x28'),['sh',_0x47ec('0x7'),_0x47ec('0x15'),_0x13e2ae[_0x47ec('0x11')][_0x47ec('0x19')]]);_0x4a32cb['stdout']['on'](_0x47ec('0x10'),function(_0x131035){logger['info'](String(_0x131035));});_0x4a32cb[_0x47ec('0x3')]['on'](_0x47ec('0x10'),function(_0x1f376d){logger['error'](String(_0x1f376d));});var _0x23655c=0x1;var _0x2fbde8=0x3;var _0x4155a4=setInterval(function(){if(_0x23655c<=_0x2fbde8){var _0x3a1956=shell['exec']('ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27',{'silent':!![]})[_0x47ec('0xd')];logger[_0x47ec('0x12')](_0x47ec('0x17')+_0x3a1956);if(_0x3a1956){logger['info']('process\x20found');clearInterval(_0x4155a4);FusionSettings[_0x47ec('0x1f')][_0x47ec('0x22')]={'process':_0x3a1956,'socket':_0x13e2ae[_0x47ec('0x6')][_0x47ec('0xa')]};io['sockets'][_0x47ec('0x1e')](_0x47ec('0x1b'),FusionSettings[_0x47ec('0x1f')][_0x47ec('0x22')]);return _0x36f87f[_0x47ec('0x23')](0xc8)['json']({'serverMessage':_0x47ec('0x9')});}else{logger[_0x47ec('0x12')]('process\x20not\x20found');_0x23655c++;}}else{clearInterval(_0x4155a4);return _0x36f87f['status'](0x1f4)[_0x47ec('0x25')](_0x47ec('0x14'));}},0x12c);}else{return _0x36f87f[_0x47ec('0x23')](0x1f4)['json']({'serverMessage':'Data\x20Logger\x20does\x20not\x20run\x20on\x20windows'});}});app[_0x47ec('0x0')](_0x47ec('0x2'))[_0x47ec('0x1d')](function(_0x260e0a,_0x359104){if(os[_0x47ec('0x8')]()!=_0x47ec('0xe')){shell[_0x47ec('0x20')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x47ec('0x20')](_0x47ec('0x4'),{'silent':!![]},function(_0x443777,_0x5c541e,_0x44498f){(function(_0x50b6dc){var _0x38386e=_0x50b6dc['trim']();if(_0x38386e){return _0x359104[_0x47ec('0x23')](0x1f4)[_0x47ec('0x25')](_0x47ec('0xc'));}else{FusionSettings[_0x47ec('0x1f')][_0x47ec('0x22')]=null;io[_0x47ec('0x1')][_0x47ec('0x1e')]('dataLogger_running',FusionSettings[_0x47ec('0x1f')][_0x47ec('0x22')]);_0x4a32cb=null;return _0x359104[_0x47ec('0x23')](0xc8)[_0x47ec('0x29')]({'serverMessage':_0x47ec('0xb')});}}(_0x5c541e[_0x47ec('0x13')]()));});}else{return _0x359104[_0x47ec('0x23')](0xc8)[_0x47ec('0x29')]({'serverMessage':_0x47ec('0x21')});}});function _0x208531(){return function(_0x19c395,_0x2ad691,_0x29024e){if(_0x19c395['isAuthenticated']()){return _0x29024e();}else{_0x2ad691[_0x47ec('0x23')](0x191)[_0x47ec('0x25')]('User\x20Unauthenticated');}};}}();