var _0x3576=['shelljs','../../socket','socketId','info','platform','status','Unable\x20to\x20stop\x20data\x20logger','SocketVariables','trim','Data\x20logger\x20stopped\x20successfully','../../global/fusionSettings','child_process','body','win32','process\x20not\x20found','stderr','sockets','data','/api/util/dataLogger/stop','stdout','send','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','dataLogger_running','/api/util/dataLogger/start','fusion_dataLogger_running','spawn','emit','route','../../logging/dataLogger.py','user','Data\x20Logger\x20does\x20not\x20run\x20on\x20windows','json','exec','process\x20found','../../utils/logger'];(function(_0x2739ba,_0x357610){var _0x26eaf7=function(_0x1bcdc5){while(--_0x1bcdc5){_0x2739ba['push'](_0x2739ba['shift']());}};_0x26eaf7(++_0x357610);}(_0x3576,0x108));var _0x26ea=function(_0x2739ba,_0x357610){_0x2739ba=_0x2739ba-0x0;var _0x26eaf7=_0x3576[_0x2739ba];return _0x26eaf7;};var os=require('os');var spawn=require(_0x26ea('0x1b'))[_0x26ea('0x6')];var shell=require(_0x26ea('0x10'));const logger=require(_0x26ea('0xf'));const app=require('../../express');const io=require(_0x26ea('0x11'));const FusionSettings=require(_0x26ea('0x1a'));module['exports']=function(){var _0x59c9be=null;app[_0x26ea('0x8')](_0x26ea('0x4'))['post'](function(_0x4e6186,_0x197537){if(os[_0x26ea('0x14')]()!=_0x26ea('0x1d')){_0x59c9be=spawn('sudo',['sh','../../logging/runRemi.sh',_0x26ea('0x9'),_0x4e6186[_0x26ea('0xa')]['username']]);_0x59c9be[_0x26ea('0x0')]['on'](_0x26ea('0x21'),function(_0x2d396f){logger[_0x26ea('0x13')](String(_0x2d396f));});_0x59c9be[_0x26ea('0x1f')]['on'](_0x26ea('0x21'),function(_0x13e1bf){logger['error'](String(_0x13e1bf));});var _0x4ef172=0x1;var _0xdc7bad=0x3;var _0x1f3530=setInterval(function(){if(_0x4ef172<=_0xdc7bad){var _0x4eb2b9=shell[_0x26ea('0xd')](_0x26ea('0x2'),{'silent':!![]})[_0x26ea('0x0')];logger['info']('process\x20number\x20'+_0x4eb2b9);if(_0x4eb2b9){logger['info'](_0x26ea('0xe'));clearInterval(_0x1f3530);FusionSettings['SocketVariables'][_0x26ea('0x5')]={'process':_0x4eb2b9,'socket':_0x4e6186[_0x26ea('0x1c')][_0x26ea('0x12')]};io[_0x26ea('0x20')][_0x26ea('0x7')](_0x26ea('0x3'),FusionSettings[_0x26ea('0x17')][_0x26ea('0x5')]);return _0x197537[_0x26ea('0x15')](0xc8)['json']({'serverMessage':'Data\x20logger\x20started\x20successfully'});}else{logger[_0x26ea('0x13')](_0x26ea('0x1e'));_0x4ef172++;}}else{clearInterval(_0x1f3530);return _0x197537['status'](0x1f4)[_0x26ea('0x1')]('Error\x20starting\x20data\x20logger');}},0x12c);}else{return _0x197537[_0x26ea('0x15')](0x1f4)[_0x26ea('0xc')]({'serverMessage':_0x26ea('0xb')});}});app[_0x26ea('0x8')](_0x26ea('0x22'))['get'](function(_0x3defd1,_0x5dd90c){if(os[_0x26ea('0x14')]()!='win32'){shell[_0x26ea('0xd')]('sudo\x20kill\x20$(ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../logging/dataLogger.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27)',{'silent':!![]});shell[_0x26ea('0xd')](_0x26ea('0x2'),{'silent':!![]},function(_0xe343d3,_0x1978e9,_0x2e9cc9){(function(_0x39ee90){var _0x4bc3b2=_0x39ee90['trim']();if(_0x4bc3b2){return _0x5dd90c[_0x26ea('0x15')](0x1f4)[_0x26ea('0x1')](_0x26ea('0x16'));}else{FusionSettings[_0x26ea('0x17')][_0x26ea('0x5')]=null;io['sockets'][_0x26ea('0x7')](_0x26ea('0x3'),FusionSettings[_0x26ea('0x17')][_0x26ea('0x5')]);_0x59c9be=null;return _0x5dd90c['status'](0xc8)[_0x26ea('0xc')]({'serverMessage':_0x26ea('0x19')});}}(_0x1978e9[_0x26ea('0x18')]()));});}else{return _0x5dd90c[_0x26ea('0x15')](0xc8)[_0x26ea('0xc')]({'serverMessage':_0x26ea('0xb')});}});function _0x1b8d6c(){return function(_0x2c2d92,_0x5c6c87,_0x45bf74){if(_0x2c2d92['isAuthenticated']()){return _0x45bf74();}else{_0x5c6c87['status'](0x191)[_0x26ea('0x1')]('User\x20Unauthenticated');}};}}();