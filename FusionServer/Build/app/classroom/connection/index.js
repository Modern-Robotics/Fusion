const _0x2425=['Unable\x20to\x20reach\x20classroom\x20community:\x20','Connecting\x20to\x20hidden\x20classroom:\x20','debug','shelljs','Wifi_NIC','Not\x20connected\x20to\x20classroom\x20network','Fallback\x20network\x20found:\x20','Fusion\x20serial\x20number:\x20','serial','config','hiddenSSID','wireless-tools/wpa_cli','getMac','wifi','Trying\x20next\x20hidden\x20classroom\x20network','No\x20more\x20networks\x20to\x20try.\x20Restoring\x20fallback\x20network','passphrase','Already\x20connected\x20to\x20classroom\x20network','Storing\x20fallback\x20network','fallbackNetwork','Not\x20part\x20of\x20the\x20classroom\x20community','length','get','exec','wifiStatus','ssid','currentNetwork','trim','connected','wifiInterface','connectToNetwork',':8443/api/v1/connect/','substr','./../../utils/wireless','Next\x20network\x20is:\x20','stringify','exports','request-promise','status','fallBackNetwork','split','../sockets','eth0','Error\x20connecting\x20to\x20classroom\x20network:\x20','getmac','CMMthgilxoBsecure','Wifi\x20interface\x20status:\x20','community_access','Connecting\x20classroom\x20socket\x20communication','hiddenPassword','Checking\x20for\x20fallback\x20network','join','stdout','data','Connecting\x20to\x20classroom:\x20','warn','No\x20fallback\x20network\x20found','networks','On\x20hidden\x20network,\x20rechecking\x20community\x20access','../../utils/logger'];(function(_0x490cae,_0x2425da){const _0xa80468=function(_0x16bba0){while(--_0x16bba0){_0x490cae['push'](_0x490cae['shift']());}};_0xa80468(++_0x2425da);}(_0x2425,0x197));const _0xa804=function(_0x490cae,_0x2425da){_0x490cae=_0x490cae-0x0;let _0xa80468=_0x2425[_0x490cae];return _0xa80468;};const config=require(_0xa804('0x16'));const logger=require(_0xa804('0xc'));const rp=require(_0xa804('0x32'));const wpa_cli=require(_0xa804('0x18'));const mac=require(_0xa804('0x39'));const shell=require(_0xa804('0x10'));const wireless=require(_0xa804('0x2e'));let classroomConnection={'wifiInterface':config[_0xa804('0x23')](_0xa804('0x11')),'currentNetwork':0x0,'networks':[{'hiddenSSID':'MyBot_Gatekeeper_WiFi','hiddenPassword':_0xa804('0x3a')}],'serial':null,'wifiStatus':null,'fallbackNetwork':null};const connection={'connected':![],'connect':async function(){classroomConnection[_0xa804('0x34')]=await getFallBackNetwork();classroomConnection[_0xa804('0x15')]=await getSerial();classroomConnection['wifiStatus']=await getWifiStatus();await checkCommunityAccess();}};function getSerial(){return new Promise((_0x461ec8,_0x3450e5)=>{mac[_0xa804('0x19')]({'iface':_0xa804('0x37')},function(_0x353e59,_0x4223da){if(_0x353e59){return _0x3450e5(_0x353e59['message']);}else{let _0x5ebce6=_0x4223da[_0xa804('0x35')](':')[_0xa804('0x4')]('')[_0xa804('0x2d')](-0x6);logger[_0xa804('0xf')](_0xa804('0x14')+_0x5ebce6);return _0x461ec8(_0x5ebce6);}});});};function getWifiStatus(){return new Promise((_0x563bbf,_0x4e45b1)=>{wpa_cli[_0xa804('0x33')](classroomConnection[_0xa804('0x2a')],function(_0x5d9f33,_0x120ea4){if(_0x5d9f33){return _0x4e45b1('Error\x20accessing\x20network\x20interface:\x20'+_0x5d9f33);}logger[_0xa804('0xf')](_0xa804('0x3b')+JSON[_0xa804('0x30')](_0x120ea4));return _0x563bbf(_0x120ea4);});});};async function checkCommunityAccess(){const _0x36d476='ip\x20route\x20show\x20|\x20grep\x20-i\x20\x27'+classroomConnection[_0xa804('0x2a')]+'\x20\x20metric\x27\x20|\x20awk\x20\x27{print\x20$3}\x27';const _0x37ec44=await shell[_0xa804('0x24')](_0x36d476,{'silent':!![]})[_0xa804('0x5')][_0xa804('0x28')]();logger[_0xa804('0xf')]('Gateway\x20found\x20at:\x20'+_0x37ec44);let _0x5f1bbb={'uri':'https://'+_0x37ec44+_0xa804('0x2c')+classroomConnection[_0xa804('0x15')],'rejectUnauthorized':![],'json':!![],'timeout':0x1388};try{let _0x47d586=await rp(_0x5f1bbb);logger[_0xa804('0xf')](JSON[_0xa804('0x30')](_0x47d586));let _0x45379b=![];if(_0x47d586[_0xa804('0x6')]){_0x45379b=_0x47d586[_0xa804('0x6')][_0xa804('0x0')];}if(_0x45379b){let _0x1084cc={'ssid':_0x47d586[_0xa804('0x1a')]['ssid'],'passphrase':_0x47d586[_0xa804('0x1a')][_0xa804('0x1d')]};await checkIfOnClassroomNetwork(_0x1084cc);}else{logger[_0xa804('0xf')](_0xa804('0x21'));await tryNextClassroomNetork();}}catch(_0x412b5b){logger[_0xa804('0x8')](_0xa804('0xd')+_0x412b5b);await tryNextClassroomNetork();}};async function checkIfOnClassroomNetwork(_0x554733){if(classroomConnection[_0xa804('0x25')][_0xa804('0x26')]==_0x554733[_0xa804('0x26')]){logger[_0xa804('0xf')](_0xa804('0x1e'));await connectSockets();}else{logger[_0xa804('0xf')](_0xa804('0x12'));await connectToClassroomNetwork(_0x554733);}};async function connectSockets(){logger[_0xa804('0xf')](_0xa804('0x1'));await require(_0xa804('0x36'));connection[_0xa804('0x29')]=!![];};async function connectToClassroomNetwork(_0x245040){try{logger[_0xa804('0xf')](_0xa804('0x7')+_0x245040[_0xa804('0x26')]);let _0x345c11={'ssid':_0x245040[_0xa804('0x26')],'password':_0x245040['passphrase'],'hidden':![]};await wireless[_0xa804('0x2b')](_0x345c11);await connectSockets();}catch(_0x2b852c){logger[_0xa804('0x8')](_0xa804('0x38')+_0x2b852c);}};async function getFallBackNetwork(){return new Promise((_0xb18728,_0x4162fe)=>{let _0x5e290f=null;if(_0x5e290f){logger['debug'](_0xa804('0x1f'));}else{logger[_0xa804('0xf')](_0xa804('0x9'));}return _0xb18728(null);});};async function restoreFallBackNetwork(){logger[_0xa804('0xf')](_0xa804('0x3'));if(classroomConnection[_0xa804('0x20')]){logger[_0xa804('0xf')](_0xa804('0x13')+classroomConnection[_0xa804('0x20')]);}else{logger[_0xa804('0xf')]('No\x20fallback\x20network\x20found');}};async function connectToHiddenClassroomNetwork(_0x2a06cd){try{logger['debug'](_0xa804('0xe')+_0x2a06cd[_0xa804('0x17')]);let _0x9672aa={'ssid':_0x2a06cd['hiddenSSID'],'password':_0x2a06cd[_0xa804('0x2')],'hidden':!![]};await wireless[_0xa804('0x2b')](_0x9672aa);logger['debug'](_0xa804('0xb'));await checkCommunityAccess();}catch(_0x3a4b97){logger[_0xa804('0x8')](_0x3a4b97);await tryNextClassroomNetork();}};async function tryNextClassroomNetork(){logger['debug'](_0xa804('0x1b'));let _0x392174=await getNextNetwork();if(_0x392174){logger[_0xa804('0xf')](_0xa804('0x2f')+_0x392174[_0xa804('0x17')]);await connectToHiddenClassroomNetwork(_0x392174);}else{logger[_0xa804('0xf')](_0xa804('0x1c'));await restoreFallBackNetwork();}};async function getNextNetwork(){let _0x2c3bf9=null;if(classroomConnection['currentNetwork']<classroomConnection[_0xa804('0xa')][_0xa804('0x22')])_0x2c3bf9=classroomConnection[_0xa804('0xa')][classroomConnection[_0xa804('0x27')]++];return _0x2c3bf9;};module[_0xa804('0x31')]=connection;