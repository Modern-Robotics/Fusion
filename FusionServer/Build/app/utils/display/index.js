!function(){const e=require("./../logger"),t=require("./../shell"),r=require("./../software"),s=require("./../wireless"),a=require("./../../events"),n={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(r.getIsProductionMachine()){let e=await s.getAccessPointSettings(),r=await s.getNetworkStatus(),a="";r.ip&&(a=r.ip);let n="import Display\n";n+=`Display.show_connect_screen(ssid='${e.SSID}', password='${e.Password}', wlan0_address='${a}')`,await t.execAsync(`python -u -B -c "${n}"`)}}catch(t){e.error(`Error showing connect screen: ${t}`)}},showIdleScreen:async function(){try{if(r.getIsProductionMachine()){let e="import Display\n";e+="Display.show_splash_screen()",await t.execAsync(`python -u -B -c "${e}"`)}}catch(t){e.error(`Error showing idle screen: ${t}`)}},updateStatusBar:async function(s){try{if(r.getIsProductionMachine()){let e;e=s.battery>78?4:s.battery>55&&s.battery<=78?3:s.battery>33&&s.battery<=55?2:(s.battery>10&&s.battery,1);let r=s.wireless.ip?"True":"False",a=s.program?"True":"False",n=s.internet?"True":"False",c="import Display\n";c+=`Display.show_status_bar(${e}, ${r}, ${a}, ${n}, ${"False"})`,await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error updating status bar: ${t}`)}}};a.addListener("program-running",(async e=>{e||await n.showIdleScreen()})),a.addListener("client-connected",(async e=>{1==e&&await n.showIdleScreen()})),a.addListener("client-disconnected",(async e=>{e<=0&&await n.showConnectScreen()})),a.addListener("system-status-update",(async e=>{await n.updateStatusBar(e)})),module.exports=n}();