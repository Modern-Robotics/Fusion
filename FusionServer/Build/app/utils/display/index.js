!function(){require("os"),require("path");const e=require("./../logger"),r=require("./../shell"),t=require("./../software"),s=require("./../wireless"),n=require("./../../events"),a={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(t.getIsProductionMachine()){let e=await s.getAccessPointSettings(),t="import Display\n";t+=`Display.show_connect_screen(ssid='${e.SSID}', password='${e.Password}')`,await r.execAsync(`sudo python -u -B -c "${t}"`)}}catch(r){e.error(`Error showing connect screen: ${r}`)}},showIdleScreen:async function(){try{if(t.getIsProductionMachine()){let e="import Display\n";e+="Display.show_idle_screen()",await r.execAsync(`sudo python -u -B -c "${e}"`)}}catch(r){e.error(`Error showing idle screen: ${r}`)}},updateStatusBar:async function(s){try{if(t.getIsProductionMachine()){let e;s.battery>78?e=4:s.battery>55?e=3:s.battery>33?battery_lavel=2:e=1;let t=s.wireless.ip?"True":"False",n=s.program?"True":"False",a=s.internet?"True":"False",c="import Display\n";c+=`Display.show_status_bar(${e}, ${t}, ${n}, ${a})`,await r.execAsync(`sudo python -u -B -c "${c}"`)}}catch(r){e.error(`Error updating status bar: ${r}`)}}};n.addListener("program-running",(async e=>{e||await a.showIdleScreen()})),n.addListener("client-connected",(async e=>{1==e&&await a.showIdleScreen()})),n.addListener("client-disconnected",(async e=>{e<=0&&await a.showConnectScreen()})),n.addListener("system-status-update",(async e=>{await a.updateStatusBar(e)})),module.exports=a}();