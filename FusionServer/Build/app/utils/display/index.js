!function(){const e=require("./../logger"),t=require("./../shell"),r=require("./../software"),n=require("./../wireless"),s=require("./../../events"),c={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(r.getIsProductionMachine()){let e=await n.getAccessPointSettings(),r=await n.getNetworkStatus(),s="";r.ip&&(s=r.ip);let c="from Display import RecruitLCD\n";c+="lcd = RecruitLCD()\n",c+=`lcd.show_connect_screen(ssid='${e.SSID}', password='${e.Password}', wlan0_address='${s}')`,await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error showing connect screen: ${t}`)}},showIdleScreen:async function(){try{if(r.getIsProductionMachine()){let e="from Display import RecruitLCD\n";e+="lcd = RecruitLCD()\n",e+="lcd.show_splash_screen()",await t.execAsync(`python -u -B -c "${e}"`)}}catch(t){e.error(`Error showing idle screen: ${t}`)}},updateStatusBar:async function(n){try{if(r.getIsProductionMachine()){let e=n.battery,r=(n.wireless.ip,n.program?"True":"False"),s=n.internet?"True":"False",c="from Display import RecruitLCD\n";c+="lcd = RecruitLCD()\n",c+="status = {\n",c+=`   'battery': ${e},\n`,c+=`   'internet': ${s},\n`,c+=`   'program': ${r}\n`,c+="}\n",c+="lcd.update_header(status)",await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error updating status bar: ${t}`)}}};s.addListener("program-running",(async e=>{e||await c.showIdleScreen()})),s.addListener("client-connected",(async e=>{1==e&&await c.showIdleScreen()})),s.addListener("client-disconnected",(async e=>{e<=0&&await c.showConnectScreen()})),s.addListener("system-status-update",(async e=>{await c.updateStatusBar(e)})),module.exports=c}();