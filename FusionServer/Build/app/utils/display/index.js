!function(){const e=require("./../logger"),t=require("./../shell"),r=require("./../software"),n=require("./../wireless"),s=require("./../network"),c=require("./../../events"),a={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(r.getIsProductionMachine()){let e=await n.getAccessPointSettings(),r=await s.getIpAddress("eth0");r||(r="");let c="from Display import RecruitLCD\n";c+="lcd = RecruitLCD()\n",c+=`lcd.show_connect_screen(ssid='${e.SSID}', password='${e.Password}', wlan0_address='${r}')`,await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error showing connect screen: ${t}`)}},showIdleScreen:async function(){try{if(r.getIsProductionMachine()){let e="from Display import RecruitLCD\n";e+="lcd = RecruitLCD()\n",e+="lcd.show_splash_screen()",await t.execAsync(`python -u -B -c "${e}"`)}}catch(t){e.error(`Error showing idle screen: ${t}`)}},updateStatusBar:async function(n){try{if(r.getIsProductionMachine()){let e=n.battery,r=n.program?"True":"False",s=n.internet?"True":"False",c="from Display import RecruitLCD\n";c+="lcd = RecruitLCD()\n",c+="status = {\n",c+=`   'battery': ${e},\n`,c+=`   'internet': ${s},\n`,c+=`   'program': ${r}\n`,c+="}\n",c+="lcd.update_header(status)",await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error updating status bar: ${t}`)}}};c.addListener("program-running",(async e=>{e||await a.showIdleScreen()})),c.addListener("client-connected",(async e=>{1==e&&await a.showIdleScreen()})),c.addListener("client-disconnected",(async e=>{e<=0&&await a.showConnectScreen()})),c.addListener("system-status-update",(async e=>{await a.updateStatusBar(e)})),module.exports=a}();