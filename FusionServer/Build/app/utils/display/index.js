!function(){const e=require("./../logger"),t=require("./../shell"),s=require("./../software"),r=require("./../wireless"),n=require("./../../events"),a={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(s.getIsProductionMachine()){let e=await r.getAccessPointSettings(),s=await r.getNetworkStatus(),n="";s.ip&&(n=s.ip);let a="import Display\n";a+=`Display.show_connect_screen(ssid='${e.SSID}', password='${e.Password}', wlan0_address='${n}')`,await t.execAsync(`sudo python -u -B -c "${a}"`)}}catch(t){e.error(`Error showing connect screen: ${t}`)}},showIdleScreen:async function(){try{if(s.getIsProductionMachine()){let e="import Display\n";e+="Display.show_idle_screen()",await t.execAsync(`sudo python -u -B -c "${e}"`)}}catch(t){e.error(`Error showing idle screen: ${t}`)}},updateStatusBar:async function(r){try{if(s.getIsProductionMachine()){let e;r.battery>78?e=4:r.battery>55?e=3:r.battery>33?battery_lavel=2:e=1;let s=r.wireless.ip?"True":"False",n=r.program?"True":"False",a=r.internet?"True":"False",i="import Display\n";i+=`Display.show_status_bar(${e}, ${s}, ${n}, ${a})`,await t.execAsync(`sudo python -u -B -c "${i}"`)}}catch(t){e.error(`Error updating status bar: ${t}`)}}};n.addListener("program-running",(async e=>{e||await a.showIdleScreen()})),n.addListener("client-connected",(async e=>{1==e&&await a.showIdleScreen()})),n.addListener("client-disconnected",(async e=>{e<=0&&await a.showConnectScreen()})),n.addListener("system-status-update",(async e=>{await a.updateStatusBar(e)})),module.exports=a}();