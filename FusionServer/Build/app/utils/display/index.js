!function(){const e=require("./../logger"),t=require("./../shell"),s=require("./../software"),r=require("./../wireless"),a=require("./../../events"),n={splashScreenPath:"/usr/Fusion/config/splashscreen",showConnectScreen:async function(){try{if(s.getIsProductionMachine()){let e=await r.getAccessPointSettings(),s=await r.getNetworkStatus(),a="";s.ip&&(a=s.ip);let n="import Display\n";n+=`Display.show_connect_screen(ssid='${e.SSID}', password='${e.Password}', wlan0_address='${a}')`,await t.execAsync(`python -u -B -c "${n}"`)}}catch(t){e.error(`Error showing connect screen: ${t}`)}},showIdleScreen:async function(){try{if(s.getIsProductionMachine()){let e="import Display\n";e+="Display.show_splash_screen()",await t.execAsync(`python -u -B -c "${e}"`)}}catch(t){e.error(`Error showing idle screen: ${t}`)}},updateStatusBar:async function(r){try{if(s.getIsProductionMachine()){let e;r.battery>78?e=4:r.battery>55?e=3:r.battery>33?battery_lavel=2:e=1;let s=r.wireless.ip?"True":"False",a=r.program?"True":"False",n=r.internet?"True":"False",c="import Display\n";c+=`Display.show_status_bar(${e}, ${s}, ${a}, ${n})`,await t.execAsync(`python -u -B -c "${c}"`)}}catch(t){e.error(`Error updating status bar: ${t}`)}}};a.addListener("program-running",(async e=>{e||await n.showIdleScreen()})),a.addListener("client-connected",(async e=>{1==e&&await n.showIdleScreen()})),a.addListener("client-disconnected",(async e=>{e<=0&&await n.showConnectScreen()})),a.addListener("system-status-update",(async e=>{await n.updateStatusBar(e)})),module.exports=n}();