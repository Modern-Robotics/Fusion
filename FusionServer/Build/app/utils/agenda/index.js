!function(){const e=require("./../logger"),t=new(require("agenda"))({mongo:require("mongoose").connection.db}),a=require("./../../events"),r=require("./../battery"),n=require("./../wireless"),s=require("./../software"),i=require("./../gamepad"),c=require("./../diagnostic"),g=require("../program");!async function(){try{await t.purge(),t.define("checkSystemStatus",(async t=>{let s={battery:await r.getBatteryLevel(),wireless:await n.getNetworkStatus(),ethernet:await n.getEthernetStatus(),internet:await n.getInternetAccess(),program:await g.getRunningProgram()};e.debug(JSON.stringify(s)),a.emit("system-status-update",s)})),t.every("10 seconds","checkSystemStatus"),t.define("scanUpdate",(async e=>{await s.getUpdateAvailable()})),t.every("30 minutes","scanUpdate"),t.define("scanGamepad",(async e=>{await i.getIsGamepadAvailable()})),t.every("10 seconds","scanGamepad"),t.define("scanDiagnostics",(async e=>{await c.getIsDiagnosticRunning()})),t.every("10 seconds","scanDiagnostics"),t.start()}catch(t){e.error(t)}}(),module.exports=t}();