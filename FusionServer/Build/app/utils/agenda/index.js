!function(){const e=require("./../logger"),a=new(require("agenda"))({mongo:require("mongoose").connection.db}),t=require("./../../events"),r=require("./../battery"),s=require("./../wireless"),n=require("./../software"),i=require("./../gamepad"),c=require("./../diagnostic"),o=require("../program");!async function(){try{await a.purge(),a.define("checkSystemStatus",(async a=>{let n={battery:await r.getBatteryLevel(),wireless:await s.getNetworkStatus(),internet:await s.getInternetAccess(),program:await o.getRunningProgram()};e.debug(JSON.stringify(n)),t.emit("system-status-update",n)})),a.every("10 seconds","checkSystemStatus"),a.define("scanUpdate",(async e=>{await n.getUpdateAvailable()})),a.every("30 minutes","scanUpdate"),a.define("scanGamepad",(async e=>{await i.getIsGamepadAvailable()})),a.every("10 seconds","scanGamepad"),a.define("scanDiagnostics",(async e=>{await c.getIsDiagnosticRunning()})),a.every("10 seconds","scanDiagnostics"),a.start()}catch(a){e.error(a)}}(),module.exports=a}();