!function(){const e=require("./../logger"),a=new(require("agenda"))({mongo:require("mongoose").connection.db}),t=require("./../../events"),r=require("./../battery"),n=(require("./../wireless"),require("./../software")),s=require("./../gamepad"),i=require("./../diagnostic"),c=require("../program"),o=require("./../network");!async function(){try{await a.purge(),a.define("checkSystemStatus",(async a=>{let n={battery:await r.getBatteryLevel(),ethernet:await o.filterByType("eth0","IPv4"),internet:await o.hasInternetAccess(),program:await c.getRunningProgram()};e.debug(JSON.stringify(n)),t.emit("system-status-update",n)})),a.every("15 seconds","checkSystemStatus"),a.define("scanUpdate",(async e=>{await n.getUpdateAvailable()})),a.every("60 minutes","scanUpdate"),a.define("scanGamepad",(async e=>{await s.getIsGamepadAvailable()})),a.every("15 seconds","scanGamepad"),a.define("scanDiagnostics",(async e=>{await i.getIsDiagnosticRunning()})),a.every("15 seconds","scanDiagnostics"),a.start()}catch(a){e.error(a)}}(),module.exports=a}();