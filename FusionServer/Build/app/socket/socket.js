const _0x4ccf=['fusion_current_version','request','data','config','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','spawn','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','child_process','connection','stdout','battery-level','Error\x20reading\x20battery\x20:\x20\x0a','exports','type','fusion_latest_version','SocketVariables','fusion_program_running','path','fusion_update_available','./scripts/ReadBatt.py','program-running','Socket\x20error\x20-\x20','error','sockets','pop','GET','shelljs','exec','stderr','Configuring\x20socket\x20communication','../global/fusionSettings','status','Client\x20disconnected:\x20','join','fusion_current_SHA','version-number','win32','pipe','fusion_diagnostics_running','push','python','wifi-connection','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','git\x20describe\x20--tags\x20','fusion_battery_level','diagnostics_running','verbose','update-available','get','statusCode','platform','http://localhost:8080/api/diagnostics/stop','catch','fusion_latest_SHA','dirname','split','../fusionProgram','connectedClients','fusion_internet_access','Build','fusion_wifi_access','KillProgram','stringify','wireless-tools/wpa_cli','indexOf','process','socket','internet-access','wifi-fusion_storage_type','../utils/logger','Client\x20connected:\x20','global-message','gamepad-available','trim','git\x20fetch','debug','Connected\x20to\x20server','git\x20rev-parse\x20HEAD','success','fusion_gamepad_available','splice','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','emit'];(function(_0x42485d,_0x4ccf83){const _0x3da829=function(_0x3dd69b){while(--_0x3dd69b){_0x42485d['push'](_0x42485d['shift']());}};_0x3da829(++_0x4ccf83);}(_0x4ccf,0x75));const _0x3da8=function(_0x42485d,_0x4ccf83){_0x42485d=_0x42485d-0x0;let _0x3da829=_0x4ccf[_0x42485d];return _0x3da829;};const config=require(_0x3da8('0x34'));const logger=require(_0x3da8('0x23'));const io=require('.');const FusionSettings=require(_0x3da8('0x4f'));const fusionProgram=require(_0x3da8('0x16'));const spawn=require(_0x3da8('0x38'))[_0x3da8('0x36')];const internetAvailable=require('internet-available');const wpa_cli=require(_0x3da8('0x1d'));const os=require('os');const shell=require(_0x3da8('0x4b'));const path=require(_0x3da8('0x42'));const request=require(_0x3da8('0x32'));module[_0x3da8('0x3d')]=async function(){logger[_0x3da8('0xc')](_0x3da8('0x4e'));FusionSettings[_0x3da8('0x17')]=[];var _0xe3bcd0=path[_0x3da8('0x14')](__dirname)[_0x3da8('0x15')](path['sep'])[_0x3da8('0x49')]();var _0x57a612=0x0;var _0x4c3541=0xb;io['on'](_0x3da8('0x39'),function(_0x110627){FusionSettings[_0x3da8('0x17')][_0x3da8('0x5')](_0x110627);logger[_0x3da8('0x29')](_0x3da8('0x24')+_0x110627['id']);_0x230e47();_0x110627['on'](_0x3da8('0x52'),function(_0x420e01){_0x110627[_0x3da8('0x30')](_0x3da8('0x25'),{'message':_0x3da8('0x2a'),'type':_0x3da8('0x2c')});});_0x110627['on']('disconnect',function(_0x10a28b){logger[_0x3da8('0x29')](_0x3da8('0x51')+_0x110627['id']+'\x20because\x20\x22'+_0x10a28b+'\x22');if(FusionSettings['SocketVariables']['fusion_program_running'])if(FusionSettings['SocketVariables'][_0x3da8('0x41')]['SocketId']==_0x110627['id'])fusionProgram[_0x3da8('0x1b')]();if(FusionSettings[_0x3da8('0x40')][_0x3da8('0x4')])if(FusionSettings[_0x3da8('0x40')][_0x3da8('0x4')][_0x3da8('0x20')]==_0x110627['id']){logger[_0x3da8('0xc')](_0x3da8('0x37'));request({'url':_0x3da8('0x11'),'method':_0x3da8('0x4a')},function(_0x4284e7,_0x516a50,_0x49eb8f){if(_0x4284e7)logger[_0x3da8('0x47')](_0x3da8('0x35')+_0x4284e7);else{if(_0x516a50[_0x3da8('0xf')]==0xc8){FusionSettings['SocketVariables'][_0x3da8('0x4')]=null;}}io[_0x3da8('0x48')][_0x3da8('0x30')]('diagnostics_running',FusionSettings['SocketVariables']['fusion_diagnostics_running']);});}var _0x1185a5=FusionSettings[_0x3da8('0x17')][_0x3da8('0x1e')](_0x110627);FusionSettings[_0x3da8('0x17')][_0x3da8('0x2e')](_0x1185a5,0x1);});_0x110627['on'](_0x3da8('0x47'),function(_0x1d2074){logger['error'](_0x3da8('0x46')+_0x1d2074);});});function _0x13dcbb(){_0x4c47a2();_0x2403db();_0x1c4c37();_0x3e21d2();_0x352cc8();_0x1cf5d4();_0xfb3334();}function _0x5f59d1(){if(_0x57a612>=_0x4c3541){logger[_0x3da8('0x29')](JSON[_0x3da8('0x1c')](FusionSettings[_0x3da8('0x40')]));io[_0x3da8('0x48')][_0x3da8('0x30')]('battery-level',FusionSettings[_0x3da8('0x40')][_0x3da8('0xa')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x21'),FusionSettings['SocketVariables'][_0x3da8('0x18')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x1'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x31')]);io['sockets'][_0x3da8('0x30')](_0x3da8('0xd'),FusionSettings[_0x3da8('0x40')]['fusion_update_available']);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x26'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x2d')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0xb'),FusionSettings[_0x3da8('0x40')]['fusion_diagnostics_running']);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x7'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x1a')]);io[_0x3da8('0x48')]['emit'](_0x3da8('0x22'),FusionSettings['Storage'][_0x3da8('0x3e')]);io['sockets'][_0x3da8('0x30')]('program-running',FusionSettings[_0x3da8('0x40')][_0x3da8('0x41')]);_0x57a612=0x0;}else{setTimeout(_0x5f59d1,0x7d0);}}function _0x230e47(){io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x3b'),FusionSettings[_0x3da8('0x40')][_0x3da8('0xa')]);io['sockets'][_0x3da8('0x30')](_0x3da8('0x21'),FusionSettings[_0x3da8('0x40')]['fusion_internet_access']);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x1'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x31')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0xd'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x43')]);io['sockets'][_0x3da8('0x30')](_0x3da8('0x26'),FusionSettings['SocketVariables']['fusion_gamepad_available']);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0xb'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x4')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x7'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x1a')]);io[_0x3da8('0x48')][_0x3da8('0x30')](_0x3da8('0x45'),FusionSettings[_0x3da8('0x40')][_0x3da8('0x41')]);}function _0x4c47a2(){if(os['platform']()!=_0x3da8('0x2')){var _0x258ab4=_0x3da8('0x44');var _0x51f69a=spawn(_0x3da8('0x6'),[_0x258ab4],{'stdio':_0x3da8('0x3')});_0x51f69a[_0x3da8('0x3a')]['on'](_0x3da8('0x33'),function(_0x57037c){FusionSettings[_0x3da8('0x40')]['fusion_battery_level']=String(_0x57037c)[_0x3da8('0x27')]();_0x57a612++;});_0x51f69a[_0x3da8('0x4d')]['on'](_0x3da8('0x33'),function(_0x2f3a25){logger['error'](_0x3da8('0x3c')+String(_0x2f3a25));});}else{_0x57a612++;}}function _0x2403db(){internetAvailable({'timeout':0x2710,'retries':0x5})['then'](function(){FusionSettings[_0x3da8('0x40')][_0x3da8('0x18')]=!![];_0x57a612++;})[_0x3da8('0x12')](function(){FusionSettings[_0x3da8('0x40')]['fusion_internet_access']=![];_0x57a612++;});}function _0x1c4c37(){shell[_0x3da8('0x4c')](_0x3da8('0x2b'),{'silent':!![]},function(_0x311552,_0x4ad821,_0x192d01){(function(_0x56db85){FusionSettings['SocketVariables']['fusion_current_SHA']=_0x56db85[_0x3da8('0x27')]();_0x57a612++;_0x25984d();}(_0x4ad821['trim']()));});}function _0x25984d(){shell[_0x3da8('0x4c')](_0x3da8('0x9')+FusionSettings[_0x3da8('0x40')][_0x3da8('0x0')],{'silent':!![]},function(_0x5b7b3b,_0x38fa14,_0x4f5bc2){(function(_0x1e1523){FusionSettings[_0x3da8('0x40')][_0x3da8('0x31')]=_0x1e1523[_0x3da8('0x27')]();_0x57a612++;_0x21c826();}(_0x38fa14[_0x3da8('0x27')]()));});}function _0x21c826(){if(_0xe3bcd0==_0x3da8('0x19')){shell[_0x3da8('0x4c')](_0x3da8('0x28'),{'silent':!![]},function(_0x56b7ca,_0x11a015,_0x3ee21e){(function(_0x3904b5){_0x57a612++;_0x36ccec();}(_0x11a015[_0x3da8('0x27')]()));});}else{_0x57a612++;_0x36ccec();}}function _0x36ccec(){shell[_0x3da8('0x4c')]('git\x20rev-list\x20--tags\x20--max-count=1',{'silent':!![]},function(_0x511b28,_0xea3753,_0x4f774c){(function(_0x556058){FusionSettings[_0x3da8('0x40')][_0x3da8('0x13')]=_0x556058[_0x3da8('0x27')]();_0x57a612++;_0x3000ec();}(_0xea3753[_0x3da8('0x27')]()));});}function _0x3000ec(){shell[_0x3da8('0x4c')]('git\x20describe\x20--tags\x20'+FusionSettings[_0x3da8('0x40')][_0x3da8('0x13')],{'silent':!![]},function(_0x24042f,_0x2c8617,_0x44d23f){(function(_0x1054a1){FusionSettings[_0x3da8('0x40')][_0x3da8('0x3f')]=_0x1054a1[_0x3da8('0x27')]();_0x57a612++;}(_0x2c8617[_0x3da8('0x27')]()));});}function _0x3e21d2(){if(FusionSettings[_0x3da8('0x40')][_0x3da8('0x0')]!=FusionSettings['SocketVariables'][_0x3da8('0x13')]){FusionSettings[_0x3da8('0x40')][_0x3da8('0x43')]=!![];}else{FusionSettings['SocketVariables'][_0x3da8('0x43')]=![];}_0x57a612++;}function _0x352cc8(){if(os['platform']()!=_0x3da8('0x2')){shell[_0x3da8('0x4c')](_0x3da8('0x2f'),{'silent':!![]},function(_0x480522,_0x3dd206,_0x5407e2){(function(_0x48ebd5){FusionSettings[_0x3da8('0x40')][_0x3da8('0x2d')]=_0x48ebd5['trim']();if(!FusionSettings[_0x3da8('0x40')]['fusion_gamepad_available'])FusionSettings[_0x3da8('0x40')][_0x3da8('0x2d')]=![];else FusionSettings[_0x3da8('0x40')]['fusion_gamepad_available']=!![];_0x57a612++;}(_0x3dd206[_0x3da8('0x27')]()));});}else{FusionSettings['SocketVariables'][_0x3da8('0x2d')]=![];_0x57a612++;}}function _0x1cf5d4(){if(os[_0x3da8('0x10')]()!=_0x3da8('0x2')){shell['exec'](_0x3da8('0x8'),{'silent':!![]},function(_0x5c7656,_0x2194aa,_0x34e691){(function(_0x4589f4){var _0x3e36e5=_0x4589f4[_0x3da8('0x27')]();if(_0x3e36e5){if(FusionSettings[_0x3da8('0x40')][_0x3da8('0x4')])FusionSettings['SocketVariables'][_0x3da8('0x4')][_0x3da8('0x1f')]=_0x3e36e5;else{FusionSettings[_0x3da8('0x40')]['fusion_diagnostics_running']={'process':_0x3e36e5,'socket':-0x1};}}else FusionSettings[_0x3da8('0x40')]['fusion_diagnostics_running']=null;_0x57a612++;}(_0x2194aa[_0x3da8('0x27')]()));});}else{FusionSettings[_0x3da8('0x40')]['fusion_gamepad_available']=null;_0x57a612++;}}function _0xfb3334(){wpa_cli[_0x3da8('0x50')](config[_0x3da8('0xe')]('Wifi_NIC'),function(_0x4b1bc0,_0x468fd7){if(_0x4b1bc0){_0x468fd7={'ssid':undefined,'ip':undefined,'mac':undefined};}FusionSettings['SocketVariables']['fusion_wifi_access']=_0x468fd7;_0x57a612++;});}_0x5f59d1();_0x13dcbb();setInterval(function(){_0x5f59d1();_0x13dcbb();},0x2710);}();