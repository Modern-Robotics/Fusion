const _0x1786=['process','connectedClients','internet-access','../fusionProgram','fusion_battery_level','config','Socket\x20error\x20-\x20','SocketId','Wifi_NIC','git\x20rev-list\x20--tags\x20--max-count=1','version-number','battery-level','success','request','Connected\x20to\x20server','sockets','wireless-tools/wpa_cli','error','program-running','socket','Error\x20terminating\x20diagnostic\x20tools\x20:\x20','push','Storage','python','update-available','internet-available','disconnect','child_process','Error\x20reading\x20battery\x20:\x20\x0a','debug','spawn','exec','\x20because\x20\x22','split','Terminating\x20diagnostic\x20tools\x20due\x20to\x20absent\x20client','exports','fusion_diagnostics_running','ps\x20aux\x20|\x20grep\x20\x27[s]udo\x20python\x20../../diagnostics/diagnosticGUI.py\x27\x20|\x20awk\x20\x27{print\x20$2}\x27','fusion_gamepad_available','join','SocketVariables','get','emit','platform','fusion_update_available','diagnostics_running','fusion_internet_access','then','../utils/logger','connection','sep','fusion_latest_SHA','fusion_current_version','indexOf','dirname','fusion_latest_version','status','git\x20fetch','pipe','Client\x20disconnected:\x20','trim','Client\x20connected:\x20','win32','Configuring\x20socket\x20communication','fusion_program_running','global-message','fusion_current_SHA','stdout','sudo\x20netstat\x20-panp\x20|\x20grep\x205000\x20|\x20grep\x20LISTEN','gamepad-available','catch','shelljs','../global/fusionSettings','path','stderr','stringify','fusion_wifi_access','data','http://localhost:8080/api/diagnostics/stop','splice','wifi-connection','git\x20describe\x20--tags\x20','statusCode'];(function(_0x3ba394,_0x1786d8){const _0x21f4a2=function(_0x299025){while(--_0x299025){_0x3ba394['push'](_0x3ba394['shift']());}};_0x21f4a2(++_0x1786d8);}(_0x1786,0x15e));const _0x21f4=function(_0x3ba394,_0x1786d8){_0x3ba394=_0x3ba394-0x0;let _0x21f4a2=_0x1786[_0x3ba394];return _0x21f4a2;};const config=require(_0x21f4('0x46'));const logger=require(_0x21f4('0x1e'));const io=require('.');const FusionSettings=require(_0x21f4('0x36'));const fusionProgram=require(_0x21f4('0x44'));const spawn=require(_0x21f4('0x9'))[_0x21f4('0xc')];const internetAvailable=require(_0x21f4('0x7'));const wpa_cli=require(_0x21f4('0x51'));const os=require('os');const shell=require(_0x21f4('0x35'));const path=require(_0x21f4('0x37'));const request=require(_0x21f4('0x4e'));module[_0x21f4('0x11')]=async function(){logger['verbose'](_0x21f4('0x2d'));FusionSettings[_0x21f4('0x42')]=[];var _0x440539=path[_0x21f4('0x24')](__dirname)[_0x21f4('0xf')](path[_0x21f4('0x20')])['pop']();var _0x427fbe=0x0;var _0x52521c=0xb;io['on'](_0x21f4('0x1f'),function(_0x5bd01e){FusionSettings['connectedClients'][_0x21f4('0x3')](_0x5bd01e);logger[_0x21f4('0xb')](_0x21f4('0x2b')+_0x5bd01e['id']);_0x3020bf();_0x5bd01e['on'](_0x21f4('0x15'),function(_0x50f420){_0x5bd01e[_0x21f4('0x18')](_0x21f4('0x2f'),{'message':_0x21f4('0x4f'),'type':_0x21f4('0x4d')});});_0x5bd01e['on'](_0x21f4('0x8'),function(_0x706122){logger['debug'](_0x21f4('0x29')+_0x5bd01e['id']+_0x21f4('0xe')+_0x706122+'\x22');if(FusionSettings[_0x21f4('0x16')][_0x21f4('0x2e')])if(FusionSettings['SocketVariables'][_0x21f4('0x2e')][_0x21f4('0x48')]==_0x5bd01e['id'])fusionProgram['KillProgram']();if(FusionSettings['SocketVariables']['fusion_diagnostics_running'])if(FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')][_0x21f4('0x1')]==_0x5bd01e['id']){logger['verbose'](_0x21f4('0x10'));request({'url':_0x21f4('0x3c'),'method':'GET'},function(_0x4ad9e4,_0xe58c3e,_0x123b06){if(_0x4ad9e4)logger[_0x21f4('0x52')](_0x21f4('0x2')+_0x4ad9e4);else{if(_0xe58c3e[_0x21f4('0x40')]==0xc8){FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]=null;}}io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x1b'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]);});}var _0x26e661=FusionSettings[_0x21f4('0x42')][_0x21f4('0x23')](_0x5bd01e);FusionSettings[_0x21f4('0x42')][_0x21f4('0x3d')](_0x26e661,0x1);});_0x5bd01e['on']('error',function(_0x285eda){logger[_0x21f4('0x52')](_0x21f4('0x47')+_0x285eda);});});function _0x49f79a(){_0xd599da();_0x179fe0();_0x392e28();_0x288550();_0x1f4ecc();_0x1accb8();_0x371cd5();}function _0x4ec77b(){if(_0x427fbe>=_0x52521c){logger[_0x21f4('0xb')](JSON[_0x21f4('0x39')](FusionSettings[_0x21f4('0x16')]));io['sockets'][_0x21f4('0x18')](_0x21f4('0x4c'),FusionSettings[_0x21f4('0x16')]['fusion_battery_level']);io['sockets'][_0x21f4('0x18')](_0x21f4('0x43'),FusionSettings['SocketVariables']['fusion_internet_access']);io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x4b'),FusionSettings[_0x21f4('0x16')]['fusion_current_version']);io['sockets'][_0x21f4('0x18')](_0x21f4('0x6'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x1a')]);io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x33'),FusionSettings['SocketVariables'][_0x21f4('0x14')]);io[_0x21f4('0x50')]['emit'](_0x21f4('0x1b'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]);io[_0x21f4('0x50')]['emit'](_0x21f4('0x3e'),FusionSettings['SocketVariables'][_0x21f4('0x3a')]);io[_0x21f4('0x50')]['emit']('wifi-fusion_storage_type',FusionSettings[_0x21f4('0x4')]['type']);io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x0'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x2e')]);_0x427fbe=0x0;}else{setTimeout(_0x4ec77b,0x7d0);}}function _0x3020bf(){io[_0x21f4('0x50')][_0x21f4('0x18')]('battery-level',FusionSettings[_0x21f4('0x16')][_0x21f4('0x45')]);io[_0x21f4('0x50')][_0x21f4('0x18')]('internet-access',FusionSettings['SocketVariables'][_0x21f4('0x1c')]);io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x4b'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x22')]);io[_0x21f4('0x50')][_0x21f4('0x18')](_0x21f4('0x6'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x1a')]);io['sockets'][_0x21f4('0x18')](_0x21f4('0x33'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x14')]);io['sockets'][_0x21f4('0x18')](_0x21f4('0x1b'),FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]);io[_0x21f4('0x50')]['emit']('wifi-connection',FusionSettings[_0x21f4('0x16')][_0x21f4('0x3a')]);io['sockets'][_0x21f4('0x18')](_0x21f4('0x0'),FusionSettings['SocketVariables'][_0x21f4('0x2e')]);}function _0xd599da(){if(os['platform']()!=_0x21f4('0x2c')){var _0x3ac9b2='./scripts/ReadBatt.py';var _0x165f52=spawn(_0x21f4('0x5'),[_0x3ac9b2],{'stdio':_0x21f4('0x28')});_0x165f52[_0x21f4('0x31')]['on'](_0x21f4('0x3b'),function(_0x16fc5f){FusionSettings[_0x21f4('0x16')]['fusion_battery_level']=String(_0x16fc5f)['trim']();_0x427fbe++;});_0x165f52[_0x21f4('0x38')]['on']('data',function(_0xbf71f2){logger[_0x21f4('0x52')](_0x21f4('0xa')+String(_0xbf71f2));});}else{_0x427fbe++;}}function _0x179fe0(){internetAvailable({'timeout':0x2710,'retries':0x5})[_0x21f4('0x1d')](function(){FusionSettings['SocketVariables']['fusion_internet_access']=!![];_0x427fbe++;})[_0x21f4('0x34')](function(){FusionSettings[_0x21f4('0x16')][_0x21f4('0x1c')]=![];_0x427fbe++;});}function _0x392e28(){shell[_0x21f4('0xd')]('git\x20rev-parse\x20HEAD',{'silent':!![]},function(_0x347fbe,_0x2e3e69,_0x573b0c){(function(_0x1bd5b2){FusionSettings[_0x21f4('0x16')]['fusion_current_SHA']=_0x1bd5b2[_0x21f4('0x2a')]();_0x427fbe++;_0x58dbe8();}(_0x2e3e69[_0x21f4('0x2a')]()));});}function _0x58dbe8(){shell[_0x21f4('0xd')](_0x21f4('0x3f')+FusionSettings['SocketVariables']['fusion_current_SHA'],{'silent':!![]},function(_0x44d614,_0x49801a,_0x3309ca){(function(_0x166b33){FusionSettings[_0x21f4('0x16')][_0x21f4('0x22')]=_0x166b33['trim']();_0x427fbe++;_0x4ff8bb();}(_0x49801a['trim']()));});}function _0x4ff8bb(){if(_0x440539=='Build'){shell[_0x21f4('0xd')](_0x21f4('0x27'),{'silent':!![]},function(_0x3ef8ff,_0x2babe7,_0x57669d){(function(_0x5f4a1b){_0x427fbe++;_0x48486c();}(_0x2babe7[_0x21f4('0x2a')]()));});}else{_0x427fbe++;_0x48486c();}}function _0x48486c(){shell['exec'](_0x21f4('0x4a'),{'silent':!![]},function(_0x3f3bfb,_0x3afc8e,_0x187c66){(function(_0x56af94){FusionSettings[_0x21f4('0x16')]['fusion_latest_SHA']=_0x56af94['trim']();_0x427fbe++;_0x1f0829();}(_0x3afc8e[_0x21f4('0x2a')]()));});}function _0x1f0829(){shell[_0x21f4('0xd')](_0x21f4('0x3f')+FusionSettings[_0x21f4('0x16')][_0x21f4('0x21')],{'silent':!![]},function(_0x1d494f,_0x2a2977,_0x35bed4){(function(_0x3bae35){FusionSettings[_0x21f4('0x16')][_0x21f4('0x25')]=_0x3bae35[_0x21f4('0x2a')]();_0x427fbe++;}(_0x2a2977[_0x21f4('0x2a')]()));});}function _0x288550(){if(FusionSettings[_0x21f4('0x16')][_0x21f4('0x30')]!=FusionSettings['SocketVariables'][_0x21f4('0x21')]){FusionSettings[_0x21f4('0x16')][_0x21f4('0x1a')]=!![];}else{FusionSettings[_0x21f4('0x16')][_0x21f4('0x1a')]=![];}_0x427fbe++;}function _0x1f4ecc(){if(os[_0x21f4('0x19')]()!=_0x21f4('0x2c')){shell[_0x21f4('0xd')](_0x21f4('0x32'),{'silent':!![]},function(_0x46d9bd,_0x50a770,_0x4567e4){(function(_0x36996b){FusionSettings[_0x21f4('0x16')][_0x21f4('0x14')]=_0x36996b[_0x21f4('0x2a')]();if(!FusionSettings['SocketVariables'][_0x21f4('0x14')])FusionSettings[_0x21f4('0x16')][_0x21f4('0x14')]=![];else FusionSettings['SocketVariables'][_0x21f4('0x14')]=!![];_0x427fbe++;}(_0x50a770[_0x21f4('0x2a')]()));});}else{FusionSettings[_0x21f4('0x16')][_0x21f4('0x14')]=![];_0x427fbe++;}}function _0x1accb8(){if(os[_0x21f4('0x19')]()!='win32'){shell[_0x21f4('0xd')](_0x21f4('0x13'),{'silent':!![]},function(_0x4fe24b,_0x305c51,_0x47472b){(function(_0x5eaef5){var _0x4cbe52=_0x5eaef5[_0x21f4('0x2a')]();if(_0x4cbe52){if(FusionSettings[_0x21f4('0x16')]['fusion_diagnostics_running'])FusionSettings[_0x21f4('0x16')]['fusion_diagnostics_running'][_0x21f4('0x41')]=_0x4cbe52;else{FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]={'process':_0x4cbe52,'socket':-0x1};}}else FusionSettings[_0x21f4('0x16')][_0x21f4('0x12')]=null;_0x427fbe++;}(_0x305c51[_0x21f4('0x2a')]()));});}else{FusionSettings['SocketVariables'][_0x21f4('0x14')]=null;_0x427fbe++;}}function _0x371cd5(){wpa_cli[_0x21f4('0x26')](config[_0x21f4('0x17')](_0x21f4('0x49')),function(_0x159019,_0x47cc16){if(_0x159019){_0x47cc16={'ssid':undefined,'ip':undefined,'mac':undefined};}FusionSettings['SocketVariables'][_0x21f4('0x3a')]=_0x47cc16;_0x427fbe++;});}_0x4ec77b();_0x49f79a();setInterval(function(){_0x4ec77b();_0x49f79a();},0x2710);}();