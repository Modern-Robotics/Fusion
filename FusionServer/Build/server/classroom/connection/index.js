var _0x35e6=['c3online.edu:8443','https://10.200.200.1','MyBot_Gatekeeper_WiFi','CMMthgilxoBsecure','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','connected','status','wifiInterface','Error\x20accessing\x20wifi\x20dongle','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','serverMessage','Connecting\x20to\x20classroom\x20network','globalUrl','Failed\x20to\x20update\x20ip\x20address','exports','winston','request-promise','wireless-tools/wpa_cli','Wifi_NIC','c3online.edu','c3online.edu/backend'];(function(_0x24c3b3,_0xa412d8){var _0x34b630=function(_0x5cbccf){while(--_0x5cbccf){_0x24c3b3['push'](_0x24c3b3['shift']());}};_0x34b630(++_0xa412d8);}(_0x35e6,0xb3));var _0x433a=function(_0x3111c8,_0x262748){_0x3111c8=_0x3111c8-0x0;var _0x400891=_0x35e6[_0x3111c8];return _0x400891;};const winston=require(_0x433a('0x0'));const rp=require(_0x433a('0x1'));const wpa_cli=require(_0x433a('0x2'));const config=require('config');const settings={'wifiInterface':config['get'](_0x433a('0x3'))};const classroomConnection={'url':_0x433a('0x4'),'classroomBackend':_0x433a('0x5'),'classroomAPI':_0x433a('0x6'),'globalUrl':_0x433a('0x7'),'connected':![],'hiddenSSID':_0x433a('0x8'),'hiddenPassword':_0x433a('0x9')};classroomConnection['attemptConnection']=function(){return new Promise(async function(_0x525ab6,_0x3e8d1b){try{const _0x2913b5=await require('./../../../config/serial');const _0x54ca0a=_0x2913b5['serialId'];await checkHasWirelessDongle();let _0x1f8b5b=await communityReachable();if(!_0x1f8b5b)await connectToHiddenClassroomNetwork();let _0xde16cf=await determineCommunityAccess(_0x54ca0a);if(_0xde16cf[_0x433a('0xa')]){let _0x297736=await getConnectedNetworkName();winston[_0x433a('0xb')](_0x433a('0xc')+_0x297736);if(_0x297736!=_0xde16cf[_0x433a('0xd')][_0x433a('0xe')])await connectToClassroomNetwork(_0xde16cf[_0x433a('0xd')][_0x433a('0xe')],_0xde16cf['wifi'][_0x433a('0xf')]);await updateIPAddress(_0x54ca0a);await require(_0x433a('0x10'));classroomConnection[_0x433a('0x11')]=!![];}return _0x525ab6();}catch(_0x409160){winston[_0x433a('0xb')](_0x409160);return _0x525ab6();}});};function checkHasWirelessDongle(){return new Promise(function(_0x5bfeef,_0x29c342){wpa_cli[_0x433a('0x12')](settings[_0x433a('0x13')],function(_0x197aed,_0x3d1356){if(_0x197aed){return _0x29c342(_0x433a('0x14'));}winston[_0x433a('0xb')](_0x433a('0x15'));return _0x5bfeef(_0x433a('0x16'));});});};function determineCommunityAccess(_0x1140ca){return new Promise(async function(_0x3d5cd0,_0x44aebe){let _0x3c4862={'uri':classroomConnection['globalUrl']+_0x433a('0x17')+_0x1140ca,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0x4ee47a=await rp(_0x3c4862);if(_0x4ee47a[_0x433a('0x18')]!=_0x433a('0x19')){_0x4ee47a[_0x433a('0xa')]=!![];winston['info'](_0x433a('0x1a'));}else{_0x4ee47a[_0x433a('0xa')]=![];winston[_0x433a('0xb')](_0x433a('0x1b'));}return _0x3d5cd0(_0x4ee47a);}catch(_0x34cbde){return _0x44aebe(_0x433a('0x1c'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x23988e,_0xa95a50){try{winston[_0x433a('0xb')]('Connecting\x20to\x20hidden\x20network');let _0x5f5a90={'method':_0x433a('0x1d'),'uri':_0x433a('0x1e'),'body':{'ssid':classroomConnection[_0x433a('0x1f')],'password':classroomConnection['hiddenPassword'],'hiddenNetwork':!![]},'json':!![]};let _0xedafa8=await rp(_0x5f5a90);winston[_0x433a('0xb')](_0xedafa8[_0x433a('0x20')]);return _0x23988e(_0xedafa8);}catch(_0x1a1a68){winston[_0x433a('0xb')]('Error\x20connecting\x20to\x20hidden\x20network');winston['info'](_0x1a1a68);return _0xa95a50(_0x1a1a68);}});};function connectToClassroomNetwork(_0x1f8a5f,_0x3150a5){return new Promise(async function(_0x236090,_0x21355d){try{winston[_0x433a('0xb')](_0x433a('0x21'));let _0x491571={'method':'POST','uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':_0x1f8a5f,'password':_0x3150a5},'json':!![]};let _0x549055=await rp(_0x491571);winston[_0x433a('0xb')](_0x549055[_0x433a('0x20')]);return _0x236090(_0x549055);}catch(_0x2c7ee3){winston['info']('Error\x20connecting\x20to\x20classroom\x20network');winston[_0x433a('0xb')](_0x2c7ee3);return _0x21355d(_0x2c7ee3);}});};function getConnectedNetworkName(){return new Promise(function(_0x1648e8,_0x282fc6){wpa_cli[_0x433a('0x12')](settings[_0x433a('0x13')],function(_0x151c8d,_0x554bb1){if(_0x151c8d)return _0x282fc6(_0x151c8d);return _0x1648e8(_0x554bb1[_0x433a('0xe')]);});});};function updateIPAddress(_0x136ea9){return new Promise(async function(_0x5c2463,_0x53d0c9){let _0x3681ea={'uri':classroomConnection[_0x433a('0x22')]+_0x433a('0x17')+_0x136ea9,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0x301579=await rp(_0x3681ea);winston[_0x433a('0xb')]('Updated\x20ip\x20address!');return _0x5c2463(_0x301579);}catch(_0x2f7d55){winston[_0x433a('0xb')](_0x433a('0x23'));return _0x53d0c9(_0x2f7d55);}});};function communityReachable(){return new Promise(async function(_0x36cf68,_0x48e75a){try{let _0x537e32={'uri':classroomConnection[_0x433a('0x22')],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x537e32);winston[_0x433a('0xb')]('Can\x20reach\x20community');return _0x36cf68(!![]);}catch(_0x3335c9){winston[_0x433a('0xb')]('Community\x20unreachable');return _0x36cf68(![]);}});};module[_0x433a('0x24')]=classroomConnection;