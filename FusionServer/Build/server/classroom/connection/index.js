var _0x4d2c=['Connecting\x20to\x20classroom\x20network','Error\x20connecting\x20to\x20classroom\x20network','status','Can\x20reach\x20community','Community\x20unreachable','exports','winston','config','get','Wifi_NIC','c3online.edu','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1','MyBot_Gatekeeper_WiFi','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','serialId','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','connected','wifiInterface','Error\x20accessing\x20wifi\x20dongle','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network'];(function(_0x1f0cd0,_0x5ac792){var _0x765328=function(_0x1eb50e){while(--_0x1eb50e){_0x1f0cd0['push'](_0x1f0cd0['shift']());}};_0x765328(++_0x5ac792);}(_0x4d2c,0x114));var _0xeba6=function(_0x147779,_0x15ca3a){_0x147779=_0x147779-0x0;var _0xb66e18=_0x4d2c[_0x147779];return _0xb66e18;};const winston=require(_0xeba6('0x0'));const rp=require('request-promise');const wpa_cli=require('wireless-tools/wpa_cli');const config=require(_0xeba6('0x1'));const settings={'wifiInterface':config[_0xeba6('0x2')](_0xeba6('0x3'))};const classroomConnection={'url':_0xeba6('0x4'),'classroomBackend':_0xeba6('0x5'),'classroomAPI':_0xeba6('0x6'),'globalUrl':_0xeba6('0x7'),'connected':![],'hiddenSSID':_0xeba6('0x8'),'hiddenPassword':_0xeba6('0x9')};classroomConnection[_0xeba6('0xa')]=function(){return new Promise(async function(_0x2d835b,_0x268eaa){try{const _0x193ea7=await require(_0xeba6('0xb'));const _0x483ed6=_0x193ea7[_0xeba6('0xc')];await checkHasWirelessDongle();let _0x1ccdf1=await communityReachable();if(!_0x1ccdf1)await connectToHiddenClassroomNetwork();let _0x328ff5=await determineCommunityAccess(_0x483ed6);if(_0x328ff5[_0xeba6('0xd')]){let _0x54f579=await getConnectedNetworkName();winston[_0xeba6('0xe')](_0xeba6('0xf')+_0x54f579);if(_0x54f579!=_0x328ff5[_0xeba6('0x10')][_0xeba6('0x11')])await connectToClassroomNetwork(_0x328ff5[_0xeba6('0x10')][_0xeba6('0x11')],_0x328ff5[_0xeba6('0x10')][_0xeba6('0x12')]);await updateIPAddress(_0x483ed6);await require(_0xeba6('0x13'));classroomConnection[_0xeba6('0x14')]=!![];}return _0x2d835b();}catch(_0x3102d7){winston[_0xeba6('0xe')](_0x3102d7);return _0x2d835b();}});};function checkHasWirelessDongle(){return new Promise(function(_0x42a803,_0x17bf0b){wpa_cli['status'](settings[_0xeba6('0x15')],function(_0x358c08,_0x4dffeb){if(_0x358c08){return _0x17bf0b(_0xeba6('0x16'));}winston[_0xeba6('0xe')](_0xeba6('0x17'));return _0x42a803(_0xeba6('0x18'));});});};function determineCommunityAccess(_0x59977c){return new Promise(async function(_0x449254,_0x33ac49){let _0x56852b={'uri':classroomConnection[_0xeba6('0x19')]+_0xeba6('0x1a')+_0x59977c,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x320861=await rp(_0x56852b);if(_0x320861[_0xeba6('0x1b')]!=_0xeba6('0x1c')){_0x320861['partOfCommunity']=!![];winston['info'](_0xeba6('0x1d'));}else{_0x320861[_0xeba6('0xd')]=![];winston[_0xeba6('0xe')](_0xeba6('0x1e'));}return _0x449254(_0x320861);}catch(_0x2d61be){return _0x33ac49(_0xeba6('0x1f'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x3938c3,_0x302a2d){try{winston['info'](_0xeba6('0x20'));let _0x494b17={'method':_0xeba6('0x21'),'uri':_0xeba6('0x22'),'body':{'ssid':classroomConnection[_0xeba6('0x23')],'password':classroomConnection[_0xeba6('0x24')],'hiddenNetwork':!![]},'json':!![]};let _0x5ce115=await rp(_0x494b17);winston[_0xeba6('0xe')](_0x5ce115[_0xeba6('0x25')]);return _0x3938c3(_0x5ce115);}catch(_0x486612){winston['info'](_0xeba6('0x26'));winston[_0xeba6('0xe')](_0x486612);return _0x302a2d(_0x486612);}});};function connectToClassroomNetwork(_0x53e56b,_0x54d174){return new Promise(async function(_0x2bc395,_0x464c40){try{winston[_0xeba6('0xe')](_0xeba6('0x27'));let _0x4f899d={'method':_0xeba6('0x21'),'uri':_0xeba6('0x22'),'body':{'ssid':_0x53e56b,'password':_0x54d174},'json':!![]};let _0x2f31eb=await rp(_0x4f899d);winston[_0xeba6('0xe')](_0x2f31eb[_0xeba6('0x25')]);return _0x2bc395(_0x2f31eb);}catch(_0x767e6f){winston['info'](_0xeba6('0x28'));winston[_0xeba6('0xe')](_0x767e6f);return _0x464c40(_0x767e6f);}});};function getConnectedNetworkName(){return new Promise(function(_0x32ebd4,_0x265158){wpa_cli[_0xeba6('0x29')](settings[_0xeba6('0x15')],function(_0x28f61f,_0x4b7b7d){if(_0x28f61f)return _0x265158(_0x28f61f);return _0x32ebd4(_0x4b7b7d[_0xeba6('0x11')]);});});};function updateIPAddress(_0x1c6c64){return new Promise(async function(_0x5b215e,_0x387f41){try{let _0x3a1ffb={'uri':classroomConnection[_0xeba6('0x19')]+_0xeba6('0x1a')+_0x1c6c64,'rejectUnauthorized':![],'json':!![]};await rp(_0x3a1ffb);return _0x5b215e();}catch(_0x3c81d6){return _0x387f41(_0x3c81d6);}});};function communityReachable(){return new Promise(async function(_0xebf0d8,_0x12a48a){try{let _0x44ee2b={'uri':classroomConnection[_0xeba6('0x19')],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0x44ee2b);winston[_0xeba6('0xe')](_0xeba6('0x2a'));return _0xebf0d8(!![]);}catch(_0x511d09){winston[_0xeba6('0xe')](_0xeba6('0x2b'));return _0xebf0d8(![]);}});};module[_0xeba6('0x2c')]=classroomConnection;