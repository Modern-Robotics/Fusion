var _0x2ee4=['Community\x20unreachable','exports','winston','request-promise','wireless-tools/wpa_cli','wlan1','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1','otherdemokey','attemptConnection','./../../../config/serial','serialId','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','status','wifiInterface','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','Connecting\x20to\x20classroom\x20network','http://localhost:8080/api/admin/wirelessConnections','Can\x20reach\x20community'];(function(_0x3a034e,_0x42782b){var _0x57a9e8=function(_0x82727e){while(--_0x82727e){_0x3a034e['push'](_0x3a034e['shift']());}};_0x57a9e8(++_0x42782b);}(_0x2ee4,0xec));var _0x5601=function(_0x1cb91f,_0x3384d7){_0x1cb91f=_0x1cb91f-0x0;var _0xdf0c74=_0x2ee4[_0x1cb91f];return _0xdf0c74;};const winston=require(_0x5601('0x0'));const rp=require(_0x5601('0x1'));const wpa_cli=require(_0x5601('0x2'));const settings={'wifiInterface':_0x5601('0x3')};const classroomConnection={'url':'c3online.edu','classroomBackend':_0x5601('0x4'),'classroomAPI':_0x5601('0x5'),'globalUrl':_0x5601('0x6'),'connected':![],'hiddenSSID':'virtual.c3edu.online','hiddenPassword':_0x5601('0x7')};classroomConnection[_0x5601('0x8')]=function(){return new Promise(async function(_0x47f480,_0x51b694){try{const _0x4fe759=await require(_0x5601('0x9'));const _0x4553d7=_0x4fe759[_0x5601('0xa')];await checkHasWirelessDongle();let _0x35a0=await communityReachable();if(!_0x35a0)await connectToHiddenClassroomNetwork();let _0x3b5b22=await determineCommunityAccess(_0x4553d7);if(_0x3b5b22[_0x5601('0xb')]){let _0x1d3e76=await getConnectedNetworkName();winston[_0x5601('0xc')](_0x5601('0xd')+_0x1d3e76);if(_0x1d3e76!=_0x3b5b22[_0x5601('0xe')][_0x5601('0xf')])await connectToClassroomNetwork(_0x3b5b22['wifi']['ssid'],_0x3b5b22[_0x5601('0xe')][_0x5601('0x10')]);await updateIPAddress(_0x4553d7);await require(_0x5601('0x11'));classroomConnection['connected']=!![];}return _0x47f480();}catch(_0xc220b){winston['info'](_0xc220b);return _0x47f480();}});};function checkHasWirelessDongle(){return new Promise(function(_0x5d6643,_0x4847ac){wpa_cli[_0x5601('0x12')](settings[_0x5601('0x13')],function(_0x5d4ea0,_0xc22648){if(_0x5d4ea0){return _0x4847ac('Error\x20accessing\x20wifi\x20dongle');}winston[_0x5601('0xc')](_0x5601('0x14'));return _0x5d6643(_0x5601('0x15'));});});};function determineCommunityAccess(_0x18afd3){return new Promise(async function(_0x5318f2,_0x4c43fa){let _0x18a406={'uri':classroomConnection[_0x5601('0x16')]+_0x5601('0x17')+_0x18afd3,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x103fb1=await rp(_0x18a406);if(_0x103fb1[_0x5601('0x18')]!=_0x5601('0x19')){_0x103fb1[_0x5601('0xb')]=!![];winston[_0x5601('0xc')](_0x5601('0x1a'));}else{_0x103fb1[_0x5601('0xb')]=![];winston['info']('Fusion\x20not\x20part\x20of\x20this\x20community');}return _0x5318f2(_0x103fb1);}catch(_0x5c61e7){return _0x4c43fa(_0x5601('0x1b'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x2aa055,_0x146a2f){try{winston[_0x5601('0xc')](_0x5601('0x1c'));let _0x15fe7f={'method':_0x5601('0x1d'),'uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':classroomConnection[_0x5601('0x1e')],'password':classroomConnection[_0x5601('0x1f')],'hiddenNetwork':!![]},'json':!![]};let _0x52fea3=await rp(_0x15fe7f);winston[_0x5601('0xc')](_0x52fea3[_0x5601('0x20')]);return _0x2aa055(_0x52fea3);}catch(_0x41fbe1){winston[_0x5601('0xc')](_0x5601('0x21'));winston[_0x5601('0xc')](_0x41fbe1);return _0x146a2f(_0x41fbe1);}});};function connectToClassroomNetwork(_0x106d28,_0xc1058b){return new Promise(async function(_0x10dbef,_0x32e8ab){try{winston[_0x5601('0xc')](_0x5601('0x22'));let _0x15bf83={'method':_0x5601('0x1d'),'uri':_0x5601('0x23'),'body':{'ssid':_0x106d28,'password':_0xc1058b},'json':!![]};let _0x3f7216=await rp(_0x15bf83);winston['info'](_0x3f7216[_0x5601('0x20')]);return _0x10dbef(_0x3f7216);}catch(_0x9d610c){winston[_0x5601('0xc')]('Error\x20connecting\x20to\x20classroom\x20network');winston[_0x5601('0xc')](_0x9d610c);return _0x32e8ab(_0x9d610c);}});};function getConnectedNetworkName(){return new Promise(function(_0x394d99,_0x1002cb){wpa_cli[_0x5601('0x12')](settings[_0x5601('0x13')],function(_0x1d5e63,_0x4de157){if(_0x1d5e63)return _0x1002cb(_0x1d5e63);return _0x394d99(_0x4de157['ssid']);});});};function updateIPAddress(_0x274f09){return new Promise(async function(_0x49d9a4,_0x20a5e8){try{let _0x36198f={'uri':classroomConnection['globalUrl']+_0x5601('0x17')+_0x274f09,'rejectUnauthorized':![],'json':!![]};await rp(_0x36198f);return _0x49d9a4();}catch(_0xcf2ea6){return _0x20a5e8(_0xcf2ea6);}});};function communityReachable(){return new Promise(async function(_0x1276f7,_0x47ca94){try{let _0xa13d7={'uri':classroomConnection[_0x5601('0x16')],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0xa13d7);winston[_0x5601('0xc')](_0x5601('0x24'));return _0x1276f7(!![]);}catch(_0x4e9319){winston[_0x5601('0xc')](_0x5601('0x25'));return _0x1276f7(![]);}});};module[_0x5601('0x26')]=classroomConnection;