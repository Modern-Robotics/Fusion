const _0x3daa=['./../../../config/serial','serialId','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','connected','status','Error\x20accessing\x20wifi\x20dongle','Wifi\x20dongle\x20found','message','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','http://localhost:8080/api/admin/wirelessConnections','Error\x20connecting\x20to\x20classroom\x20network','wifiInterface','globalUrl','Updated\x20ip\x20address!','Failed\x20to\x20update\x20ip\x20address','exports','request-promise','wireless-tools/wpa_cli','config','get','Wifi_NIC','c3online.edu','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1','attemptConnection'];(function(_0x535776,_0x2482c1){const _0x5be135=function(_0x1103bb){while(--_0x1103bb){_0x535776['push'](_0x535776['shift']());}};_0x5be135(++_0x2482c1);}(_0x3daa,0x1ca));const _0x6e06=function(_0x535776,_0x2482c1){_0x535776=_0x535776-0x0;let _0x5be135=_0x3daa[_0x535776];return _0x5be135;};const winston=require('winston');const rp=require(_0x6e06('0x0'));const wpa_cli=require(_0x6e06('0x1'));const config=require(_0x6e06('0x2'));const settings={'wifiInterface':config[_0x6e06('0x3')](_0x6e06('0x4'))};const classroomConnection={'url':_0x6e06('0x5'),'classroomBackend':_0x6e06('0x6'),'classroomAPI':_0x6e06('0x7'),'globalUrl':_0x6e06('0x8'),'connected':![],'hiddenSSID':'MyBot_Gatekeeper_WiFi','hiddenPassword':'CMMthgilxoBsecure'};classroomConnection[_0x6e06('0x9')]=function(){return new Promise(async function(_0x11a5aa,_0x3c01cf){try{const _0x484724=await require(_0x6e06('0xa'));const _0x1c1a7f=_0x484724[_0x6e06('0xb')];await checkHasWirelessDongle();let _0x5c5985=await communityReachable();if(!_0x5c5985)await connectToHiddenClassroomNetwork();let _0x548544=await determineCommunityAccess(_0x1c1a7f);if(_0x548544[_0x6e06('0xc')]){let _0xb19777=await getConnectedNetworkName();winston[_0x6e06('0xd')](_0x6e06('0xe')+_0xb19777);if(_0xb19777!=_0x548544[_0x6e06('0xf')]['ssid'])await connectToClassroomNetwork(_0x548544[_0x6e06('0xf')][_0x6e06('0x10')],_0x548544[_0x6e06('0xf')][_0x6e06('0x11')]);await updateIPAddress(_0x1c1a7f);await require(_0x6e06('0x12'));classroomConnection[_0x6e06('0x13')]=!![];}return _0x11a5aa();}catch(_0x44c08b){winston[_0x6e06('0xd')](_0x44c08b);return _0x11a5aa();}});};function checkHasWirelessDongle(){return new Promise(function(_0x3d1e86,_0x28c8cc){wpa_cli[_0x6e06('0x14')](settings['wifiInterface'],function(_0x307989,_0x2e4c05){if(_0x307989){return _0x28c8cc(_0x6e06('0x15'));}winston[_0x6e06('0xd')]('Wireless\x20dongle\x20detected');return _0x3d1e86(_0x6e06('0x16'));});});};function determineCommunityAccess(_0x56765c){return new Promise(async function(_0x4f5344,_0x40f389){let _0x232728={'uri':classroomConnection['globalUrl']+':8443/api/v1/connect/'+_0x56765c,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0xb18990=await rp(_0x232728);if(_0xb18990[_0x6e06('0x17')]!='Fusion\x20not\x20part\x20of\x20community'){_0xb18990['partOfCommunity']=!![];winston[_0x6e06('0xd')]('Fusion\x20is\x20part\x20of\x20community');}else{_0xb18990[_0x6e06('0xc')]=![];winston[_0x6e06('0xd')](_0x6e06('0x18'));}return _0x4f5344(_0xb18990);}catch(_0x782a24){return _0x40f389(_0x6e06('0x19'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0xd72c7,_0x2e417a){try{winston['info'](_0x6e06('0x1a'));let _0x4869a4={'method':_0x6e06('0x1b'),'uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':classroomConnection[_0x6e06('0x1c')],'password':classroomConnection[_0x6e06('0x1d')],'hiddenNetwork':!![]},'json':!![]};let _0x1ab595=await rp(_0x4869a4);winston[_0x6e06('0xd')](_0x1ab595[_0x6e06('0x1e')]);return _0xd72c7(_0x1ab595);}catch(_0x2daaf4){winston['info'](_0x6e06('0x1f'));winston[_0x6e06('0xd')](_0x2daaf4);return _0x2e417a(_0x2daaf4);}});};function connectToClassroomNetwork(_0x2e0b75,_0x32ded0){return new Promise(async function(_0x28f0ff,_0x2e84f5){try{winston['info']('Connecting\x20to\x20classroom\x20network');let _0x4bb911={'method':_0x6e06('0x1b'),'uri':_0x6e06('0x20'),'body':{'ssid':_0x2e0b75,'password':_0x32ded0},'json':!![]};let _0x566bee=await rp(_0x4bb911);winston['info'](_0x566bee[_0x6e06('0x1e')]);return _0x28f0ff(_0x566bee);}catch(_0x1f7d02){winston[_0x6e06('0xd')](_0x6e06('0x21'));winston[_0x6e06('0xd')](_0x1f7d02);return _0x2e84f5(_0x1f7d02);}});};function getConnectedNetworkName(){return new Promise(function(_0x150432,_0x28e4d4){wpa_cli[_0x6e06('0x14')](settings[_0x6e06('0x22')],function(_0x100868,_0x5b0440){if(_0x100868)return _0x28e4d4(_0x100868);return _0x150432(_0x5b0440[_0x6e06('0x10')]);});});};function updateIPAddress(_0x5b9830){return new Promise(async function(_0x1094bc,_0x2e5b2f){let _0x2f49e8={'uri':classroomConnection[_0x6e06('0x23')]+':8443/api/v1/connect/'+_0x5b9830,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0x4d91d1=await rp(_0x2f49e8);winston[_0x6e06('0xd')](_0x6e06('0x24'));return _0x1094bc(_0x4d91d1);}catch(_0x3a0d58){winston[_0x6e06('0xd')](_0x6e06('0x25'));return _0x2e5b2f(_0x3a0d58);}});};function communityReachable(){return new Promise(async function(_0x552a03,_0x47d918){try{let _0x125ffd={'uri':classroomConnection[_0x6e06('0x23')],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x125ffd);winston[_0x6e06('0xd')]('Can\x20reach\x20community');return _0x552a03(!![]);}catch(_0x46efdd){winston['info']('Community\x20unreachable');return _0x552a03(![]);}});};module[_0x6e06('0x26')]=classroomConnection;