var _0x59b9=['wifi','ssid','passphrase','./../sockets/','connected','status','Error\x20accessing\x20wifi\x20dongle','Wifi\x20dongle\x20found','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','http://localhost:8080/api/admin/wirelessConnections','hiddenPassword','Error\x20connecting\x20to\x20hidden\x20network','serverMessage','Error\x20connecting\x20to\x20classroom\x20network','wifiInterface','globalUrl',':8443/api/v1/connect/','Community\x20unreachable','exports','winston','request-promise','config','Wifi_NIC','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1','MyBot_Gatekeeper_WiFi','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','serialId','partOfCommunity','info','Current\x20network:\x20'];(function(_0x366d05,_0xbe8df2){var _0x23bf1b=function(_0x35cf48){while(--_0x35cf48){_0x366d05['push'](_0x366d05['shift']());}};_0x23bf1b(++_0xbe8df2);}(_0x59b9,0x16d));var _0x165b=function(_0x47ea1a,_0x288711){_0x47ea1a=_0x47ea1a-0x0;var _0x5d4ab5=_0x59b9[_0x47ea1a];return _0x5d4ab5;};const winston=require(_0x165b('0x0'));const rp=require(_0x165b('0x1'));const wpa_cli=require('wireless-tools/wpa_cli');const config=require(_0x165b('0x2'));const settings={'wifiInterface':config['get'](_0x165b('0x3'))};const classroomConnection={'url':'c3online.edu','classroomBackend':_0x165b('0x4'),'classroomAPI':_0x165b('0x5'),'globalUrl':_0x165b('0x6'),'connected':![],'hiddenSSID':_0x165b('0x7'),'hiddenPassword':_0x165b('0x8')};classroomConnection[_0x165b('0x9')]=function(){return new Promise(async function(_0x37dad6,_0x52b7fd){try{const _0x195153=await require(_0x165b('0xa'));const _0x1a8740=_0x195153[_0x165b('0xb')];await checkHasWirelessDongle();let _0x3a0af3=await communityReachable();if(!_0x3a0af3)await connectToHiddenClassroomNetwork();let _0xbffb0b=await determineCommunityAccess(_0x1a8740);if(_0xbffb0b[_0x165b('0xc')]){let _0x4d8a33=await getConnectedNetworkName();winston[_0x165b('0xd')](_0x165b('0xe')+_0x4d8a33);if(_0x4d8a33!=_0xbffb0b['wifi']['ssid'])await connectToClassroomNetwork(_0xbffb0b[_0x165b('0xf')][_0x165b('0x10')],_0xbffb0b[_0x165b('0xf')][_0x165b('0x11')]);await updateIPAddress(_0x1a8740);await require(_0x165b('0x12'));classroomConnection[_0x165b('0x13')]=!![];}return _0x37dad6();}catch(_0x386459){winston[_0x165b('0xd')](_0x386459);return _0x37dad6();}});};function checkHasWirelessDongle(){return new Promise(function(_0x245e3d,_0x5ee41a){wpa_cli[_0x165b('0x14')](settings['wifiInterface'],function(_0x3b7819,_0x3da717){if(_0x3b7819){return _0x5ee41a(_0x165b('0x15'));}winston[_0x165b('0xd')]('Wireless\x20dongle\x20detected');return _0x245e3d(_0x165b('0x16'));});});};function determineCommunityAccess(_0x4f786b){return new Promise(async function(_0xb4563f,_0x295bda){let _0x5ccf38={'uri':classroomConnection['globalUrl']+':8443/api/v1/connect/'+_0x4f786b,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x5b4ed3=await rp(_0x5ccf38);if(_0x5b4ed3[_0x165b('0x17')]!=_0x165b('0x18')){_0x5b4ed3['partOfCommunity']=!![];winston[_0x165b('0xd')]('Fusion\x20is\x20part\x20of\x20community');}else{_0x5b4ed3['partOfCommunity']=![];winston[_0x165b('0xd')](_0x165b('0x19'));}return _0xb4563f(_0x5b4ed3);}catch(_0x59fe62){return _0x295bda(_0x165b('0x1a'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x3d7cf7,_0x4b144b){try{winston[_0x165b('0xd')](_0x165b('0x1b'));let _0x301577={'method':'POST','uri':_0x165b('0x1c'),'body':{'ssid':classroomConnection['hiddenSSID'],'password':classroomConnection[_0x165b('0x1d')],'hiddenNetwork':!![]},'json':!![]};let _0xf7d47f=await rp(_0x301577);winston['info'](_0xf7d47f['serverMessage']);return _0x3d7cf7(_0xf7d47f);}catch(_0x122db7){winston[_0x165b('0xd')](_0x165b('0x1e'));winston['info'](_0x122db7);return _0x4b144b(_0x122db7);}});};function connectToClassroomNetwork(_0x3caae8,_0xf394fa){return new Promise(async function(_0x4e5f28,_0x128cae){try{winston[_0x165b('0xd')]('Connecting\x20to\x20classroom\x20network');let _0x1b3108={'method':'POST','uri':_0x165b('0x1c'),'body':{'ssid':_0x3caae8,'password':_0xf394fa},'json':!![]};let _0x1bd3cb=await rp(_0x1b3108);winston[_0x165b('0xd')](_0x1bd3cb[_0x165b('0x1f')]);return _0x4e5f28(_0x1bd3cb);}catch(_0x1bb87f){winston['info'](_0x165b('0x20'));winston[_0x165b('0xd')](_0x1bb87f);return _0x128cae(_0x1bb87f);}});};function getConnectedNetworkName(){return new Promise(function(_0x342f34,_0x2b9e7a){wpa_cli[_0x165b('0x14')](settings[_0x165b('0x21')],function(_0x193a79,_0x4a3306){if(_0x193a79)return _0x2b9e7a(_0x193a79);return _0x342f34(_0x4a3306[_0x165b('0x10')]);});});};function updateIPAddress(_0x1890c2){return new Promise(async function(_0x52b088,_0x1539af){try{let _0x7a1855={'uri':classroomConnection[_0x165b('0x22')]+_0x165b('0x23')+_0x1890c2,'rejectUnauthorized':![],'json':!![]};await rp(_0x7a1855);return _0x52b088();}catch(_0x170782){return _0x1539af(_0x170782);}});};function communityReachable(){return new Promise(async function(_0x226c57,_0x3bf9b9){try{let _0xde40c4={'uri':classroomConnection['globalUrl'],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0xde40c4);winston[_0x165b('0xd')]('Can\x20reach\x20community');return _0x226c57(!![]);}catch(_0x4ab634){winston['info'](_0x165b('0x24'));return _0x226c57(![]);}});};module[_0x165b('0x25')]=classroomConnection;