var _0x5037=['message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','Connecting\x20to\x20classroom\x20network','Error\x20connecting\x20to\x20classroom\x20network',':8443/api/v1/connect/','Updated\x20ip\x20address!','Can\x20reach\x20community','Community\x20unreachable','exports','winston','wireless-tools/wpa_cli','config','get','Wifi_NIC','c3online.edu','c3online.edu/backend','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','serialId','partOfCommunity','info','wifi','ssid','passphrase','connected','status','Wifi\x20dongle\x20found','globalUrl'];(function(_0x5a4f73,_0x13d3c9){var _0xe22ad9=function(_0x5911f8){while(--_0x5911f8){_0x5a4f73['push'](_0x5a4f73['shift']());}};_0xe22ad9(++_0x13d3c9);}(_0x5037,0xa5));var _0x1bb7=function(_0x317c3a,_0x3065a0){_0x317c3a=_0x317c3a-0x0;var _0x219a60=_0x5037[_0x317c3a];return _0x219a60;};const winston=require(_0x1bb7('0x0'));const rp=require('request-promise');const wpa_cli=require(_0x1bb7('0x1'));const config=require(_0x1bb7('0x2'));const settings={'wifiInterface':config[_0x1bb7('0x3')](_0x1bb7('0x4'))};const classroomConnection={'url':_0x1bb7('0x5'),'classroomBackend':_0x1bb7('0x6'),'classroomAPI':'c3online.edu:8443','globalUrl':'https://10.200.200.1','connected':![],'hiddenSSID':'MyBot_Gatekeeper_WiFi','hiddenPassword':_0x1bb7('0x7')};classroomConnection[_0x1bb7('0x8')]=function(){return new Promise(async function(_0x4a9109,_0x3fa0e1){try{const _0x44ac9b=await require(_0x1bb7('0x9'));const _0x20ed8d=_0x44ac9b[_0x1bb7('0xa')];await checkHasWirelessDongle();let _0x15ee94=await communityReachable();if(!_0x15ee94)await connectToHiddenClassroomNetwork();let _0x327919=await determineCommunityAccess(_0x20ed8d);if(_0x327919[_0x1bb7('0xb')]){let _0x1cfd78=await getConnectedNetworkName();winston[_0x1bb7('0xc')]('Current\x20network:\x20'+_0x1cfd78);if(_0x1cfd78!=_0x327919[_0x1bb7('0xd')]['ssid'])await connectToClassroomNetwork(_0x327919[_0x1bb7('0xd')][_0x1bb7('0xe')],_0x327919[_0x1bb7('0xd')][_0x1bb7('0xf')]);await updateIPAddress(_0x20ed8d);await require('./../sockets/');classroomConnection[_0x1bb7('0x10')]=!![];}return _0x4a9109();}catch(_0x31d122){winston[_0x1bb7('0xc')](_0x31d122);return _0x4a9109();}});};function checkHasWirelessDongle(){return new Promise(function(_0x34404b,_0x59addf){wpa_cli[_0x1bb7('0x11')](settings['wifiInterface'],function(_0x58a530,_0x3dc5a9){if(_0x58a530){return _0x59addf('Error\x20accessing\x20wifi\x20dongle');}winston[_0x1bb7('0xc')]('Wireless\x20dongle\x20detected');return _0x34404b(_0x1bb7('0x12'));});});};function determineCommunityAccess(_0x3b7e12){return new Promise(async function(_0x16f45b,_0x34d9a7){let _0x44ac0b={'uri':classroomConnection[_0x1bb7('0x13')]+':8443/api/v1/connect/'+_0x3b7e12,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0x564190=await rp(_0x44ac0b);if(_0x564190[_0x1bb7('0x14')]!=_0x1bb7('0x15')){_0x564190[_0x1bb7('0xb')]=!![];winston[_0x1bb7('0xc')](_0x1bb7('0x16'));}else{_0x564190['partOfCommunity']=![];winston[_0x1bb7('0xc')]('Fusion\x20not\x20part\x20of\x20this\x20community');}return _0x16f45b(_0x564190);}catch(_0x109cbe){return _0x34d9a7(_0x1bb7('0x17'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x40424f,_0x202af6){try{winston[_0x1bb7('0xc')](_0x1bb7('0x18'));let _0x143367={'method':_0x1bb7('0x19'),'uri':_0x1bb7('0x1a'),'body':{'ssid':classroomConnection[_0x1bb7('0x1b')],'password':classroomConnection['hiddenPassword'],'hiddenNetwork':!![]},'json':!![]};let _0x134cc7=await rp(_0x143367);winston[_0x1bb7('0xc')](_0x134cc7[_0x1bb7('0x1c')]);return _0x40424f(_0x134cc7);}catch(_0x25a15e){winston[_0x1bb7('0xc')](_0x1bb7('0x1d'));winston[_0x1bb7('0xc')](_0x25a15e);return _0x202af6(_0x25a15e);}});};function connectToClassroomNetwork(_0x4169b4,_0x1a1c19){return new Promise(async function(_0x172e33,_0x5b69ee){try{winston[_0x1bb7('0xc')](_0x1bb7('0x1e'));let _0x3ef370={'method':_0x1bb7('0x19'),'uri':_0x1bb7('0x1a'),'body':{'ssid':_0x4169b4,'password':_0x1a1c19},'json':!![]};let _0x519618=await rp(_0x3ef370);winston['info'](_0x519618[_0x1bb7('0x1c')]);return _0x172e33(_0x519618);}catch(_0x492fbd){winston['info'](_0x1bb7('0x1f'));winston[_0x1bb7('0xc')](_0x492fbd);return _0x5b69ee(_0x492fbd);}});};function getConnectedNetworkName(){return new Promise(function(_0x333ea4,_0x4b04cc){wpa_cli[_0x1bb7('0x11')](settings['wifiInterface'],function(_0x23cdfe,_0x25ea1f){if(_0x23cdfe)return _0x4b04cc(_0x23cdfe);return _0x333ea4(_0x25ea1f[_0x1bb7('0xe')]);});});};function updateIPAddress(_0x5dd733){return new Promise(async function(_0x46ebd0,_0x243996){let _0x448216={'uri':classroomConnection[_0x1bb7('0x13')]+_0x1bb7('0x20')+_0x5dd733,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0xe066ea=await rp(_0x448216);winston[_0x1bb7('0xc')](_0x1bb7('0x21'));return _0x46ebd0(_0xe066ea);}catch(_0xbd6930){winston[_0x1bb7('0xc')]('Failed\x20to\x20update\x20ip\x20address');return _0x243996(_0xbd6930);}});};function communityReachable(){return new Promise(async function(_0x46f619,_0x6ca362){try{let _0x26010e={'uri':classroomConnection[_0x1bb7('0x13')],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x26010e);winston[_0x1bb7('0xc')](_0x1bb7('0x22'));return _0x46f619(!![]);}catch(_0x1e63c8){winston[_0x1bb7('0xc')](_0x1bb7('0x23'));return _0x46f619(![]);}});};module[_0x1bb7('0x24')]=classroomConnection;