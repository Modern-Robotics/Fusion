var _0x213c=['wifiInterface','Error\x20accessing\x20wifi\x20dongle','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Connecting\x20to\x20hidden\x20network','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','Connecting\x20to\x20classroom\x20network','Error\x20connecting\x20to\x20classroom\x20network','Updated\x20ip\x20address!','Failed\x20to\x20update\x20ip\x20address','Community\x20unreachable','exports','winston','request-promise','wireless-tools/wpa_cli','config','Wifi_NIC','c3online.edu','c3online.edu/backend','MyBot_Gatekeeper_WiFi','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','status'];(function(_0x53a5d6,_0x5d333e){var _0x498cc9=function(_0x2fb151){while(--_0x2fb151){_0x53a5d6['push'](_0x53a5d6['shift']());}};_0x498cc9(++_0x5d333e);}(_0x213c,0x126));var _0x2b6b=function(_0x12c9fb,_0x28df82){_0x12c9fb=_0x12c9fb-0x0;var _0x2a5058=_0x213c[_0x12c9fb];return _0x2a5058;};const winston=require(_0x2b6b('0x0'));const rp=require(_0x2b6b('0x1'));const wpa_cli=require(_0x2b6b('0x2'));const config=require(_0x2b6b('0x3'));const settings={'wifiInterface':config['get'](_0x2b6b('0x4'))};const classroomConnection={'url':_0x2b6b('0x5'),'classroomBackend':_0x2b6b('0x6'),'classroomAPI':'c3online.edu:8443','globalUrl':'https://10.200.200.1','connected':![],'hiddenSSID':_0x2b6b('0x7'),'hiddenPassword':_0x2b6b('0x8')};classroomConnection[_0x2b6b('0x9')]=function(){return new Promise(async function(_0x7719d1,_0x4c9fd6){try{const _0x472d8e=await require(_0x2b6b('0xa'));const _0x35b418=_0x472d8e['serialId'];await checkHasWirelessDongle();let _0x17f69d=await communityReachable();if(!_0x17f69d)await connectToHiddenClassroomNetwork();let _0x12744e=await determineCommunityAccess(_0x35b418);if(_0x12744e[_0x2b6b('0xb')]){let _0x20351e=await getConnectedNetworkName();winston[_0x2b6b('0xc')](_0x2b6b('0xd')+_0x20351e);if(_0x20351e!=_0x12744e[_0x2b6b('0xe')]['ssid'])await connectToClassroomNetwork(_0x12744e[_0x2b6b('0xe')][_0x2b6b('0xf')],_0x12744e[_0x2b6b('0xe')][_0x2b6b('0x10')]);await updateIPAddress(_0x35b418);await require('./../sockets/');classroomConnection['connected']=!![];}return _0x7719d1();}catch(_0x585075){winston[_0x2b6b('0xc')](_0x585075);return _0x7719d1();}});};function checkHasWirelessDongle(){return new Promise(function(_0x556a96,_0x576448){wpa_cli[_0x2b6b('0x11')](settings[_0x2b6b('0x12')],function(_0x3bca5a,_0x4cab4c){if(_0x3bca5a){return _0x576448(_0x2b6b('0x13'));}winston[_0x2b6b('0xc')]('Wireless\x20dongle\x20detected');return _0x556a96('Wifi\x20dongle\x20found');});});};function determineCommunityAccess(_0x2857ec){return new Promise(async function(_0x4a7746,_0x1c080d){let _0x591b0b={'uri':classroomConnection[_0x2b6b('0x14')]+_0x2b6b('0x15')+_0x2857ec,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0x308353=await rp(_0x591b0b);if(_0x308353[_0x2b6b('0x16')]!=_0x2b6b('0x17')){_0x308353[_0x2b6b('0xb')]=!![];winston[_0x2b6b('0xc')](_0x2b6b('0x18'));}else{_0x308353[_0x2b6b('0xb')]=![];winston[_0x2b6b('0xc')](_0x2b6b('0x19'));}return _0x4a7746(_0x308353);}catch(_0x1db26f){return _0x1c080d('Could\x20not\x20access\x20classroom\x20environment');}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0xa90660,_0x460ebc){try{winston[_0x2b6b('0xc')](_0x2b6b('0x1a'));let _0x5ab349={'method':_0x2b6b('0x1b'),'uri':_0x2b6b('0x1c'),'body':{'ssid':classroomConnection[_0x2b6b('0x1d')],'password':classroomConnection[_0x2b6b('0x1e')],'hiddenNetwork':!![]},'json':!![]};let _0x550e63=await rp(_0x5ab349);winston[_0x2b6b('0xc')](_0x550e63[_0x2b6b('0x1f')]);return _0xa90660(_0x550e63);}catch(_0x59f3c3){winston[_0x2b6b('0xc')](_0x2b6b('0x20'));winston[_0x2b6b('0xc')](_0x59f3c3);return _0x460ebc(_0x59f3c3);}});};function connectToClassroomNetwork(_0x3015c8,_0x3c1b33){return new Promise(async function(_0x51a2bf,_0x28c3d5){try{winston[_0x2b6b('0xc')](_0x2b6b('0x21'));let _0x55be47={'method':'POST','uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':_0x3015c8,'password':_0x3c1b33},'json':!![]};let _0x3d99e2=await rp(_0x55be47);winston[_0x2b6b('0xc')](_0x3d99e2[_0x2b6b('0x1f')]);return _0x51a2bf(_0x3d99e2);}catch(_0x1a5aad){winston['info'](_0x2b6b('0x22'));winston[_0x2b6b('0xc')](_0x1a5aad);return _0x28c3d5(_0x1a5aad);}});};function getConnectedNetworkName(){return new Promise(function(_0xd557a,_0x21e5c7){wpa_cli['status'](settings[_0x2b6b('0x12')],function(_0x580993,_0x457d2f){if(_0x580993)return _0x21e5c7(_0x580993);return _0xd557a(_0x457d2f[_0x2b6b('0xf')]);});});};function updateIPAddress(_0x283a2b){return new Promise(async function(_0x50bd66,_0x46c664){let _0x2a6e92={'uri':classroomConnection['globalUrl']+':8443/api/v1/connect/'+_0x283a2b,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0x33596f=await rp(_0x2a6e92);winston[_0x2b6b('0xc')](_0x2b6b('0x23'));return _0x50bd66(_0x33596f);}catch(_0x24d02d){winston['info'](_0x2b6b('0x24'));return _0x46c664(_0x24d02d);}});};function communityReachable(){return new Promise(async function(_0x15378f,_0x50a7d5){try{let _0x13324e={'uri':classroomConnection[_0x2b6b('0x14')],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x13324e);winston[_0x2b6b('0xc')]('Can\x20reach\x20community');return _0x15378f(!![]);}catch(_0x5006c7){winston[_0x2b6b('0xc')](_0x2b6b('0x25'));return _0x15378f(![]);}});};module[_0x2b6b('0x26')]=classroomConnection;