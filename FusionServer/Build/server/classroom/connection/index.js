var _0xabc7=['Can\x20reach\x20community','Community\x20unreachable','exports','winston','request-promise','wireless-tools/wpa_cli','config','get','Wifi_NIC','c3online.edu:8443','https://10.200.200.1','MyBot_Gatekeeper_WiFi','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','status','wifiInterface','Error\x20accessing\x20wifi\x20dongle','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','Connecting\x20to\x20classroom\x20network','Error\x20connecting\x20to\x20classroom\x20network'];(function(_0x5b3e44,_0x506408){var _0x53e09=function(_0x2d2936){while(--_0x2d2936){_0x5b3e44['push'](_0x5b3e44['shift']());}};_0x53e09(++_0x506408);}(_0xabc7,0x1bb));var _0x85b5=function(_0x295d0a,_0x16971b){_0x295d0a=_0x295d0a-0x0;var _0x4b286a=_0xabc7[_0x295d0a];return _0x4b286a;};const winston=require(_0x85b5('0x0'));const rp=require(_0x85b5('0x1'));const wpa_cli=require(_0x85b5('0x2'));const config=require(_0x85b5('0x3'));const settings={'wifiInterface':config[_0x85b5('0x4')](_0x85b5('0x5'))};const classroomConnection={'url':'c3online.edu','classroomBackend':'c3online.edu/backend','classroomAPI':_0x85b5('0x6'),'globalUrl':_0x85b5('0x7'),'connected':![],'hiddenSSID':_0x85b5('0x8'),'hiddenPassword':_0x85b5('0x9')};classroomConnection[_0x85b5('0xa')]=function(){return new Promise(async function(_0x404314,_0x46f96f){try{const _0x171806=await require(_0x85b5('0xb'));const _0xd7de10=_0x171806['serialId'];await checkHasWirelessDongle();let _0x2cc5cf=await communityReachable();if(!_0x2cc5cf)await connectToHiddenClassroomNetwork();let _0x2a6429=await determineCommunityAccess(_0xd7de10);if(_0x2a6429[_0x85b5('0xc')]){let _0x52eadd=await getConnectedNetworkName();winston[_0x85b5('0xd')](_0x85b5('0xe')+_0x52eadd);if(_0x52eadd!=_0x2a6429[_0x85b5('0xf')]['ssid'])await connectToClassroomNetwork(_0x2a6429[_0x85b5('0xf')][_0x85b5('0x10')],_0x2a6429[_0x85b5('0xf')][_0x85b5('0x11')]);await updateIPAddress(_0xd7de10);await require(_0x85b5('0x12'));classroomConnection['connected']=!![];}return _0x404314();}catch(_0x484581){winston[_0x85b5('0xd')](_0x484581);return _0x404314();}});};function checkHasWirelessDongle(){return new Promise(function(_0xcc8a35,_0x249ca6){wpa_cli[_0x85b5('0x13')](settings[_0x85b5('0x14')],function(_0x5898b5,_0x14eafc){if(_0x5898b5){return _0x249ca6(_0x85b5('0x15'));}winston[_0x85b5('0xd')]('Wireless\x20dongle\x20detected');return _0xcc8a35('Wifi\x20dongle\x20found');});});};function determineCommunityAccess(_0x119833){return new Promise(async function(_0x53b643,_0x5c91ed){let _0x593c32={'uri':classroomConnection[_0x85b5('0x16')]+_0x85b5('0x17')+_0x119833,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x25282d=await rp(_0x593c32);if(_0x25282d[_0x85b5('0x18')]!=_0x85b5('0x19')){_0x25282d['partOfCommunity']=!![];winston['info'](_0x85b5('0x1a'));}else{_0x25282d[_0x85b5('0xc')]=![];winston[_0x85b5('0xd')](_0x85b5('0x1b'));}return _0x53b643(_0x25282d);}catch(_0x2cb14e){return _0x5c91ed(_0x85b5('0x1c'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x255259,_0x26e80a){try{winston['info'](_0x85b5('0x1d'));let _0x5d336e={'method':_0x85b5('0x1e'),'uri':_0x85b5('0x1f'),'body':{'ssid':classroomConnection[_0x85b5('0x20')],'password':classroomConnection['hiddenPassword'],'hiddenNetwork':!![]},'json':!![]};let _0x880d2=await rp(_0x5d336e);winston[_0x85b5('0xd')](_0x880d2[_0x85b5('0x21')]);return _0x255259(_0x880d2);}catch(_0x42d95c){winston[_0x85b5('0xd')](_0x85b5('0x22'));winston[_0x85b5('0xd')](_0x42d95c);return _0x26e80a(_0x42d95c);}});};function connectToClassroomNetwork(_0xe82536,_0x1d0bc3){return new Promise(async function(_0x354d0f,_0x4c4c2a){try{winston['info'](_0x85b5('0x23'));let _0x2873f7={'method':_0x85b5('0x1e'),'uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':_0xe82536,'password':_0x1d0bc3},'json':!![]};let _0x33f118=await rp(_0x2873f7);winston[_0x85b5('0xd')](_0x33f118[_0x85b5('0x21')]);return _0x354d0f(_0x33f118);}catch(_0x266356){winston['info'](_0x85b5('0x24'));winston[_0x85b5('0xd')](_0x266356);return _0x4c4c2a(_0x266356);}});};function getConnectedNetworkName(){return new Promise(function(_0xa38ded,_0x553359){wpa_cli[_0x85b5('0x13')](settings['wifiInterface'],function(_0x2b99e5,_0x558286){if(_0x2b99e5)return _0x553359(_0x2b99e5);return _0xa38ded(_0x558286[_0x85b5('0x10')]);});});};function updateIPAddress(_0x4dab12){return new Promise(async function(_0x1c7227,_0x3a666d){try{let _0x51c8b8={'uri':classroomConnection[_0x85b5('0x16')]+_0x85b5('0x17')+_0x4dab12,'rejectUnauthorized':![],'json':!![]};await rp(_0x51c8b8);return _0x1c7227();}catch(_0x59b844){return _0x3a666d(_0x59b844);}});};function communityReachable(){return new Promise(async function(_0x35c7e2,_0x239829){try{let _0x441896={'uri':classroomConnection[_0x85b5('0x16')],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0x441896);winston[_0x85b5('0xd')](_0x85b5('0x25'));return _0x35c7e2(!![]);}catch(_0x30959f){winston[_0x85b5('0xd')](_0x85b5('0x26'));return _0x35c7e2(![]);}});};module[_0x85b5('0x27')]=classroomConnection;