var _0x57c7=['virtual.c3edu.online','otherdemokey','attemptConnection','./../../../config/serial','serialId','info','Current\x20network:\x20','wifi','ssid','connected','status','wifiInterface','Error\x20accessing\x20wifi\x20dongle','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','partOfCommunity','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','http://localhost:8080/api/admin/wirelessConnections','hiddenPassword','serverMessage','Connecting\x20to\x20classroom\x20network','POST','Community\x20unreachable','exports','winston','request-promise','wireless-tools/wpa_cli','c3online.edu','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1'];(function(_0x53ff8c,_0x2351dd){var _0x41e81e=function(_0x578f81){while(--_0x578f81){_0x53ff8c['push'](_0x53ff8c['shift']());}};_0x41e81e(++_0x2351dd);}(_0x57c7,0xd1));var _0x3103=function(_0x2c07ec,_0x4a43b9){_0x2c07ec=_0x2c07ec-0x0;var _0x1c1e58=_0x57c7[_0x2c07ec];return _0x1c1e58;};const winston=require(_0x3103('0x0'));const rp=require(_0x3103('0x1'));const wpa_cli=require(_0x3103('0x2'));const settings={'wifiInterface':'wlan1'};const classroomConnection={'url':_0x3103('0x3'),'classroomBackend':_0x3103('0x4'),'classroomAPI':_0x3103('0x5'),'globalUrl':_0x3103('0x6'),'connected':![],'hiddenSSID':_0x3103('0x7'),'hiddenPassword':_0x3103('0x8')};classroomConnection[_0x3103('0x9')]=function(){return new Promise(async function(_0x3b60b8,_0x58c1bc){try{const _0x459e53=await require(_0x3103('0xa'));const _0x76844e=_0x459e53[_0x3103('0xb')];await checkHasWirelessDongle();let _0x3e4361=await communityReachable();if(!_0x3e4361)await connectToHiddenClassroomNetwork();let _0x2934cf=await determineCommunityAccess(_0x76844e);if(_0x2934cf['partOfCommunity']){let _0x1c6581=await getConnectedNetworkName();winston[_0x3103('0xc')](_0x3103('0xd')+_0x1c6581);if(_0x1c6581!=_0x2934cf[_0x3103('0xe')][_0x3103('0xf')])await connectToClassroomNetwork(_0x2934cf[_0x3103('0xe')][_0x3103('0xf')],_0x2934cf[_0x3103('0xe')]['passphrase']);await updateIPAddress(_0x76844e);await require('./../sockets/');classroomConnection[_0x3103('0x10')]=!![];}return _0x3b60b8();}catch(_0x188de2){winston[_0x3103('0xc')](_0x188de2);return _0x3b60b8();}});};function checkHasWirelessDongle(){return new Promise(function(_0x33d808,_0x5de1f7){wpa_cli[_0x3103('0x11')](settings[_0x3103('0x12')],function(_0x42a846,_0x5263dd){if(_0x42a846){return _0x5de1f7(_0x3103('0x13'));}winston['info']('Wireless\x20dongle\x20detected');return _0x33d808('Wifi\x20dongle\x20found');});});};function determineCommunityAccess(_0x39b19c){return new Promise(async function(_0x2f4af6,_0x30568b){let _0x4b81ee={'uri':classroomConnection[_0x3103('0x14')]+_0x3103('0x15')+_0x39b19c,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x4ed720=await rp(_0x4b81ee);if(_0x4ed720[_0x3103('0x16')]!=_0x3103('0x17')){_0x4ed720['partOfCommunity']=!![];winston[_0x3103('0xc')](_0x3103('0x18'));}else{_0x4ed720[_0x3103('0x19')]=![];winston[_0x3103('0xc')](_0x3103('0x1a'));}return _0x2f4af6(_0x4ed720);}catch(_0x136a9f){return _0x30568b(_0x3103('0x1b'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x5c50ee,_0x4f1328){try{winston[_0x3103('0xc')](_0x3103('0x1c'));let _0x536e51={'method':'POST','uri':_0x3103('0x1d'),'body':{'ssid':classroomConnection['hiddenSSID'],'password':classroomConnection[_0x3103('0x1e')],'hiddenNetwork':!![]},'json':!![]};let _0x14db23=await rp(_0x536e51);winston['info'](_0x14db23[_0x3103('0x1f')]);return _0x5c50ee(_0x14db23);}catch(_0x5eb4f8){winston[_0x3103('0xc')]('Error\x20connecting\x20to\x20hidden\x20network');winston[_0x3103('0xc')](_0x5eb4f8);return _0x4f1328(_0x5eb4f8);}});};function connectToClassroomNetwork(_0x531fff,_0x552f48){return new Promise(async function(_0x2d19ca,_0x3168b1){try{winston[_0x3103('0xc')](_0x3103('0x20'));let _0x40af5a={'method':_0x3103('0x21'),'uri':_0x3103('0x1d'),'body':{'ssid':_0x531fff,'password':_0x552f48},'json':!![]};let _0x36b0e8=await rp(_0x40af5a);winston[_0x3103('0xc')](_0x36b0e8[_0x3103('0x1f')]);return _0x2d19ca(_0x36b0e8);}catch(_0x2ad100){winston[_0x3103('0xc')]('Error\x20connecting\x20to\x20classroom\x20network');winston[_0x3103('0xc')](_0x2ad100);return _0x3168b1(_0x2ad100);}});};function getConnectedNetworkName(){return new Promise(function(_0x9f4657,_0x5aa7f1){wpa_cli[_0x3103('0x11')](settings[_0x3103('0x12')],function(_0x304c68,_0x2151fa){if(_0x304c68)return _0x5aa7f1(_0x304c68);return _0x9f4657(_0x2151fa[_0x3103('0xf')]);});});};function updateIPAddress(_0x397205){return new Promise(async function(_0x4e9667,_0x2bad96){try{let _0x5c9bf0={'uri':classroomConnection[_0x3103('0x14')]+_0x3103('0x15')+_0x397205,'rejectUnauthorized':![],'json':!![]};await rp(_0x5c9bf0);return _0x4e9667();}catch(_0x5cf451){return _0x2bad96(_0x5cf451);}});};function communityReachable(){return new Promise(async function(_0x57f904,_0x45e72f){try{let _0x5b75e8={'uri':classroomConnection['globalUrl'],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0x5b75e8);winston[_0x3103('0xc')]('Can\x20reach\x20community');return _0x57f904(!![]);}catch(_0x2cb262){winston['info'](_0x3103('0x22'));return _0x57f904(![]);}});};module[_0x3103('0x23')]=classroomConnection;