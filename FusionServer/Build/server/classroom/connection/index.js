var _0x2565=['Community\x20unreachable','exports','winston','wireless-tools/wpa_cli','config','get','c3online.edu','c3online.edu/backend','c3online.edu:8443','https://10.200.200.1','CMMthgilxoBsecure','attemptConnection','./../../../config/serial','serialId','partOfCommunity','info','Current\x20network:\x20','wifi','ssid','passphrase','./../sockets/','connected','status','wifiInterface','Error\x20accessing\x20wifi\x20dongle','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found','globalUrl','message','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','hiddenPassword','serverMessage','Connecting\x20to\x20classroom\x20network','Error\x20connecting\x20to\x20classroom\x20network',':8443/api/v1/connect/','Failed\x20to\x20update\x20ip\x20address','Can\x20reach\x20community'];(function(_0x15595b,_0xc027ad){var _0x106dd4=function(_0x2e9a54){while(--_0x2e9a54){_0x15595b['push'](_0x15595b['shift']());}};_0x106dd4(++_0xc027ad);}(_0x2565,0x1db));var _0x51c2=function(_0x256600,_0x1c51de){_0x256600=_0x256600-0x0;var _0x81b42c=_0x2565[_0x256600];return _0x81b42c;};const winston=require(_0x51c2('0x0'));const rp=require('request-promise');const wpa_cli=require(_0x51c2('0x1'));const config=require(_0x51c2('0x2'));const settings={'wifiInterface':config[_0x51c2('0x3')]('Wifi_NIC')};const classroomConnection={'url':_0x51c2('0x4'),'classroomBackend':_0x51c2('0x5'),'classroomAPI':_0x51c2('0x6'),'globalUrl':_0x51c2('0x7'),'connected':![],'hiddenSSID':'MyBot_Gatekeeper_WiFi','hiddenPassword':_0x51c2('0x8')};classroomConnection[_0x51c2('0x9')]=function(){return new Promise(async function(_0x5a19ae,_0x177a6b){try{const _0x415fb4=await require(_0x51c2('0xa'));const _0x2ffbf0=_0x415fb4[_0x51c2('0xb')];await checkHasWirelessDongle();let _0x9e3a49=await communityReachable();if(!_0x9e3a49)await connectToHiddenClassroomNetwork();let _0x487b94=await determineCommunityAccess(_0x2ffbf0);if(_0x487b94[_0x51c2('0xc')]){let _0x29f48f=await getConnectedNetworkName();winston[_0x51c2('0xd')](_0x51c2('0xe')+_0x29f48f);if(_0x29f48f!=_0x487b94[_0x51c2('0xf')][_0x51c2('0x10')])await connectToClassroomNetwork(_0x487b94['wifi']['ssid'],_0x487b94[_0x51c2('0xf')][_0x51c2('0x11')]);await updateIPAddress(_0x2ffbf0);await require(_0x51c2('0x12'));classroomConnection[_0x51c2('0x13')]=!![];}return _0x5a19ae();}catch(_0x1a57a2){winston[_0x51c2('0xd')](_0x1a57a2);return _0x5a19ae();}});};function checkHasWirelessDongle(){return new Promise(function(_0x3e4ac4,_0x210273){wpa_cli[_0x51c2('0x14')](settings[_0x51c2('0x15')],function(_0x39fd65,_0x1deafb){if(_0x39fd65){return _0x210273(_0x51c2('0x16'));}winston[_0x51c2('0xd')](_0x51c2('0x17'));return _0x3e4ac4(_0x51c2('0x18'));});});};function determineCommunityAccess(_0x3de94d){return new Promise(async function(_0x36b85c,_0x1165d6){let _0x5d73e7={'uri':classroomConnection[_0x51c2('0x19')]+':8443/api/v1/connect/'+_0x3de94d,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0x1a734f=await rp(_0x5d73e7);if(_0x1a734f[_0x51c2('0x1a')]!='Fusion\x20not\x20part\x20of\x20community'){_0x1a734f[_0x51c2('0xc')]=!![];winston[_0x51c2('0xd')](_0x51c2('0x1b'));}else{_0x1a734f['partOfCommunity']=![];winston[_0x51c2('0xd')](_0x51c2('0x1c'));}return _0x36b85c(_0x1a734f);}catch(_0x7b97f3){return _0x1165d6(_0x51c2('0x1d'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x428a76,_0x1db4c5){try{winston[_0x51c2('0xd')](_0x51c2('0x1e'));let _0x349d7d={'method':_0x51c2('0x1f'),'uri':_0x51c2('0x20'),'body':{'ssid':classroomConnection[_0x51c2('0x21')],'password':classroomConnection[_0x51c2('0x22')],'hiddenNetwork':!![]},'json':!![]};let _0xf565ad=await rp(_0x349d7d);winston[_0x51c2('0xd')](_0xf565ad[_0x51c2('0x23')]);return _0x428a76(_0xf565ad);}catch(_0x5cf9b3){winston[_0x51c2('0xd')]('Error\x20connecting\x20to\x20hidden\x20network');winston[_0x51c2('0xd')](_0x5cf9b3);return _0x1db4c5(_0x5cf9b3);}});};function connectToClassroomNetwork(_0x37b3ea,_0x1855c7){return new Promise(async function(_0x55a9a6,_0x30cca9){try{winston['info'](_0x51c2('0x24'));let _0x3f61e9={'method':_0x51c2('0x1f'),'uri':_0x51c2('0x20'),'body':{'ssid':_0x37b3ea,'password':_0x1855c7},'json':!![]};let _0x2ec624=await rp(_0x3f61e9);winston[_0x51c2('0xd')](_0x2ec624['serverMessage']);return _0x55a9a6(_0x2ec624);}catch(_0x5229bc){winston['info'](_0x51c2('0x25'));winston[_0x51c2('0xd')](_0x5229bc);return _0x30cca9(_0x5229bc);}});};function getConnectedNetworkName(){return new Promise(function(_0x550e6b,_0x27d17a){wpa_cli[_0x51c2('0x14')](settings[_0x51c2('0x15')],function(_0x5e3848,_0x55c626){if(_0x5e3848)return _0x27d17a(_0x5e3848);return _0x550e6b(_0x55c626[_0x51c2('0x10')]);});});};function updateIPAddress(_0x529497){return new Promise(async function(_0x1d05ac,_0x4f6034){let _0x505659={'uri':classroomConnection[_0x51c2('0x19')]+_0x51c2('0x26')+_0x529497,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0x1433b8=await rp(_0x505659);winston[_0x51c2('0xd')]('Updated\x20ip\x20address!');return _0x1d05ac(_0x1433b8);}catch(_0xffab96){winston['info'](_0x51c2('0x27'));return _0x4f6034(_0xffab96);}});};function communityReachable(){return new Promise(async function(_0x55f402,_0x4b21cc){try{let _0x1d5102={'uri':classroomConnection['globalUrl'],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x1d5102);winston[_0x51c2('0xd')](_0x51c2('0x28'));return _0x55f402(!![]);}catch(_0x2de4a6){winston[_0x51c2('0xd')](_0x51c2('0x29'));return _0x55f402(![]);}});};module[_0x51c2('0x2a')]=classroomConnection;