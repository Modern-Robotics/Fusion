var _0x20e4=['status','Can\x20reach\x20community','Community\x20unreachable','exports','winston','request-promise','wireless-tools/wpa_cli','config','get','Wifi_NIC','c3online.edu','c3online.edu/backend','https://10.200.200.1','MyBot_Gatekeeper_WiFi','otherdemokey','partOfCommunity','info','wifi','ssid','./../sockets/','wifiInterface','Error\x20accessing\x20wifi\x20dongle','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found','globalUrl',':8443/api/v1/connect/','message','Fusion\x20not\x20part\x20of\x20community','Fusion\x20is\x20part\x20of\x20community','Fusion\x20not\x20part\x20of\x20this\x20community','Could\x20not\x20access\x20classroom\x20environment','Connecting\x20to\x20hidden\x20network','POST','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network'];(function(_0x4e9dcd,_0x581b07){var _0x414c51=function(_0x23c389){while(--_0x23c389){_0x4e9dcd['push'](_0x4e9dcd['shift']());}};_0x414c51(++_0x581b07);}(_0x20e4,0x12c));var _0x4c10=function(_0x6a1508,_0x5ee2c1){_0x6a1508=_0x6a1508-0x0;var _0x768416=_0x20e4[_0x6a1508];return _0x768416;};const winston=require(_0x4c10('0x0'));const rp=require(_0x4c10('0x1'));const wpa_cli=require(_0x4c10('0x2'));const config=require(_0x4c10('0x3'));const settings={'wifiInterface':config[_0x4c10('0x4')](_0x4c10('0x5'))};const classroomConnection={'url':_0x4c10('0x6'),'classroomBackend':_0x4c10('0x7'),'classroomAPI':'c3online.edu:8443','globalUrl':_0x4c10('0x8'),'connected':![],'hiddenSSID':_0x4c10('0x9'),'hiddenPassword':_0x4c10('0xa')};classroomConnection['attemptConnection']=function(){return new Promise(async function(_0x5412d2,_0x5cfec4){try{const _0xb52e03=await require('./../../../config/serial');const _0x12a187=_0xb52e03['serialId'];await checkHasWirelessDongle();let _0x42fe4c=await communityReachable();if(!_0x42fe4c)await connectToHiddenClassroomNetwork();let _0x28f53f=await determineCommunityAccess(_0x12a187);if(_0x28f53f[_0x4c10('0xb')]){let _0x9aca81=await getConnectedNetworkName();winston[_0x4c10('0xc')]('Current\x20network:\x20'+_0x9aca81);if(_0x9aca81!=_0x28f53f[_0x4c10('0xd')][_0x4c10('0xe')])await connectToClassroomNetwork(_0x28f53f['wifi'][_0x4c10('0xe')],_0x28f53f[_0x4c10('0xd')]['passphrase']);await updateIPAddress(_0x12a187);await require(_0x4c10('0xf'));classroomConnection['connected']=!![];}return _0x5412d2();}catch(_0x11dc84){winston['info'](_0x11dc84);return _0x5412d2();}});};function checkHasWirelessDongle(){return new Promise(function(_0x2df7f0,_0x2a955d){wpa_cli['status'](settings[_0x4c10('0x10')],function(_0x72dbb4,_0x434501){if(_0x72dbb4){return _0x2a955d(_0x4c10('0x11'));}winston[_0x4c10('0xc')](_0x4c10('0x12'));return _0x2df7f0(_0x4c10('0x13'));});});};function determineCommunityAccess(_0x4caacc){return new Promise(async function(_0x5e2c6a,_0x319bab){let _0x37bd2a={'uri':classroomConnection[_0x4c10('0x14')]+_0x4c10('0x15')+_0x4caacc,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x1f4a65=await rp(_0x37bd2a);if(_0x1f4a65[_0x4c10('0x16')]!=_0x4c10('0x17')){_0x1f4a65[_0x4c10('0xb')]=!![];winston[_0x4c10('0xc')](_0x4c10('0x18'));}else{_0x1f4a65[_0x4c10('0xb')]=![];winston['info'](_0x4c10('0x19'));}return _0x5e2c6a(_0x1f4a65);}catch(_0x4cb187){return _0x319bab(_0x4c10('0x1a'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x3fece0,_0x25c107){try{winston['info'](_0x4c10('0x1b'));let _0x10c64f={'method':_0x4c10('0x1c'),'uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':classroomConnection[_0x4c10('0x1d')],'password':classroomConnection[_0x4c10('0x1e')],'hiddenNetwork':!![]},'json':!![]};let _0x33248f=await rp(_0x10c64f);winston[_0x4c10('0xc')](_0x33248f[_0x4c10('0x1f')]);return _0x3fece0(_0x33248f);}catch(_0x23db2e){winston[_0x4c10('0xc')](_0x4c10('0x20'));winston[_0x4c10('0xc')](_0x23db2e);return _0x25c107(_0x23db2e);}});};function connectToClassroomNetwork(_0x174dab,_0x5779d3){return new Promise(async function(_0x1fe9e6,_0xa4c5ce){try{winston[_0x4c10('0xc')]('Connecting\x20to\x20classroom\x20network');let _0x288dde={'method':_0x4c10('0x1c'),'uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':_0x174dab,'password':_0x5779d3},'json':!![]};let _0x41e5fe=await rp(_0x288dde);winston[_0x4c10('0xc')](_0x41e5fe[_0x4c10('0x1f')]);return _0x1fe9e6(_0x41e5fe);}catch(_0x90ecba){winston[_0x4c10('0xc')]('Error\x20connecting\x20to\x20classroom\x20network');winston[_0x4c10('0xc')](_0x90ecba);return _0xa4c5ce(_0x90ecba);}});};function getConnectedNetworkName(){return new Promise(function(_0x1d566b,_0x32c973){wpa_cli[_0x4c10('0x21')](settings[_0x4c10('0x10')],function(_0x548b87,_0x3a10c8){if(_0x548b87)return _0x32c973(_0x548b87);return _0x1d566b(_0x3a10c8['ssid']);});});};function updateIPAddress(_0x128a67){return new Promise(async function(_0x42d3a4,_0x38f8ba){try{let _0x3862ee={'uri':classroomConnection['globalUrl']+_0x4c10('0x15')+_0x128a67,'rejectUnauthorized':![],'json':!![]};await rp(_0x3862ee);return _0x42d3a4();}catch(_0x5c418a){return _0x38f8ba(_0x5c418a);}});};function communityReachable(){return new Promise(async function(_0x3336a5,_0x13d4c3){try{let _0x111bf6={'uri':classroomConnection['globalUrl'],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0x111bf6);winston[_0x4c10('0xc')](_0x4c10('0x22'));return _0x3336a5(!![]);}catch(_0x5b6841){winston[_0x4c10('0xc')](_0x4c10('0x23'));return _0x3336a5(![]);}});};module[_0x4c10('0x24')]=classroomConnection;