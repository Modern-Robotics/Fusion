const _0x2a35=['c3online.edu:8443','message','wireless-tools/wpa_cli','Error\x20connecting\x20to\x20classroom\x20network','request-promise','Wireless\x20dongle\x20detected','./../sockets/','Error\x20connecting\x20to\x20hidden\x20network','http://localhost:8080/api/admin/wirelessConnections','Could\x20not\x20access\x20classroom\x20environment','Current\x20network:\x20','config','POST','wifiInterface','Error\x20accessing\x20wifi\x20dongle','partOfCommunity','info','Updated\x20ip\x20address!','attemptConnection','ssid','get','passphrase','Can\x20reach\x20community','c3online.edu/backend','status','serverMessage','https://10.200.200.1','exports','Wifi_NIC','c3online.edu','hiddenPassword','globalUrl','wifi','CMMthgilxoBsecure',':8443/api/v1/connect/','Failed\x20to\x20update\x20ip\x20address'];(function(_0xc7ceb5,_0x500da4){const _0x315d6d=function(_0x40a225){while(--_0x40a225){_0xc7ceb5['push'](_0xc7ceb5['shift']());}};_0x315d6d(++_0x500da4);}(_0x2a35,0xe8));const _0x16c2=function(_0xc7ceb5,_0x500da4){_0xc7ceb5=_0xc7ceb5-0x0;let _0x315d6d=_0x2a35[_0xc7ceb5];return _0x315d6d;};const winston=require('winston');const rp=require(_0x16c2('0x18'));const wpa_cli=require(_0x16c2('0x16'));const config=require(_0x16c2('0x1f'));const settings={'wifiInterface':config[_0x16c2('0x4')](_0x16c2('0xc'))};const classroomConnection={'url':_0x16c2('0xd'),'classroomBackend':_0x16c2('0x7'),'classroomAPI':_0x16c2('0x14'),'globalUrl':_0x16c2('0xa'),'connected':![],'hiddenSSID':'MyBot_Gatekeeper_WiFi','hiddenPassword':_0x16c2('0x11')};classroomConnection[_0x16c2('0x2')]=function(){return new Promise(async function(_0xee7070,_0x1e300f){try{const _0x2b23fb=await require('./../../../config/serial');const _0x50c0ff=_0x2b23fb['serialId'];await checkHasWirelessDongle();let _0x4bf5e2=await communityReachable();if(!_0x4bf5e2)await connectToHiddenClassroomNetwork();let _0x23fd87=await determineCommunityAccess(_0x50c0ff);if(_0x23fd87[_0x16c2('0x23')]){let _0x2edfeb=await getConnectedNetworkName();winston['info'](_0x16c2('0x1e')+_0x2edfeb);if(_0x2edfeb!=_0x23fd87[_0x16c2('0x10')][_0x16c2('0x3')])await connectToClassroomNetwork(_0x23fd87[_0x16c2('0x10')][_0x16c2('0x3')],_0x23fd87['wifi'][_0x16c2('0x5')]);await updateIPAddress(_0x50c0ff);await require(_0x16c2('0x1a'));classroomConnection['connected']=!![];}return _0xee7070();}catch(_0x1c5b9e){winston[_0x16c2('0x0')](_0x1c5b9e);return _0xee7070();}});};function checkHasWirelessDongle(){return new Promise(function(_0x497989,_0x1fc15a){wpa_cli[_0x16c2('0x8')](settings['wifiInterface'],function(_0x2328dd,_0xae5d84){if(_0x2328dd){return _0x1fc15a(_0x16c2('0x22'));}winston[_0x16c2('0x0')](_0x16c2('0x19'));return _0x497989('Wifi\x20dongle\x20found');});});};function determineCommunityAccess(_0x47a55e){return new Promise(async function(_0x52f910,_0x338ab3){let _0x433a0a={'uri':classroomConnection['globalUrl']+_0x16c2('0x12')+_0x47a55e,'rejectUnauthorized':![],'json':!![],'timeout':0x2710};try{let _0x9dafb0=await rp(_0x433a0a);if(_0x9dafb0[_0x16c2('0x15')]!='Fusion\x20not\x20part\x20of\x20community'){_0x9dafb0[_0x16c2('0x23')]=!![];winston[_0x16c2('0x0')]('Fusion\x20is\x20part\x20of\x20community');}else{_0x9dafb0[_0x16c2('0x23')]=![];winston[_0x16c2('0x0')]('Fusion\x20not\x20part\x20of\x20this\x20community');}return _0x52f910(_0x9dafb0);}catch(_0x4e0ebb){return _0x338ab3(_0x16c2('0x1d'));}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x390c7a,_0x11cbcd){try{winston['info']('Connecting\x20to\x20hidden\x20network');let _0x1b700e={'method':_0x16c2('0x20'),'uri':_0x16c2('0x1c'),'body':{'ssid':classroomConnection['hiddenSSID'],'password':classroomConnection[_0x16c2('0xe')],'hiddenNetwork':!![]},'json':!![]};let _0x5028f5=await rp(_0x1b700e);winston['info'](_0x5028f5[_0x16c2('0x9')]);return _0x390c7a(_0x5028f5);}catch(_0x2fa1c9){winston[_0x16c2('0x0')](_0x16c2('0x1b'));winston[_0x16c2('0x0')](_0x2fa1c9);return _0x11cbcd(_0x2fa1c9);}});};function connectToClassroomNetwork(_0x3170cd,_0x58fab7){return new Promise(async function(_0x4b702e,_0x26c30d){try{winston['info']('Connecting\x20to\x20classroom\x20network');let _0x5b0884={'method':'POST','uri':'http://localhost:8080/api/admin/wirelessConnections','body':{'ssid':_0x3170cd,'password':_0x58fab7},'json':!![]};let _0x10d053=await rp(_0x5b0884);winston[_0x16c2('0x0')](_0x10d053['serverMessage']);return _0x4b702e(_0x10d053);}catch(_0x4682d2){winston['info'](_0x16c2('0x17'));winston[_0x16c2('0x0')](_0x4682d2);return _0x26c30d(_0x4682d2);}});};function getConnectedNetworkName(){return new Promise(function(_0x331bca,_0x54fa77){wpa_cli['status'](settings[_0x16c2('0x21')],function(_0x5eccab,_0x4fe941){if(_0x5eccab)return _0x54fa77(_0x5eccab);return _0x331bca(_0x4fe941[_0x16c2('0x3')]);});});};function updateIPAddress(_0x4a3d1f){return new Promise(async function(_0x343c02,_0x49d1d5){let _0x63bae2={'uri':classroomConnection[_0x16c2('0xf')]+_0x16c2('0x12')+_0x4a3d1f,'rejectUnauthorized':![],'json':!![],'resolveWithFullResponse':!![],'timeout':0x2710};try{let _0x53f9e0=await rp(_0x63bae2);winston[_0x16c2('0x0')](_0x16c2('0x1'));return _0x343c02(_0x53f9e0);}catch(_0x4a9f40){winston[_0x16c2('0x0')](_0x16c2('0x13'));return _0x49d1d5(_0x4a9f40);}});};function communityReachable(){return new Promise(async function(_0x2c3fde,_0x19c9fb){try{let _0x27e87f={'uri':classroomConnection[_0x16c2('0xf')],'rejectUnauthorized':![],'json':!![],'timeout':0x2710};await rp(_0x27e87f);winston[_0x16c2('0x0')](_0x16c2('0x6'));return _0x2c3fde(!![]);}catch(_0x135b3b){winston[_0x16c2('0x0')]('Community\x20unreachable');return _0x2c3fde(![]);}});};module[_0x16c2('0xb')]=classroomConnection;