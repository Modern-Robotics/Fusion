var _0x57f8=['http://localhost:8080/api/admin/wirelessConnections','hiddenSSID','hiddenPassword','serverMessage','Error\x20connecting\x20to\x20hidden\x20network','Connecting\x20to\x20classroom\x20network','POST','Can\x20reach\x20community','exports','winston','request-promise','wireless-tools/wpa_cli','config','get','Wifi_NIC','c3online.edu','c3online.edu/backend','c3online.edu:8443','MyBot_Gatekeeper_WiFi','CMMthgilxoB$secure','attemptConnection','./../../../config/serial','serialId','info','Current\x20network:\x20','ssid','passphrase','connected','status','wifiInterface','Error\x20accessing\x20wifi\x20dongle','Wireless\x20dongle\x20detected','Wifi\x20dongle\x20found','globalUrl',':8443/api/v1/connect/','Fusion\x20is\x20part\x20of\x20community','partOfCommunity','Fusion\x20not\x20part\x20of\x20this\x20community','Connecting\x20to\x20hidden\x20network'];(function(_0x37b9ee,_0x46b374){var _0x4d99f4=function(_0x55eec7){while(--_0x55eec7){_0x37b9ee['push'](_0x37b9ee['shift']());}};_0x4d99f4(++_0x46b374);}(_0x57f8,0x18f));var _0x58ea=function(_0x37b118,_0x512a50){_0x37b118=_0x37b118-0x0;var _0x163dc1=_0x57f8[_0x37b118];return _0x163dc1;};const winston=require(_0x58ea('0x0'));const rp=require(_0x58ea('0x1'));const wpa_cli=require(_0x58ea('0x2'));const config=require(_0x58ea('0x3'));const settings={'wifiInterface':config[_0x58ea('0x4')](_0x58ea('0x5'))};const classroomConnection={'url':_0x58ea('0x6'),'classroomBackend':_0x58ea('0x7'),'classroomAPI':_0x58ea('0x8'),'globalUrl':'https://10.200.200.1','connected':![],'hiddenSSID':_0x58ea('0x9'),'hiddenPassword':_0x58ea('0xa')};classroomConnection[_0x58ea('0xb')]=function(){return new Promise(async function(_0x225f85,_0xedec88){try{const _0x19ff72=await require(_0x58ea('0xc'));const _0x3c1432=_0x19ff72[_0x58ea('0xd')];await checkHasWirelessDongle();let _0x47e92a=await communityReachable();if(!_0x47e92a)await connectToHiddenClassroomNetwork();let _0x35a22e=await determineCommunityAccess(_0x3c1432);if(_0x35a22e['partOfCommunity']){let _0x313ed7=await getConnectedNetworkName();winston[_0x58ea('0xe')](_0x58ea('0xf')+_0x313ed7);if(_0x313ed7!=_0x35a22e['wifi'][_0x58ea('0x10')])await connectToClassroomNetwork(_0x35a22e['wifi'][_0x58ea('0x10')],_0x35a22e['wifi'][_0x58ea('0x11')]);await updateIPAddress(_0x3c1432);await require('./../sockets/');classroomConnection[_0x58ea('0x12')]=!![];}return _0x225f85();}catch(_0x1ae690){winston['info'](_0x1ae690);return _0x225f85();}});};function checkHasWirelessDongle(){return new Promise(function(_0x347f7f,_0x14d30e){wpa_cli[_0x58ea('0x13')](settings[_0x58ea('0x14')],function(_0x1fefbe,_0x35e76d){if(_0x1fefbe){return _0x14d30e(_0x58ea('0x15'));}winston[_0x58ea('0xe')](_0x58ea('0x16'));return _0x347f7f(_0x58ea('0x17'));});});};function determineCommunityAccess(_0x1e484e){return new Promise(async function(_0x2c7752,_0x46818f){let _0x4be8ed={'uri':classroomConnection[_0x58ea('0x18')]+_0x58ea('0x19')+_0x1e484e,'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};try{let _0x5d142f=await rp(_0x4be8ed);if(_0x5d142f['message']!='Fusion\x20not\x20part\x20of\x20community'){_0x5d142f['partOfCommunity']=!![];winston[_0x58ea('0xe')](_0x58ea('0x1a'));}else{_0x5d142f[_0x58ea('0x1b')]=![];winston['info'](_0x58ea('0x1c'));}return _0x2c7752(_0x5d142f);}catch(_0x4a8506){return _0x46818f('Could\x20not\x20access\x20classroom\x20environment');}});};function connectToHiddenClassroomNetwork(){return new Promise(async function(_0x99178b,_0x435537){try{winston[_0x58ea('0xe')](_0x58ea('0x1d'));let _0x56a020={'method':'POST','uri':_0x58ea('0x1e'),'body':{'ssid':classroomConnection[_0x58ea('0x1f')],'password':classroomConnection[_0x58ea('0x20')],'hiddenNetwork':!![]},'json':!![]};let _0x3d9a4f=await rp(_0x56a020);winston[_0x58ea('0xe')](_0x3d9a4f[_0x58ea('0x21')]);return _0x99178b(_0x3d9a4f);}catch(_0x2dfbcd){winston[_0x58ea('0xe')](_0x58ea('0x22'));winston['info'](_0x2dfbcd);return _0x435537(_0x2dfbcd);}});};function connectToClassroomNetwork(_0x50c238,_0x31c809){return new Promise(async function(_0x38cd1b,_0x110f8d){try{winston[_0x58ea('0xe')](_0x58ea('0x23'));let _0x2e0d9f={'method':_0x58ea('0x24'),'uri':_0x58ea('0x1e'),'body':{'ssid':_0x50c238,'password':_0x31c809},'json':!![]};let _0x7774f=await rp(_0x2e0d9f);winston[_0x58ea('0xe')](_0x7774f[_0x58ea('0x21')]);return _0x38cd1b(_0x7774f);}catch(_0xace361){winston[_0x58ea('0xe')]('Error\x20connecting\x20to\x20classroom\x20network');winston[_0x58ea('0xe')](_0xace361);return _0x110f8d(_0xace361);}});};function getConnectedNetworkName(){return new Promise(function(_0x3b2698,_0x32dd2d){wpa_cli[_0x58ea('0x13')](settings[_0x58ea('0x14')],function(_0x2115c8,_0x59141f){if(_0x2115c8)return _0x32dd2d(_0x2115c8);return _0x3b2698(_0x59141f[_0x58ea('0x10')]);});});};function updateIPAddress(_0x3cc5a5){return new Promise(async function(_0xa817e0,_0x583bf9){try{let _0x4910f1={'uri':classroomConnection['globalUrl']+':8443/api/v1/connect/'+_0x3cc5a5,'rejectUnauthorized':![],'json':!![]};await rp(_0x4910f1);return _0xa817e0();}catch(_0x34e759){return _0x583bf9(_0x34e759);}});};function communityReachable(){return new Promise(async function(_0x1d1989,_0x3d8fbf){try{let _0x36fab9={'uri':classroomConnection[_0x58ea('0x18')],'rejectUnauthorized':![],'json':!![],'timeout':0x7d0};await rp(_0x36fab9);winston[_0x58ea('0xe')](_0x58ea('0x25'));return _0x1d1989(!![]);}catch(_0x56493c){winston[_0x58ea('0xe')]('Community\x20unreachable');return _0x1d1989(![]);}});};module[_0x58ea('0x26')]=classroomConnection;